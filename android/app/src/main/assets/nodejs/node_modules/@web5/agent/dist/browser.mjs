var R0e=Object.create;var GI=Object.defineProperty;var D0e=Object.getOwnPropertyDescriptor;var M0e=Object.getOwnPropertyNames;var B0e=Object.getPrototypeOf,C0e=Object.prototype.hasOwnProperty;var O0e=(t,e)=>()=>(t&&(e=t(t=0)),e);var W=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),qr=(t,e)=>{for(var r in e)GI(t,r,{get:e[r],enumerable:!0})},$0e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of M0e(e))!C0e.call(t,i)&&i!==r&&GI(t,i,{get:()=>e[i],enumerable:!(n=D0e(e,i))||n.enumerable});return t};var Ut=(t,e,r)=>(r=t!=null?R0e(B0e(t)):{},$0e(e||!t||!t.__esModule?GI(r,"default",{value:t,enumerable:!0}):r,t));var HI=W(lS=>{"use strict";h();lS.byteLength=j0e;lS.toByteArray=K0e;lS.fromByteArray=F0e;var Nu=[],Cc=[],N0e=typeof Uint8Array<"u"?Uint8Array:Array,WI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ay=0,yq=WI.length;ay<yq;++ay)Nu[ay]=WI[ay],Cc[WI.charCodeAt(ay)]=ay;var ay,yq;Cc[45]=62;Cc[95]=63;function gq(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function j0e(t){var e=gq(t),r=e[0],n=e[1];return(r+n)*3/4-n}function U0e(t,e,r){return(e+r)*3/4-r}function K0e(t){var e,r=gq(t),n=r[0],i=r[1],o=new N0e(U0e(t,n,i)),s=0,a=i>0?n-4:n,d;for(d=0;d<a;d+=4)e=Cc[t.charCodeAt(d)]<<18|Cc[t.charCodeAt(d+1)]<<12|Cc[t.charCodeAt(d+2)]<<6|Cc[t.charCodeAt(d+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Cc[t.charCodeAt(d)]<<2|Cc[t.charCodeAt(d+1)]>>4,o[s++]=e&255),i===1&&(e=Cc[t.charCodeAt(d)]<<10|Cc[t.charCodeAt(d+1)]<<4|Cc[t.charCodeAt(d+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function q0e(t){return Nu[t>>18&63]+Nu[t>>12&63]+Nu[t>>6&63]+Nu[t&63]}function L0e(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(q0e(n));return i.join("")}function F0e(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(L0e(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(Nu[e>>2]+Nu[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Nu[e>>10]+Nu[e>>4&63]+Nu[e<<2&63]+"=")),i.join("")}});var JI=W(VI=>{h();VI.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,d=(1<<a)-1,u=d>>1,c=-7,l=r?i-1:0,m=r?-1:1,p=t[e+l];for(l+=m,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=o*256+t[e+l],l+=m,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+t[e+l],l+=m,c-=8);if(o===0)o=1-u;else{if(o===d)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(p?-1:1)*s*Math.pow(2,o-n)};VI.write=function(t,e,r,n,i,o){var s,a,d,u=o*8-i-1,c=(1<<u)-1,l=c>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-s))<1&&(s--,d*=2),s+l>=1?e+=m/d:e+=m*Math.pow(2,1-l),e*d>=2&&(s++,d/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*d-1)*Math.pow(2,i),s=s+l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=a&255,p+=g,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=s&255,p+=g,s/=256,u-=8);t[r+p-g]|=b*128}});var Rq=W(lb=>{"use strict";h();var YI=HI(),ub=JI(),bq=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;lb.Buffer=me;lb.SlowBuffer=J0e;lb.INSPECT_MAX_BYTES=50;var fS=2147483647;lb.kMaxLength=fS;me.TYPED_ARRAY_SUPPORT=z0e();!me.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function z0e(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(me.prototype,"parent",{enumerable:!0,get:function(){if(me.isBuffer(this))return this.buffer}});Object.defineProperty(me.prototype,"offset",{enumerable:!0,get:function(){if(me.isBuffer(this))return this.byteOffset}});function ef(t){if(t>fS)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,me.prototype),e}function me(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ek(t)}return _q(t,e,r)}me.poolSize=8192;function _q(t,e,r){if(typeof t=="string")return W0e(t,e);if(ArrayBuffer.isView(t))return H0e(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ju(t,ArrayBuffer)||t&&ju(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ju(t,SharedArrayBuffer)||t&&ju(t.buffer,SharedArrayBuffer)))return XI(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return me.from(n,e,r);var i=V0e(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return me.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}me.from=function(t,e,r){return _q(t,e,r)};Object.setPrototypeOf(me.prototype,Uint8Array.prototype);Object.setPrototypeOf(me,Uint8Array);function xq(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function G0e(t,e,r){return xq(t),t<=0?ef(t):e!==void 0?typeof r=="string"?ef(t).fill(e,r):ef(t).fill(e):ef(t)}me.alloc=function(t,e,r){return G0e(t,e,r)};function ek(t){return xq(t),ef(t<0?0:tk(t)|0)}me.allocUnsafe=function(t){return ek(t)};me.allocUnsafeSlow=function(t){return ek(t)};function W0e(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!me.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=Eq(t,e)|0,n=ef(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function ZI(t){for(var e=t.length<0?0:tk(t.length)|0,r=ef(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function H0e(t){if(ju(t,Uint8Array)){var e=new Uint8Array(t);return XI(e.buffer,e.byteOffset,e.byteLength)}return ZI(t)}function XI(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,me.prototype),n}function V0e(t){if(me.isBuffer(t)){var e=tk(t.length)|0,r=ef(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||rk(t.length)?ef(0):ZI(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ZI(t.data)}function tk(t){if(t>=fS)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+fS.toString(16)+" bytes");return t|0}function J0e(t){return+t!=t&&(t=0),me.alloc(+t)}me.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==me.prototype};me.compare=function(e,r){if(ju(e,Uint8Array)&&(e=me.from(e,e.offset,e.byteLength)),ju(r,Uint8Array)&&(r=me.from(r,r.offset,r.byteLength)),!me.isBuffer(e)||!me.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};me.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};me.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return me.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=me.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(ju(s,Uint8Array))o+s.length>i.length?me.from(s).copy(i,o):Uint8Array.prototype.set.call(i,s,o);else if(me.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Eq(t,e){if(me.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ju(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return QI(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return kq(t).length;default:if(i)return n?-1:QI(t).length;e=(""+e).toLowerCase(),i=!0}}me.byteLength=Eq;function Y0e(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return sge(this,e,r);case"utf8":case"utf-8":return Aq(this,e,r);case"ascii":return ige(this,e,r);case"latin1":case"binary":return oge(this,e,r);case"base64":return rge(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return age(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}me.prototype._isBuffer=!0;function cy(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}me.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)cy(this,r,r+1);return this};me.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)cy(this,r,r+3),cy(this,r+1,r+2);return this};me.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)cy(this,r,r+7),cy(this,r+1,r+6),cy(this,r+2,r+5),cy(this,r+3,r+4);return this};me.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Aq(this,0,e):Y0e.apply(this,arguments)};me.prototype.toLocaleString=me.prototype.toString;me.prototype.equals=function(e){if(!me.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:me.compare(this,e)===0};me.prototype.inspect=function(){var e="",r=lb.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};bq&&(me.prototype[bq]=me.prototype.inspect);me.prototype.compare=function(e,r,n,i,o){if(ju(e,Uint8Array)&&(e=me.from(e,e.offset,e.byteLength)),!me.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-r,d=Math.min(s,a),u=this.slice(i,o),c=e.slice(r,n),l=0;l<d;++l)if(u[l]!==c[l]){s=u[l],a=c[l];break}return s<a?-1:a<s?1:0};function Sq(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,rk(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=me.from(e,n)),me.isBuffer(e))return e.length===0?-1:vq(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):vq(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function vq(t,e,r,n,i){var o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function d(p,g){return o===1?p[g]:p.readUInt16BE(g*o)}var u;if(i){var c=-1;for(u=r;u<s;u++)if(d(t,u)===d(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){for(var l=!0,m=0;m<a;m++)if(d(t,u+m)!==d(e,m)){l=!1;break}if(l)return u}return-1}me.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};me.prototype.indexOf=function(e,r,n){return Sq(this,e,r,n,!0)};me.prototype.lastIndexOf=function(e,r,n){return Sq(this,e,r,n,!1)};function Z0e(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(s*2,2),16);if(rk(a))return s;t[r+s]=a}return s}function X0e(t,e,r,n){return hS(QI(e,t.length-r),t,r,n)}function Q0e(t,e,r,n){return hS(uge(e),t,r,n)}function ege(t,e,r,n){return hS(kq(e),t,r,n)}function tge(t,e,r,n){return hS(lge(e,t.length-r),t,r,n)}me.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return Z0e(this,e,r,n);case"utf8":case"utf-8":return X0e(this,e,r,n);case"ascii":case"latin1":case"binary":return Q0e(this,e,r,n);case"base64":return ege(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tge(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};me.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function rge(t,e,r){return e===0&&r===t.length?YI.fromByteArray(t):YI.fromByteArray(t.slice(e,r))}function Aq(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var d,u,c,l;switch(a){case 1:o<128&&(s=o);break;case 2:d=t[i+1],(d&192)===128&&(l=(o&31)<<6|d&63,l>127&&(s=l));break;case 3:d=t[i+1],u=t[i+2],(d&192)===128&&(u&192)===128&&(l=(o&15)<<12|(d&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:d=t[i+1],u=t[i+2],c=t[i+3],(d&192)===128&&(u&192)===128&&(c&192)===128&&(l=(o&15)<<18|(d&63)<<12|(u&63)<<6|c&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return nge(n)}var wq=4096;function nge(t){var e=t.length;if(e<=wq)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=wq));return r}function ige(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function oge(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function sge(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=fge[t[o]];return i}function age(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}me.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,me.prototype),i};function so(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}me.prototype.readUintLE=me.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||so(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i};me.prototype.readUintBE=me.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||so(e,r,this.length);for(var i=this[e+--r],o=1;r>0&&(o*=256);)i+=this[e+--r]*o;return i};me.prototype.readUint8=me.prototype.readUInt8=function(e,r){return e=e>>>0,r||so(e,1,this.length),this[e]};me.prototype.readUint16LE=me.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||so(e,2,this.length),this[e]|this[e+1]<<8};me.prototype.readUint16BE=me.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||so(e,2,this.length),this[e]<<8|this[e+1]};me.prototype.readUint32LE=me.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||so(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};me.prototype.readUint32BE=me.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||so(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};me.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||so(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};me.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||so(e,r,this.length);for(var i=r,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};me.prototype.readInt8=function(e,r){return e=e>>>0,r||so(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};me.prototype.readInt16LE=function(e,r){e=e>>>0,r||so(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};me.prototype.readInt16BE=function(e,r){e=e>>>0,r||so(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};me.prototype.readInt32LE=function(e,r){return e=e>>>0,r||so(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};me.prototype.readInt32BE=function(e,r){return e=e>>>0,r||so(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};me.prototype.readFloatLE=function(e,r){return e=e>>>0,r||so(e,4,this.length),ub.read(this,e,!0,23,4)};me.prototype.readFloatBE=function(e,r){return e=e>>>0,r||so(e,4,this.length),ub.read(this,e,!1,23,4)};me.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||so(e,8,this.length),ub.read(this,e,!0,52,8)};me.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||so(e,8,this.length),ub.read(this,e,!1,52,8)};function ya(t,e,r,n,i,o){if(!me.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}me.prototype.writeUintLE=me.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;ya(this,e,r,n,o,0)}var s=1,a=0;for(this[r]=e&255;++a<n&&(s*=256);)this[r+a]=e/s&255;return r+n};me.prototype.writeUintBE=me.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;ya(this,e,r,n,o,0)}var s=n-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+n};me.prototype.writeUint8=me.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,1,255,0),this[r]=e&255,r+1};me.prototype.writeUint16LE=me.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};me.prototype.writeUint16BE=me.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};me.prototype.writeUint32LE=me.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};me.prototype.writeUint32BE=me.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};me.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var o=Math.pow(2,8*n-1);ya(this,e,r,n,o-1,-o)}var s=0,a=1,d=0;for(this[r]=e&255;++s<n&&(a*=256);)e<0&&d===0&&this[r+s-1]!==0&&(d=1),this[r+s]=(e/a>>0)-d&255;return r+n};me.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var o=Math.pow(2,8*n-1);ya(this,e,r,n,o-1,-o)}var s=n-1,a=1,d=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&d===0&&this[r+s+1]!==0&&(d=1),this[r+s]=(e/a>>0)-d&255;return r+n};me.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};me.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};me.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};me.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};me.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ya(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Pq(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Tq(t,e,r,n,i){return e=+e,r=r>>>0,i||Pq(t,e,r,4,34028234663852886e22,-34028234663852886e22),ub.write(t,e,r,n,23,4),r+4}me.prototype.writeFloatLE=function(e,r,n){return Tq(this,e,r,!0,n)};me.prototype.writeFloatBE=function(e,r,n){return Tq(this,e,r,!1,n)};function Iq(t,e,r,n,i){return e=+e,r=r>>>0,i||Pq(t,e,r,8,17976931348623157e292,-17976931348623157e292),ub.write(t,e,r,n,52,8),r+8}me.prototype.writeDoubleLE=function(e,r,n){return Iq(this,e,r,!0,n)};me.prototype.writeDoubleBE=function(e,r,n){return Iq(this,e,r,!1,n)};me.prototype.copy=function(e,r,n,i){if(!me.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};me.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!me.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{var a=me.isBuffer(e)?e:me.from(e,i),d=a.length;if(d===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=a[s%d]}return this};var cge=/[^+/0-9A-Za-z-_]/g;function dge(t){if(t=t.split("=")[0],t=t.trim().replace(cge,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function QI(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function uge(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function lge(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function kq(t){return YI.toByteArray(dge(t))}function hS(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ju(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function rk(t){return t!==t}var fge=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()});var ls=W((AYe,Cq)=>{h();var vi=Cq.exports={},Uu,Ku;function nk(){throw new Error("setTimeout has not been defined")}function ik(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Uu=setTimeout:Uu=nk}catch{Uu=nk}try{typeof clearTimeout=="function"?Ku=clearTimeout:Ku=ik}catch{Ku=ik}})();function Dq(t){if(Uu===setTimeout)return setTimeout(t,0);if((Uu===nk||!Uu)&&setTimeout)return Uu=setTimeout,setTimeout(t,0);try{return Uu(t,0)}catch{try{return Uu.call(null,t,0)}catch{return Uu.call(this,t,0)}}}function hge(t){if(Ku===clearTimeout)return clearTimeout(t);if((Ku===ik||!Ku)&&clearTimeout)return Ku=clearTimeout,clearTimeout(t);try{return Ku(t)}catch{try{return Ku.call(null,t)}catch{return Ku.call(this,t)}}}var tf=[],fb=!1,dy,pS=-1;function pge(){!fb||!dy||(fb=!1,dy.length?tf=dy.concat(tf):pS=-1,tf.length&&Mq())}function Mq(){if(!fb){var t=Dq(pge);fb=!0;for(var e=tf.length;e;){for(dy=tf,tf=[];++pS<e;)dy&&dy[pS].run();pS=-1,e=tf.length}dy=null,fb=!1,hge(t)}}vi.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];tf.push(new Bq(t,e)),tf.length===1&&!fb&&Dq(Mq)};function Bq(t,e){this.fun=t,this.array=e}Bq.prototype.run=function(){this.fun.apply(null,this.array)};vi.title="browser";vi.browser=!0;vi.env={};vi.argv=[];vi.version="";vi.versions={};function rf(){}vi.on=rf;vi.addListener=rf;vi.once=rf;vi.off=rf;vi.removeListener=rf;vi.removeAllListeners=rf;vi.emit=rf;vi.prependListener=rf;vi.prependOnceListener=rf;vi.listeners=function(t){return[]};vi.binding=function(t){throw new Error("process.binding is not supported")};vi.cwd=function(){return"/"};vi.chdir=function(t){throw new Error("process.chdir is not supported")};vi.umask=function(){return 0}});var O,B,TYe,h=O0e(()=>{O=Ut(Rq()),B=Ut(ls()),TYe=function(t){function e(){var n=this||self;return delete t.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object)});var $q=W((kYe,Oq)=>{h();var mge=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;Oq.exports=mge});var jq=W((DYe,Nq)=>{h();var yge=$q(),gge=typeof self=="object"&&self&&self.Object===Object&&self,bge=yge||gge||Function("return this")();Nq.exports=bge});var ok=W((BYe,Uq)=>{h();var vge=jq(),wge=vge.Symbol;Uq.exports=wge});var Fq=W((OYe,Lq)=>{h();var Kq=ok(),qq=Object.prototype,_ge=qq.hasOwnProperty,xge=qq.toString,r2=Kq?Kq.toStringTag:void 0;function Ege(t){var e=_ge.call(t,r2),r=t[r2];try{t[r2]=void 0;var n=!0}catch{}var i=xge.call(t);return n&&(e?t[r2]=r:delete t[r2]),i}Lq.exports=Ege});var Gq=W((NYe,zq)=>{h();var Sge=Object.prototype,Age=Sge.toString;function Pge(t){return Age.call(t)}zq.exports=Pge});var Jq=W((UYe,Vq)=>{h();var Wq=ok(),Tge=Fq(),Ige=Gq(),kge="[object Null]",Rge="[object Undefined]",Hq=Wq?Wq.toStringTag:void 0;function Dge(t){return t==null?t===void 0?Rge:kge:Hq&&Hq in Object(t)?Tge(t):Ige(t)}Vq.exports=Dge});var Zq=W((qYe,Yq)=>{h();function Mge(t,e){return function(r){return t(e(r))}}Yq.exports=Mge});var Qq=W((FYe,Xq)=>{h();var Bge=Zq(),Cge=Bge(Object.getPrototypeOf,Object);Xq.exports=Cge});var tL=W((GYe,eL)=>{h();function Oge(t){return t!=null&&typeof t=="object"}eL.exports=Oge});var iL=W((HYe,nL)=>{h();var $ge=Jq(),Nge=Qq(),jge=tL(),Uge="[object Object]",Kge=Function.prototype,qge=Object.prototype,rL=Kge.toString,Lge=qge.hasOwnProperty,Fge=rL.call(Object);function zge(t){if(!jge(t)||$ge(t)!=Uge)return!1;var e=Nge(t);if(e===null)return!0;var r=Lge.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&rL.call(r)==Fge}nL.exports=zge});var Xa=W((nnt,aG)=>{"use strict";h();function sG(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Z1e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return sG(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),sG(new i,r)}}aG.exports=Z1e});var fW=W((t_,f3)=>{h();(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var g=0;g<p.length;g++)if(!Number.isInteger(p[g])||p[g]<0||p[g]>255)return!1;return!0}function i(p,g){return(p&65535)*g+(((p>>>16)*g&65535)<<16)}function o(p,g){return p<<g|p>>>32-g}function s(p){return p^=p>>>16,p=i(p,2246822507),p^=p>>>13,p=i(p,3266489909),p^=p>>>16,p}function a(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var b=[0,0,0,0];return b[3]+=p[3]+g[3],b[2]+=b[3]>>>16,b[3]&=65535,b[2]+=p[2]+g[2],b[1]+=b[2]>>>16,b[2]&=65535,b[1]+=p[1]+g[1],b[0]+=b[1]>>>16,b[1]&=65535,b[0]+=p[0]+g[0],b[0]&=65535,[b[0]<<16|b[1],b[2]<<16|b[3]]}function d(p,g){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var b=[0,0,0,0];return b[3]+=p[3]*g[3],b[2]+=b[3]>>>16,b[3]&=65535,b[2]+=p[2]*g[3],b[1]+=b[2]>>>16,b[2]&=65535,b[2]+=p[3]*g[2],b[1]+=b[2]>>>16,b[2]&=65535,b[1]+=p[1]*g[3],b[0]+=b[1]>>>16,b[1]&=65535,b[1]+=p[2]*g[2],b[0]+=b[1]>>>16,b[1]&=65535,b[1]+=p[3]*g[1],b[0]+=b[1]>>>16,b[1]&=65535,b[0]+=p[0]*g[3]+p[1]*g[2]+p[2]*g[1]+p[3]*g[0],b[0]&=65535,[b[0]<<16|b[1],b[2]<<16|b[3]]}function u(p,g){return g%=64,g===32?[p[1],p[0]]:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g|p[0]>>>32-g]:(g-=32,[p[1]<<g|p[0]>>>32-g,p[0]<<g|p[1]>>>32-g])}function c(p,g){return g%=64,g===0?p:g<32?[p[0]<<g|p[1]>>>32-g,p[1]<<g]:[p[1]<<g-32,0]}function l(p,g){return[p[0]^g[0],p[1]^g[1]]}function m(p){return p=l(p,[0,p[0]>>>1]),p=d(p,[4283543511,3981806797]),p=l(p,[0,p[0]>>>1]),p=d(p,[3301882366,444984403]),p=l(p,[0,p[0]>>>1]),p}r.x86.hash32=function(p,g){if(r.inputValidation&&!n(p))return e;g=g||0;for(var b=p.length%4,S=p.length-b,A=g,I=0,P=3432918353,$=461845907,N=0;N<S;N=N+4)I=p[N]|p[N+1]<<8|p[N+2]<<16|p[N+3]<<24,I=i(I,P),I=o(I,15),I=i(I,$),A^=I,A=o(A,13),A=i(A,5)+3864292196;switch(I=0,b){case 3:I^=p[N+2]<<16;case 2:I^=p[N+1]<<8;case 1:I^=p[N],I=i(I,P),I=o(I,15),I=i(I,$),A^=I}return A^=p.length,A=s(A),A>>>0},r.x86.hash128=function(p,g){if(r.inputValidation&&!n(p))return e;g=g||0;for(var b=p.length%16,S=p.length-b,A=g,I=g,P=g,$=g,N=0,L=0,F=0,U=0,G=597399067,q=2869860233,T=951274213,E=2716044179,k=0;k<S;k=k+16)N=p[k]|p[k+1]<<8|p[k+2]<<16|p[k+3]<<24,L=p[k+4]|p[k+5]<<8|p[k+6]<<16|p[k+7]<<24,F=p[k+8]|p[k+9]<<8|p[k+10]<<16|p[k+11]<<24,U=p[k+12]|p[k+13]<<8|p[k+14]<<16|p[k+15]<<24,N=i(N,G),N=o(N,15),N=i(N,q),A^=N,A=o(A,19),A+=I,A=i(A,5)+1444728091,L=i(L,q),L=o(L,16),L=i(L,T),I^=L,I=o(I,17),I+=P,I=i(I,5)+197830471,F=i(F,T),F=o(F,17),F=i(F,E),P^=F,P=o(P,15),P+=$,P=i(P,5)+2530024501,U=i(U,E),U=o(U,18),U=i(U,G),$^=U,$=o($,13),$+=A,$=i($,5)+850148119;switch(N=0,L=0,F=0,U=0,b){case 15:U^=p[k+14]<<16;case 14:U^=p[k+13]<<8;case 13:U^=p[k+12],U=i(U,E),U=o(U,18),U=i(U,G),$^=U;case 12:F^=p[k+11]<<24;case 11:F^=p[k+10]<<16;case 10:F^=p[k+9]<<8;case 9:F^=p[k+8],F=i(F,T),F=o(F,17),F=i(F,E),P^=F;case 8:L^=p[k+7]<<24;case 7:L^=p[k+6]<<16;case 6:L^=p[k+5]<<8;case 5:L^=p[k+4],L=i(L,q),L=o(L,16),L=i(L,T),I^=L;case 4:N^=p[k+3]<<24;case 3:N^=p[k+2]<<16;case 2:N^=p[k+1]<<8;case 1:N^=p[k],N=i(N,G),N=o(N,15),N=i(N,q),A^=N}return A^=p.length,I^=p.length,P^=p.length,$^=p.length,A+=I,A+=P,A+=$,I+=A,P+=A,$+=A,A=s(A),I=s(I),P=s(P),$=s($),A+=I,A+=P,A+=$,I+=A,P+=A,$+=A,("00000000"+(A>>>0).toString(16)).slice(-8)+("00000000"+(I>>>0).toString(16)).slice(-8)+("00000000"+(P>>>0).toString(16)).slice(-8)+("00000000"+($>>>0).toString(16)).slice(-8)},r.x64.hash128=function(p,g){if(r.inputValidation&&!n(p))return e;g=g||0;for(var b=p.length%16,S=p.length-b,A=[0,g],I=[0,g],P=[0,0],$=[0,0],N=[2277735313,289559509],L=[1291169091,658871167],F=0;F<S;F=F+16)P=[p[F+4]|p[F+5]<<8|p[F+6]<<16|p[F+7]<<24,p[F]|p[F+1]<<8|p[F+2]<<16|p[F+3]<<24],$=[p[F+12]|p[F+13]<<8|p[F+14]<<16|p[F+15]<<24,p[F+8]|p[F+9]<<8|p[F+10]<<16|p[F+11]<<24],P=d(P,N),P=u(P,31),P=d(P,L),A=l(A,P),A=u(A,27),A=a(A,I),A=a(d(A,[0,5]),[0,1390208809]),$=d($,L),$=u($,33),$=d($,N),I=l(I,$),I=u(I,31),I=a(I,A),I=a(d(I,[0,5]),[0,944331445]);switch(P=[0,0],$=[0,0],b){case 15:$=l($,c([0,p[F+14]],48));case 14:$=l($,c([0,p[F+13]],40));case 13:$=l($,c([0,p[F+12]],32));case 12:$=l($,c([0,p[F+11]],24));case 11:$=l($,c([0,p[F+10]],16));case 10:$=l($,c([0,p[F+9]],8));case 9:$=l($,[0,p[F+8]]),$=d($,L),$=u($,33),$=d($,N),I=l(I,$);case 8:P=l(P,c([0,p[F+7]],56));case 7:P=l(P,c([0,p[F+6]],48));case 6:P=l(P,c([0,p[F+5]],40));case 5:P=l(P,c([0,p[F+4]],32));case 4:P=l(P,c([0,p[F+3]],24));case 3:P=l(P,c([0,p[F+2]],16));case 2:P=l(P,c([0,p[F+1]],8));case 1:P=l(P,[0,p[F]]),P=d(P,N),P=u(P,31),P=d(P,L),A=l(A,P)}return A=l(A,[0,p.length]),I=l(I,[0,p.length]),A=a(A,I),I=a(I,A),A=m(A),I=m(I),A=a(A,I),I=a(I,A),("00000000"+(A[0]>>>0).toString(16)).slice(-8)+("00000000"+(A[1]>>>0).toString(16)).slice(-8)+("00000000"+(I[0]>>>0).toString(16)).slice(-8)+("00000000"+(I[1]>>>0).toString(16)).slice(-8)},typeof t_<"u"?(typeof f3<"u"&&f3.exports&&(t_=f3.exports=r),t_.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(t_)});var pW=W((bat,hW)=>{h();hW.exports=fW()});var gW=W((Tat,yW)=>{"use strict";h();yW.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){let n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let a=this._bitArrays.slice(0,n).reduce(W_e,0),d=~(4294967295<<o+1),u=mW(i&d);return a+u-1}_bytePosFor(e,r){let n=Math.floor(e/7),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*7}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*7)}_setInternalPos(e,r,n,i){let o=this._data,s=[r,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=r)o.push(s);else if(o[0][0]<=r)o.unshift(s);else{let a=Math.round(o.length/2);this._data=o.slice(0,a).concat(s).concat(o.slice(a))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(H_e),this._changedData=!1}bitField(){let e=[],r=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let d=Math.min(n,r),u=~(255<<d),c=o&u;i|=c<<8-r,o=o>>>d,n-=d,r-=d,(!r||!n&&!s.length)&&(e.push(i),i=0,r=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(V_e)}};function W_e(t,e){return t+mW(e)}function mW(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function H_e(t,e){return t[0]-e[0]}function V_e(t){return t[1]}});var Un=W(Qb=>{"use strict";h();var A9=HI(),Zb=JI(),DW=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Qb.Buffer=fe;Qb.SlowBuffer=fxe;Qb.INSPECT_MAX_BYTES=50;var b3=2147483647;Qb.kMaxLength=b3;fe.TYPED_ARRAY_SUPPORT=axe();!fe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function axe(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(fe.prototype,"parent",{enumerable:!0,get:function(){if(fe.isBuffer(this))return this.buffer}});Object.defineProperty(fe.prototype,"offset",{enumerable:!0,get:function(){if(fe.isBuffer(this))return this.byteOffset}});function Ef(t){if(t>b3)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,fe.prototype),e}function fe(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k9(t)}return OW(t,e,r)}fe.poolSize=8192;function OW(t,e,r){if(typeof t=="string")return dxe(t,e);if(ArrayBuffer.isView(t))return uxe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Zu(t,ArrayBuffer)||t&&Zu(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Zu(t,SharedArrayBuffer)||t&&Zu(t.buffer,SharedArrayBuffer)))return T9(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return fe.from(n,e,r);let i=lxe(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return fe.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}fe.from=function(t,e,r){return OW(t,e,r)};Object.setPrototypeOf(fe.prototype,Uint8Array.prototype);Object.setPrototypeOf(fe,Uint8Array);function $W(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function cxe(t,e,r){return $W(t),t<=0?Ef(t):e!==void 0?typeof r=="string"?Ef(t).fill(e,r):Ef(t).fill(e):Ef(t)}fe.alloc=function(t,e,r){return cxe(t,e,r)};function k9(t){return $W(t),Ef(t<0?0:R9(t)|0)}fe.allocUnsafe=function(t){return k9(t)};fe.allocUnsafeSlow=function(t){return k9(t)};function dxe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!fe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=NW(t,e)|0,n=Ef(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function P9(t){let e=t.length<0?0:R9(t.length)|0,r=Ef(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function uxe(t){if(Zu(t,Uint8Array)){let e=new Uint8Array(t);return T9(e.buffer,e.byteOffset,e.byteLength)}return P9(t)}function T9(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,fe.prototype),n}function lxe(t){if(fe.isBuffer(t)){let e=R9(t.length)|0,r=Ef(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||M9(t.length)?Ef(0):P9(t);if(t.type==="Buffer"&&Array.isArray(t.data))return P9(t.data)}function R9(t){if(t>=b3)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b3.toString(16)+" bytes");return t|0}function fxe(t){return+t!=t&&(t=0),fe.alloc(+t)}fe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==fe.prototype};fe.compare=function(e,r){if(Zu(e,Uint8Array)&&(e=fe.from(e,e.offset,e.byteLength)),Zu(r,Uint8Array)&&(r=fe.from(r,r.offset,r.byteLength)),!fe.isBuffer(e)||!fe.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};fe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};fe.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return fe.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=fe.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(Zu(s,Uint8Array))o+s.length>i.length?(fe.isBuffer(s)||(s=fe.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(fe.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function NW(t,e){if(fe.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Zu(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I9(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return WW(t).length;default:if(i)return n?-1:I9(t).length;e=(""+e).toLowerCase(),i=!0}}fe.byteLength=NW;function hxe(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Exe(this,e,r);case"utf8":case"utf-8":return UW(this,e,r);case"ascii":return _xe(this,e,r);case"latin1":case"binary":return xxe(this,e,r);case"base64":return vxe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Sxe(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}fe.prototype._isBuffer=!0;function $y(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}fe.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)$y(this,r,r+1);return this};fe.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)$y(this,r,r+3),$y(this,r+1,r+2);return this};fe.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)$y(this,r,r+7),$y(this,r+1,r+6),$y(this,r+2,r+5),$y(this,r+3,r+4);return this};fe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?UW(this,0,e):hxe.apply(this,arguments)};fe.prototype.toLocaleString=fe.prototype.toString;fe.prototype.equals=function(e){if(!fe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:fe.compare(this,e)===0};fe.prototype.inspect=function(){let e="",r=Qb.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};DW&&(fe.prototype[DW]=fe.prototype.inspect);fe.prototype.compare=function(e,r,n,i,o){if(Zu(e,Uint8Array)&&(e=fe.from(e,e.offset,e.byteLength)),!fe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,d=Math.min(s,a),u=this.slice(i,o),c=e.slice(r,n);for(let l=0;l<d;++l)if(u[l]!==c[l]){s=u[l],a=c[l];break}return s<a?-1:a<s?1:0};function jW(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,M9(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=fe.from(e,n)),fe.isBuffer(e))return e.length===0?-1:MW(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):MW(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function MW(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function d(c,l){return o===1?c[l]:c.readUInt16BE(l*o)}let u;if(i){let c=-1;for(u=r;u<s;u++)if(d(t,u)===d(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let c=!0;for(let l=0;l<a;l++)if(d(t,u+l)!==d(e,l)){c=!1;break}if(c)return u}return-1}fe.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};fe.prototype.indexOf=function(e,r,n){return jW(this,e,r,n,!0)};fe.prototype.lastIndexOf=function(e,r,n){return jW(this,e,r,n,!1)};function pxe(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(M9(a))return s;t[r+s]=a}return s}function mxe(t,e,r,n){return v3(I9(e,t.length-r),t,r,n)}function yxe(t,e,r,n){return v3(Ixe(e),t,r,n)}function gxe(t,e,r,n){return v3(WW(e),t,r,n)}function bxe(t,e,r,n){return v3(kxe(e,t.length-r),t,r,n)}fe.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return pxe(this,e,r,n);case"utf8":case"utf-8":return mxe(this,e,r,n);case"ascii":case"latin1":case"binary":return yxe(this,e,r,n);case"base64":return gxe(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bxe(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};fe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vxe(t,e,r){return e===0&&r===t.length?A9.fromByteArray(t):A9.fromByteArray(t.slice(e,r))}function UW(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let d,u,c,l;switch(a){case 1:o<128&&(s=o);break;case 2:d=t[i+1],(d&192)===128&&(l=(o&31)<<6|d&63,l>127&&(s=l));break;case 3:d=t[i+1],u=t[i+2],(d&192)===128&&(u&192)===128&&(l=(o&15)<<12|(d&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:d=t[i+1],u=t[i+2],c=t[i+3],(d&192)===128&&(u&192)===128&&(c&192)===128&&(l=(o&15)<<18|(d&63)<<12|(u&63)<<6|c&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return wxe(n)}var BW=4096;function wxe(t){let e=t.length;if(e<=BW)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=BW));return r}function _xe(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function xxe(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Exe(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=Rxe[t[o]];return i}function Sxe(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}fe.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,fe.prototype),i};function ho(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}fe.prototype.readUintLE=fe.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ho(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};fe.prototype.readUintBE=fe.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ho(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};fe.prototype.readUint8=fe.prototype.readUInt8=function(e,r){return e=e>>>0,r||ho(e,1,this.length),this[e]};fe.prototype.readUint16LE=fe.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||ho(e,2,this.length),this[e]|this[e+1]<<8};fe.prototype.readUint16BE=fe.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||ho(e,2,this.length),this[e]<<8|this[e+1]};fe.prototype.readUint32LE=fe.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};fe.prototype.readUint32BE=fe.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};fe.prototype.readBigUInt64LE=cp(function(e){e=e>>>0,Xb(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&n_(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});fe.prototype.readBigUInt64BE=cp(function(e){e=e>>>0,Xb(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&n_(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});fe.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ho(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};fe.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ho(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};fe.prototype.readInt8=function(e,r){return e=e>>>0,r||ho(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};fe.prototype.readInt16LE=function(e,r){e=e>>>0,r||ho(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};fe.prototype.readInt16BE=function(e,r){e=e>>>0,r||ho(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};fe.prototype.readInt32LE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};fe.prototype.readInt32BE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};fe.prototype.readBigInt64LE=cp(function(e){e=e>>>0,Xb(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&n_(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});fe.prototype.readBigInt64BE=cp(function(e){e=e>>>0,Xb(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&n_(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});fe.prototype.readFloatLE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),Zb.read(this,e,!0,23,4)};fe.prototype.readFloatBE=function(e,r){return e=e>>>0,r||ho(e,4,this.length),Zb.read(this,e,!1,23,4)};fe.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||ho(e,8,this.length),Zb.read(this,e,!0,52,8)};fe.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||ho(e,8,this.length),Zb.read(this,e,!1,52,8)};function wa(t,e,r,n,i,o){if(!fe.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}fe.prototype.writeUintLE=fe.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;wa(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};fe.prototype.writeUintBE=fe.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;wa(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};fe.prototype.writeUint8=fe.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,1,255,0),this[r]=e&255,r+1};fe.prototype.writeUint16LE=fe.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};fe.prototype.writeUint16BE=fe.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};fe.prototype.writeUint32LE=fe.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};fe.prototype.writeUint32BE=fe.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function KW(t,e,r,n,i){GW(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function qW(t,e,r,n,i){GW(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}fe.prototype.writeBigUInt64LE=cp(function(e,r=0){return KW(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});fe.prototype.writeBigUInt64BE=cp(function(e,r=0){return qW(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});fe.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let d=Math.pow(2,8*n-1);wa(this,e,r,n,d-1,-d)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};fe.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let d=Math.pow(2,8*n-1);wa(this,e,r,n,d-1,-d)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};fe.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};fe.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};fe.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};fe.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};fe.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||wa(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};fe.prototype.writeBigInt64LE=cp(function(e,r=0){return KW(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});fe.prototype.writeBigInt64BE=cp(function(e,r=0){return qW(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function LW(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function FW(t,e,r,n,i){return e=+e,r=r>>>0,i||LW(t,e,r,4,34028234663852886e22,-34028234663852886e22),Zb.write(t,e,r,n,23,4),r+4}fe.prototype.writeFloatLE=function(e,r,n){return FW(this,e,r,!0,n)};fe.prototype.writeFloatBE=function(e,r,n){return FW(this,e,r,!1,n)};function zW(t,e,r,n,i){return e=+e,r=r>>>0,i||LW(t,e,r,8,17976931348623157e292,-17976931348623157e292),Zb.write(t,e,r,n,52,8),r+8}fe.prototype.writeDoubleLE=function(e,r,n){return zW(this,e,r,!0,n)};fe.prototype.writeDoubleBE=function(e,r,n){return zW(this,e,r,!1,n)};fe.prototype.copy=function(e,r,n,i){if(!fe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};fe.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!fe.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=fe.isBuffer(e)?e:fe.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var Yb={};function D9(t,e,r){Yb[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}D9("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);D9("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);D9("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=CW(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=CW(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function CW(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Axe(t,e,r){Xb(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&n_(e,t.length-(r+1))}function GW(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new Yb.ERR_OUT_OF_RANGE("value",a,t)}Axe(n,i,o)}function Xb(t,e){if(typeof t!="number")throw new Yb.ERR_INVALID_ARG_TYPE(e,"number",t)}function n_(t,e,r){throw Math.floor(t)!==t?(Xb(t,r),new Yb.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Yb.ERR_BUFFER_OUT_OF_BOUNDS:new Yb.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Pxe=/[^+/0-9A-Za-z-_]/g;function Txe(t){if(t=t.split("=")[0],t=t.trim().replace(Pxe,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function I9(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Ixe(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function kxe(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function WW(t){return A9.toByteArray(Txe(t))}function v3(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Zu(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function M9(t){return t!==t}var Rxe=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function cp(t){return typeof BigInt>"u"?Dxe:t}function Dxe(){throw new Error("BigInt not supported")}});var ar=W((B9,VW)=>{h();var w3=Un(),Xu=w3.Buffer;function HW(t,e){for(var r in t)e[r]=t[r]}Xu.from&&Xu.alloc&&Xu.allocUnsafe&&Xu.allocUnsafeSlow?VW.exports=w3:(HW(w3,B9),B9.Buffer=Ny);function Ny(t,e,r){return Xu(t,e,r)}Ny.prototype=Object.create(Xu.prototype);HW(Xu,Ny);Ny.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Xu(t,e,r)};Ny.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Xu(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Ny.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Xu(t)};Ny.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return w3.SlowBuffer(t)}});var jy=W((Rct,O9)=>{"use strict";h();var C9=65536,Mxe=4294967295;function Bxe(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Cxe=ar().Buffer,_3=globalThis.crypto||globalThis.msCrypto;_3&&_3.getRandomValues?O9.exports=Oxe:O9.exports=Bxe;function Oxe(t,e){if(t>Mxe)throw new RangeError("requested too many random bytes");var r=Cxe.allocUnsafe(t);if(t>0)if(t>C9)for(var n=0;n<t;n+=C9)_3.getRandomValues(r.slice(n,n+C9));else _3.getRandomValues(r);return typeof e=="function"?B.default.nextTick(function(){e(null,r)}):r}});var cr=W((Mct,$9)=>{h();typeof Object.create=="function"?$9.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$9.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var nc=W((Cct,N9)=>{"use strict";h();var ev=typeof Reflect=="object"?Reflect:null,JW=ev&&typeof ev.apply=="function"?ev.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},x3;ev&&typeof ev.ownKeys=="function"?x3=ev.ownKeys:Object.getOwnPropertySymbols?x3=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:x3=function(e){return Object.getOwnPropertyNames(e)};function $xe(t){console&&console.warn&&console.warn(t)}var ZW=Number.isNaN||function(e){return e!==e};function un(){un.init.call(this)}N9.exports=un;N9.exports.once=Kxe;un.EventEmitter=un;un.prototype._events=void 0;un.prototype._eventsCount=0;un.prototype._maxListeners=void 0;var YW=10;function E3(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(un,"defaultMaxListeners",{enumerable:!0,get:function(){return YW},set:function(t){if(typeof t!="number"||t<0||ZW(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");YW=t}});un.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};un.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ZW(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function XW(t){return t._maxListeners===void 0?un.defaultMaxListeners:t._maxListeners}un.prototype.getMaxListeners=function(){return XW(this)};un.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var d=o[e];if(d===void 0)return!1;if(typeof d=="function")JW(d,this,r);else for(var u=d.length,c=nH(d,u),n=0;n<u;++n)JW(c[n],this,r);return!0};function QW(t,e,r,n){var i,o,s;if(E3(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=XW(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,$xe(a)}return t}un.prototype.addListener=function(e,r){return QW(this,e,r,!1)};un.prototype.on=un.prototype.addListener;un.prototype.prependListener=function(e,r){return QW(this,e,r,!0)};function Nxe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eH(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Nxe.bind(n);return i.listener=r,n.wrapFn=i,i}un.prototype.once=function(e,r){return E3(r),this.on(e,eH(this,e,r)),this};un.prototype.prependOnceListener=function(e,r){return E3(r),this.prependListener(e,eH(this,e,r)),this};un.prototype.removeListener=function(e,r){var n,i,o,s,a;if(E3(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():jxe(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};un.prototype.off=un.prototype.removeListener;un.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function tH(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Uxe(i):nH(i,i.length)}un.prototype.listeners=function(e){return tH(this,e,!0)};un.prototype.rawListeners=function(e){return tH(this,e,!1)};un.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):rH.call(t,e)};un.prototype.listenerCount=rH;function rH(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}un.prototype.eventNames=function(){return this._eventsCount>0?x3(this._events):[]};function nH(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function jxe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Uxe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Kxe(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}iH(t,e,o,{once:!0}),e!=="error"&&qxe(t,i,{once:!0})})}function qxe(t,e,r){typeof t.on=="function"&&iH(t,"error",e,r)}function iH(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var j9=W(($ct,oH)=>{h();oH.exports=nc().EventEmitter});var U9=W(()=>{h()});var lH=W((qct,uH)=>{"use strict";h();function sH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sH(Object(r),!0).forEach(function(n){Lxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lxe(t,e,r){return e=dH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dH(n.key),n)}}function zxe(t,e,r){return e&&cH(t.prototype,e),r&&cH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dH(t){var e=Gxe(t,"string");return typeof e=="symbol"?e:String(e)}function Gxe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wxe=Un(),S3=Wxe.Buffer,Hxe=U9(),K9=Hxe.inspect,Vxe=K9&&K9.custom||"inspect";function Jxe(t,e,r){S3.prototype.copy.call(t,e,r)}uH.exports=function(){function t(){Fxe(this,t),this.head=null,this.tail=null,this.length=0}return zxe(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return S3.alloc(0);for(var n=S3.allocUnsafe(r>>>0),i=this.head,o=0;i;)Jxe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=S3.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:Vxe,value:function(r,n){return K9(this,aH(aH({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var L9=W((Fct,hH)=>{"use strict";h();function Yxe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,B.default.nextTick(q9,this,t)):B.default.nextTick(q9,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?B.default.nextTick(A3,r):(r._writableState.errorEmitted=!0,B.default.nextTick(fH,r,o)):B.default.nextTick(fH,r,o):e?(B.default.nextTick(A3,r),e(o)):B.default.nextTick(A3,r)}),this)}function fH(t,e){q9(t,e),A3(t)}function A3(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Zxe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function q9(t,e){t.emit("error",e)}function Xxe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}hH.exports={destroy:Yxe,undestroy:Zxe,errorOrDestroy:Xxe}});var Uy=W((Gct,yH)=>{"use strict";h();function Qxe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var mH={};function Kc(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){Qxe(s,o);function s(a,d,u){return o.call(this,n(a,d,u))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,mH[t]=i}function pH(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function eEe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function tEe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function rEe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Kc("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Kc("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&eEe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(tEe(t," argument"))i="The ".concat(t," ").concat(n," ").concat(pH(e,"type"));else{var o=rEe(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(pH(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Kc("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Kc("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Kc("ERR_STREAM_PREMATURE_CLOSE","Premature close");Kc("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Kc("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Kc("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Kc("ERR_STREAM_WRITE_AFTER_END","write after end");Kc("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Kc("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Kc("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");yH.exports.codes=mH});var F9=W((Hct,gH)=>{"use strict";h();var nEe=Uy().codes.ERR_INVALID_OPT_VALUE;function iEe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function oEe(t,e,r,n){var i=iEe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new nEe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}gH.exports={getHighWaterMark:oEe}});var vH=W((Jct,bH)=>{h();bH.exports=sEe;function sEe(t,e){if(z9("noDeprecation"))return t;var r=!1;function n(){if(!r){if(z9("throwDeprecation"))throw new Error(e);z9("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function z9(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var I3=W((Zct,AH)=>{"use strict";h();AH.exports=ai;function _H(t){var e=this;this.next=null,this.entry=null,this.finish=function(){BEe(e,t)}}var tv;ai.WritableState=o_;var aEe={deprecate:vH()},xH=j9(),T3=Un().Buffer,cEe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function dEe(t){return T3.from(t)}function uEe(t){return T3.isBuffer(t)||t instanceof cEe}var W9=L9(),lEe=F9(),fEe=lEe.getHighWaterMark,dp=Uy().codes,hEe=dp.ERR_INVALID_ARG_TYPE,pEe=dp.ERR_METHOD_NOT_IMPLEMENTED,mEe=dp.ERR_MULTIPLE_CALLBACK,yEe=dp.ERR_STREAM_CANNOT_PIPE,gEe=dp.ERR_STREAM_DESTROYED,bEe=dp.ERR_STREAM_NULL_VALUES,vEe=dp.ERR_STREAM_WRITE_AFTER_END,wEe=dp.ERR_UNKNOWN_ENCODING,rv=W9.errorOrDestroy;cr()(ai,xH);function _Ee(){}function o_(t,e,r){tv=tv||up(),t=t||{},typeof r!="boolean"&&(r=e instanceof tv),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=fEe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){IEe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _H(this)}o_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(o_.prototype,"buffer",{get:aEe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var P3;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P3=Function.prototype[Symbol.hasInstance],Object.defineProperty(ai,Symbol.hasInstance,{value:function(e){return P3.call(this,e)?!0:this!==ai?!1:e&&e._writableState instanceof o_}})):P3=function(e){return e instanceof this};function ai(t){tv=tv||up();var e=this instanceof tv;if(!e&&!P3.call(ai,this))return new ai(t);this._writableState=new o_(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),xH.call(this)}ai.prototype.pipe=function(){rv(this,new yEe)};function xEe(t,e){var r=new vEe;rv(t,r),B.default.nextTick(e,r)}function EEe(t,e,r,n){var i;return r===null?i=new bEe:typeof r!="string"&&!e.objectMode&&(i=new hEe("chunk",["string","Buffer"],r)),i?(rv(t,i),B.default.nextTick(n,i),!1):!0}ai.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&uEe(t);return o&&!T3.isBuffer(t)&&(t=dEe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=_Ee),n.ending?xEe(this,r):(o||EEe(this,n,t,r))&&(n.pendingcb++,i=AEe(this,n,o,t,e,r)),i};ai.prototype.cork=function(){this._writableState.corked++};ai.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&EH(this,t))};ai.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new wEe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ai.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function SEe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=T3.from(e,r)),e}Object.defineProperty(ai.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function AEe(t,e,r,n,i,o){if(!r){var s=SEe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var d=e.length<e.highWaterMark;if(d||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else G9(t,e,!1,a,n,i,o);return d}function G9(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new gEe("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function PEe(t,e,r,n,i){--e.pendingcb,r?(B.default.nextTick(i,n),B.default.nextTick(i_,t,e),t._writableState.errorEmitted=!0,rv(t,n)):(i(n),t._writableState.errorEmitted=!0,rv(t,n),i_(t,e))}function TEe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function IEe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new mEe;if(TEe(r),e)PEe(t,r,n,e,i);else{var o=SH(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&EH(t,r),n?B.default.nextTick(wH,t,r,o,i):wH(t,r,o,i)}}function wH(t,e,r,n){r||kEe(t,e),e.pendingcb--,n(),i_(t,e)}function kEe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function EH(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,G9(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new _H(e),e.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,u=r.encoding,c=r.callback,l=e.objectMode?1:d.length;if(G9(t,e,!1,l,d,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ai.prototype._write=function(t,e,r){r(new pEe("_write()"))};ai.prototype._writev=null;ai.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||MEe(this,n,r),this};Object.defineProperty(ai.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function SH(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function REe(t,e){t._final(function(r){e.pendingcb--,r&&rv(t,r),e.prefinished=!0,t.emit("prefinish"),i_(t,e)})}function DEe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,B.default.nextTick(REe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function i_(t,e){var r=SH(e);if(r&&(DEe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function MEe(t,e,r){e.ending=!0,i_(t,e),r&&(e.finished?B.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function BEe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ai.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ai.prototype.destroy=W9.destroy;ai.prototype._undestroy=W9.undestroy;ai.prototype._destroy=function(t,e){e(t)}});var up=W((Qct,TH)=>{"use strict";h();var CEe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};TH.exports=Qu;var PH=D3(),V9=I3();cr()(Qu,PH);for(H9=CEe(V9.prototype),k3=0;k3<H9.length;k3++)R3=H9[k3],Qu.prototype[R3]||(Qu.prototype[R3]=V9.prototype[R3]);var H9,R3,k3;function Qu(t){if(!(this instanceof Qu))return new Qu(t);PH.call(this,t),V9.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",OEe)))}Object.defineProperty(Qu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Qu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Qu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function OEe(){this._writableState.ended||B.default.nextTick($Ee,this)}function $Ee(t){t.end()}Object.defineProperty(Qu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var nv=W(kH=>{"use strict";h();var Y9=ar().Buffer,IH=Y9.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function NEe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function jEe(t){var e=NEe(t);if(typeof e!="string"&&(Y9.isEncoding===IH||!IH(t)))throw new Error("Unknown encoding: "+t);return e||t}kH.StringDecoder=s_;function s_(t){this.encoding=jEe(t);var e;switch(this.encoding){case"utf16le":this.text=zEe,this.end=GEe,e=4;break;case"utf8":this.fillLast=qEe,e=4;break;case"base64":this.text=WEe,this.end=HEe,e=3;break;default:this.write=VEe,this.end=JEe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Y9.allocUnsafe(e)}s_.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};s_.prototype.end=FEe;s_.prototype.text=LEe;s_.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function J9(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function UEe(t,e,r){var n=e.length-1;if(n<r)return 0;var i=J9(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=J9(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=J9(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function KEe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function qEe(t){var e=this.lastTotal-this.lastNeed,r=KEe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function LEe(t,e){var r=UEe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function FEe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function zEe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function GEe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function WEe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function HEe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function VEe(t){return t.toString(this.encoding)}function JEe(t){return t&&t.length?this.write(t):""}});var a_=W((ndt,MH)=>{"use strict";h();var RH=Uy().codes.ERR_STREAM_PREMATURE_CLOSE;function YEe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function ZEe(){}function XEe(t){return t.setHeader&&typeof t.abort=="function"}function DH(t,e,r){if(typeof e=="function")return DH(t,null,e);e||(e={}),r=YEe(r||ZEe);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},d=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,d=!0,i||r.call(t)},c=function(g){r.call(t,g)},l=function(){var g;if(n&&!d)return(!t._readableState||!t._readableState.ended)&&(g=new RH),r.call(t,g);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(g=new RH),r.call(t,g)},m=function(){t.req.on("finish",a)};return XEe(t)?(t.on("complete",a),t.on("abort",l),t.req?m():t.on("request",m)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",c),t.on("close",l),function(){t.removeListener("complete",a),t.removeListener("abort",l),t.removeListener("request",m),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",l)}}MH.exports=DH});var CH=W((odt,BH)=>{"use strict";h();var M3;function lp(t,e,r){return e=QEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QEe(t){var e=e6e(t,"string");return typeof e=="symbol"?e:String(e)}function e6e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t6e=a_(),fp=Symbol("lastResolve"),Ky=Symbol("lastReject"),c_=Symbol("error"),B3=Symbol("ended"),qy=Symbol("lastPromise"),Z9=Symbol("handlePromise"),Ly=Symbol("stream");function hp(t,e){return{value:t,done:e}}function r6e(t){var e=t[fp];if(e!==null){var r=t[Ly].read();r!==null&&(t[qy]=null,t[fp]=null,t[Ky]=null,e(hp(r,!1)))}}function n6e(t){B.default.nextTick(r6e,t)}function i6e(t,e){return function(r,n){t.then(function(){if(e[B3]){r(hp(void 0,!0));return}e[Z9](r,n)},n)}}var o6e=Object.getPrototypeOf(function(){}),s6e=Object.setPrototypeOf((M3={get stream(){return this[Ly]},next:function(){var e=this,r=this[c_];if(r!==null)return Promise.reject(r);if(this[B3])return Promise.resolve(hp(void 0,!0));if(this[Ly].destroyed)return new Promise(function(s,a){B.default.nextTick(function(){e[c_]?a(e[c_]):s(hp(void 0,!0))})});var n=this[qy],i;if(n)i=new Promise(i6e(n,this));else{var o=this[Ly].read();if(o!==null)return Promise.resolve(hp(o,!1));i=new Promise(this[Z9])}return this[qy]=i,i}},lp(M3,Symbol.asyncIterator,function(){return this}),lp(M3,"return",function(){var e=this;return new Promise(function(r,n){e[Ly].destroy(null,function(i){if(i){n(i);return}r(hp(void 0,!0))})})}),M3),o6e),a6e=function(e){var r,n=Object.create(s6e,(r={},lp(r,Ly,{value:e,writable:!0}),lp(r,fp,{value:null,writable:!0}),lp(r,Ky,{value:null,writable:!0}),lp(r,c_,{value:null,writable:!0}),lp(r,B3,{value:e._readableState.endEmitted,writable:!0}),lp(r,Z9,{value:function(o,s){var a=n[Ly].read();a?(n[qy]=null,n[fp]=null,n[Ky]=null,o(hp(a,!1))):(n[fp]=o,n[Ky]=s)},writable:!0}),r));return n[qy]=null,t6e(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Ky];o!==null&&(n[qy]=null,n[fp]=null,n[Ky]=null,o(i)),n[c_]=i;return}var s=n[fp];s!==null&&(n[qy]=null,n[fp]=null,n[Ky]=null,s(hp(void 0,!0))),n[B3]=!0}),e.on("readable",n6e.bind(null,n)),n};BH.exports=a6e});var $H=W((adt,OH)=>{h();OH.exports=function(){throw new Error("Readable.from is not available in the browser")}});var D3=W((udt,WH)=>{"use strict";h();WH.exports=Lr;var iv;Lr.ReadableState=KH;var ddt=nc().EventEmitter,UH=function(e,r){return e.listeners(r).length},u_=j9(),C3=Un().Buffer,c6e=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d6e(t){return C3.from(t)}function u6e(t){return C3.isBuffer(t)||t instanceof c6e}var X9=U9(),wr;X9&&X9.debuglog?wr=X9.debuglog("stream"):wr=function(){};var l6e=lH(),oD=L9(),f6e=F9(),h6e=f6e.getHighWaterMark,O3=Uy().codes,p6e=O3.ERR_INVALID_ARG_TYPE,m6e=O3.ERR_STREAM_PUSH_AFTER_EOF,y6e=O3.ERR_METHOD_NOT_IMPLEMENTED,g6e=O3.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ov,Q9,eD;cr()(Lr,u_);var d_=oD.errorOrDestroy,tD=["error","close","destroy","pause","resume"];function b6e(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function KH(t,e,r){iv=iv||up(),t=t||{},typeof r!="boolean"&&(r=e instanceof iv),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=h6e(this,t,"readableHighWaterMark",r),this.buffer=new l6e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ov||(ov=nv().StringDecoder),this.decoder=new ov(t.encoding),this.encoding=t.encoding)}function Lr(t){if(iv=iv||up(),!(this instanceof Lr))return new Lr(t);var e=this instanceof iv;this._readableState=new KH(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),u_.call(this)}Object.defineProperty(Lr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Lr.prototype.destroy=oD.destroy;Lr.prototype._undestroy=oD.undestroy;Lr.prototype._destroy=function(t,e){e(t)};Lr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=C3.from(t,e),e=""),n=!0),qH(this,t,e,!1,n)};Lr.prototype.unshift=function(t){return qH(this,t,null,!0,!1)};function qH(t,e,r,n,i){wr("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,_6e(t,o);else{var s;if(i||(s=v6e(o,e)),s)d_(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==C3.prototype&&(e=d6e(e)),n)o.endEmitted?d_(t,new g6e):rD(t,o,e,!0);else if(o.ended)d_(t,new m6e);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?rD(t,o,e,!1):iD(t,o)):rD(t,o,e,!1)}else n||(o.reading=!1,iD(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function rD(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&$3(t)),iD(t,e)}function v6e(t,e){var r;return!u6e(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new p6e("chunk",["string","Buffer","Uint8Array"],e)),r}Lr.prototype.isPaused=function(){return this._readableState.flowing===!1};Lr.prototype.setEncoding=function(t){ov||(ov=nv().StringDecoder);var e=new ov(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var NH=1073741824;function w6e(t){return t>=NH?t=NH:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function jH(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=w6e(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Lr.prototype.read=function(t){wr("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return wr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?nD(this):$3(this),null;if(t=jH(t,e),t===0&&e.ended)return e.length===0&&nD(this),null;var n=e.needReadable;wr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,wr("length less than watermark",n)),e.ended||e.reading?(n=!1,wr("reading or ended",n)):n&&(wr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=jH(r,e)));var i;return t>0?i=zH(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&nD(this)),i!==null&&this.emit("data",i),i};function _6e(t,e){if(wr("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?$3(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,LH(t)))}}function $3(t){var e=t._readableState;wr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(wr("emitReadable",e.flowing),e.emittedReadable=!0,B.default.nextTick(LH,t))}function LH(t){var e=t._readableState;wr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,sD(t)}function iD(t,e){e.readingMore||(e.readingMore=!0,B.default.nextTick(x6e,t,e))}function x6e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(wr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Lr.prototype._read=function(t){d_(this,new y6e("_read()"))};Lr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,wr("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==B.default.stdout&&t!==B.default.stderr,o=i?a:b;n.endEmitted?B.default.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(S,A){wr("onunpipe"),S===r&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,c())}function a(){wr("onend"),t.end()}var d=E6e(r);t.on("drain",d);var u=!1;function c(){wr("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",d),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",l),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&d()}r.on("data",l);function l(S){wr("ondata");var A=t.write(S);wr("dest.write",A),A===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&GH(n.pipes,t)!==-1)&&!u&&(wr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function m(S){wr("onerror",S),b(),t.removeListener("error",m),UH(t,"error")===0&&d_(t,S)}b6e(t,"error",m);function p(){t.removeListener("finish",g),b()}t.once("close",p);function g(){wr("onfinish"),t.removeListener("close",p),b()}t.once("finish",g);function b(){wr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(wr("pipe resume"),r.resume()),t};function E6e(t){return function(){var r=t._readableState;wr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&UH(t,"data")&&(r.flowing=!0,sD(t))}}Lr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=GH(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Lr.prototype.on=function(t,e){var r=u_.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,wr("on readable",n.length,n.reading),n.length?$3(this):n.reading||B.default.nextTick(S6e,this)),r};Lr.prototype.addListener=Lr.prototype.on;Lr.prototype.removeListener=function(t,e){var r=u_.prototype.removeListener.call(this,t,e);return t==="readable"&&B.default.nextTick(FH,this),r};Lr.prototype.removeAllListeners=function(t){var e=u_.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&B.default.nextTick(FH,this),e};function FH(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function S6e(t){wr("readable nexttick read 0"),t.read(0)}Lr.prototype.resume=function(){var t=this._readableState;return t.flowing||(wr("resume"),t.flowing=!t.readableListening,A6e(this,t)),t.paused=!1,this};function A6e(t,e){e.resumeScheduled||(e.resumeScheduled=!0,B.default.nextTick(P6e,t,e))}function P6e(t,e){wr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),sD(t),e.flowing&&!e.reading&&t.read(0)}Lr.prototype.pause=function(){return wr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(wr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function sD(t){var e=t._readableState;for(wr("flow",e.flowing);e.flowing&&t.read()!==null;);}Lr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(wr("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(wr("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<tD.length;o++)t.on(tD[o],this.emit.bind(this,tD[o]));return this._read=function(s){wr("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Lr.prototype[Symbol.asyncIterator]=function(){return Q9===void 0&&(Q9=CH()),Q9(this)});Object.defineProperty(Lr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Lr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Lr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Lr._fromList=zH;Object.defineProperty(Lr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function zH(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function nD(t){var e=t._readableState;wr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,B.default.nextTick(T6e,e,t))}function T6e(t,e){if(wr("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Lr.from=function(t,e){return eD===void 0&&(eD=$H()),eD(Lr,t,e)});function GH(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var U3=W((fdt,VH)=>{"use strict";h();VH.exports=Sf;var N3=Uy().codes,I6e=N3.ERR_METHOD_NOT_IMPLEMENTED,k6e=N3.ERR_MULTIPLE_CALLBACK,R6e=N3.ERR_TRANSFORM_ALREADY_TRANSFORMING,D6e=N3.ERR_TRANSFORM_WITH_LENGTH_0,j3=up();cr()(Sf,j3);function M6e(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new k6e);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Sf(t){if(!(this instanceof Sf))return new Sf(t);j3.call(this,t),this._transformState={afterTransform:M6e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",B6e)}function B6e(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){HH(t,e,r)}):HH(this,null,null)}Sf.prototype.push=function(t,e){return this._transformState.needTransform=!1,j3.prototype.push.call(this,t,e)};Sf.prototype._transform=function(t,e,r){r(new I6e("_transform()"))};Sf.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Sf.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Sf.prototype._destroy=function(t,e){j3.prototype._destroy.call(this,t,function(r){e(r)})};function HH(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new D6e;if(t._transformState.transforming)throw new R6e;return t.push(null)}});var aD=W((pdt,YH)=>{"use strict";h();YH.exports=l_;var JH=U3();cr()(l_,JH);function l_(t){if(!(this instanceof l_))return new l_(t);JH.call(this,t)}l_.prototype._transform=function(t,e,r){r(null,t)}});var dD=W((ydt,eV)=>{"use strict";h();var cD;function C6e(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var QH=Uy().codes,O6e=QH.ERR_MISSING_ARGS,$6e=QH.ERR_STREAM_DESTROYED;function ZH(t){if(t)throw t}function N6e(t){return t.setHeader&&typeof t.abort=="function"}function j6e(t,e,r,n){n=C6e(n);var i=!1;t.on("close",function(){i=!0}),cD===void 0&&(cD=a_()),cD(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,N6e(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new $6e("pipe"))}}}function XH(t){t()}function U6e(t,e){return t.pipe(e)}function K6e(t){return!t.length||typeof t[t.length-1]!="function"?ZH:t.pop()}function q6e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=K6e(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new O6e("streams");var i,o=e.map(function(s,a){var d=a<e.length-1,u=a>0;return j6e(s,d,u,function(c){i||(i=c),c&&o.forEach(XH),!d&&(o.forEach(XH),n(i))})});return e.reduce(U6e)}eV.exports=q6e});var K3=W((qc,tV)=>{h();qc=tV.exports=D3();qc.Stream=qc;qc.Readable=qc;qc.Writable=I3();qc.Duplex=up();qc.Transform=U3();qc.PassThrough=aD();qc.finished=a_();qc.pipeline=dD()});var uD=W((vdt,nV)=>{"use strict";h();var q3=ar().Buffer,rV=K3().Transform,L6e=cr();function F6e(t,e){if(!q3.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function pp(t){rV.call(this),this._block=q3.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}L6e(pp,rV);pp.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};pp.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};pp.prototype.update=function(t,e){if(F6e(t,"Data"),this._finalized)throw new Error("Digest already called");q3.isBuffer(t)||(t=q3.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var o=0,s=t.length*8;s>0;++o)this._length[o]+=s,s=this._length[o]/4294967296|0,s>0&&(this._length[o]-=4294967296*s);return this};pp.prototype._update=function(){throw new Error("_update is not implemented")};pp.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};pp.prototype._digest=function(){throw new Error("_digest is not implemented")};nV.exports=pp});var z3=W((_dt,oV)=>{"use strict";h();var z6e=cr(),iV=uD(),G6e=ar().Buffer,W6e=new Array(16);function L3(){iV.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}z6e(L3,iV);L3.prototype._update=function(){for(var t=W6e,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,o=this._d;r=xs(r,n,i,o,t[0],3614090360,7),o=xs(o,r,n,i,t[1],3905402710,12),i=xs(i,o,r,n,t[2],606105819,17),n=xs(n,i,o,r,t[3],3250441966,22),r=xs(r,n,i,o,t[4],4118548399,7),o=xs(o,r,n,i,t[5],1200080426,12),i=xs(i,o,r,n,t[6],2821735955,17),n=xs(n,i,o,r,t[7],4249261313,22),r=xs(r,n,i,o,t[8],1770035416,7),o=xs(o,r,n,i,t[9],2336552879,12),i=xs(i,o,r,n,t[10],4294925233,17),n=xs(n,i,o,r,t[11],2304563134,22),r=xs(r,n,i,o,t[12],1804603682,7),o=xs(o,r,n,i,t[13],4254626195,12),i=xs(i,o,r,n,t[14],2792965006,17),n=xs(n,i,o,r,t[15],1236535329,22),r=Es(r,n,i,o,t[1],4129170786,5),o=Es(o,r,n,i,t[6],3225465664,9),i=Es(i,o,r,n,t[11],643717713,14),n=Es(n,i,o,r,t[0],3921069994,20),r=Es(r,n,i,o,t[5],3593408605,5),o=Es(o,r,n,i,t[10],38016083,9),i=Es(i,o,r,n,t[15],3634488961,14),n=Es(n,i,o,r,t[4],3889429448,20),r=Es(r,n,i,o,t[9],568446438,5),o=Es(o,r,n,i,t[14],3275163606,9),i=Es(i,o,r,n,t[3],4107603335,14),n=Es(n,i,o,r,t[8],1163531501,20),r=Es(r,n,i,o,t[13],2850285829,5),o=Es(o,r,n,i,t[2],4243563512,9),i=Es(i,o,r,n,t[7],1735328473,14),n=Es(n,i,o,r,t[12],2368359562,20),r=Ss(r,n,i,o,t[5],4294588738,4),o=Ss(o,r,n,i,t[8],2272392833,11),i=Ss(i,o,r,n,t[11],1839030562,16),n=Ss(n,i,o,r,t[14],4259657740,23),r=Ss(r,n,i,o,t[1],2763975236,4),o=Ss(o,r,n,i,t[4],1272893353,11),i=Ss(i,o,r,n,t[7],4139469664,16),n=Ss(n,i,o,r,t[10],3200236656,23),r=Ss(r,n,i,o,t[13],681279174,4),o=Ss(o,r,n,i,t[0],3936430074,11),i=Ss(i,o,r,n,t[3],3572445317,16),n=Ss(n,i,o,r,t[6],76029189,23),r=Ss(r,n,i,o,t[9],3654602809,4),o=Ss(o,r,n,i,t[12],3873151461,11),i=Ss(i,o,r,n,t[15],530742520,16),n=Ss(n,i,o,r,t[2],3299628645,23),r=As(r,n,i,o,t[0],4096336452,6),o=As(o,r,n,i,t[7],1126891415,10),i=As(i,o,r,n,t[14],2878612391,15),n=As(n,i,o,r,t[5],4237533241,21),r=As(r,n,i,o,t[12],1700485571,6),o=As(o,r,n,i,t[3],2399980690,10),i=As(i,o,r,n,t[10],4293915773,15),n=As(n,i,o,r,t[1],2240044497,21),r=As(r,n,i,o,t[8],1873313359,6),o=As(o,r,n,i,t[15],4264355552,10),i=As(i,o,r,n,t[6],2734768916,15),n=As(n,i,o,r,t[13],1309151649,21),r=As(r,n,i,o,t[4],4149444226,6),o=As(o,r,n,i,t[11],3174756917,10),i=As(i,o,r,n,t[2],718787259,15),n=As(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0};L3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=G6e.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function F3(t,e){return t<<e|t>>>32-e}function xs(t,e,r,n,i,o,s){return F3(t+(e&r|~e&n)+i+o|0,s)+e|0}function Es(t,e,r,n,i,o,s){return F3(t+(e&n|r&~n)+i+o|0,s)+e|0}function Ss(t,e,r,n,i,o,s){return F3(t+(e^r^n)+i+o|0,s)+e|0}function As(t,e,r,n,i,o,s){return F3(t+(r^(e|~n))+i+o|0,s)+e|0}oV.exports=L3});var W3=W((Edt,fV)=>{"use strict";h();var lD=Un().Buffer,H6e=cr(),lV=uD(),V6e=new Array(16),f_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],y_=[0,1518500249,1859775393,2400959708,2840853838],g_=[1352829926,1548603684,1836072691,2053994217,0];function G3(){lV.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}H6e(G3,lV);G3.prototype._update=function(){for(var t=V6e,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=this._a|0,d=this._b|0,u=this._c|0,c=this._d|0,l=this._e|0,m=0;m<80;m+=1){var p,g;m<16?(p=sV(r,n,i,o,s,t[f_[m]],y_[0],p_[m]),g=uV(a,d,u,c,l,t[h_[m]],g_[0],m_[m])):m<32?(p=aV(r,n,i,o,s,t[f_[m]],y_[1],p_[m]),g=dV(a,d,u,c,l,t[h_[m]],g_[1],m_[m])):m<48?(p=cV(r,n,i,o,s,t[f_[m]],y_[2],p_[m]),g=cV(a,d,u,c,l,t[h_[m]],g_[2],m_[m])):m<64?(p=dV(r,n,i,o,s,t[f_[m]],y_[3],p_[m]),g=aV(a,d,u,c,l,t[h_[m]],g_[3],m_[m])):(p=uV(r,n,i,o,s,t[f_[m]],y_[4],p_[m]),g=sV(a,d,u,c,l,t[h_[m]],g_[4],m_[m])),r=s,s=o,o=Fy(i,10),i=n,n=p,a=l,l=c,c=Fy(u,10),u=d,d=g}var b=this._b+i+c|0;this._b=this._c+o+l|0,this._c=this._d+s+a|0,this._d=this._e+r+d|0,this._e=this._a+n+u|0,this._a=b};G3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=lD.alloc?lD.alloc(20):new lD(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Fy(t,e){return t<<e|t>>>32-e}function sV(t,e,r,n,i,o,s,a){return Fy(t+(e^r^n)+o+s|0,a)+i|0}function aV(t,e,r,n,i,o,s,a){return Fy(t+(e&r|~e&n)+o+s|0,a)+i|0}function cV(t,e,r,n,i,o,s,a){return Fy(t+((e|~r)^n)+o+s|0,a)+i|0}function dV(t,e,r,n,i,o,s,a){return Fy(t+(e&n|r&~n)+o+s|0,a)+i|0}function uV(t,e,r,n,i,o,s,a){return Fy(t+(e^(r|~n))+o+s|0,a)+i|0}fV.exports=G3});var zy=W((Adt,pV)=>{h();var hV=ar().Buffer;function H3(t,e){this._block=hV.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}H3.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=hV.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,o=this._len,s=0;s<i;){for(var a=o%n,d=Math.min(i-s,n-a),u=0;u<d;u++)r[a+u]=t[s+u];o+=d,s+=d,o%n===0&&this._update(r)}return this._len+=i,this};H3.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o};H3.prototype._update=function(){throw new Error("_update must be implemented by subclass")};pV.exports=H3});var gV=W((Tdt,yV)=>{h();var J6e=cr(),mV=zy(),Y6e=ar().Buffer,Z6e=[1518500249,1859775393,-1894007588,-899497514],X6e=new Array(80);function b_(){this.init(),this._w=X6e,mV.call(this,64,56)}J6e(b_,mV);b_.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Q6e(t){return t<<5|t>>>27}function eSe(t){return t<<30|t>>>2}function tSe(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}b_.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var d=0;d<80;++d){var u=~~(d/20),c=Q6e(r)+tSe(u,n,i,o)+s+e[d]+Z6e[u]|0;s=o,o=i,i=eSe(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0};b_.prototype._hash=function(){var t=Y6e.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};yV.exports=b_});var wV=W((kdt,vV)=>{h();var rSe=cr(),bV=zy(),nSe=ar().Buffer,iSe=[1518500249,1859775393,-1894007588,-899497514],oSe=new Array(80);function v_(){this.init(),this._w=oSe,bV.call(this,64,56)}rSe(v_,bV);v_.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function sSe(t){return t<<1|t>>>31}function aSe(t){return t<<5|t>>>27}function cSe(t){return t<<30|t>>>2}function dSe(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}v_.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=sSe(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var d=0;d<80;++d){var u=~~(d/20),c=aSe(r)+dSe(u,n,i,o)+s+e[d]+iSe[u]|0;s=o,o=i,i=cSe(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0};v_.prototype._hash=function(){var t=nSe.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};vV.exports=v_});var fD=W((Ddt,xV)=>{h();var uSe=cr(),_V=zy(),lSe=ar().Buffer,fSe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hSe=new Array(64);function w_(){this.init(),this._w=hSe,_V.call(this,64,56)}uSe(w_,_V);w_.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function pSe(t,e,r){return r^t&(e^r)}function mSe(t,e,r){return t&e|r&(t|e)}function ySe(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function gSe(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function bSe(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function vSe(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}w_.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=this._f|0,d=this._g|0,u=this._h|0,c=0;c<16;++c)e[c]=t.readInt32BE(c*4);for(;c<64;++c)e[c]=vSe(e[c-2])+e[c-7]+bSe(e[c-15])+e[c-16]|0;for(var l=0;l<64;++l){var m=u+gSe(s)+pSe(s,a,d)+fSe[l]+e[l]|0,p=ySe(r)+mSe(r,n,i)|0;u=d,d=a,a=s,s=o+m|0,o=i,i=n,n=r,r=m+p|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=d+this._g|0,this._h=u+this._h|0};w_.prototype._hash=function(){var t=lSe.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};xV.exports=w_});var SV=W((Bdt,EV)=>{h();var wSe=cr(),_Se=fD(),xSe=zy(),ESe=ar().Buffer,SSe=new Array(64);function V3(){this.init(),this._w=SSe,xSe.call(this,64,56)}wSe(V3,_Se);V3.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};V3.prototype._hash=function(){var t=ESe.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};EV.exports=V3});var hD=W((Odt,DV)=>{h();var ASe=cr(),RV=zy(),PSe=ar().Buffer,AV=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],TSe=new Array(160);function __(){this.init(),this._w=TSe,RV.call(this,128,112)}ASe(__,RV);__.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function PV(t,e,r){return r^t&(e^r)}function TV(t,e,r){return t&e|r&(t|e)}function IV(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function kV(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function ISe(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function kSe(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function RSe(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function DSe(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function po(t,e){return t>>>0<e>>>0?1:0}__.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,o=this._dh|0,s=this._eh|0,a=this._fh|0,d=this._gh|0,u=this._hh|0,c=this._al|0,l=this._bl|0,m=this._cl|0,p=this._dl|0,g=this._el|0,b=this._fl|0,S=this._gl|0,A=this._hl|0,I=0;I<32;I+=2)e[I]=t.readInt32BE(I*4),e[I+1]=t.readInt32BE(I*4+4);for(;I<160;I+=2){var P=e[I-30],$=e[I-15*2+1],N=ISe(P,$),L=kSe($,P);P=e[I-2*2],$=e[I-2*2+1];var F=RSe(P,$),U=DSe($,P),G=e[I-7*2],q=e[I-7*2+1],T=e[I-16*2],E=e[I-16*2+1],k=L+q|0,f=N+G+po(k,L)|0;k=k+U|0,f=f+F+po(k,U)|0,k=k+E|0,f=f+T+po(k,E)|0,e[I]=f,e[I+1]=k}for(var y=0;y<160;y+=2){f=e[y],k=e[y+1];var w=TV(r,n,i),_=TV(c,l,m),x=IV(r,c),v=IV(c,r),D=kV(s,g),K=kV(g,s),M=AV[y],j=AV[y+1],J=PV(s,a,d),Z=PV(g,b,S),V=A+K|0,H=u+D+po(V,A)|0;V=V+Z|0,H=H+J+po(V,Z)|0,V=V+j|0,H=H+M+po(V,j)|0,V=V+k|0,H=H+f+po(V,k)|0;var X=v+_|0,ee=x+w+po(X,v)|0;u=d,A=S,d=a,S=b,a=s,b=g,g=p+V|0,s=o+H+po(g,p)|0,o=i,p=m,i=n,m=l,n=r,l=c,c=V+X|0,r=H+ee+po(c,V)|0}this._al=this._al+c|0,this._bl=this._bl+l|0,this._cl=this._cl+m|0,this._dl=this._dl+p|0,this._el=this._el+g|0,this._fl=this._fl+b|0,this._gl=this._gl+S|0,this._hl=this._hl+A|0,this._ah=this._ah+r+po(this._al,c)|0,this._bh=this._bh+n+po(this._bl,l)|0,this._ch=this._ch+i+po(this._cl,m)|0,this._dh=this._dh+o+po(this._dl,p)|0,this._eh=this._eh+s+po(this._el,g)|0,this._fh=this._fh+a+po(this._fl,b)|0,this._gh=this._gh+d+po(this._gl,S)|0,this._hh=this._hh+u+po(this._hl,A)|0};__.prototype._hash=function(){var t=PSe.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};DV.exports=__});var BV=W((Ndt,MV)=>{h();var MSe=cr(),BSe=hD(),CSe=zy(),OSe=ar().Buffer,$Se=new Array(160);function J3(){this.init(),this._w=$Se,CSe.call(this,128,112)}MSe(J3,BSe);J3.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};J3.prototype._hash=function(){var t=OSe.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};MV.exports=J3});var Y3=W((Af,CV)=>{h();var Af=CV.exports=function(e){e=e.toLowerCase();var r=Af[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};Af.sha=gV();Af.sha1=wV();Af.sha224=SV();Af.sha256=fD();Af.sha384=BV();Af.sha512=hD()});var $V=W((Kdt,OV)=>{h();OV.exports=Lc;var pD=nc().EventEmitter,NSe=cr();NSe(Lc,pD);Lc.Readable=D3();Lc.Writable=I3();Lc.Duplex=up();Lc.Transform=U3();Lc.PassThrough=aD();Lc.finished=a_();Lc.pipeline=dD();Lc.Stream=Lc;function Lc(){pD.call(this)}Lc.prototype.pipe=function(t,e){var r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function d(c){if(u(),pD.listenerCount(this,"error")===0)throw c}r.on("error",d),t.on("error",d);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",d),t.removeListener("error",d),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t}});var Pf=W((Ldt,UV)=>{h();var NV=ar().Buffer,jV=$V().Transform,jSe=nv().StringDecoder,USe=cr();function zd(t){jV.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}USe(zd,jV);zd.prototype.update=function(t,e,r){typeof t=="string"&&(t=NV.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};zd.prototype.setAutoPadding=function(){};zd.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};zd.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};zd.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};zd.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};zd.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};zd.prototype._finalOrDigest=function(t){var e=this.__final()||NV.alloc(0);return t&&(e=this._toString(e,t,!0)),e};zd.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new jSe(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};UV.exports=zd});var sv=W((zdt,qV)=>{"use strict";h();var KSe=cr(),qSe=z3(),LSe=W3(),FSe=Y3(),KV=Pf();function Z3(t){KV.call(this,"digest"),this._hash=t}KSe(Z3,KV);Z3.prototype._update=function(t){this._hash.update(t)};Z3.prototype._final=function(){return this._hash.digest()};qV.exports=function(e){return e=e.toLowerCase(),e==="md5"?new qSe:e==="rmd160"||e==="ripemd160"?new LSe:new Z3(FSe(e))}});var zV=W((Wdt,FV)=>{"use strict";h();var zSe=cr(),Gy=ar().Buffer,LV=Pf(),GSe=Gy.alloc(128),av=64;function X3(t,e){LV.call(this,"digest"),typeof e=="string"&&(e=Gy.from(e)),this._alg=t,this._key=e,e.length>av?e=t(e):e.length<av&&(e=Gy.concat([e,GSe],av));for(var r=this._ipad=Gy.allocUnsafe(av),n=this._opad=Gy.allocUnsafe(av),i=0;i<av;i++)r[i]=e[i]^54,n[i]=e[i]^92;this._hash=[r]}zSe(X3,LV);X3.prototype._update=function(t){this._hash.push(t)};X3.prototype._final=function(){var t=this._alg(Gy.concat(this._hash));return this._alg(Gy.concat([this._opad,t]))};FV.exports=X3});var mD=W((Vdt,GV)=>{h();var WSe=z3();GV.exports=function(t){return new WSe().update(t).digest()}});var bD=W((Ydt,HV)=>{"use strict";h();var HSe=cr(),VSe=zV(),WV=Pf(),x_=ar().Buffer,JSe=mD(),yD=W3(),gD=Y3(),YSe=x_.alloc(128);function E_(t,e){WV.call(this,"digest"),typeof e=="string"&&(e=x_.from(e));var r=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>r){var n=t==="rmd160"?new yD:gD(t);e=n.update(e).digest()}else e.length<r&&(e=x_.concat([e,YSe],r));for(var i=this._ipad=x_.allocUnsafe(r),o=this._opad=x_.allocUnsafe(r),s=0;s<r;s++)i[s]=e[s]^54,o[s]=e[s]^92;this._hash=t==="rmd160"?new yD:gD(t),this._hash.update(i)}HSe(E_,WV);E_.prototype._update=function(t){this._hash.update(t)};E_.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new yD:gD(this._alg);return e.update(this._opad).update(t).digest()};HV.exports=function(e,r){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new E_("rmd160",r):e==="md5"?new VSe(JSe,r):new E_(e,r)}});var vD=W((Xdt,ZSe)=>{ZSe.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}});var JV=W((Qdt,VV)=>{"use strict";h();VV.exports=vD()});var wD=W((tut,YV)=>{h();var XSe=Math.pow(2,30)-1;YV.exports=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>XSe||e!==e)throw new TypeError("Bad key length")}});var _D=W((nut,XV)=>{h();var Q3;globalThis.process&&globalThis.process.browser?Q3="utf-8":globalThis.process&&globalThis.process.version?(ZV=parseInt(B.default.version.split(".")[0].slice(1),10),Q3=ZV>=6?"utf-8":"binary"):Q3="utf-8";var ZV;XV.exports=Q3});var ED=W((out,QV)=>{h();var xD=ar().Buffer;QV.exports=function(t,e,r){if(xD.isBuffer(t))return t;if(typeof t=="string")return xD.from(t,e);if(ArrayBuffer.isView(t))return xD.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}});var SD=W((aut,nJ)=>{h();var QSe=mD(),e3e=W3(),t3e=Y3(),Wy=ar().Buffer,r3e=wD(),eJ=_D(),tJ=ED(),n3e=Wy.alloc(128),e5={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function rJ(t,e,r){var n=i3e(t),i=t==="sha512"||t==="sha384"?128:64;e.length>i?e=n(e):e.length<i&&(e=Wy.concat([e,n3e],i));for(var o=Wy.allocUnsafe(i+e5[t]),s=Wy.allocUnsafe(i+e5[t]),a=0;a<i;a++)o[a]=e[a]^54,s[a]=e[a]^92;var d=Wy.allocUnsafe(i+r+4);o.copy(d,0,0,i),this.ipad1=d,this.ipad2=o,this.opad=s,this.alg=t,this.blocksize=i,this.hash=n,this.size=e5[t]}rJ.prototype.run=function(t,e){t.copy(e,this.blocksize);var r=this.hash(e);return r.copy(this.opad,this.blocksize),this.hash(this.opad)};function i3e(t){function e(n){return t3e(t).update(n).digest()}function r(n){return new e3e().update(n).digest()}return t==="rmd160"||t==="ripemd160"?r:t==="md5"?QSe:e}function o3e(t,e,r,n,i){r3e(r,n),t=tJ(t,eJ,"Password"),e=tJ(e,eJ,"Salt"),i=i||"sha1";var o=new rJ(i,t,e.length),s=Wy.allocUnsafe(n),a=Wy.allocUnsafe(e.length+4);e.copy(a,0,0,e.length);for(var d=0,u=e5[i],c=Math.ceil(n/u),l=1;l<=c;l++){a.writeUInt32BE(l,e.length);for(var m=o.run(a,o.ipad1),p=m,g=1;g<r;g++){p=o.run(p,o.ipad2);for(var b=0;b<u;b++)m[b]^=p[b]}m.copy(s,d),d+=u}return s}nJ.exports=o3e});var uJ=W((dut,dJ)=>{h();var aJ=ar().Buffer,s3e=wD(),iJ=_D(),oJ=SD(),sJ=ED(),t5,S_=globalThis.crypto&&globalThis.crypto.subtle,a3e={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},AD=[];function c3e(t){if(globalThis.process&&!globalThis.process.browser||!S_||!S_.importKey||!S_.deriveBits)return Promise.resolve(!1);if(AD[t]!==void 0)return AD[t];t5=t5||aJ.alloc(8);var e=cJ(t5,t5,10,128,t).then(function(){return!0}).catch(function(){return!1});return AD[t]=e,e}var Hy;function PD(){return Hy||(globalThis.process&&globalThis.process.nextTick?Hy=globalThis.process.nextTick:globalThis.queueMicrotask?Hy=globalThis.queueMicrotask:globalThis.setImmediate?Hy=globalThis.setImmediate:Hy=globalThis.setTimeout,Hy)}function cJ(t,e,r,n,i){return S_.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(o){return S_.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},o,n<<3)}).then(function(o){return aJ.from(o)})}function d3e(t,e){t.then(function(r){PD()(function(){e(null,r)})},function(r){PD()(function(){e(r)})})}dJ.exports=function(t,e,r,n,i,o){typeof i=="function"&&(o=i,i=void 0),i=i||"sha1";var s=a3e[i.toLowerCase()];if(!s||typeof globalThis.Promise!="function"){PD()(function(){var a;try{a=oJ(t,e,r,n,i)}catch(d){return o(d)}o(null,a)});return}if(s3e(r,n),t=sJ(t,iJ,"Password"),e=sJ(e,iJ,"Salt"),typeof o!="function")throw new Error("No callback provided to pbkdf2");d3e(c3e(s).then(function(a){return a?cJ(t,e,r,n,s):oJ(t,e,r,n,i)}),o)}});var ID=W(TD=>{h();TD.pbkdf2=uJ();TD.pbkdf2Sync=SD()});var kD=W(Fc=>{"use strict";h();Fc.readUInt32BE=function(e,r){var n=e[0+r]<<24|e[1+r]<<16|e[2+r]<<8|e[3+r];return n>>>0};Fc.writeUInt32BE=function(e,r,n){e[0+n]=r>>>24,e[1+n]=r>>>16&255,e[2+n]=r>>>8&255,e[3+n]=r&255};Fc.ip=function(e,r,n,i){for(var o=0,s=0,a=6;a>=0;a-=2){for(var d=0;d<=24;d+=8)o<<=1,o|=r>>>d+a&1;for(var d=0;d<=24;d+=8)o<<=1,o|=e>>>d+a&1}for(var a=6;a>=0;a-=2){for(var d=1;d<=25;d+=8)s<<=1,s|=r>>>d+a&1;for(var d=1;d<=25;d+=8)s<<=1,s|=e>>>d+a&1}n[i+0]=o>>>0,n[i+1]=s>>>0};Fc.rip=function(e,r,n,i){for(var o=0,s=0,a=0;a<4;a++)for(var d=24;d>=0;d-=8)o<<=1,o|=r>>>d+a&1,o<<=1,o|=e>>>d+a&1;for(var a=4;a<8;a++)for(var d=24;d>=0;d-=8)s<<=1,s|=r>>>d+a&1,s<<=1,s|=e>>>d+a&1;n[i+0]=o>>>0,n[i+1]=s>>>0};Fc.pc1=function(e,r,n,i){for(var o=0,s=0,a=7;a>=5;a--){for(var d=0;d<=24;d+=8)o<<=1,o|=r>>d+a&1;for(var d=0;d<=24;d+=8)o<<=1,o|=e>>d+a&1}for(var d=0;d<=24;d+=8)o<<=1,o|=r>>d+a&1;for(var a=1;a<=3;a++){for(var d=0;d<=24;d+=8)s<<=1,s|=r>>d+a&1;for(var d=0;d<=24;d+=8)s<<=1,s|=e>>d+a&1}for(var d=0;d<=24;d+=8)s<<=1,s|=e>>d+a&1;n[i+0]=o>>>0,n[i+1]=s>>>0};Fc.r28shl=function(e,r){return e<<r&268435455|e>>>28-r};var r5=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Fc.pc2=function(e,r,n,i){for(var o=0,s=0,a=r5.length>>>1,d=0;d<a;d++)o<<=1,o|=e>>>r5[d]&1;for(var d=a;d<r5.length;d++)s<<=1,s|=r>>>r5[d]&1;n[i+0]=o>>>0,n[i+1]=s>>>0};Fc.expand=function(e,r,n){var i=0,o=0;i=(e&1)<<5|e>>>27;for(var s=23;s>=15;s-=4)i<<=6,i|=e>>>s&63;for(var s=11;s>=3;s-=4)o|=e>>>s&63,o<<=6;o|=(e&31)<<1|e>>>31,r[n+0]=i>>>0,r[n+1]=o>>>0};var lJ=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Fc.substitute=function(e,r){for(var n=0,i=0;i<4;i++){var o=e>>>18-i*6&63,s=lJ[i*64+o];n<<=4,n|=s}for(var i=0;i<4;i++){var o=r>>>18-i*6&63,s=lJ[4*64+i*64+o];n<<=4,n|=s}return n>>>0};var fJ=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Fc.permute=function(e){for(var r=0,n=0;n<fJ.length;n++)r<<=1,r|=e>>>fJ[n]&1;return r>>>0};Fc.padSplit=function(e,r,n){for(var i=e.toString(2);i.length<r;)i="0"+i;for(var o=[],s=0;s<r;s+=n)o.push(i.slice(s,s+n));return o.join(" ")}});var ic=W((mut,pJ)=>{h();pJ.exports=hJ;function hJ(t,e){if(!t)throw new Error(e||"Assertion failed")}hJ.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)}});var n5=W((gut,mJ)=>{"use strict";h();var u3e=ic();function zc(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}mJ.exports=zc;zc.prototype._init=function(){};zc.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};zc.prototype._buffer=function(e,r){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-r),i=0;i<n;i++)this.buffer[this.bufferOff+i]=e[r+i];return this.bufferOff+=n,n};zc.prototype._flushBuffer=function(e,r){return this._update(this.buffer,0,e,r),this.bufferOff=0,this.blockSize};zc.prototype._updateEncrypt=function(e){var r=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,o=new Array(i*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(e,r),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(o,n)));for(var s=e.length-(e.length-r)%this.blockSize;r<s;r+=this.blockSize)this._update(e,r,o,n),n+=this.blockSize;for(;r<e.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=e[r];return o};zc.prototype._updateDecrypt=function(e){for(var r=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,o=new Array(i*this.blockSize);i>0;i--)r+=this._buffer(e,r),n+=this._flushBuffer(o,n);return r+=this._buffer(e,r),o};zc.prototype.final=function(e){var r;e&&(r=this.update(e));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),r?r.concat(n):n};zc.prototype._pad=function(e,r){if(r===0)return!1;for(;r<e.length;)e[r++]=0;return!0};zc.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};zc.prototype._unpad=function(e){return e};zc.prototype._finalDecrypt=function(){u3e.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}});var RD=W((vut,bJ)=>{"use strict";h();var yJ=ic(),l3e=cr(),Fi=kD(),gJ=n5();function f3e(){this.tmp=new Array(2),this.keys=null}function el(t){gJ.call(this,t);var e=new f3e;this._desState=e,this.deriveKeys(e,t.key)}l3e(el,gJ);bJ.exports=el;el.create=function(e){return new el(e)};var h3e=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];el.prototype.deriveKeys=function(e,r){e.keys=new Array(16*2),yJ.equal(r.length,this.blockSize,"Invalid key length");var n=Fi.readUInt32BE(r,0),i=Fi.readUInt32BE(r,4);Fi.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=h3e[o>>>1];n=Fi.r28shl(n,s),i=Fi.r28shl(i,s),Fi.pc2(n,i,e.keys,o)}};el.prototype._update=function(e,r,n,i){var o=this._desState,s=Fi.readUInt32BE(e,r),a=Fi.readUInt32BE(e,r+4);Fi.ip(s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],this.type==="encrypt"?this._encrypt(o,s,a,o.tmp,0):this._decrypt(o,s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],Fi.writeUInt32BE(n,s,i),Fi.writeUInt32BE(n,a,i+4)};el.prototype._pad=function(e,r){if(this.padding===!1)return!1;for(var n=e.length-r,i=r;i<e.length;i++)e[i]=n;return!0};el.prototype._unpad=function(e){if(this.padding===!1)return e;for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)yJ.equal(e[n],r);return e.slice(0,e.length-r)};el.prototype._encrypt=function(e,r,n,i,o){for(var s=r,a=n,d=0;d<e.keys.length;d+=2){var u=e.keys[d],c=e.keys[d+1];Fi.expand(a,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var l=Fi.substitute(u,c),m=Fi.permute(l),p=a;a=(s^m)>>>0,s=p}Fi.rip(a,s,i,o)};el.prototype._decrypt=function(e,r,n,i,o){for(var s=n,a=r,d=e.keys.length-2;d>=0;d-=2){var u=e.keys[d],c=e.keys[d+1];Fi.expand(s,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var l=Fi.substitute(u,c),m=Fi.permute(l),p=s;s=(a^m)>>>0,a=p}Fi.rip(s,a,i,o)}});var wJ=W(vJ=>{"use strict";h();var p3e=ic(),m3e=cr(),i5={};function y3e(t){p3e.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function g3e(t){function e(o){t.call(this,o),this._cbcInit()}m3e(e,t);for(var r=Object.keys(i5),n=0;n<r.length;n++){var i=r[n];e.prototype[i]=i5[i]}return e.create=function(s){return new e(s)},e}vJ.instantiate=g3e;i5._cbcInit=function(){var e=new y3e(this.options.iv);this._cbcState=e};i5._update=function(e,r,n,i){var o=this._cbcState,s=this.constructor.super_.prototype,a=o.iv;if(this.type==="encrypt"){for(var d=0;d<this.blockSize;d++)a[d]^=e[r+d];s._update.call(this,a,0,n,i);for(var d=0;d<this.blockSize;d++)a[d]=n[i+d]}else{s._update.call(this,e,r,n,i);for(var d=0;d<this.blockSize;d++)n[i+d]^=a[d];for(var d=0;d<this.blockSize;d++)a[d]=e[r+d]}}});var EJ=W((Eut,xJ)=>{"use strict";h();var b3e=ic(),v3e=cr(),_J=n5(),mp=RD();function w3e(t,e){b3e.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),i=e.slice(16,24);t==="encrypt"?this.ciphers=[mp.create({type:"encrypt",key:r}),mp.create({type:"decrypt",key:n}),mp.create({type:"encrypt",key:i})]:this.ciphers=[mp.create({type:"decrypt",key:i}),mp.create({type:"encrypt",key:n}),mp.create({type:"decrypt",key:r})]}function Vy(t){_J.call(this,t);var e=new w3e(this.type,this.options.key);this._edeState=e}v3e(Vy,_J);xJ.exports=Vy;Vy.create=function(e){return new Vy(e)};Vy.prototype._update=function(e,r,n,i){var o=this._edeState;o.ciphers[0]._update(e,r,n,i),o.ciphers[1]._update(n,i,n,i),o.ciphers[2]._update(n,i,n,i)};Vy.prototype._pad=mp.prototype._pad;Vy.prototype._unpad=mp.prototype._unpad});var SJ=W(cv=>{"use strict";h();cv.utils=kD();cv.Cipher=n5();cv.DES=RD();cv.CBC=wJ();cv.EDE=EJ()});var TJ=W((Tut,PJ)=>{h();var AJ=Pf(),Tf=SJ(),_3e=cr(),Jy=ar().Buffer,A_={"des-ede3-cbc":Tf.CBC.instantiate(Tf.EDE),"des-ede3":Tf.EDE,"des-ede-cbc":Tf.CBC.instantiate(Tf.EDE),"des-ede":Tf.EDE,"des-cbc":Tf.CBC.instantiate(Tf.DES),"des-ecb":Tf.DES};A_.des=A_["des-cbc"];A_.des3=A_["des-ede3-cbc"];PJ.exports=o5;_3e(o5,AJ);function o5(t){AJ.call(this);var e=t.mode.toLowerCase(),r=A_[e],n;t.decrypt?n="decrypt":n="encrypt";var i=t.key;Jy.isBuffer(i)||(i=Jy.from(i)),(e==="des-ede"||e==="des-ede-cbc")&&(i=Jy.concat([i,i.slice(0,8)]));var o=t.iv;Jy.isBuffer(o)||(o=Jy.from(o)),this._des=r.create({key:i,iv:o,type:n})}o5.prototype._update=function(t){return Jy.from(this._des.update(t))};o5.prototype._final=function(){return Jy.from(this._des.final())}});var IJ=W(DD=>{h();DD.encrypt=function(t,e){return t._cipher.encryptBlock(e)};DD.decrypt=function(t,e){return t._cipher.decryptBlock(e)}});var dv=W((Dut,kJ)=>{h();kJ.exports=function(e,r){for(var n=Math.min(e.length,r.length),i=new O.Buffer(n),o=0;o<n;++o)i[o]=e[o]^r[o];return i}});var DJ=W(MD=>{h();var RJ=dv();MD.encrypt=function(t,e){var r=RJ(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev};MD.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return RJ(n,r)}});var CJ=W(BJ=>{h();var P_=ar().Buffer,x3e=dv();function MJ(t,e,r){var n=e.length,i=x3e(e,t._cache);return t._cache=t._cache.slice(n),t._prev=P_.concat([t._prev,r?e:i]),i}BJ.encrypt=function(t,e,r){for(var n=P_.allocUnsafe(0),i;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=P_.allocUnsafe(0)),t._cache.length<=e.length)i=t._cache.length,n=P_.concat([n,MJ(t,e.slice(0,i),r)]),e=e.slice(i);else{n=P_.concat([n,MJ(t,e,r)]);break}return n}});var $J=W(OJ=>{h();var BD=ar().Buffer;function E3e(t,e,r){var n=t._cipher.encryptBlock(t._prev),i=n[0]^e;return t._prev=BD.concat([t._prev.slice(1),BD.from([r?e:i])]),i}OJ.encrypt=function(t,e,r){for(var n=e.length,i=BD.allocUnsafe(n),o=-1;++o<n;)i[o]=E3e(t,e[o],r);return i}});var jJ=W(NJ=>{h();var s5=ar().Buffer;function S3e(t,e,r){for(var n,i=-1,o=8,s=0,a,d;++i<o;)n=t._cipher.encryptBlock(t._prev),a=e&1<<7-i?128:0,d=n[0]^a,s+=(d&128)>>i%8,t._prev=A3e(t._prev,r?a:d);return s}function A3e(t,e){var r=t.length,n=-1,i=s5.allocUnsafe(t.length);for(t=s5.concat([t,s5.from([e])]);++n<r;)i[n]=t[n]<<1|t[n+1]>>7;return i}NJ.encrypt=function(t,e,r){for(var n=e.length,i=s5.allocUnsafe(n),o=-1;++o<n;)i[o]=S3e(t,e[o],r);return i}});var KJ=W(UJ=>{h();var P3e=dv();function T3e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}UJ.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=O.Buffer.concat([t._cache,T3e(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),P3e(e,r)}});var CD=W((Fut,qJ)=>{h();function I3e(t){for(var e=t.length,r;e--;)if(r=t.readUInt8(e),r===255)t.writeUInt8(0,e);else{r++,t.writeUInt8(r,e);break}}qJ.exports=I3e});var $D=W(FJ=>{h();var k3e=dv(),LJ=ar().Buffer,R3e=CD();function D3e(t){var e=t._cipher.encryptBlockRaw(t._prev);return R3e(t._prev),e}var OD=16;FJ.encrypt=function(t,e){var r=Math.ceil(e.length/OD),n=t._cache.length;t._cache=LJ.concat([t._cache,LJ.allocUnsafe(r*OD)]);for(var i=0;i<r;i++){var o=D3e(t),s=n+i*OD;t._cache.writeUInt32BE(o[0],s+0),t._cache.writeUInt32BE(o[1],s+4),t._cache.writeUInt32BE(o[2],s+8),t._cache.writeUInt32BE(o[3],s+12)}var a=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),k3e(e,a)}});var ND=W((Hut,M3e)=>{M3e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}});var c5=W((Vut,zJ)=>{h();var B3e={ECB:IJ(),CBC:DJ(),CFB:CJ(),CFB8:$J(),CFB1:jJ(),OFB:KJ(),CTR:$D(),GCM:$D()},a5=ND();for(jD in a5)a5[jD].module=B3e[a5[jD].mode];var jD;zJ.exports=a5});var T_=W((Yut,WJ)=>{h();var d5=ar().Buffer;function KD(t){d5.isBuffer(t)||(t=d5.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(n*4);return r}function UD(t){for(var e=0;e<t.length;t++)t[e]=0}function GJ(t,e,r,n,i){for(var o=r[0],s=r[1],a=r[2],d=r[3],u=t[0]^e[0],c=t[1]^e[1],l=t[2]^e[2],m=t[3]^e[3],p,g,b,S,A=4,I=1;I<i;I++)p=o[u>>>24]^s[c>>>16&255]^a[l>>>8&255]^d[m&255]^e[A++],g=o[c>>>24]^s[l>>>16&255]^a[m>>>8&255]^d[u&255]^e[A++],b=o[l>>>24]^s[m>>>16&255]^a[u>>>8&255]^d[c&255]^e[A++],S=o[m>>>24]^s[u>>>16&255]^a[c>>>8&255]^d[l&255]^e[A++],u=p,c=g,l=b,m=S;return p=(n[u>>>24]<<24|n[c>>>16&255]<<16|n[l>>>8&255]<<8|n[m&255])^e[A++],g=(n[c>>>24]<<24|n[l>>>16&255]<<16|n[m>>>8&255]<<8|n[u&255])^e[A++],b=(n[l>>>24]<<24|n[m>>>16&255]<<16|n[u>>>8&255]<<8|n[c&255])^e[A++],S=(n[m>>>24]<<24|n[u>>>16&255]<<16|n[c>>>8&255]<<8|n[l&255])^e[A++],p=p>>>0,g=g>>>0,b=b>>>0,S=S>>>0,[p,g,b,S]}var C3e=[0,1,2,4,8,16,32,64,128,27,54],Oi=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,d=0;d<256;++d){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^u&255^99,r[s]=u,n[u]=s;var c=t[s],l=t[c],m=t[l],p=t[u]*257^u*16843008;i[0][s]=p<<24|p>>>8,i[1][s]=p<<16|p>>>16,i[2][s]=p<<8|p>>>24,i[3][s]=p,p=m*16843009^l*65537^c*257^s*16843008,o[0][u]=p<<24|p>>>8,o[1][u]=p<<16|p>>>16,o[2][u]=p<<8|p>>>24,o[3][u]=p,s===0?s=a=1:(s=c^t[t[t[m^c]]],a^=t[t[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function Gc(t){this._key=KD(t),this._reset()}Gc.blockSize=4*4;Gc.keySize=256/8;Gc.prototype.blockSize=Gc.blockSize;Gc.prototype.keySize=Gc.keySize;Gc.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=(r+1)*4,i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var s=i[o-1];o%e===0?(s=s<<8|s>>>24,s=Oi.SBOX[s>>>24]<<24|Oi.SBOX[s>>>16&255]<<16|Oi.SBOX[s>>>8&255]<<8|Oi.SBOX[s&255],s^=C3e[o/e|0]<<24):e>6&&o%e===4&&(s=Oi.SBOX[s>>>24]<<24|Oi.SBOX[s>>>16&255]<<16|Oi.SBOX[s>>>8&255]<<8|Oi.SBOX[s&255]),i[o]=i[o-e]^s}for(var a=[],d=0;d<n;d++){var u=n-d,c=i[u-(d%4?0:4)];d<4||u<=4?a[d]=c:a[d]=Oi.INV_SUB_MIX[0][Oi.SBOX[c>>>24]]^Oi.INV_SUB_MIX[1][Oi.SBOX[c>>>16&255]]^Oi.INV_SUB_MIX[2][Oi.SBOX[c>>>8&255]]^Oi.INV_SUB_MIX[3][Oi.SBOX[c&255]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=a};Gc.prototype.encryptBlockRaw=function(t){return t=KD(t),GJ(t,this._keySchedule,Oi.SUB_MIX,Oi.SBOX,this._nRounds)};Gc.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=d5.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r};Gc.prototype.decryptBlock=function(t){t=KD(t);var e=t[1];t[1]=t[3],t[3]=e;var r=GJ(t,this._invKeySchedule,Oi.INV_SUB_MIX,Oi.INV_SBOX,this._nRounds),n=d5.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n};Gc.prototype.scrub=function(){UD(this._keySchedule),UD(this._invKeySchedule),UD(this._key)};WJ.exports.AES=Gc});var JJ=W((Xut,VJ)=>{h();var uv=ar().Buffer,O3e=uv.alloc(16,0);function $3e(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function HJ(t){var e=uv.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function I_(t){this.h=t,this.state=uv.alloc(16,0),this.cache=uv.allocUnsafe(0)}I_.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};I_.prototype._multiply=function(){for(var t=$3e(this.h),e=[0,0,0,0],r,n,i,o=-1;++o<128;){for(n=(this.state[~~(o/8)]&1<<7-o%8)!==0,n&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),i=(t[3]&1)!==0,r=3;r>0;r--)t[r]=t[r]>>>1|(t[r-1]&1)<<31;t[0]=t[0]>>>1,i&&(t[0]=t[0]^225<<24)}this.state=HJ(e)};I_.prototype.update=function(t){this.cache=uv.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};I_.prototype.final=function(t,e){return this.cache.length&&this.ghash(uv.concat([this.cache,O3e],16)),this.ghash(HJ([0,t,0,e])),this.state};VJ.exports=I_});var qD=W((elt,XJ)=>{h();var N3e=T_(),_a=ar().Buffer,YJ=Pf(),j3e=cr(),ZJ=JJ(),U3e=dv(),K3e=CD();function q3e(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}function L3e(t,e,r){if(e.length===12)return t._finID=_a.concat([e,_a.from([0,0,0,1])]),_a.concat([e,_a.from([0,0,0,2])]);var n=new ZJ(r),i=e.length,o=i%16;n.update(e),o&&(o=16-o,n.update(_a.alloc(o,0))),n.update(_a.alloc(8,0));var s=i*8,a=_a.alloc(8);a.writeUIntBE(s,0,8),n.update(a),t._finID=n.state;var d=_a.from(t._finID);return K3e(d),d}function Yy(t,e,r,n){YJ.call(this);var i=_a.alloc(4,0);this._cipher=new N3e.AES(e);var o=this._cipher.encryptBlock(i);this._ghash=new ZJ(o),r=L3e(this,r,o),this._prev=_a.from(r),this._cache=_a.allocUnsafe(0),this._secCache=_a.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}j3e(Yy,YJ);Yy.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=_a.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r};Yy.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=U3e(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&q3e(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};Yy.prototype.getAuthTag=function(){if(this._decrypt||!_a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};Yy.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};Yy.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};XJ.exports=Yy});var FD=W((rlt,eY)=>{h();var F3e=T_(),LD=ar().Buffer,QJ=Pf(),z3e=cr();function u5(t,e,r,n){QJ.call(this),this._cipher=new F3e.AES(e),this._prev=LD.from(r),this._cache=LD.allocUnsafe(0),this._secCache=LD.allocUnsafe(0),this._decrypt=n,this._mode=t}z3e(u5,QJ);u5.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};u5.prototype._final=function(){this._cipher.scrub()};eY.exports=u5});var k_=W((ilt,tY)=>{h();var Zy=ar().Buffer,G3e=z3();function W3e(t,e,r,n){if(Zy.isBuffer(t)||(t=Zy.from(t,"binary")),e&&(Zy.isBuffer(e)||(e=Zy.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var i=r/8,o=Zy.alloc(i),s=Zy.alloc(n||0),a=Zy.alloc(0);i>0||n>0;){var d=new G3e;d.update(a),d.update(t),e&&d.update(e),a=d.digest();var u=0;if(i>0){var c=o.length-i;u=Math.min(i,a.length),a.copy(o,c,0,u),i-=u}if(u<a.length&&n>0){var l=s.length-n,m=Math.min(n,a.length-u);a.copy(s,l,u,u+m),n-=m}}return a.fill(0),{key:o,iv:s}}tY.exports=W3e});var oY=W(zD=>{h();var rY=c5(),H3e=qD(),If=ar().Buffer,V3e=FD(),nY=Pf(),J3e=T_(),Y3e=k_(),Z3e=cr();function R_(t,e,r){nY.call(this),this._cache=new l5,this._cipher=new J3e.AES(e),this._prev=If.from(r),this._mode=t,this._autopadding=!0}Z3e(R_,nY);R_.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return If.concat(n)};var X3e=If.alloc(16,16);R_.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(X3e))throw this._cipher.scrub(),new Error("data not multiple of block length")};R_.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function l5(){this.cache=If.allocUnsafe(0)}l5.prototype.add=function(t){this.cache=If.concat([this.cache,t])};l5.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};l5.prototype.flush=function(){for(var t=16-this.cache.length,e=If.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return If.concat([this.cache,e])};function iY(t,e,r){var n=rY[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=If.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if(typeof r=="string"&&(r=If.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return n.type==="stream"?new V3e(n.module,e,r):n.type==="auth"?new H3e(n.module,e,r):new R_(n.module,e,r)}function Q3e(t,e){var r=rY[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=Y3e(e,!1,r.key,r.iv);return iY(t,n.key,n.iv)}zD.createCipheriv=iY;zD.createCipher=Q3e});var dY=W(GD=>{h();var e5e=qD(),lv=ar().Buffer,sY=c5(),t5e=FD(),aY=Pf(),r5e=T_(),n5e=k_(),i5e=cr();function D_(t,e,r){aY.call(this),this._cache=new f5,this._last=void 0,this._cipher=new r5e.AES(e),this._prev=lv.from(r),this._mode=t,this._autopadding=!0}i5e(D_,aY);D_.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return lv.concat(n)};D_.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return o5e(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};D_.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function f5(){this.cache=lv.allocUnsafe(0)}f5.prototype.add=function(t){this.cache=lv.concat([this.cache,t])};f5.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};f5.prototype.flush=function(){if(this.cache.length)return this.cache};function o5e(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var r=-1;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function cY(t,e,r){var n=sY[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof r=="string"&&(r=lv.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if(typeof e=="string"&&(e=lv.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return n.type==="stream"?new t5e(n.module,e,r,!0):n.type==="auth"?new e5e(n.module,e,r,!0):new D_(n.module,e,r)}function s5e(t,e){var r=sY[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=n5e(e,!1,r.key,r.iv);return cY(t,n.key,n.iv)}GD.createDecipher=s5e;GD.createDecipheriv=cY});var h5=W(Gd=>{h();var uY=oY(),lY=dY(),a5e=ND();function c5e(){return Object.keys(a5e)}Gd.createCipher=Gd.Cipher=uY.createCipher;Gd.createCipheriv=Gd.Cipheriv=uY.createCipheriv;Gd.createDecipher=Gd.Decipher=lY.createDecipher;Gd.createDecipheriv=Gd.Decipheriv=lY.createDecipheriv;Gd.listCiphers=Gd.getCiphers=c5e});var fY=W(kf=>{h();kf["des-ecb"]={key:8,iv:0};kf["des-cbc"]=kf.des={key:8,iv:8};kf["des-ede3-cbc"]=kf.des3={key:24,iv:8};kf["des-ede3"]={key:24,iv:0};kf["des-ede-cbc"]={key:16,iv:8};kf["des-ede"]={key:16,iv:0}});var gY=W(Wd=>{h();var hY=TJ(),WD=h5(),yp=c5(),Rf=fY(),pY=k_();function d5e(t,e){t=t.toLowerCase();var r,n;if(yp[t])r=yp[t].key,n=yp[t].iv;else if(Rf[t])r=Rf[t].key*8,n=Rf[t].iv;else throw new TypeError("invalid suite type");var i=pY(e,!1,r,n);return mY(t,i.key,i.iv)}function u5e(t,e){t=t.toLowerCase();var r,n;if(yp[t])r=yp[t].key,n=yp[t].iv;else if(Rf[t])r=Rf[t].key*8,n=Rf[t].iv;else throw new TypeError("invalid suite type");var i=pY(e,!1,r,n);return yY(t,i.key,i.iv)}function mY(t,e,r){if(t=t.toLowerCase(),yp[t])return WD.createCipheriv(t,e,r);if(Rf[t])return new hY({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function yY(t,e,r){if(t=t.toLowerCase(),yp[t])return WD.createDecipheriv(t,e,r);if(Rf[t])return new hY({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function l5e(){return Object.keys(Rf).concat(WD.getCiphers())}Wd.createCipher=Wd.Cipher=d5e;Wd.createCipheriv=Wd.Cipheriv=mY;Wd.createDecipher=Wd.Decipher=u5e;Wd.createDecipheriv=Wd.Decipheriv=yY;Wd.listCiphers=Wd.getCiphers=l5e});var HD=W(()=>{h()});var zi=W((bY,VD)=>{h();(function(t,e){"use strict";function r(q,T){if(!q)throw new Error(T||"Assertion failed")}function n(q,T){q.super_=T;var E=function(){};E.prototype=T.prototype,q.prototype=new E,q.prototype.constructor=q}function i(q,T,E){if(i.isBN(q))return q;this.negative=0,this.words=null,this.length=0,this.red=null,q!==null&&((T==="le"||T==="be")&&(E=T,T=10),this._init(q||0,T||10,E||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=HD().Buffer}catch{}i.isBN=function(T){return T instanceof i?!0:T!==null&&typeof T=="object"&&T.constructor.wordSize===i.wordSize&&Array.isArray(T.words)},i.max=function(T,E){return T.cmp(E)>0?T:E},i.min=function(T,E){return T.cmp(E)<0?T:E},i.prototype._init=function(T,E,k){if(typeof T=="number")return this._initNumber(T,E,k);if(typeof T=="object")return this._initArray(T,E,k);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),T=T.toString().replace(/\s+/g,"");var f=0;T[0]==="-"&&(f++,this.negative=1),f<T.length&&(E===16?this._parseHex(T,f,k):(this._parseBase(T,E,f),k==="le"&&this._initArray(this.toArray(),E,k)))},i.prototype._initNumber=function(T,E,k){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[T&67108863],this.length=1):T<4503599627370496?(this.words=[T&67108863,T/67108864&67108863],this.length=2):(r(T<9007199254740992),this.words=[T&67108863,T/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),E,k)},i.prototype._initArray=function(T,E,k){if(r(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var y,w,_=0;if(k==="be")for(f=T.length-1,y=0;f>=0;f-=3)w=T[f]|T[f-1]<<8|T[f-2]<<16,this.words[y]|=w<<_&67108863,this.words[y+1]=w>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);else if(k==="le")for(f=0,y=0;f<T.length;f+=3)w=T[f]|T[f+1]<<8|T[f+2]<<16,this.words[y]|=w<<_&67108863,this.words[y+1]=w>>>26-_&67108863,_+=24,_>=26&&(_-=26,y++);return this.strip()};function s(q,T){var E=q.charCodeAt(T);return E>=65&&E<=70?E-55:E>=97&&E<=102?E-87:E-48&15}function a(q,T,E){var k=s(q,E);return E-1>=T&&(k|=s(q,E-1)<<4),k}i.prototype._parseHex=function(T,E,k){this.length=Math.ceil((T.length-E)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var y=0,w=0,_;if(k==="be")for(f=T.length-1;f>=E;f-=2)_=a(T,E,f)<<y,this.words[w]|=_&67108863,y>=18?(y-=18,w+=1,this.words[w]|=_>>>26):y+=8;else{var x=T.length-E;for(f=x%2===0?E+1:E;f<T.length;f+=2)_=a(T,E,f)<<y,this.words[w]|=_&67108863,y>=18?(y-=18,w+=1,this.words[w]|=_>>>26):y+=8}this.strip()};function d(q,T,E,k){for(var f=0,y=Math.min(q.length,E),w=T;w<y;w++){var _=q.charCodeAt(w)-48;f*=k,_>=49?f+=_-49+10:_>=17?f+=_-17+10:f+=_}return f}i.prototype._parseBase=function(T,E,k){this.words=[0],this.length=1;for(var f=0,y=1;y<=67108863;y*=E)f++;f--,y=y/E|0;for(var w=T.length-k,_=w%f,x=Math.min(w,w-_)+k,v=0,D=k;D<x;D+=f)v=d(T,D,D+f,E),this.imuln(y),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(_!==0){var K=1;for(v=d(T,D,T.length,E),D=0;D<_;D++)K*=E;this.imuln(K),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},i.prototype.copy=function(T){T.words=new Array(this.length);for(var E=0;E<this.length;E++)T.words[E]=this.words[E];T.length=this.length,T.negative=this.negative,T.red=this.red},i.prototype.clone=function(){var T=new i(null);return this.copy(T),T},i.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(T,E){T=T||10,E=E|0||1;var k;if(T===16||T==="hex"){k="";for(var f=0,y=0,w=0;w<this.length;w++){var _=this.words[w],x=((_<<f|y)&16777215).toString(16);y=_>>>24-f&16777215,y!==0||w!==this.length-1?k=u[6-x.length]+x+k:k=x+k,f+=2,f>=26&&(f-=26,w--)}for(y!==0&&(k=y.toString(16)+k);k.length%E!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(T===(T|0)&&T>=2&&T<=36){var v=c[T],D=l[T];k="";var K=this.clone();for(K.negative=0;!K.isZero();){var M=K.modn(D).toString(T);K=K.idivn(D),K.isZero()?k=M+k:k=u[v-M.length]+M+k}for(this.isZero()&&(k="0"+k);k.length%E!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=this.words[1]*67108864:this.length===3&&this.words[2]===1?T+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(T,E){return r(typeof o<"u"),this.toArrayLike(o,T,E)},i.prototype.toArray=function(T,E){return this.toArrayLike(Array,T,E)},i.prototype.toArrayLike=function(T,E,k){var f=this.byteLength(),y=k||Math.max(1,f);r(f<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0"),this.strip();var w=E==="le",_=new T(y),x,v,D=this.clone();if(w){for(v=0;!D.isZero();v++)x=D.andln(255),D.iushrn(8),_[v]=x;for(;v<y;v++)_[v]=0}else{for(v=0;v<y-f;v++)_[v]=0;for(v=0;!D.isZero();v++)x=D.andln(255),D.iushrn(8),_[y-v-1]=x}return _},Math.clz32?i.prototype._countBits=function(T){return 32-Math.clz32(T)}:i.prototype._countBits=function(T){var E=T,k=0;return E>=4096&&(k+=13,E>>>=13),E>=64&&(k+=7,E>>>=7),E>=8&&(k+=4,E>>>=4),E>=2&&(k+=2,E>>>=2),k+E},i.prototype._zeroBits=function(T){if(T===0)return 26;var E=T,k=0;return E&8191||(k+=13,E>>>=13),E&127||(k+=7,E>>>=7),E&15||(k+=4,E>>>=4),E&3||(k+=2,E>>>=2),E&1||k++,k},i.prototype.bitLength=function(){var T=this.words[this.length-1],E=this._countBits(T);return(this.length-1)*26+E};function m(q){for(var T=new Array(q.bitLength()),E=0;E<T.length;E++){var k=E/26|0,f=E%26;T[E]=(q.words[k]&1<<f)>>>f}return T}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,E=0;E<this.length;E++){var k=this._zeroBits(this.words[E]);if(T+=k,k!==26)break}return T},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},i.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var E=0;E<T.length;E++)this.words[E]=this.words[E]|T.words[E];return this.strip()},i.prototype.ior=function(T){return r((this.negative|T.negative)===0),this.iuor(T)},i.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},i.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},i.prototype.iuand=function(T){var E;this.length>T.length?E=T:E=this;for(var k=0;k<E.length;k++)this.words[k]=this.words[k]&T.words[k];return this.length=E.length,this.strip()},i.prototype.iand=function(T){return r((this.negative|T.negative)===0),this.iuand(T)},i.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},i.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},i.prototype.iuxor=function(T){var E,k;this.length>T.length?(E=this,k=T):(E=T,k=this);for(var f=0;f<k.length;f++)this.words[f]=E.words[f]^k.words[f];if(this!==E)for(;f<E.length;f++)this.words[f]=E.words[f];return this.length=E.length,this.strip()},i.prototype.ixor=function(T){return r((this.negative|T.negative)===0),this.iuxor(T)},i.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},i.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},i.prototype.inotn=function(T){r(typeof T=="number"&&T>=0);var E=Math.ceil(T/26)|0,k=T%26;this._expand(E),k>0&&E--;for(var f=0;f<E;f++)this.words[f]=~this.words[f]&67108863;return k>0&&(this.words[f]=~this.words[f]&67108863>>26-k),this.strip()},i.prototype.notn=function(T){return this.clone().inotn(T)},i.prototype.setn=function(T,E){r(typeof T=="number"&&T>=0);var k=T/26|0,f=T%26;return this._expand(k+1),E?this.words[k]=this.words[k]|1<<f:this.words[k]=this.words[k]&~(1<<f),this.strip()},i.prototype.iadd=function(T){var E;if(this.negative!==0&&T.negative===0)return this.negative=0,E=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,E=this.isub(T),T.negative=1,E._normSign();var k,f;this.length>T.length?(k=this,f=T):(k=T,f=this);for(var y=0,w=0;w<f.length;w++)E=(k.words[w]|0)+(f.words[w]|0)+y,this.words[w]=E&67108863,y=E>>>26;for(;y!==0&&w<k.length;w++)E=(k.words[w]|0)+y,this.words[w]=E&67108863,y=E>>>26;if(this.length=k.length,y!==0)this.words[this.length]=y,this.length++;else if(k!==this)for(;w<k.length;w++)this.words[w]=k.words[w];return this},i.prototype.add=function(T){var E;return T.negative!==0&&this.negative===0?(T.negative=0,E=this.sub(T),T.negative^=1,E):T.negative===0&&this.negative!==0?(this.negative=0,E=T.sub(this),this.negative=1,E):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},i.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var E=this.iadd(T);return T.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var k=this.cmp(T);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,y;k>0?(f=this,y=T):(f=T,y=this);for(var w=0,_=0;_<y.length;_++)E=(f.words[_]|0)-(y.words[_]|0)+w,w=E>>26,this.words[_]=E&67108863;for(;w!==0&&_<f.length;_++)E=(f.words[_]|0)+w,w=E>>26,this.words[_]=E&67108863;if(w===0&&_<f.length&&f!==this)for(;_<f.length;_++)this.words[_]=f.words[_];return this.length=Math.max(this.length,_),f!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(T){return this.clone().isub(T)};function p(q,T,E){E.negative=T.negative^q.negative;var k=q.length+T.length|0;E.length=k,k=k-1|0;var f=q.words[0]|0,y=T.words[0]|0,w=f*y,_=w&67108863,x=w/67108864|0;E.words[0]=_;for(var v=1;v<k;v++){for(var D=x>>>26,K=x&67108863,M=Math.min(v,T.length-1),j=Math.max(0,v-q.length+1);j<=M;j++){var J=v-j|0;f=q.words[J]|0,y=T.words[j]|0,w=f*y+K,D+=w/67108864|0,K=w&67108863}E.words[v]=K|0,x=D|0}return x!==0?E.words[v]=x|0:E.length--,E.strip()}var g=function(T,E,k){var f=T.words,y=E.words,w=k.words,_=0,x,v,D,K=f[0]|0,M=K&8191,j=K>>>13,J=f[1]|0,Z=J&8191,V=J>>>13,H=f[2]|0,X=H&8191,ee=H>>>13,ue=f[3]|0,ae=ue&8191,ce=ue>>>13,pe=f[4]|0,Ee=pe&8191,Ue=pe>>>13,le=f[5]|0,ge=le&8191,ve=le>>>13,Ce=f[6]|0,Ie=Ce&8191,je=Ce>>>13,gt=f[7]|0,Pe=gt&8191,De=gt>>>13,It=f[8]|0,we=It&8191,Se=It>>>13,Kr=f[9]|0,Fe=Kr&8191,He=Kr>>>13,js=y[0]|0,ft=js&8191,Rt=js>>>13,yi=y[1]|0,At=yi&8191,Ze=yi>>>13,Mc=y[2]|0,Pt=Mc&8191,$t=Mc>>>13,ny=y[3]|0,Bt=ny&8191,Wt=ny>>>13,Bc=y[4]|0,Ht=Bc&8191,Lt=Bc>>>13,iy=y[5]|0,Nt=iy&8191,Ft=iy>>>13,oy=y[6]|0,zt=oy&8191,Vt=oy>>>13,Nh=y[7]|0,Q=Nh&8191,Y=Nh>>>13,te=y[8]|0,re=te&8191,ie=te>>>13,$e=y[9]|0,ke=$e&8191,Ne=$e>>>13;k.negative=T.negative^E.negative,k.length=19,x=Math.imul(M,ft),v=Math.imul(M,Rt),v=v+Math.imul(j,ft)|0,D=Math.imul(j,Rt);var Ar=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,x=Math.imul(Z,ft),v=Math.imul(Z,Rt),v=v+Math.imul(V,ft)|0,D=Math.imul(V,Rt),x=x+Math.imul(M,At)|0,v=v+Math.imul(M,Ze)|0,v=v+Math.imul(j,At)|0,D=D+Math.imul(j,Ze)|0;var jt=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(jt>>>26)|0,jt&=67108863,x=Math.imul(X,ft),v=Math.imul(X,Rt),v=v+Math.imul(ee,ft)|0,D=Math.imul(ee,Rt),x=x+Math.imul(Z,At)|0,v=v+Math.imul(Z,Ze)|0,v=v+Math.imul(V,At)|0,D=D+Math.imul(V,Ze)|0,x=x+Math.imul(M,Pt)|0,v=v+Math.imul(M,$t)|0,v=v+Math.imul(j,Pt)|0,D=D+Math.imul(j,$t)|0;var dt=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(dt>>>26)|0,dt&=67108863,x=Math.imul(ae,ft),v=Math.imul(ae,Rt),v=v+Math.imul(ce,ft)|0,D=Math.imul(ce,Rt),x=x+Math.imul(X,At)|0,v=v+Math.imul(X,Ze)|0,v=v+Math.imul(ee,At)|0,D=D+Math.imul(ee,Ze)|0,x=x+Math.imul(Z,Pt)|0,v=v+Math.imul(Z,$t)|0,v=v+Math.imul(V,Pt)|0,D=D+Math.imul(V,$t)|0,x=x+Math.imul(M,Bt)|0,v=v+Math.imul(M,Wt)|0,v=v+Math.imul(j,Bt)|0,D=D+Math.imul(j,Wt)|0;var Jr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,x=Math.imul(Ee,ft),v=Math.imul(Ee,Rt),v=v+Math.imul(Ue,ft)|0,D=Math.imul(Ue,Rt),x=x+Math.imul(ae,At)|0,v=v+Math.imul(ae,Ze)|0,v=v+Math.imul(ce,At)|0,D=D+Math.imul(ce,Ze)|0,x=x+Math.imul(X,Pt)|0,v=v+Math.imul(X,$t)|0,v=v+Math.imul(ee,Pt)|0,D=D+Math.imul(ee,$t)|0,x=x+Math.imul(Z,Bt)|0,v=v+Math.imul(Z,Wt)|0,v=v+Math.imul(V,Bt)|0,D=D+Math.imul(V,Wt)|0,x=x+Math.imul(M,Ht)|0,v=v+Math.imul(M,Lt)|0,v=v+Math.imul(j,Ht)|0,D=D+Math.imul(j,Lt)|0;var an=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(an>>>26)|0,an&=67108863,x=Math.imul(ge,ft),v=Math.imul(ge,Rt),v=v+Math.imul(ve,ft)|0,D=Math.imul(ve,Rt),x=x+Math.imul(Ee,At)|0,v=v+Math.imul(Ee,Ze)|0,v=v+Math.imul(Ue,At)|0,D=D+Math.imul(Ue,Ze)|0,x=x+Math.imul(ae,Pt)|0,v=v+Math.imul(ae,$t)|0,v=v+Math.imul(ce,Pt)|0,D=D+Math.imul(ce,$t)|0,x=x+Math.imul(X,Bt)|0,v=v+Math.imul(X,Wt)|0,v=v+Math.imul(ee,Bt)|0,D=D+Math.imul(ee,Wt)|0,x=x+Math.imul(Z,Ht)|0,v=v+Math.imul(Z,Lt)|0,v=v+Math.imul(V,Ht)|0,D=D+Math.imul(V,Lt)|0,x=x+Math.imul(M,Nt)|0,v=v+Math.imul(M,Ft)|0,v=v+Math.imul(j,Nt)|0,D=D+Math.imul(j,Ft)|0;var Wr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,x=Math.imul(Ie,ft),v=Math.imul(Ie,Rt),v=v+Math.imul(je,ft)|0,D=Math.imul(je,Rt),x=x+Math.imul(ge,At)|0,v=v+Math.imul(ge,Ze)|0,v=v+Math.imul(ve,At)|0,D=D+Math.imul(ve,Ze)|0,x=x+Math.imul(Ee,Pt)|0,v=v+Math.imul(Ee,$t)|0,v=v+Math.imul(Ue,Pt)|0,D=D+Math.imul(Ue,$t)|0,x=x+Math.imul(ae,Bt)|0,v=v+Math.imul(ae,Wt)|0,v=v+Math.imul(ce,Bt)|0,D=D+Math.imul(ce,Wt)|0,x=x+Math.imul(X,Ht)|0,v=v+Math.imul(X,Lt)|0,v=v+Math.imul(ee,Ht)|0,D=D+Math.imul(ee,Lt)|0,x=x+Math.imul(Z,Nt)|0,v=v+Math.imul(Z,Ft)|0,v=v+Math.imul(V,Nt)|0,D=D+Math.imul(V,Ft)|0,x=x+Math.imul(M,zt)|0,v=v+Math.imul(M,Vt)|0,v=v+Math.imul(j,zt)|0,D=D+Math.imul(j,Vt)|0;var sr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(sr>>>26)|0,sr&=67108863,x=Math.imul(Pe,ft),v=Math.imul(Pe,Rt),v=v+Math.imul(De,ft)|0,D=Math.imul(De,Rt),x=x+Math.imul(Ie,At)|0,v=v+Math.imul(Ie,Ze)|0,v=v+Math.imul(je,At)|0,D=D+Math.imul(je,Ze)|0,x=x+Math.imul(ge,Pt)|0,v=v+Math.imul(ge,$t)|0,v=v+Math.imul(ve,Pt)|0,D=D+Math.imul(ve,$t)|0,x=x+Math.imul(Ee,Bt)|0,v=v+Math.imul(Ee,Wt)|0,v=v+Math.imul(Ue,Bt)|0,D=D+Math.imul(Ue,Wt)|0,x=x+Math.imul(ae,Ht)|0,v=v+Math.imul(ae,Lt)|0,v=v+Math.imul(ce,Ht)|0,D=D+Math.imul(ce,Lt)|0,x=x+Math.imul(X,Nt)|0,v=v+Math.imul(X,Ft)|0,v=v+Math.imul(ee,Nt)|0,D=D+Math.imul(ee,Ft)|0,x=x+Math.imul(Z,zt)|0,v=v+Math.imul(Z,Vt)|0,v=v+Math.imul(V,zt)|0,D=D+Math.imul(V,Vt)|0,x=x+Math.imul(M,Q)|0,v=v+Math.imul(M,Y)|0,v=v+Math.imul(j,Q)|0,D=D+Math.imul(j,Y)|0;var Yr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,x=Math.imul(we,ft),v=Math.imul(we,Rt),v=v+Math.imul(Se,ft)|0,D=Math.imul(Se,Rt),x=x+Math.imul(Pe,At)|0,v=v+Math.imul(Pe,Ze)|0,v=v+Math.imul(De,At)|0,D=D+Math.imul(De,Ze)|0,x=x+Math.imul(Ie,Pt)|0,v=v+Math.imul(Ie,$t)|0,v=v+Math.imul(je,Pt)|0,D=D+Math.imul(je,$t)|0,x=x+Math.imul(ge,Bt)|0,v=v+Math.imul(ge,Wt)|0,v=v+Math.imul(ve,Bt)|0,D=D+Math.imul(ve,Wt)|0,x=x+Math.imul(Ee,Ht)|0,v=v+Math.imul(Ee,Lt)|0,v=v+Math.imul(Ue,Ht)|0,D=D+Math.imul(Ue,Lt)|0,x=x+Math.imul(ae,Nt)|0,v=v+Math.imul(ae,Ft)|0,v=v+Math.imul(ce,Nt)|0,D=D+Math.imul(ce,Ft)|0,x=x+Math.imul(X,zt)|0,v=v+Math.imul(X,Vt)|0,v=v+Math.imul(ee,zt)|0,D=D+Math.imul(ee,Vt)|0,x=x+Math.imul(Z,Q)|0,v=v+Math.imul(Z,Y)|0,v=v+Math.imul(V,Q)|0,D=D+Math.imul(V,Y)|0,x=x+Math.imul(M,re)|0,v=v+Math.imul(M,ie)|0,v=v+Math.imul(j,re)|0,D=D+Math.imul(j,ie)|0;var Rr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x=Math.imul(Fe,ft),v=Math.imul(Fe,Rt),v=v+Math.imul(He,ft)|0,D=Math.imul(He,Rt),x=x+Math.imul(we,At)|0,v=v+Math.imul(we,Ze)|0,v=v+Math.imul(Se,At)|0,D=D+Math.imul(Se,Ze)|0,x=x+Math.imul(Pe,Pt)|0,v=v+Math.imul(Pe,$t)|0,v=v+Math.imul(De,Pt)|0,D=D+Math.imul(De,$t)|0,x=x+Math.imul(Ie,Bt)|0,v=v+Math.imul(Ie,Wt)|0,v=v+Math.imul(je,Bt)|0,D=D+Math.imul(je,Wt)|0,x=x+Math.imul(ge,Ht)|0,v=v+Math.imul(ge,Lt)|0,v=v+Math.imul(ve,Ht)|0,D=D+Math.imul(ve,Lt)|0,x=x+Math.imul(Ee,Nt)|0,v=v+Math.imul(Ee,Ft)|0,v=v+Math.imul(Ue,Nt)|0,D=D+Math.imul(Ue,Ft)|0,x=x+Math.imul(ae,zt)|0,v=v+Math.imul(ae,Vt)|0,v=v+Math.imul(ce,zt)|0,D=D+Math.imul(ce,Vt)|0,x=x+Math.imul(X,Q)|0,v=v+Math.imul(X,Y)|0,v=v+Math.imul(ee,Q)|0,D=D+Math.imul(ee,Y)|0,x=x+Math.imul(Z,re)|0,v=v+Math.imul(Z,ie)|0,v=v+Math.imul(V,re)|0,D=D+Math.imul(V,ie)|0,x=x+Math.imul(M,ke)|0,v=v+Math.imul(M,Ne)|0,v=v+Math.imul(j,ke)|0,D=D+Math.imul(j,Ne)|0;var Us=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Us>>>26)|0,Us&=67108863,x=Math.imul(Fe,At),v=Math.imul(Fe,Ze),v=v+Math.imul(He,At)|0,D=Math.imul(He,Ze),x=x+Math.imul(we,Pt)|0,v=v+Math.imul(we,$t)|0,v=v+Math.imul(Se,Pt)|0,D=D+Math.imul(Se,$t)|0,x=x+Math.imul(Pe,Bt)|0,v=v+Math.imul(Pe,Wt)|0,v=v+Math.imul(De,Bt)|0,D=D+Math.imul(De,Wt)|0,x=x+Math.imul(Ie,Ht)|0,v=v+Math.imul(Ie,Lt)|0,v=v+Math.imul(je,Ht)|0,D=D+Math.imul(je,Lt)|0,x=x+Math.imul(ge,Nt)|0,v=v+Math.imul(ge,Ft)|0,v=v+Math.imul(ve,Nt)|0,D=D+Math.imul(ve,Ft)|0,x=x+Math.imul(Ee,zt)|0,v=v+Math.imul(Ee,Vt)|0,v=v+Math.imul(Ue,zt)|0,D=D+Math.imul(Ue,Vt)|0,x=x+Math.imul(ae,Q)|0,v=v+Math.imul(ae,Y)|0,v=v+Math.imul(ce,Q)|0,D=D+Math.imul(ce,Y)|0,x=x+Math.imul(X,re)|0,v=v+Math.imul(X,ie)|0,v=v+Math.imul(ee,re)|0,D=D+Math.imul(ee,ie)|0,x=x+Math.imul(Z,ke)|0,v=v+Math.imul(Z,Ne)|0,v=v+Math.imul(V,ke)|0,D=D+Math.imul(V,Ne)|0;var gi=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(gi>>>26)|0,gi&=67108863,x=Math.imul(Fe,Pt),v=Math.imul(Fe,$t),v=v+Math.imul(He,Pt)|0,D=Math.imul(He,$t),x=x+Math.imul(we,Bt)|0,v=v+Math.imul(we,Wt)|0,v=v+Math.imul(Se,Bt)|0,D=D+Math.imul(Se,Wt)|0,x=x+Math.imul(Pe,Ht)|0,v=v+Math.imul(Pe,Lt)|0,v=v+Math.imul(De,Ht)|0,D=D+Math.imul(De,Lt)|0,x=x+Math.imul(Ie,Nt)|0,v=v+Math.imul(Ie,Ft)|0,v=v+Math.imul(je,Nt)|0,D=D+Math.imul(je,Ft)|0,x=x+Math.imul(ge,zt)|0,v=v+Math.imul(ge,Vt)|0,v=v+Math.imul(ve,zt)|0,D=D+Math.imul(ve,Vt)|0,x=x+Math.imul(Ee,Q)|0,v=v+Math.imul(Ee,Y)|0,v=v+Math.imul(Ue,Q)|0,D=D+Math.imul(Ue,Y)|0,x=x+Math.imul(ae,re)|0,v=v+Math.imul(ae,ie)|0,v=v+Math.imul(ce,re)|0,D=D+Math.imul(ce,ie)|0,x=x+Math.imul(X,ke)|0,v=v+Math.imul(X,Ne)|0,v=v+Math.imul(ee,ke)|0,D=D+Math.imul(ee,Ne)|0;var Di=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Di>>>26)|0,Di&=67108863,x=Math.imul(Fe,Bt),v=Math.imul(Fe,Wt),v=v+Math.imul(He,Bt)|0,D=Math.imul(He,Wt),x=x+Math.imul(we,Ht)|0,v=v+Math.imul(we,Lt)|0,v=v+Math.imul(Se,Ht)|0,D=D+Math.imul(Se,Lt)|0,x=x+Math.imul(Pe,Nt)|0,v=v+Math.imul(Pe,Ft)|0,v=v+Math.imul(De,Nt)|0,D=D+Math.imul(De,Ft)|0,x=x+Math.imul(Ie,zt)|0,v=v+Math.imul(Ie,Vt)|0,v=v+Math.imul(je,zt)|0,D=D+Math.imul(je,Vt)|0,x=x+Math.imul(ge,Q)|0,v=v+Math.imul(ge,Y)|0,v=v+Math.imul(ve,Q)|0,D=D+Math.imul(ve,Y)|0,x=x+Math.imul(Ee,re)|0,v=v+Math.imul(Ee,ie)|0,v=v+Math.imul(Ue,re)|0,D=D+Math.imul(Ue,ie)|0,x=x+Math.imul(ae,ke)|0,v=v+Math.imul(ae,Ne)|0,v=v+Math.imul(ce,ke)|0,D=D+Math.imul(ce,Ne)|0;var Cr=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,x=Math.imul(Fe,Ht),v=Math.imul(Fe,Lt),v=v+Math.imul(He,Ht)|0,D=Math.imul(He,Lt),x=x+Math.imul(we,Nt)|0,v=v+Math.imul(we,Ft)|0,v=v+Math.imul(Se,Nt)|0,D=D+Math.imul(Se,Ft)|0,x=x+Math.imul(Pe,zt)|0,v=v+Math.imul(Pe,Vt)|0,v=v+Math.imul(De,zt)|0,D=D+Math.imul(De,Vt)|0,x=x+Math.imul(Ie,Q)|0,v=v+Math.imul(Ie,Y)|0,v=v+Math.imul(je,Q)|0,D=D+Math.imul(je,Y)|0,x=x+Math.imul(ge,re)|0,v=v+Math.imul(ge,ie)|0,v=v+Math.imul(ve,re)|0,D=D+Math.imul(ve,ie)|0,x=x+Math.imul(Ee,ke)|0,v=v+Math.imul(Ee,Ne)|0,v=v+Math.imul(Ue,ke)|0,D=D+Math.imul(Ue,Ne)|0;var bi=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(bi>>>26)|0,bi&=67108863,x=Math.imul(Fe,Nt),v=Math.imul(Fe,Ft),v=v+Math.imul(He,Nt)|0,D=Math.imul(He,Ft),x=x+Math.imul(we,zt)|0,v=v+Math.imul(we,Vt)|0,v=v+Math.imul(Se,zt)|0,D=D+Math.imul(Se,Vt)|0,x=x+Math.imul(Pe,Q)|0,v=v+Math.imul(Pe,Y)|0,v=v+Math.imul(De,Q)|0,D=D+Math.imul(De,Y)|0,x=x+Math.imul(Ie,re)|0,v=v+Math.imul(Ie,ie)|0,v=v+Math.imul(je,re)|0,D=D+Math.imul(je,ie)|0,x=x+Math.imul(ge,ke)|0,v=v+Math.imul(ge,Ne)|0,v=v+Math.imul(ve,ke)|0,D=D+Math.imul(ve,Ne)|0;var Mi=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,x=Math.imul(Fe,zt),v=Math.imul(Fe,Vt),v=v+Math.imul(He,zt)|0,D=Math.imul(He,Vt),x=x+Math.imul(we,Q)|0,v=v+Math.imul(we,Y)|0,v=v+Math.imul(Se,Q)|0,D=D+Math.imul(Se,Y)|0,x=x+Math.imul(Pe,re)|0,v=v+Math.imul(Pe,ie)|0,v=v+Math.imul(De,re)|0,D=D+Math.imul(De,ie)|0,x=x+Math.imul(Ie,ke)|0,v=v+Math.imul(Ie,Ne)|0,v=v+Math.imul(je,ke)|0,D=D+Math.imul(je,Ne)|0;var oo=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(oo>>>26)|0,oo&=67108863,x=Math.imul(Fe,Q),v=Math.imul(Fe,Y),v=v+Math.imul(He,Q)|0,D=Math.imul(He,Y),x=x+Math.imul(we,re)|0,v=v+Math.imul(we,ie)|0,v=v+Math.imul(Se,re)|0,D=D+Math.imul(Se,ie)|0,x=x+Math.imul(Pe,ke)|0,v=v+Math.imul(Pe,Ne)|0,v=v+Math.imul(De,ke)|0,D=D+Math.imul(De,Ne)|0;var Ks=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,x=Math.imul(Fe,re),v=Math.imul(Fe,ie),v=v+Math.imul(He,re)|0,D=Math.imul(He,ie),x=x+Math.imul(we,ke)|0,v=v+Math.imul(we,Ne)|0,v=v+Math.imul(Se,ke)|0,D=D+Math.imul(Se,Ne)|0;var Mo=(_+x|0)+((v&8191)<<13)|0;_=(D+(v>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,x=Math.imul(Fe,ke),v=Math.imul(Fe,Ne),v=v+Math.imul(He,ke)|0,D=Math.imul(He,Ne);var Ga=(_+x|0)+((v&8191)<<13)|0;return _=(D+(v>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,w[0]=Ar,w[1]=jt,w[2]=dt,w[3]=Jr,w[4]=an,w[5]=Wr,w[6]=sr,w[7]=Yr,w[8]=Rr,w[9]=Us,w[10]=gi,w[11]=Di,w[12]=Cr,w[13]=bi,w[14]=Mi,w[15]=oo,w[16]=Ks,w[17]=Mo,w[18]=Ga,_!==0&&(w[19]=_,k.length++),k};Math.imul||(g=p);function b(q,T,E){E.negative=T.negative^q.negative,E.length=q.length+T.length;for(var k=0,f=0,y=0;y<E.length-1;y++){var w=f;f=0;for(var _=k&67108863,x=Math.min(y,T.length-1),v=Math.max(0,y-q.length+1);v<=x;v++){var D=y-v,K=q.words[D]|0,M=T.words[v]|0,j=K*M,J=j&67108863;w=w+(j/67108864|0)|0,J=J+_|0,_=J&67108863,w=w+(J>>>26)|0,f+=w>>>26,w&=67108863}E.words[y]=_,k=w,w=f}return k!==0?E.words[y]=k:E.length--,E.strip()}function S(q,T,E){var k=new A;return k.mulp(q,T,E)}i.prototype.mulTo=function(T,E){var k,f=this.length+T.length;return this.length===10&&T.length===10?k=g(this,T,E):f<63?k=p(this,T,E):f<1024?k=b(this,T,E):k=S(this,T,E),k};function A(q,T){this.x=q,this.y=T}A.prototype.makeRBT=function(T){for(var E=new Array(T),k=i.prototype._countBits(T)-1,f=0;f<T;f++)E[f]=this.revBin(f,k,T);return E},A.prototype.revBin=function(T,E,k){if(T===0||T===k-1)return T;for(var f=0,y=0;y<E;y++)f|=(T&1)<<E-y-1,T>>=1;return f},A.prototype.permute=function(T,E,k,f,y,w){for(var _=0;_<w;_++)f[_]=E[T[_]],y[_]=k[T[_]]},A.prototype.transform=function(T,E,k,f,y,w){this.permute(w,T,E,k,f,y);for(var _=1;_<y;_<<=1)for(var x=_<<1,v=Math.cos(2*Math.PI/x),D=Math.sin(2*Math.PI/x),K=0;K<y;K+=x)for(var M=v,j=D,J=0;J<_;J++){var Z=k[K+J],V=f[K+J],H=k[K+J+_],X=f[K+J+_],ee=M*H-j*X;X=M*X+j*H,H=ee,k[K+J]=Z+H,f[K+J]=V+X,k[K+J+_]=Z-H,f[K+J+_]=V-X,J!==x&&(ee=v*M-D*j,j=v*j+D*M,M=ee)}},A.prototype.guessLen13b=function(T,E){var k=Math.max(E,T)|1,f=k&1,y=0;for(k=k/2|0;k;k=k>>>1)y++;return 1<<y+1+f},A.prototype.conjugate=function(T,E,k){if(!(k<=1))for(var f=0;f<k/2;f++){var y=T[f];T[f]=T[k-f-1],T[k-f-1]=y,y=E[f],E[f]=-E[k-f-1],E[k-f-1]=-y}},A.prototype.normalize13b=function(T,E){for(var k=0,f=0;f<E/2;f++){var y=Math.round(T[2*f+1]/E)*8192+Math.round(T[2*f]/E)+k;T[f]=y&67108863,y<67108864?k=0:k=y/67108864|0}return T},A.prototype.convert13b=function(T,E,k,f){for(var y=0,w=0;w<E;w++)y=y+(T[w]|0),k[2*w]=y&8191,y=y>>>13,k[2*w+1]=y&8191,y=y>>>13;for(w=2*E;w<f;++w)k[w]=0;r(y===0),r((y&-8192)===0)},A.prototype.stub=function(T){for(var E=new Array(T),k=0;k<T;k++)E[k]=0;return E},A.prototype.mulp=function(T,E,k){var f=2*this.guessLen13b(T.length,E.length),y=this.makeRBT(f),w=this.stub(f),_=new Array(f),x=new Array(f),v=new Array(f),D=new Array(f),K=new Array(f),M=new Array(f),j=k.words;j.length=f,this.convert13b(T.words,T.length,_,f),this.convert13b(E.words,E.length,D,f),this.transform(_,w,x,v,f,y),this.transform(D,w,K,M,f,y);for(var J=0;J<f;J++){var Z=x[J]*K[J]-v[J]*M[J];v[J]=x[J]*M[J]+v[J]*K[J],x[J]=Z}return this.conjugate(x,v,f),this.transform(x,v,j,w,f,y),this.conjugate(j,w,f),this.normalize13b(j,f),k.negative=T.negative^E.negative,k.length=T.length+E.length,k.strip()},i.prototype.mul=function(T){var E=new i(null);return E.words=new Array(this.length+T.length),this.mulTo(T,E)},i.prototype.mulf=function(T){var E=new i(null);return E.words=new Array(this.length+T.length),S(this,T,E)},i.prototype.imul=function(T){return this.clone().mulTo(T,this)},i.prototype.imuln=function(T){r(typeof T=="number"),r(T<67108864);for(var E=0,k=0;k<this.length;k++){var f=(this.words[k]|0)*T,y=(f&67108863)+(E&67108863);E>>=26,E+=f/67108864|0,E+=y>>>26,this.words[k]=y&67108863}return E!==0&&(this.words[k]=E,this.length++),this},i.prototype.muln=function(T){return this.clone().imuln(T)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(T){var E=m(T);if(E.length===0)return new i(1);for(var k=this,f=0;f<E.length&&E[f]===0;f++,k=k.sqr());if(++f<E.length)for(var y=k.sqr();f<E.length;f++,y=y.sqr())E[f]!==0&&(k=k.mul(y));return k},i.prototype.iushln=function(T){r(typeof T=="number"&&T>=0);var E=T%26,k=(T-E)/26,f=67108863>>>26-E<<26-E,y;if(E!==0){var w=0;for(y=0;y<this.length;y++){var _=this.words[y]&f,x=(this.words[y]|0)-_<<E;this.words[y]=x|w,w=_>>>26-E}w&&(this.words[y]=w,this.length++)}if(k!==0){for(y=this.length-1;y>=0;y--)this.words[y+k]=this.words[y];for(y=0;y<k;y++)this.words[y]=0;this.length+=k}return this.strip()},i.prototype.ishln=function(T){return r(this.negative===0),this.iushln(T)},i.prototype.iushrn=function(T,E,k){r(typeof T=="number"&&T>=0);var f;E?f=(E-E%26)/26:f=0;var y=T%26,w=Math.min((T-y)/26,this.length),_=67108863^67108863>>>y<<y,x=k;if(f-=w,f=Math.max(0,f),x){for(var v=0;v<w;v++)x.words[v]=this.words[v];x.length=w}if(w!==0)if(this.length>w)for(this.length-=w,v=0;v<this.length;v++)this.words[v]=this.words[v+w];else this.words[0]=0,this.length=1;var D=0;for(v=this.length-1;v>=0&&(D!==0||v>=f);v--){var K=this.words[v]|0;this.words[v]=D<<26-y|K>>>y,D=K&_}return x&&D!==0&&(x.words[x.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(T,E,k){return r(this.negative===0),this.iushrn(T,E,k)},i.prototype.shln=function(T){return this.clone().ishln(T)},i.prototype.ushln=function(T){return this.clone().iushln(T)},i.prototype.shrn=function(T){return this.clone().ishrn(T)},i.prototype.ushrn=function(T){return this.clone().iushrn(T)},i.prototype.testn=function(T){r(typeof T=="number"&&T>=0);var E=T%26,k=(T-E)/26,f=1<<E;if(this.length<=k)return!1;var y=this.words[k];return!!(y&f)},i.prototype.imaskn=function(T){r(typeof T=="number"&&T>=0);var E=T%26,k=(T-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(E!==0&&k++,this.length=Math.min(k,this.length),E!==0){var f=67108863^67108863>>>E<<E;this.words[this.length-1]&=f}return this.strip()},i.prototype.maskn=function(T){return this.clone().imaskn(T)},i.prototype.iaddn=function(T){return r(typeof T=="number"),r(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(this.words[0]|0)<T?(this.words[0]=T-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},i.prototype._iaddn=function(T){this.words[0]+=T;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},i.prototype.isubn=function(T){if(r(typeof T=="number"),r(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},i.prototype.addn=function(T){return this.clone().iaddn(T)},i.prototype.subn=function(T){return this.clone().isubn(T)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(T,E,k){var f=T.length+k,y;this._expand(f);var w,_=0;for(y=0;y<T.length;y++){w=(this.words[y+k]|0)+_;var x=(T.words[y]|0)*E;w-=x&67108863,_=(w>>26)-(x/67108864|0),this.words[y+k]=w&67108863}for(;y<this.length-k;y++)w=(this.words[y+k]|0)+_,_=w>>26,this.words[y+k]=w&67108863;if(_===0)return this.strip();for(r(_===-1),_=0,y=0;y<this.length;y++)w=-(this.words[y]|0)+_,_=w>>26,this.words[y]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(T,E){var k=this.length-T.length,f=this.clone(),y=T,w=y.words[y.length-1]|0,_=this._countBits(w);k=26-_,k!==0&&(y=y.ushln(k),f.iushln(k),w=y.words[y.length-1]|0);var x=f.length-y.length,v;if(E!=="mod"){v=new i(null),v.length=x+1,v.words=new Array(v.length);for(var D=0;D<v.length;D++)v.words[D]=0}var K=f.clone()._ishlnsubmul(y,1,x);K.negative===0&&(f=K,v&&(v.words[x]=1));for(var M=x-1;M>=0;M--){var j=(f.words[y.length+M]|0)*67108864+(f.words[y.length+M-1]|0);for(j=Math.min(j/w|0,67108863),f._ishlnsubmul(y,j,M);f.negative!==0;)j--,f.negative=0,f._ishlnsubmul(y,1,M),f.isZero()||(f.negative^=1);v&&(v.words[M]=j)}return v&&v.strip(),f.strip(),E!=="div"&&k!==0&&f.iushrn(k),{div:v||null,mod:f}},i.prototype.divmod=function(T,E,k){if(r(!T.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var f,y,w;return this.negative!==0&&T.negative===0?(w=this.neg().divmod(T,E),E!=="mod"&&(f=w.div.neg()),E!=="div"&&(y=w.mod.neg(),k&&y.negative!==0&&y.iadd(T)),{div:f,mod:y}):this.negative===0&&T.negative!==0?(w=this.divmod(T.neg(),E),E!=="mod"&&(f=w.div.neg()),{div:f,mod:w.mod}):this.negative&T.negative?(w=this.neg().divmod(T.neg(),E),E!=="div"&&(y=w.mod.neg(),k&&y.negative!==0&&y.isub(T)),{div:w.div,mod:y}):T.length>this.length||this.cmp(T)<0?{div:new i(0),mod:this}:T.length===1?E==="div"?{div:this.divn(T.words[0]),mod:null}:E==="mod"?{div:null,mod:new i(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new i(this.modn(T.words[0]))}:this._wordDiv(T,E)},i.prototype.div=function(T){return this.divmod(T,"div",!1).div},i.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},i.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},i.prototype.divRound=function(T){var E=this.divmod(T);if(E.mod.isZero())return E.div;var k=E.div.negative!==0?E.mod.isub(T):E.mod,f=T.ushrn(1),y=T.andln(1),w=k.cmp(f);return w<0||y===1&&w===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},i.prototype.modn=function(T){r(T<=67108863);for(var E=(1<<26)%T,k=0,f=this.length-1;f>=0;f--)k=(E*k+(this.words[f]|0))%T;return k},i.prototype.idivn=function(T){r(T<=67108863);for(var E=0,k=this.length-1;k>=0;k--){var f=(this.words[k]|0)+E*67108864;this.words[k]=f/T|0,E=f%T}return this.strip()},i.prototype.divn=function(T){return this.clone().idivn(T)},i.prototype.egcd=function(T){r(T.negative===0),r(!T.isZero());var E=this,k=T.clone();E.negative!==0?E=E.umod(T):E=E.clone();for(var f=new i(1),y=new i(0),w=new i(0),_=new i(1),x=0;E.isEven()&&k.isEven();)E.iushrn(1),k.iushrn(1),++x;for(var v=k.clone(),D=E.clone();!E.isZero();){for(var K=0,M=1;!(E.words[0]&M)&&K<26;++K,M<<=1);if(K>0)for(E.iushrn(K);K-- >0;)(f.isOdd()||y.isOdd())&&(f.iadd(v),y.isub(D)),f.iushrn(1),y.iushrn(1);for(var j=0,J=1;!(k.words[0]&J)&&j<26;++j,J<<=1);if(j>0)for(k.iushrn(j);j-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(v),_.isub(D)),w.iushrn(1),_.iushrn(1);E.cmp(k)>=0?(E.isub(k),f.isub(w),y.isub(_)):(k.isub(E),w.isub(f),_.isub(y))}return{a:w,b:_,gcd:k.iushln(x)}},i.prototype._invmp=function(T){r(T.negative===0),r(!T.isZero());var E=this,k=T.clone();E.negative!==0?E=E.umod(T):E=E.clone();for(var f=new i(1),y=new i(0),w=k.clone();E.cmpn(1)>0&&k.cmpn(1)>0;){for(var _=0,x=1;!(E.words[0]&x)&&_<26;++_,x<<=1);if(_>0)for(E.iushrn(_);_-- >0;)f.isOdd()&&f.iadd(w),f.iushrn(1);for(var v=0,D=1;!(k.words[0]&D)&&v<26;++v,D<<=1);if(v>0)for(k.iushrn(v);v-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);E.cmp(k)>=0?(E.isub(k),f.isub(y)):(k.isub(E),y.isub(f))}var K;return E.cmpn(1)===0?K=f:K=y,K.cmpn(0)<0&&K.iadd(T),K},i.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var E=this.clone(),k=T.clone();E.negative=0,k.negative=0;for(var f=0;E.isEven()&&k.isEven();f++)E.iushrn(1),k.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;k.isEven();)k.iushrn(1);var y=E.cmp(k);if(y<0){var w=E;E=k,k=w}else if(y===0||k.cmpn(1)===0)break;E.isub(k)}while(!0);return k.iushln(f)},i.prototype.invm=function(T){return this.egcd(T).a.umod(T)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(T){return this.words[0]&T},i.prototype.bincn=function(T){r(typeof T=="number");var E=T%26,k=(T-E)/26,f=1<<E;if(this.length<=k)return this._expand(k+1),this.words[k]|=f,this;for(var y=f,w=k;y!==0&&w<this.length;w++){var _=this.words[w]|0;_+=y,y=_>>>26,_&=67108863,this.words[w]=_}return y!==0&&(this.words[w]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(T){var E=T<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this.strip();var k;if(this.length>1)k=1;else{E&&(T=-T),r(T<=67108863,"Number is too big");var f=this.words[0]|0;k=f===T?0:f<T?-1:1}return this.negative!==0?-k|0:k},i.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var E=this.ucmp(T);return this.negative!==0?-E|0:E},i.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var E=0,k=this.length-1;k>=0;k--){var f=this.words[k]|0,y=T.words[k]|0;if(f!==y){f<y?E=-1:f>y&&(E=1);break}}return E},i.prototype.gtn=function(T){return this.cmpn(T)===1},i.prototype.gt=function(T){return this.cmp(T)===1},i.prototype.gten=function(T){return this.cmpn(T)>=0},i.prototype.gte=function(T){return this.cmp(T)>=0},i.prototype.ltn=function(T){return this.cmpn(T)===-1},i.prototype.lt=function(T){return this.cmp(T)===-1},i.prototype.lten=function(T){return this.cmpn(T)<=0},i.prototype.lte=function(T){return this.cmp(T)<=0},i.prototype.eqn=function(T){return this.cmpn(T)===0},i.prototype.eq=function(T){return this.cmp(T)===0},i.red=function(T){return new U(T)},i.prototype.toRed=function(T){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(T){return this.red=T,this},i.prototype.forceRed=function(T){return r(!this.red,"Already a number in reduction context"),this._forceRed(T)},i.prototype.redAdd=function(T){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},i.prototype.redIAdd=function(T){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},i.prototype.redSub=function(T){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},i.prototype.redISub=function(T){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},i.prototype.redShl=function(T){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},i.prototype.redMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},i.prototype.redIMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(T){return r(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var I={k256:null,p224:null,p192:null,p25519:null};function P(q,T){this.name=q,this.p=new i(T,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var T=new i(null);return T.words=new Array(Math.ceil(this.n/13)),T},P.prototype.ireduce=function(T){var E=T,k;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),k=E.bitLength();while(k>this.n);var f=k<this.n?-1:E.ucmp(this.p);return f===0?(E.words[0]=0,E.length=1):f>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},P.prototype.split=function(T,E){T.iushrn(this.n,0,E)},P.prototype.imulK=function(T){return T.imul(this.k)};function $(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n($,P),$.prototype.split=function(T,E){for(var k=4194303,f=Math.min(T.length,9),y=0;y<f;y++)E.words[y]=T.words[y];if(E.length=f,T.length<=9){T.words[0]=0,T.length=1;return}var w=T.words[9];for(E.words[E.length++]=w&k,y=10;y<T.length;y++){var _=T.words[y]|0;T.words[y-10]=(_&k)<<4|w>>>22,w=_}w>>>=22,T.words[y-10]=w,w===0&&T.length>10?T.length-=10:T.length-=9},$.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var E=0,k=0;k<T.length;k++){var f=T.words[k]|0;E+=f*977,T.words[k]=E&67108863,E=f*64+(E/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T};function N(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(N,P);function L(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(L,P);function F(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,P),F.prototype.imulK=function(T){for(var E=0,k=0;k<T.length;k++){var f=(T.words[k]|0)*19+E,y=f&67108863;f>>>=26,T.words[k]=y,E=f}return E!==0&&(T.words[T.length++]=E),T},i._prime=function(T){if(I[T])return I[T];var E;if(T==="k256")E=new $;else if(T==="p224")E=new N;else if(T==="p192")E=new L;else if(T==="p25519")E=new F;else throw new Error("Unknown prime "+T);return I[T]=E,E};function U(q){if(typeof q=="string"){var T=i._prime(q);this.m=T.p,this.prime=T}else r(q.gtn(1),"modulus must be greater than 1"),this.m=q,this.prime=null}U.prototype._verify1=function(T){r(T.negative===0,"red works only with positives"),r(T.red,"red works only with red numbers")},U.prototype._verify2=function(T,E){r((T.negative|E.negative)===0,"red works only with positives"),r(T.red&&T.red===E.red,"red works only with red numbers")},U.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},U.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},U.prototype.add=function(T,E){this._verify2(T,E);var k=T.add(E);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},U.prototype.iadd=function(T,E){this._verify2(T,E);var k=T.iadd(E);return k.cmp(this.m)>=0&&k.isub(this.m),k},U.prototype.sub=function(T,E){this._verify2(T,E);var k=T.sub(E);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},U.prototype.isub=function(T,E){this._verify2(T,E);var k=T.isub(E);return k.cmpn(0)<0&&k.iadd(this.m),k},U.prototype.shl=function(T,E){return this._verify1(T),this.imod(T.ushln(E))},U.prototype.imul=function(T,E){return this._verify2(T,E),this.imod(T.imul(E))},U.prototype.mul=function(T,E){return this._verify2(T,E),this.imod(T.mul(E))},U.prototype.isqr=function(T){return this.imul(T,T.clone())},U.prototype.sqr=function(T){return this.mul(T,T)},U.prototype.sqrt=function(T){if(T.isZero())return T.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var k=this.m.add(new i(1)).iushrn(2);return this.pow(T,k)}for(var f=this.m.subn(1),y=0;!f.isZero()&&f.andln(1)===0;)y++,f.iushrn(1);r(!f.isZero());var w=new i(1).toRed(this),_=w.redNeg(),x=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new i(2*v*v).toRed(this);this.pow(v,x).cmp(_)!==0;)v.redIAdd(_);for(var D=this.pow(v,f),K=this.pow(T,f.addn(1).iushrn(1)),M=this.pow(T,f),j=y;M.cmp(w)!==0;){for(var J=M,Z=0;J.cmp(w)!==0;Z++)J=J.redSqr();r(Z<j);var V=this.pow(D,new i(1).iushln(j-Z-1));K=K.redMul(V),D=V.redSqr(),M=M.redMul(D),j=Z}return K},U.prototype.invm=function(T){var E=T._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},U.prototype.pow=function(T,E){if(E.isZero())return new i(1).toRed(this);if(E.cmpn(1)===0)return T.clone();var k=4,f=new Array(1<<k);f[0]=new i(1).toRed(this),f[1]=T;for(var y=2;y<f.length;y++)f[y]=this.mul(f[y-1],T);var w=f[0],_=0,x=0,v=E.bitLength()%26;for(v===0&&(v=26),y=E.length-1;y>=0;y--){for(var D=E.words[y],K=v-1;K>=0;K--){var M=D>>K&1;if(w!==f[0]&&(w=this.sqr(w)),M===0&&_===0){x=0;continue}_<<=1,_|=M,x++,!(x!==k&&(y!==0||K!==0))&&(w=this.mul(w,f[_]),x=0,_=0)}v=26}return w},U.prototype.convertTo=function(T){var E=T.umod(this.m);return E===T?E.clone():E},U.prototype.convertFrom=function(T){var E=T.clone();return E.red=null,E},i.mont=function(T){return new G(T)};function G(q){U.call(this,q),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,U),G.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},G.prototype.convertFrom=function(T){var E=this.imod(T.mul(this.rinv));return E.red=null,E},G.prototype.imul=function(T,E){if(T.isZero()||E.isZero())return T.words[0]=0,T.length=1,T;var k=T.imul(E),f=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=k.isub(f).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},G.prototype.mul=function(T,E){if(T.isZero()||E.isZero())return new i(0)._forceRed(this);var k=T.mul(E),f=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=k.isub(f).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},G.prototype.invm=function(T){var E=this.imod(T._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(typeof VD>"u"||VD,bY)});var p5=W((wlt,ZD)=>{h();var JD;ZD.exports=function(e){return JD||(JD=new gp(null)),JD.generate(e)};function gp(t){this.rand=t}ZD.exports.Rand=gp;gp.prototype.generate=function(e){return this._rand(e)};gp.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?gp.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?gp.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(gp.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(YD=m5(),typeof YD.randomBytes!="function")throw new Error("Not supported");gp.prototype._rand=function(e){return YD.randomBytes(e)}}catch{}var YD});var XD=W((xlt,vY)=>{h();var Xy=zi(),f5e=p5();function Qy(t){this.rand=t||new f5e.Rand}vY.exports=Qy;Qy.create=function(e){return new Qy(e)};Qy.prototype._randbelow=function(e){var r=e.bitLength(),n=Math.ceil(r/8);do var i=new Xy(this.rand.generate(n));while(i.cmp(e)>=0);return i};Qy.prototype._randrange=function(e,r){var n=r.sub(e);return e.add(this._randbelow(n))};Qy.prototype.test=function(e,r,n){var i=e.bitLength(),o=Xy.mont(e),s=new Xy(1).toRed(o);r||(r=Math.max(1,i/48|0));for(var a=e.subn(1),d=0;!a.testn(d);d++);for(var u=e.shrn(d),c=a.toRed(o),l=!0;r>0;r--){var m=this._randrange(new Xy(2),a);n&&n(m);var p=m.toRed(o).redPow(u);if(!(p.cmp(s)===0||p.cmp(c)===0)){for(var g=1;g<d;g++){if(p=p.redSqr(),p.cmp(s)===0)return!1;if(p.cmp(c)===0)break}if(g===d)return!1}}return l};Qy.prototype.getDivisor=function(e,r){var n=e.bitLength(),i=Xy.mont(e),o=new Xy(1).toRed(i);r||(r=Math.max(1,n/48|0));for(var s=e.subn(1),a=0;!s.testn(a);a++);for(var d=e.shrn(a),u=s.toRed(i);r>0;r--){var c=this._randrange(new Xy(2),s),l=e.gcd(c);if(l.cmpn(1)!==0)return l;var m=c.toRed(i).redPow(d);if(!(m.cmp(o)===0||m.cmp(u)===0)){for(var p=1;p<a;p++){if(m=m.redSqr(),m.cmp(o)===0)return m.fromRed().subn(1).gcd(e);if(m.cmp(u)===0)break}if(p===a)return m=m.redSqr(),m.fromRed().subn(1).gcd(e)}}return!1}});var i7=W((Ilt,xY)=>{h();var h5e=jy();xY.exports=n7;n7.simpleSieve=t7;n7.fermatTest=r7;var $o=zi(),p5e=new $o(24),m5e=XD(),wY=new m5e,y5e=new $o(1),e7=new $o(2),g5e=new $o(5),Slt=new $o(16),Alt=new $o(8),b5e=new $o(10),v5e=new $o(3),Plt=new $o(7),w5e=new $o(11),_Y=new $o(4),Tlt=new $o(12),QD=null;function _5e(){if(QD!==null)return QD;var t=1048576,e=[];e[0]=2;for(var r=1,n=3;n<t;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;o<r&&e[o]<=i&&n%e[o]!==0;o++);r!==o&&e[o]<=i||(e[r++]=n)}return QD=e,e}function t7(t){for(var e=_5e(),r=0;r<e.length;r++)if(t.modn(e[r])===0)return t.cmpn(e[r])===0;return!0}function r7(t){var e=$o.mont(t);return e7.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)===0}function n7(t,e){if(t<16)return e===2||e===5?new $o([140,123]):new $o([140,39]);e=new $o(e);for(var r,n;;){for(r=new $o(h5e(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(y5e),r.testn(1)||r.iadd(e7),e.cmp(e7)){if(!e.cmp(g5e))for(;r.mod(b5e).cmp(v5e);)r.iadd(_Y)}else for(;r.mod(p5e).cmp(w5e);)r.iadd(_Y);if(n=r.shrn(1),t7(n)&&t7(r)&&r7(n)&&r7(r)&&wY.test(n)&&wY.test(r))return r}}});var EY=W((Rlt,x5e)=>{x5e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}});var TY=W((Dlt,PY)=>{h();var Wc=zi(),E5e=XD(),SY=new E5e,S5e=new Wc(24),A5e=new Wc(11),P5e=new Wc(10),T5e=new Wc(3),I5e=new Wc(7),AY=i7(),k5e=jy();PY.exports=Df;function R5e(t,e){return e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e)),this._pub=new Wc(t),this}function D5e(t,e){return e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e)),this._priv=new Wc(t),this}var y5={};function M5e(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in y5)return y5[n];var i=0;if(t.isEven()||!AY.simpleSieve||!AY.fermatTest(t)||!SY.test(t))return i+=1,r==="02"||r==="05"?i+=8:i+=4,y5[n]=i,i;SY.test(t.shrn(1))||(i+=2);var o;switch(r){case"02":t.mod(S5e).cmp(A5e)&&(i+=8);break;case"05":o=t.mod(P5e),o.cmp(T5e)&&o.cmp(I5e)&&(i+=8);break;default:i+=4}return y5[n]=i,i}function Df(t,e,r){this.setGenerator(e),this.__prime=new Wc(t),this._prime=Wc.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=R5e,this.setPrivateKey=D5e):this._primeCode=8}Object.defineProperty(Df.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=M5e(this.__prime,this.__gen)),this._primeCode}});Df.prototype.generateKeys=function(){return this._priv||(this._priv=new Wc(k5e(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()};Df.prototype.computeSecret=function(t){t=new Wc(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),r=new O.Buffer(e.toArray()),n=this.getPrime();if(r.length<n.length){var i=new O.Buffer(n.length-r.length);i.fill(0),r=O.Buffer.concat([i,r])}return r};Df.prototype.getPublicKey=function(e){return g5(this._pub,e)};Df.prototype.getPrivateKey=function(e){return g5(this._priv,e)};Df.prototype.getPrime=function(t){return g5(this.__prime,t)};Df.prototype.getGenerator=function(t){return g5(this._gen,t)};Df.prototype.setGenerator=function(t,e){return e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e)),this.__gen=t,this._gen=new Wc(t),this};function g5(t,e){var r=new O.Buffer(t.toArray());return e?r.toString(e):r}});var RY=W(fv=>{h();var B5e=i7(),IY=EY(),o7=TY();function C5e(t){var e=new O.Buffer(IY[t].prime,"hex"),r=new O.Buffer(IY[t].gen,"hex");return new o7(e,r)}var O5e={binary:!0,hex:!0,base64:!0};function kY(t,e,r,n){return O.Buffer.isBuffer(e)||O5e[e]===void 0?kY(t,"binary",e,r):(e=e||"binary",n=n||"binary",r=r||new O.Buffer([2]),O.Buffer.isBuffer(r)||(r=new O.Buffer(r,n)),typeof t=="number"?new o7(B5e(t,r),r,!0):(O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e)),new o7(t,r,!0)))}fv.DiffieHellmanGroup=fv.createDiffieHellmanGroup=fv.getDiffieHellman=C5e;fv.createDiffieHellman=fv.DiffieHellman=kY});var b5=W((DY,s7)=>{h();(function(t,e){"use strict";function r(k,f){if(!k)throw new Error(f||"Assertion failed")}function n(k,f){k.super_=f;var y=function(){};y.prototype=f.prototype,k.prototype=new y,k.prototype.constructor=k}function i(k,f,y){if(i.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((f==="le"||f==="be")&&(y=f,f=10),this._init(k||0,f||10,y||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=HD().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,y){return f.cmp(y)>0?f:y},i.min=function(f,y){return f.cmp(y)<0?f:y},i.prototype._init=function(f,y,w){if(typeof f=="number")return this._initNumber(f,y,w);if(typeof f=="object")return this._initArray(f,y,w);y==="hex"&&(y=16),r(y===(y|0)&&y>=2&&y<=36),f=f.toString().replace(/\s+/g,"");var _=0;f[0]==="-"&&(_++,this.negative=1),_<f.length&&(y===16?this._parseHex(f,_,w):(this._parseBase(f,y,_),w==="le"&&this._initArray(this.toArray(),y,w)))},i.prototype._initNumber=function(f,y,w){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),y,w)},i.prototype._initArray=function(f,y,w){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x,v,D=0;if(w==="be")for(_=f.length-1,x=0;_>=0;_-=3)v=f[_]|f[_-1]<<8|f[_-2]<<16,this.words[x]|=v<<D&67108863,this.words[x+1]=v>>>26-D&67108863,D+=24,D>=26&&(D-=26,x++);else if(w==="le")for(_=0,x=0;_<f.length;_+=3)v=f[_]|f[_+1]<<8|f[_+2]<<16,this.words[x]|=v<<D&67108863,this.words[x+1]=v>>>26-D&67108863,D+=24,D>=26&&(D-=26,x++);return this._strip()};function s(k,f){var y=k.charCodeAt(f);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;r(!1,"Invalid character in "+k)}function a(k,f,y){var w=s(k,y);return y-1>=f&&(w|=s(k,y-1)<<4),w}i.prototype._parseHex=function(f,y,w){this.length=Math.ceil((f.length-y)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x=0,v=0,D;if(w==="be")for(_=f.length-1;_>=y;_-=2)D=a(f,y,_)<<x,this.words[v]|=D&67108863,x>=18?(x-=18,v+=1,this.words[v]|=D>>>26):x+=8;else{var K=f.length-y;for(_=K%2===0?y+1:y;_<f.length;_+=2)D=a(f,y,_)<<x,this.words[v]|=D&67108863,x>=18?(x-=18,v+=1,this.words[v]|=D>>>26):x+=8}this._strip()};function d(k,f,y,w){for(var _=0,x=0,v=Math.min(k.length,y),D=f;D<v;D++){var K=k.charCodeAt(D)-48;_*=w,K>=49?x=K-49+10:K>=17?x=K-17+10:x=K,r(K>=0&&x<w,"Invalid character"),_+=x}return _}i.prototype._parseBase=function(f,y,w){this.words=[0],this.length=1;for(var _=0,x=1;x<=67108863;x*=y)_++;_--,x=x/y|0;for(var v=f.length-w,D=v%_,K=Math.min(v,v-D)+w,M=0,j=w;j<K;j+=_)M=d(f,j,j+_,y),this.imuln(x),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(D!==0){var J=1;for(M=d(f,j,f.length,y),j=0;j<D;j++)J*=y;this.imuln(J),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var y=0;y<this.length;y++)f.words[y]=this.words[y];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(k,f){k.words=f.words,k.length=f.length,k.negative=f.negative,k.red=f.red}if(i.prototype._move=function(f){u(f,this)},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch{i.prototype.inspect=c}else i.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,y){f=f||10,y=y|0||1;var w;if(f===16||f==="hex"){w="";for(var _=0,x=0,v=0;v<this.length;v++){var D=this.words[v],K=((D<<_|x)&16777215).toString(16);x=D>>>24-_&16777215,_+=2,_>=26&&(_-=26,v--),x!==0||v!==this.length-1?w=l[6-K.length]+K+w:w=K+w}for(x!==0&&(w=x.toString(16)+w);w.length%y!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(f===(f|0)&&f>=2&&f<=36){var M=m[f],j=p[f];w="";var J=this.clone();for(J.negative=0;!J.isZero();){var Z=J.modrn(j).toString(f);J=J.idivn(j),J.isZero()?w=Z+w:w=l[M-Z.length]+Z+w}for(this.isZero()&&(w="0"+w);w.length%y!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(f,y){return this.toArrayLike(o,f,y)}),i.prototype.toArray=function(f,y){return this.toArrayLike(Array,f,y)};var g=function(f,y){return f.allocUnsafe?f.allocUnsafe(y):new f(y)};i.prototype.toArrayLike=function(f,y,w){this._strip();var _=this.byteLength(),x=w||Math.max(1,_);r(_<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var v=g(f,x),D=y==="le"?"LE":"BE";return this["_toArrayLike"+D](v,_),v},i.prototype._toArrayLikeLE=function(f,y){for(var w=0,_=0,x=0,v=0;x<this.length;x++){var D=this.words[x]<<v|_;f[w++]=D&255,w<f.length&&(f[w++]=D>>8&255),w<f.length&&(f[w++]=D>>16&255),v===6?(w<f.length&&(f[w++]=D>>24&255),_=0,v=0):(_=D>>>24,v+=2)}if(w<f.length)for(f[w++]=_;w<f.length;)f[w++]=0},i.prototype._toArrayLikeBE=function(f,y){for(var w=f.length-1,_=0,x=0,v=0;x<this.length;x++){var D=this.words[x]<<v|_;f[w--]=D&255,w>=0&&(f[w--]=D>>8&255),w>=0&&(f[w--]=D>>16&255),v===6?(w>=0&&(f[w--]=D>>24&255),_=0,v=0):(_=D>>>24,v+=2)}if(w>=0)for(f[w--]=_;w>=0;)f[w--]=0},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var y=f,w=0;return y>=4096&&(w+=13,y>>>=13),y>=64&&(w+=7,y>>>=7),y>=8&&(w+=4,y>>>=4),y>=2&&(w+=2,y>>>=2),w+y},i.prototype._zeroBits=function(f){if(f===0)return 26;var y=f,w=0;return y&8191||(w+=13,y>>>=13),y&127||(w+=7,y>>>=7),y&15||(w+=4,y>>>=4),y&3||(w+=2,y>>>=2),y&1||w++,w},i.prototype.bitLength=function(){var f=this.words[this.length-1],y=this._countBits(f);return(this.length-1)*26+y};function b(k){for(var f=new Array(k.bitLength()),y=0;y<f.length;y++){var w=y/26|0,_=y%26;f[y]=k.words[w]>>>_&1}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,y=0;y<this.length;y++){var w=this._zeroBits(this.words[y]);if(f+=w,w!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var y=0;y<f.length;y++)this.words[y]=this.words[y]|f.words[y];return this._strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var y;this.length>f.length?y=f:y=this;for(var w=0;w<y.length;w++)this.words[w]=this.words[w]&f.words[w];return this.length=y.length,this._strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var y,w;this.length>f.length?(y=this,w=f):(y=f,w=this);for(var _=0;_<w.length;_++)this.words[_]=y.words[_]^w.words[_];if(this!==y)for(;_<y.length;_++)this.words[_]=y.words[_];return this.length=y.length,this._strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var y=Math.ceil(f/26)|0,w=f%26;this._expand(y),w>0&&y--;for(var _=0;_<y;_++)this.words[_]=~this.words[_]&67108863;return w>0&&(this.words[_]=~this.words[_]&67108863>>26-w),this._strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,y){r(typeof f=="number"&&f>=0);var w=f/26|0,_=f%26;return this._expand(w+1),y?this.words[w]=this.words[w]|1<<_:this.words[w]=this.words[w]&~(1<<_),this._strip()},i.prototype.iadd=function(f){var y;if(this.negative!==0&&f.negative===0)return this.negative=0,y=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,y=this.isub(f),f.negative=1,y._normSign();var w,_;this.length>f.length?(w=this,_=f):(w=f,_=this);for(var x=0,v=0;v<_.length;v++)y=(w.words[v]|0)+(_.words[v]|0)+x,this.words[v]=y&67108863,x=y>>>26;for(;x!==0&&v<w.length;v++)y=(w.words[v]|0)+x,this.words[v]=y&67108863,x=y>>>26;if(this.length=w.length,x!==0)this.words[this.length]=x,this.length++;else if(w!==this)for(;v<w.length;v++)this.words[v]=w.words[v];return this},i.prototype.add=function(f){var y;return f.negative!==0&&this.negative===0?(f.negative=0,y=this.sub(f),f.negative^=1,y):f.negative===0&&this.negative!==0?(this.negative=0,y=f.sub(this),this.negative=1,y):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var y=this.iadd(f);return f.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var w=this.cmp(f);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,x;w>0?(_=this,x=f):(_=f,x=this);for(var v=0,D=0;D<x.length;D++)y=(_.words[D]|0)-(x.words[D]|0)+v,v=y>>26,this.words[D]=y&67108863;for(;v!==0&&D<_.length;D++)y=(_.words[D]|0)+v,v=y>>26,this.words[D]=y&67108863;if(v===0&&D<_.length&&_!==this)for(;D<_.length;D++)this.words[D]=_.words[D];return this.length=Math.max(this.length,D),_!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function S(k,f,y){y.negative=f.negative^k.negative;var w=k.length+f.length|0;y.length=w,w=w-1|0;var _=k.words[0]|0,x=f.words[0]|0,v=_*x,D=v&67108863,K=v/67108864|0;y.words[0]=D;for(var M=1;M<w;M++){for(var j=K>>>26,J=K&67108863,Z=Math.min(M,f.length-1),V=Math.max(0,M-k.length+1);V<=Z;V++){var H=M-V|0;_=k.words[H]|0,x=f.words[V]|0,v=_*x+J,j+=v/67108864|0,J=v&67108863}y.words[M]=J|0,K=j|0}return K!==0?y.words[M]=K|0:y.length--,y._strip()}var A=function(f,y,w){var _=f.words,x=y.words,v=w.words,D=0,K,M,j,J=_[0]|0,Z=J&8191,V=J>>>13,H=_[1]|0,X=H&8191,ee=H>>>13,ue=_[2]|0,ae=ue&8191,ce=ue>>>13,pe=_[3]|0,Ee=pe&8191,Ue=pe>>>13,le=_[4]|0,ge=le&8191,ve=le>>>13,Ce=_[5]|0,Ie=Ce&8191,je=Ce>>>13,gt=_[6]|0,Pe=gt&8191,De=gt>>>13,It=_[7]|0,we=It&8191,Se=It>>>13,Kr=_[8]|0,Fe=Kr&8191,He=Kr>>>13,js=_[9]|0,ft=js&8191,Rt=js>>>13,yi=x[0]|0,At=yi&8191,Ze=yi>>>13,Mc=x[1]|0,Pt=Mc&8191,$t=Mc>>>13,ny=x[2]|0,Bt=ny&8191,Wt=ny>>>13,Bc=x[3]|0,Ht=Bc&8191,Lt=Bc>>>13,iy=x[4]|0,Nt=iy&8191,Ft=iy>>>13,oy=x[5]|0,zt=oy&8191,Vt=oy>>>13,Nh=x[6]|0,Q=Nh&8191,Y=Nh>>>13,te=x[7]|0,re=te&8191,ie=te>>>13,$e=x[8]|0,ke=$e&8191,Ne=$e>>>13,Ar=x[9]|0,jt=Ar&8191,dt=Ar>>>13;w.negative=f.negative^y.negative,w.length=19,K=Math.imul(Z,At),M=Math.imul(Z,Ze),M=M+Math.imul(V,At)|0,j=Math.imul(V,Ze);var Jr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,K=Math.imul(X,At),M=Math.imul(X,Ze),M=M+Math.imul(ee,At)|0,j=Math.imul(ee,Ze),K=K+Math.imul(Z,Pt)|0,M=M+Math.imul(Z,$t)|0,M=M+Math.imul(V,Pt)|0,j=j+Math.imul(V,$t)|0;var an=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(an>>>26)|0,an&=67108863,K=Math.imul(ae,At),M=Math.imul(ae,Ze),M=M+Math.imul(ce,At)|0,j=Math.imul(ce,Ze),K=K+Math.imul(X,Pt)|0,M=M+Math.imul(X,$t)|0,M=M+Math.imul(ee,Pt)|0,j=j+Math.imul(ee,$t)|0,K=K+Math.imul(Z,Bt)|0,M=M+Math.imul(Z,Wt)|0,M=M+Math.imul(V,Bt)|0,j=j+Math.imul(V,Wt)|0;var Wr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,K=Math.imul(Ee,At),M=Math.imul(Ee,Ze),M=M+Math.imul(Ue,At)|0,j=Math.imul(Ue,Ze),K=K+Math.imul(ae,Pt)|0,M=M+Math.imul(ae,$t)|0,M=M+Math.imul(ce,Pt)|0,j=j+Math.imul(ce,$t)|0,K=K+Math.imul(X,Bt)|0,M=M+Math.imul(X,Wt)|0,M=M+Math.imul(ee,Bt)|0,j=j+Math.imul(ee,Wt)|0,K=K+Math.imul(Z,Ht)|0,M=M+Math.imul(Z,Lt)|0,M=M+Math.imul(V,Ht)|0,j=j+Math.imul(V,Lt)|0;var sr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(sr>>>26)|0,sr&=67108863,K=Math.imul(ge,At),M=Math.imul(ge,Ze),M=M+Math.imul(ve,At)|0,j=Math.imul(ve,Ze),K=K+Math.imul(Ee,Pt)|0,M=M+Math.imul(Ee,$t)|0,M=M+Math.imul(Ue,Pt)|0,j=j+Math.imul(Ue,$t)|0,K=K+Math.imul(ae,Bt)|0,M=M+Math.imul(ae,Wt)|0,M=M+Math.imul(ce,Bt)|0,j=j+Math.imul(ce,Wt)|0,K=K+Math.imul(X,Ht)|0,M=M+Math.imul(X,Lt)|0,M=M+Math.imul(ee,Ht)|0,j=j+Math.imul(ee,Lt)|0,K=K+Math.imul(Z,Nt)|0,M=M+Math.imul(Z,Ft)|0,M=M+Math.imul(V,Nt)|0,j=j+Math.imul(V,Ft)|0;var Yr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,K=Math.imul(Ie,At),M=Math.imul(Ie,Ze),M=M+Math.imul(je,At)|0,j=Math.imul(je,Ze),K=K+Math.imul(ge,Pt)|0,M=M+Math.imul(ge,$t)|0,M=M+Math.imul(ve,Pt)|0,j=j+Math.imul(ve,$t)|0,K=K+Math.imul(Ee,Bt)|0,M=M+Math.imul(Ee,Wt)|0,M=M+Math.imul(Ue,Bt)|0,j=j+Math.imul(Ue,Wt)|0,K=K+Math.imul(ae,Ht)|0,M=M+Math.imul(ae,Lt)|0,M=M+Math.imul(ce,Ht)|0,j=j+Math.imul(ce,Lt)|0,K=K+Math.imul(X,Nt)|0,M=M+Math.imul(X,Ft)|0,M=M+Math.imul(ee,Nt)|0,j=j+Math.imul(ee,Ft)|0,K=K+Math.imul(Z,zt)|0,M=M+Math.imul(Z,Vt)|0,M=M+Math.imul(V,zt)|0,j=j+Math.imul(V,Vt)|0;var Rr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,K=Math.imul(Pe,At),M=Math.imul(Pe,Ze),M=M+Math.imul(De,At)|0,j=Math.imul(De,Ze),K=K+Math.imul(Ie,Pt)|0,M=M+Math.imul(Ie,$t)|0,M=M+Math.imul(je,Pt)|0,j=j+Math.imul(je,$t)|0,K=K+Math.imul(ge,Bt)|0,M=M+Math.imul(ge,Wt)|0,M=M+Math.imul(ve,Bt)|0,j=j+Math.imul(ve,Wt)|0,K=K+Math.imul(Ee,Ht)|0,M=M+Math.imul(Ee,Lt)|0,M=M+Math.imul(Ue,Ht)|0,j=j+Math.imul(Ue,Lt)|0,K=K+Math.imul(ae,Nt)|0,M=M+Math.imul(ae,Ft)|0,M=M+Math.imul(ce,Nt)|0,j=j+Math.imul(ce,Ft)|0,K=K+Math.imul(X,zt)|0,M=M+Math.imul(X,Vt)|0,M=M+Math.imul(ee,zt)|0,j=j+Math.imul(ee,Vt)|0,K=K+Math.imul(Z,Q)|0,M=M+Math.imul(Z,Y)|0,M=M+Math.imul(V,Q)|0,j=j+Math.imul(V,Y)|0;var Us=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Us>>>26)|0,Us&=67108863,K=Math.imul(we,At),M=Math.imul(we,Ze),M=M+Math.imul(Se,At)|0,j=Math.imul(Se,Ze),K=K+Math.imul(Pe,Pt)|0,M=M+Math.imul(Pe,$t)|0,M=M+Math.imul(De,Pt)|0,j=j+Math.imul(De,$t)|0,K=K+Math.imul(Ie,Bt)|0,M=M+Math.imul(Ie,Wt)|0,M=M+Math.imul(je,Bt)|0,j=j+Math.imul(je,Wt)|0,K=K+Math.imul(ge,Ht)|0,M=M+Math.imul(ge,Lt)|0,M=M+Math.imul(ve,Ht)|0,j=j+Math.imul(ve,Lt)|0,K=K+Math.imul(Ee,Nt)|0,M=M+Math.imul(Ee,Ft)|0,M=M+Math.imul(Ue,Nt)|0,j=j+Math.imul(Ue,Ft)|0,K=K+Math.imul(ae,zt)|0,M=M+Math.imul(ae,Vt)|0,M=M+Math.imul(ce,zt)|0,j=j+Math.imul(ce,Vt)|0,K=K+Math.imul(X,Q)|0,M=M+Math.imul(X,Y)|0,M=M+Math.imul(ee,Q)|0,j=j+Math.imul(ee,Y)|0,K=K+Math.imul(Z,re)|0,M=M+Math.imul(Z,ie)|0,M=M+Math.imul(V,re)|0,j=j+Math.imul(V,ie)|0;var gi=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(gi>>>26)|0,gi&=67108863,K=Math.imul(Fe,At),M=Math.imul(Fe,Ze),M=M+Math.imul(He,At)|0,j=Math.imul(He,Ze),K=K+Math.imul(we,Pt)|0,M=M+Math.imul(we,$t)|0,M=M+Math.imul(Se,Pt)|0,j=j+Math.imul(Se,$t)|0,K=K+Math.imul(Pe,Bt)|0,M=M+Math.imul(Pe,Wt)|0,M=M+Math.imul(De,Bt)|0,j=j+Math.imul(De,Wt)|0,K=K+Math.imul(Ie,Ht)|0,M=M+Math.imul(Ie,Lt)|0,M=M+Math.imul(je,Ht)|0,j=j+Math.imul(je,Lt)|0,K=K+Math.imul(ge,Nt)|0,M=M+Math.imul(ge,Ft)|0,M=M+Math.imul(ve,Nt)|0,j=j+Math.imul(ve,Ft)|0,K=K+Math.imul(Ee,zt)|0,M=M+Math.imul(Ee,Vt)|0,M=M+Math.imul(Ue,zt)|0,j=j+Math.imul(Ue,Vt)|0,K=K+Math.imul(ae,Q)|0,M=M+Math.imul(ae,Y)|0,M=M+Math.imul(ce,Q)|0,j=j+Math.imul(ce,Y)|0,K=K+Math.imul(X,re)|0,M=M+Math.imul(X,ie)|0,M=M+Math.imul(ee,re)|0,j=j+Math.imul(ee,ie)|0,K=K+Math.imul(Z,ke)|0,M=M+Math.imul(Z,Ne)|0,M=M+Math.imul(V,ke)|0,j=j+Math.imul(V,Ne)|0;var Di=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Di>>>26)|0,Di&=67108863,K=Math.imul(ft,At),M=Math.imul(ft,Ze),M=M+Math.imul(Rt,At)|0,j=Math.imul(Rt,Ze),K=K+Math.imul(Fe,Pt)|0,M=M+Math.imul(Fe,$t)|0,M=M+Math.imul(He,Pt)|0,j=j+Math.imul(He,$t)|0,K=K+Math.imul(we,Bt)|0,M=M+Math.imul(we,Wt)|0,M=M+Math.imul(Se,Bt)|0,j=j+Math.imul(Se,Wt)|0,K=K+Math.imul(Pe,Ht)|0,M=M+Math.imul(Pe,Lt)|0,M=M+Math.imul(De,Ht)|0,j=j+Math.imul(De,Lt)|0,K=K+Math.imul(Ie,Nt)|0,M=M+Math.imul(Ie,Ft)|0,M=M+Math.imul(je,Nt)|0,j=j+Math.imul(je,Ft)|0,K=K+Math.imul(ge,zt)|0,M=M+Math.imul(ge,Vt)|0,M=M+Math.imul(ve,zt)|0,j=j+Math.imul(ve,Vt)|0,K=K+Math.imul(Ee,Q)|0,M=M+Math.imul(Ee,Y)|0,M=M+Math.imul(Ue,Q)|0,j=j+Math.imul(Ue,Y)|0,K=K+Math.imul(ae,re)|0,M=M+Math.imul(ae,ie)|0,M=M+Math.imul(ce,re)|0,j=j+Math.imul(ce,ie)|0,K=K+Math.imul(X,ke)|0,M=M+Math.imul(X,Ne)|0,M=M+Math.imul(ee,ke)|0,j=j+Math.imul(ee,Ne)|0,K=K+Math.imul(Z,jt)|0,M=M+Math.imul(Z,dt)|0,M=M+Math.imul(V,jt)|0,j=j+Math.imul(V,dt)|0;var Cr=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,K=Math.imul(ft,Pt),M=Math.imul(ft,$t),M=M+Math.imul(Rt,Pt)|0,j=Math.imul(Rt,$t),K=K+Math.imul(Fe,Bt)|0,M=M+Math.imul(Fe,Wt)|0,M=M+Math.imul(He,Bt)|0,j=j+Math.imul(He,Wt)|0,K=K+Math.imul(we,Ht)|0,M=M+Math.imul(we,Lt)|0,M=M+Math.imul(Se,Ht)|0,j=j+Math.imul(Se,Lt)|0,K=K+Math.imul(Pe,Nt)|0,M=M+Math.imul(Pe,Ft)|0,M=M+Math.imul(De,Nt)|0,j=j+Math.imul(De,Ft)|0,K=K+Math.imul(Ie,zt)|0,M=M+Math.imul(Ie,Vt)|0,M=M+Math.imul(je,zt)|0,j=j+Math.imul(je,Vt)|0,K=K+Math.imul(ge,Q)|0,M=M+Math.imul(ge,Y)|0,M=M+Math.imul(ve,Q)|0,j=j+Math.imul(ve,Y)|0,K=K+Math.imul(Ee,re)|0,M=M+Math.imul(Ee,ie)|0,M=M+Math.imul(Ue,re)|0,j=j+Math.imul(Ue,ie)|0,K=K+Math.imul(ae,ke)|0,M=M+Math.imul(ae,Ne)|0,M=M+Math.imul(ce,ke)|0,j=j+Math.imul(ce,Ne)|0,K=K+Math.imul(X,jt)|0,M=M+Math.imul(X,dt)|0,M=M+Math.imul(ee,jt)|0,j=j+Math.imul(ee,dt)|0;var bi=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(bi>>>26)|0,bi&=67108863,K=Math.imul(ft,Bt),M=Math.imul(ft,Wt),M=M+Math.imul(Rt,Bt)|0,j=Math.imul(Rt,Wt),K=K+Math.imul(Fe,Ht)|0,M=M+Math.imul(Fe,Lt)|0,M=M+Math.imul(He,Ht)|0,j=j+Math.imul(He,Lt)|0,K=K+Math.imul(we,Nt)|0,M=M+Math.imul(we,Ft)|0,M=M+Math.imul(Se,Nt)|0,j=j+Math.imul(Se,Ft)|0,K=K+Math.imul(Pe,zt)|0,M=M+Math.imul(Pe,Vt)|0,M=M+Math.imul(De,zt)|0,j=j+Math.imul(De,Vt)|0,K=K+Math.imul(Ie,Q)|0,M=M+Math.imul(Ie,Y)|0,M=M+Math.imul(je,Q)|0,j=j+Math.imul(je,Y)|0,K=K+Math.imul(ge,re)|0,M=M+Math.imul(ge,ie)|0,M=M+Math.imul(ve,re)|0,j=j+Math.imul(ve,ie)|0,K=K+Math.imul(Ee,ke)|0,M=M+Math.imul(Ee,Ne)|0,M=M+Math.imul(Ue,ke)|0,j=j+Math.imul(Ue,Ne)|0,K=K+Math.imul(ae,jt)|0,M=M+Math.imul(ae,dt)|0,M=M+Math.imul(ce,jt)|0,j=j+Math.imul(ce,dt)|0;var Mi=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,K=Math.imul(ft,Ht),M=Math.imul(ft,Lt),M=M+Math.imul(Rt,Ht)|0,j=Math.imul(Rt,Lt),K=K+Math.imul(Fe,Nt)|0,M=M+Math.imul(Fe,Ft)|0,M=M+Math.imul(He,Nt)|0,j=j+Math.imul(He,Ft)|0,K=K+Math.imul(we,zt)|0,M=M+Math.imul(we,Vt)|0,M=M+Math.imul(Se,zt)|0,j=j+Math.imul(Se,Vt)|0,K=K+Math.imul(Pe,Q)|0,M=M+Math.imul(Pe,Y)|0,M=M+Math.imul(De,Q)|0,j=j+Math.imul(De,Y)|0,K=K+Math.imul(Ie,re)|0,M=M+Math.imul(Ie,ie)|0,M=M+Math.imul(je,re)|0,j=j+Math.imul(je,ie)|0,K=K+Math.imul(ge,ke)|0,M=M+Math.imul(ge,Ne)|0,M=M+Math.imul(ve,ke)|0,j=j+Math.imul(ve,Ne)|0,K=K+Math.imul(Ee,jt)|0,M=M+Math.imul(Ee,dt)|0,M=M+Math.imul(Ue,jt)|0,j=j+Math.imul(Ue,dt)|0;var oo=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(oo>>>26)|0,oo&=67108863,K=Math.imul(ft,Nt),M=Math.imul(ft,Ft),M=M+Math.imul(Rt,Nt)|0,j=Math.imul(Rt,Ft),K=K+Math.imul(Fe,zt)|0,M=M+Math.imul(Fe,Vt)|0,M=M+Math.imul(He,zt)|0,j=j+Math.imul(He,Vt)|0,K=K+Math.imul(we,Q)|0,M=M+Math.imul(we,Y)|0,M=M+Math.imul(Se,Q)|0,j=j+Math.imul(Se,Y)|0,K=K+Math.imul(Pe,re)|0,M=M+Math.imul(Pe,ie)|0,M=M+Math.imul(De,re)|0,j=j+Math.imul(De,ie)|0,K=K+Math.imul(Ie,ke)|0,M=M+Math.imul(Ie,Ne)|0,M=M+Math.imul(je,ke)|0,j=j+Math.imul(je,Ne)|0,K=K+Math.imul(ge,jt)|0,M=M+Math.imul(ge,dt)|0,M=M+Math.imul(ve,jt)|0,j=j+Math.imul(ve,dt)|0;var Ks=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,K=Math.imul(ft,zt),M=Math.imul(ft,Vt),M=M+Math.imul(Rt,zt)|0,j=Math.imul(Rt,Vt),K=K+Math.imul(Fe,Q)|0,M=M+Math.imul(Fe,Y)|0,M=M+Math.imul(He,Q)|0,j=j+Math.imul(He,Y)|0,K=K+Math.imul(we,re)|0,M=M+Math.imul(we,ie)|0,M=M+Math.imul(Se,re)|0,j=j+Math.imul(Se,ie)|0,K=K+Math.imul(Pe,ke)|0,M=M+Math.imul(Pe,Ne)|0,M=M+Math.imul(De,ke)|0,j=j+Math.imul(De,Ne)|0,K=K+Math.imul(Ie,jt)|0,M=M+Math.imul(Ie,dt)|0,M=M+Math.imul(je,jt)|0,j=j+Math.imul(je,dt)|0;var Mo=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,K=Math.imul(ft,Q),M=Math.imul(ft,Y),M=M+Math.imul(Rt,Q)|0,j=Math.imul(Rt,Y),K=K+Math.imul(Fe,re)|0,M=M+Math.imul(Fe,ie)|0,M=M+Math.imul(He,re)|0,j=j+Math.imul(He,ie)|0,K=K+Math.imul(we,ke)|0,M=M+Math.imul(we,Ne)|0,M=M+Math.imul(Se,ke)|0,j=j+Math.imul(Se,Ne)|0,K=K+Math.imul(Pe,jt)|0,M=M+Math.imul(Pe,dt)|0,M=M+Math.imul(De,jt)|0,j=j+Math.imul(De,dt)|0;var Ga=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,K=Math.imul(ft,re),M=Math.imul(ft,ie),M=M+Math.imul(Rt,re)|0,j=Math.imul(Rt,ie),K=K+Math.imul(Fe,ke)|0,M=M+Math.imul(Fe,Ne)|0,M=M+Math.imul(He,ke)|0,j=j+Math.imul(He,Ne)|0,K=K+Math.imul(we,jt)|0,M=M+Math.imul(we,dt)|0,M=M+Math.imul(Se,jt)|0,j=j+Math.imul(Se,dt)|0;var jh=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(jh>>>26)|0,jh&=67108863,K=Math.imul(ft,ke),M=Math.imul(ft,Ne),M=M+Math.imul(Rt,ke)|0,j=Math.imul(Rt,Ne),K=K+Math.imul(Fe,jt)|0,M=M+Math.imul(Fe,dt)|0,M=M+Math.imul(He,jt)|0,j=j+Math.imul(He,dt)|0;var Uh=(D+K|0)+((M&8191)<<13)|0;D=(j+(M>>>13)|0)+(Uh>>>26)|0,Uh&=67108863,K=Math.imul(ft,jt),M=Math.imul(ft,dt),M=M+Math.imul(Rt,jt)|0,j=Math.imul(Rt,dt);var $u=(D+K|0)+((M&8191)<<13)|0;return D=(j+(M>>>13)|0)+($u>>>26)|0,$u&=67108863,v[0]=Jr,v[1]=an,v[2]=Wr,v[3]=sr,v[4]=Yr,v[5]=Rr,v[6]=Us,v[7]=gi,v[8]=Di,v[9]=Cr,v[10]=bi,v[11]=Mi,v[12]=oo,v[13]=Ks,v[14]=Mo,v[15]=Ga,v[16]=jh,v[17]=Uh,v[18]=$u,D!==0&&(v[19]=D,w.length++),w};Math.imul||(A=S);function I(k,f,y){y.negative=f.negative^k.negative,y.length=k.length+f.length;for(var w=0,_=0,x=0;x<y.length-1;x++){var v=_;_=0;for(var D=w&67108863,K=Math.min(x,f.length-1),M=Math.max(0,x-k.length+1);M<=K;M++){var j=x-M,J=k.words[j]|0,Z=f.words[M]|0,V=J*Z,H=V&67108863;v=v+(V/67108864|0)|0,H=H+D|0,D=H&67108863,v=v+(H>>>26)|0,_+=v>>>26,v&=67108863}y.words[x]=D,w=v,v=_}return w!==0?y.words[x]=w:y.length--,y._strip()}function P(k,f,y){return I(k,f,y)}i.prototype.mulTo=function(f,y){var w,_=this.length+f.length;return this.length===10&&f.length===10?w=A(this,f,y):_<63?w=S(this,f,y):_<1024?w=I(this,f,y):w=P(this,f,y),w};function $(k,f){this.x=k,this.y=f}$.prototype.makeRBT=function(f){for(var y=new Array(f),w=i.prototype._countBits(f)-1,_=0;_<f;_++)y[_]=this.revBin(_,w,f);return y},$.prototype.revBin=function(f,y,w){if(f===0||f===w-1)return f;for(var _=0,x=0;x<y;x++)_|=(f&1)<<y-x-1,f>>=1;return _},$.prototype.permute=function(f,y,w,_,x,v){for(var D=0;D<v;D++)_[D]=y[f[D]],x[D]=w[f[D]]},$.prototype.transform=function(f,y,w,_,x,v){this.permute(v,f,y,w,_,x);for(var D=1;D<x;D<<=1)for(var K=D<<1,M=Math.cos(2*Math.PI/K),j=Math.sin(2*Math.PI/K),J=0;J<x;J+=K)for(var Z=M,V=j,H=0;H<D;H++){var X=w[J+H],ee=_[J+H],ue=w[J+H+D],ae=_[J+H+D],ce=Z*ue-V*ae;ae=Z*ae+V*ue,ue=ce,w[J+H]=X+ue,_[J+H]=ee+ae,w[J+H+D]=X-ue,_[J+H+D]=ee-ae,H!==K&&(ce=M*Z-j*V,V=M*V+j*Z,Z=ce)}},$.prototype.guessLen13b=function(f,y){var w=Math.max(y,f)|1,_=w&1,x=0;for(w=w/2|0;w;w=w>>>1)x++;return 1<<x+1+_},$.prototype.conjugate=function(f,y,w){if(!(w<=1))for(var _=0;_<w/2;_++){var x=f[_];f[_]=f[w-_-1],f[w-_-1]=x,x=y[_],y[_]=-y[w-_-1],y[w-_-1]=-x}},$.prototype.normalize13b=function(f,y){for(var w=0,_=0;_<y/2;_++){var x=Math.round(f[2*_+1]/y)*8192+Math.round(f[2*_]/y)+w;f[_]=x&67108863,x<67108864?w=0:w=x/67108864|0}return f},$.prototype.convert13b=function(f,y,w,_){for(var x=0,v=0;v<y;v++)x=x+(f[v]|0),w[2*v]=x&8191,x=x>>>13,w[2*v+1]=x&8191,x=x>>>13;for(v=2*y;v<_;++v)w[v]=0;r(x===0),r((x&-8192)===0)},$.prototype.stub=function(f){for(var y=new Array(f),w=0;w<f;w++)y[w]=0;return y},$.prototype.mulp=function(f,y,w){var _=2*this.guessLen13b(f.length,y.length),x=this.makeRBT(_),v=this.stub(_),D=new Array(_),K=new Array(_),M=new Array(_),j=new Array(_),J=new Array(_),Z=new Array(_),V=w.words;V.length=_,this.convert13b(f.words,f.length,D,_),this.convert13b(y.words,y.length,j,_),this.transform(D,v,K,M,_,x),this.transform(j,v,J,Z,_,x);for(var H=0;H<_;H++){var X=K[H]*J[H]-M[H]*Z[H];M[H]=K[H]*Z[H]+M[H]*J[H],K[H]=X}return this.conjugate(K,M,_),this.transform(K,M,V,v,_,x),this.conjugate(V,v,_),this.normalize13b(V,_),w.negative=f.negative^y.negative,w.length=f.length+y.length,w._strip()},i.prototype.mul=function(f){var y=new i(null);return y.words=new Array(this.length+f.length),this.mulTo(f,y)},i.prototype.mulf=function(f){var y=new i(null);return y.words=new Array(this.length+f.length),P(this,f,y)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){var y=f<0;y&&(f=-f),r(typeof f=="number"),r(f<67108864);for(var w=0,_=0;_<this.length;_++){var x=(this.words[_]|0)*f,v=(x&67108863)+(w&67108863);w>>=26,w+=x/67108864|0,w+=v>>>26,this.words[_]=v&67108863}return w!==0&&(this.words[_]=w,this.length++),y?this.ineg():this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var y=b(f);if(y.length===0)return new i(1);for(var w=this,_=0;_<y.length&&y[_]===0;_++,w=w.sqr());if(++_<y.length)for(var x=w.sqr();_<y.length;_++,x=x.sqr())y[_]!==0&&(w=w.mul(x));return w},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var y=f%26,w=(f-y)/26,_=67108863>>>26-y<<26-y,x;if(y!==0){var v=0;for(x=0;x<this.length;x++){var D=this.words[x]&_,K=(this.words[x]|0)-D<<y;this.words[x]=K|v,v=D>>>26-y}v&&(this.words[x]=v,this.length++)}if(w!==0){for(x=this.length-1;x>=0;x--)this.words[x+w]=this.words[x];for(x=0;x<w;x++)this.words[x]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,y,w){r(typeof f=="number"&&f>=0);var _;y?_=(y-y%26)/26:_=0;var x=f%26,v=Math.min((f-x)/26,this.length),D=67108863^67108863>>>x<<x,K=w;if(_-=v,_=Math.max(0,_),K){for(var M=0;M<v;M++)K.words[M]=this.words[M];K.length=v}if(v!==0)if(this.length>v)for(this.length-=v,M=0;M<this.length;M++)this.words[M]=this.words[M+v];else this.words[0]=0,this.length=1;var j=0;for(M=this.length-1;M>=0&&(j!==0||M>=_);M--){var J=this.words[M]|0;this.words[M]=j<<26-x|J>>>x,j=J&D}return K&&j!==0&&(K.words[K.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(f,y,w){return r(this.negative===0),this.iushrn(f,y,w)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var y=f%26,w=(f-y)/26,_=1<<y;if(this.length<=w)return!1;var x=this.words[w];return!!(x&_)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var y=f%26,w=(f-y)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(y!==0&&w++,this.length=Math.min(w,this.length),y!==0){var _=67108863^67108863>>>y<<y;this.words[this.length-1]&=_}return this._strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this._strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,y,w){var _=f.length+w,x;this._expand(_);var v,D=0;for(x=0;x<f.length;x++){v=(this.words[x+w]|0)+D;var K=(f.words[x]|0)*y;v-=K&67108863,D=(v>>26)-(K/67108864|0),this.words[x+w]=v&67108863}for(;x<this.length-w;x++)v=(this.words[x+w]|0)+D,D=v>>26,this.words[x+w]=v&67108863;if(D===0)return this._strip();for(r(D===-1),D=0,x=0;x<this.length;x++)v=-(this.words[x]|0)+D,D=v>>26,this.words[x]=v&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(f,y){var w=this.length-f.length,_=this.clone(),x=f,v=x.words[x.length-1]|0,D=this._countBits(v);w=26-D,w!==0&&(x=x.ushln(w),_.iushln(w),v=x.words[x.length-1]|0);var K=_.length-x.length,M;if(y!=="mod"){M=new i(null),M.length=K+1,M.words=new Array(M.length);for(var j=0;j<M.length;j++)M.words[j]=0}var J=_.clone()._ishlnsubmul(x,1,K);J.negative===0&&(_=J,M&&(M.words[K]=1));for(var Z=K-1;Z>=0;Z--){var V=(_.words[x.length+Z]|0)*67108864+(_.words[x.length+Z-1]|0);for(V=Math.min(V/v|0,67108863),_._ishlnsubmul(x,V,Z);_.negative!==0;)V--,_.negative=0,_._ishlnsubmul(x,1,Z),_.isZero()||(_.negative^=1);M&&(M.words[Z]=V)}return M&&M._strip(),_._strip(),y!=="div"&&w!==0&&_.iushrn(w),{div:M||null,mod:_}},i.prototype.divmod=function(f,y,w){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var _,x,v;return this.negative!==0&&f.negative===0?(v=this.neg().divmod(f,y),y!=="mod"&&(_=v.div.neg()),y!=="div"&&(x=v.mod.neg(),w&&x.negative!==0&&x.iadd(f)),{div:_,mod:x}):this.negative===0&&f.negative!==0?(v=this.divmod(f.neg(),y),y!=="mod"&&(_=v.div.neg()),{div:_,mod:v.mod}):this.negative&f.negative?(v=this.neg().divmod(f.neg(),y),y!=="div"&&(x=v.mod.neg(),w&&x.negative!==0&&x.isub(f)),{div:v.div,mod:x}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?y==="div"?{div:this.divn(f.words[0]),mod:null}:y==="mod"?{div:null,mod:new i(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modrn(f.words[0]))}:this._wordDiv(f,y)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var y=this.divmod(f);if(y.mod.isZero())return y.div;var w=y.div.negative!==0?y.mod.isub(f):y.mod,_=f.ushrn(1),x=f.andln(1),v=w.cmp(_);return v<0||x===1&&v===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},i.prototype.modrn=function(f){var y=f<0;y&&(f=-f),r(f<=67108863);for(var w=(1<<26)%f,_=0,x=this.length-1;x>=0;x--)_=(w*_+(this.words[x]|0))%f;return y?-_:_},i.prototype.modn=function(f){return this.modrn(f)},i.prototype.idivn=function(f){var y=f<0;y&&(f=-f),r(f<=67108863);for(var w=0,_=this.length-1;_>=0;_--){var x=(this.words[_]|0)+w*67108864;this.words[_]=x/f|0,w=x%f}return this._strip(),y?this.ineg():this},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var y=this,w=f.clone();y.negative!==0?y=y.umod(f):y=y.clone();for(var _=new i(1),x=new i(0),v=new i(0),D=new i(1),K=0;y.isEven()&&w.isEven();)y.iushrn(1),w.iushrn(1),++K;for(var M=w.clone(),j=y.clone();!y.isZero();){for(var J=0,Z=1;!(y.words[0]&Z)&&J<26;++J,Z<<=1);if(J>0)for(y.iushrn(J);J-- >0;)(_.isOdd()||x.isOdd())&&(_.iadd(M),x.isub(j)),_.iushrn(1),x.iushrn(1);for(var V=0,H=1;!(w.words[0]&H)&&V<26;++V,H<<=1);if(V>0)for(w.iushrn(V);V-- >0;)(v.isOdd()||D.isOdd())&&(v.iadd(M),D.isub(j)),v.iushrn(1),D.iushrn(1);y.cmp(w)>=0?(y.isub(w),_.isub(v),x.isub(D)):(w.isub(y),v.isub(_),D.isub(x))}return{a:v,b:D,gcd:w.iushln(K)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var y=this,w=f.clone();y.negative!==0?y=y.umod(f):y=y.clone();for(var _=new i(1),x=new i(0),v=w.clone();y.cmpn(1)>0&&w.cmpn(1)>0;){for(var D=0,K=1;!(y.words[0]&K)&&D<26;++D,K<<=1);if(D>0)for(y.iushrn(D);D-- >0;)_.isOdd()&&_.iadd(v),_.iushrn(1);for(var M=0,j=1;!(w.words[0]&j)&&M<26;++M,j<<=1);if(M>0)for(w.iushrn(M);M-- >0;)x.isOdd()&&x.iadd(v),x.iushrn(1);y.cmp(w)>=0?(y.isub(w),_.isub(x)):(w.isub(y),x.isub(_))}var J;return y.cmpn(1)===0?J=_:J=x,J.cmpn(0)<0&&J.iadd(f),J},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var y=this.clone(),w=f.clone();y.negative=0,w.negative=0;for(var _=0;y.isEven()&&w.isEven();_++)y.iushrn(1),w.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;w.isEven();)w.iushrn(1);var x=y.cmp(w);if(x<0){var v=y;y=w,w=v}else if(x===0||w.cmpn(1)===0)break;y.isub(w)}while(!0);return w.iushln(_)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var y=f%26,w=(f-y)/26,_=1<<y;if(this.length<=w)return this._expand(w+1),this.words[w]|=_,this;for(var x=_,v=w;x!==0&&v<this.length;v++){var D=this.words[v]|0;D+=x,x=D>>>26,D&=67108863,this.words[v]=D}return x!==0&&(this.words[v]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var y=f<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this._strip();var w;if(this.length>1)w=1;else{y&&(f=-f),r(f<=67108863,"Number is too big");var _=this.words[0]|0;w=_===f?0:_<f?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var y=this.ucmp(f);return this.negative!==0?-y|0:y},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var y=0,w=this.length-1;w>=0;w--){var _=this.words[w]|0,x=f.words[w]|0;if(_!==x){_<x?y=-1:_>x&&(y=1);break}}return y},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new T(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function L(k,f){this.name=k,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},L.prototype.ireduce=function(f){var y=f,w;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),w=y.bitLength();while(w>this.n);var _=w<this.n?-1:y.ucmp(this.p);return _===0?(y.words[0]=0,y.length=1):_>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},L.prototype.split=function(f,y){f.iushrn(this.n,0,y)},L.prototype.imulK=function(f){return f.imul(this.k)};function F(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(F,L),F.prototype.split=function(f,y){for(var w=4194303,_=Math.min(f.length,9),x=0;x<_;x++)y.words[x]=f.words[x];if(y.length=_,f.length<=9){f.words[0]=0,f.length=1;return}var v=f.words[9];for(y.words[y.length++]=v&w,x=10;x<f.length;x++){var D=f.words[x]|0;f.words[x-10]=(D&w)<<4|v>>>22,v=D}v>>>=22,f.words[x-10]=v,v===0&&f.length>10?f.length-=10:f.length-=9},F.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var y=0,w=0;w<f.length;w++){var _=f.words[w]|0;y+=_*977,f.words[w]=y&67108863,y=_*64+(y/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function U(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(U,L);function G(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(G,L);function q(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,L),q.prototype.imulK=function(f){for(var y=0,w=0;w<f.length;w++){var _=(f.words[w]|0)*19+y,x=_&67108863;_>>>=26,f.words[w]=x,y=_}return y!==0&&(f.words[f.length++]=y),f},i._prime=function(f){if(N[f])return N[f];var y;if(f==="k256")y=new F;else if(f==="p224")y=new U;else if(f==="p192")y=new G;else if(f==="p25519")y=new q;else throw new Error("Unknown prime "+f);return N[f]=y,y};function T(k){if(typeof k=="string"){var f=i._prime(k);this.m=f.p,this.prime=f}else r(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}T.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},T.prototype._verify2=function(f,y){r((f.negative|y.negative)===0,"red works only with positives"),r(f.red&&f.red===y.red,"red works only with red numbers")},T.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},T.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},T.prototype.add=function(f,y){this._verify2(f,y);var w=f.add(y);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},T.prototype.iadd=function(f,y){this._verify2(f,y);var w=f.iadd(y);return w.cmp(this.m)>=0&&w.isub(this.m),w},T.prototype.sub=function(f,y){this._verify2(f,y);var w=f.sub(y);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},T.prototype.isub=function(f,y){this._verify2(f,y);var w=f.isub(y);return w.cmpn(0)<0&&w.iadd(this.m),w},T.prototype.shl=function(f,y){return this._verify1(f),this.imod(f.ushln(y))},T.prototype.imul=function(f,y){return this._verify2(f,y),this.imod(f.imul(y))},T.prototype.mul=function(f,y){return this._verify2(f,y),this.imod(f.mul(y))},T.prototype.isqr=function(f){return this.imul(f,f.clone())},T.prototype.sqr=function(f){return this.mul(f,f)},T.prototype.sqrt=function(f){if(f.isZero())return f.clone();var y=this.m.andln(3);if(r(y%2===1),y===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(f,w)}for(var _=this.m.subn(1),x=0;!_.isZero()&&_.andln(1)===0;)x++,_.iushrn(1);r(!_.isZero());var v=new i(1).toRed(this),D=v.redNeg(),K=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new i(2*M*M).toRed(this);this.pow(M,K).cmp(D)!==0;)M.redIAdd(D);for(var j=this.pow(M,_),J=this.pow(f,_.addn(1).iushrn(1)),Z=this.pow(f,_),V=x;Z.cmp(v)!==0;){for(var H=Z,X=0;H.cmp(v)!==0;X++)H=H.redSqr();r(X<V);var ee=this.pow(j,new i(1).iushln(V-X-1));J=J.redMul(ee),j=ee.redSqr(),Z=Z.redMul(j),V=X}return J},T.prototype.invm=function(f){var y=f._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},T.prototype.pow=function(f,y){if(y.isZero())return new i(1).toRed(this);if(y.cmpn(1)===0)return f.clone();var w=4,_=new Array(1<<w);_[0]=new i(1).toRed(this),_[1]=f;for(var x=2;x<_.length;x++)_[x]=this.mul(_[x-1],f);var v=_[0],D=0,K=0,M=y.bitLength()%26;for(M===0&&(M=26),x=y.length-1;x>=0;x--){for(var j=y.words[x],J=M-1;J>=0;J--){var Z=j>>J&1;if(v!==_[0]&&(v=this.sqr(v)),Z===0&&D===0){K=0;continue}D<<=1,D|=Z,K++,!(K!==w&&(x!==0||J!==0))&&(v=this.mul(v,_[D]),K=0,D=0)}M=26}return v},T.prototype.convertTo=function(f){var y=f.umod(this.m);return y===f?y.clone():y},T.prototype.convertFrom=function(f){var y=f.clone();return y.red=null,y},i.mont=function(f){return new E(f)};function E(k){T.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(E,T),E.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},E.prototype.convertFrom=function(f){var y=this.imod(f.mul(this.rinv));return y.red=null,y},E.prototype.imul=function(f,y){if(f.isZero()||y.isZero())return f.words[0]=0,f.length=1,f;var w=f.imul(y),_=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=w.isub(_).iushrn(this.shift),v=x;return x.cmp(this.m)>=0?v=x.isub(this.m):x.cmpn(0)<0&&(v=x.iadd(this.m)),v._forceRed(this)},E.prototype.mul=function(f,y){if(f.isZero()||y.isZero())return new i(0)._forceRed(this);var w=f.mul(y),_=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=w.isub(_).iushrn(this.shift),v=x;return x.cmp(this.m)>=0?v=x.isub(this.m):x.cmpn(0)<0&&(v=x.iadd(this.m)),v._forceRed(this)},E.prototype.invm=function(f){var y=this.imod(f._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(typeof s7>"u"||s7,DY)});var v5=W(($lt,CY)=>{h();var hv=b5(),$5e=jy();function N5e(t){var e=MY(t),r=e.toRed(hv.mont(t.modulus)).redPow(new hv(t.publicExponent)).fromRed();return{blinder:r,unblinder:e.invm(t.modulus)}}function MY(t){var e=t.modulus.byteLength(),r;do r=new hv($5e(e));while(r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2));return r}function BY(t,e){var r=N5e(e),n=e.modulus.byteLength(),i=new hv(t).mul(r.blinder).umod(e.modulus),o=i.toRed(hv.mont(e.prime1)),s=i.toRed(hv.mont(e.prime2)),a=e.coefficient,d=e.prime1,u=e.prime2,c=o.redPow(e.exponent1).fromRed(),l=s.redPow(e.exponent2).fromRed(),m=c.isub(l).imul(a).umod(d).imul(u);return l.iadd(m).imul(r.unblinder).umod(e.modulus).toArrayLike(O.Buffer,"be",n)}BY.getr=MY;CY.exports=BY});var OY=W((jlt,j5e)=>{j5e.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var a7=W(jY=>{"use strict";h();var w5=jY;function U5e(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=i&255;o?r.push(o,s):r.push(s)}return r}w5.toArray=U5e;function $Y(t){return t.length===1?"0"+t:t}w5.zero2=$Y;function NY(t){for(var e="",r=0;r<t.length;r++)e+=$Y(t[r].toString(16));return e}w5.toHex=NY;w5.encode=function(e,r){return r==="hex"?NY(e):e}});var oc=W(UY=>{"use strict";h();var Hd=UY,K5e=zi(),q5e=ic(),_5=a7();Hd.assert=q5e;Hd.toArray=_5.toArray;Hd.zero2=_5.zero2;Hd.toHex=_5.toHex;Hd.encode=_5.encode;function L5e(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,d=o.andln(i-1);o.isOdd()?(d>(i>>1)-1?a=(i>>1)-d:a=d,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n}Hd.getNAF=L5e;function F5e(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0,o;t.cmpn(-n)>0||e.cmpn(-i)>0;){var s=t.andln(3)+n&3,a=e.andln(3)+i&3;s===3&&(s=-1),a===3&&(a=-1);var d;s&1?(o=t.andln(7)+n&7,(o===3||o===5)&&a===2?d=-s:d=s):d=0,r[0].push(d);var u;a&1?(o=e.andln(7)+i&7,(o===3||o===5)&&s===2?u=-a:u=a):u=0,r[1].push(u),2*n===d+1&&(n=1-n),2*i===u+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return r}Hd.getJSF=F5e;function z5e(t,e,r){var n="_"+e;t.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}Hd.cachedProperty=z5e;function G5e(t){return typeof t=="string"?Hd.toArray(t,"hex"):t}Hd.parseBytes=G5e;function W5e(t){return new K5e(t,"hex","le")}Hd.intFromLE=W5e});var B_=W((Flt,KY)=>{"use strict";h();var e0=zi(),M_=oc(),x5=M_.getNAF,H5e=M_.getJSF,E5=M_.assert;function bp(t,e){this.type=t,this.p=new e0(e.p,16),this.red=e.prime?e0.red(e.prime):e0.mont(this.p),this.zero=new e0(0).toRed(this.red),this.one=new e0(1).toRed(this.red),this.two=new e0(2).toRed(this.red),this.n=e.n&&new e0(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}KY.exports=bp;bp.prototype.point=function(){throw new Error("Not implemented")};bp.prototype.validate=function(){throw new Error("Not implemented")};bp.prototype._fixedNafMul=function(e,r){E5(e.precomputed);var n=e._getDoubles(),i=x5(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,d;for(a=0;a<i.length;a+=n.step){d=0;for(var u=a+n.step-1;u>=a;u--)d=(d<<1)+i[u];s.push(d)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),m=o;m>0;m--){for(a=0;a<s.length;a++)d=s[a],d===m?l=l.mixedAdd(n.points[a]):d===-m&&(l=l.mixedAdd(n.points[a].neg()));c=c.add(l)}return c.toP()};bp.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=x5(r,n,this._bitLength),a=this.jpoint(null,null,null),d=s.length-1;d>=0;d--){for(var u=0;d>=0&&s[d]===0;d--)u++;if(d>=0&&u++,a=a.dblp(u),d<0)break;var c=s[d];E5(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(o[c-1>>1]):a=a.mixedAdd(o[-c-1>>1].neg()):c>0?a=a.add(o[c-1>>1]):a=a.add(o[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};bp.prototype._wnafMulAdd=function(e,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,d=this._wnafT3,u=0,c,l,m;for(c=0;c<i;c++){m=r[c];var p=m._getNAFPoints(e);s[c]=p.wnd,a[c]=p.points}for(c=i-1;c>=1;c-=2){var g=c-1,b=c;if(s[g]!==1||s[b]!==1){d[g]=x5(n[g],s[g],this._bitLength),d[b]=x5(n[b],s[b],this._bitLength),u=Math.max(d[g].length,u),u=Math.max(d[b].length,u);continue}var S=[r[g],null,null,r[b]];r[g].y.cmp(r[b].y)===0?(S[1]=r[g].add(r[b]),S[2]=r[g].toJ().mixedAdd(r[b].neg())):r[g].y.cmp(r[b].y.redNeg())===0?(S[1]=r[g].toJ().mixedAdd(r[b]),S[2]=r[g].add(r[b].neg())):(S[1]=r[g].toJ().mixedAdd(r[b]),S[2]=r[g].toJ().mixedAdd(r[b].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],I=H5e(n[g],n[b]);for(u=Math.max(I[0].length,u),d[g]=new Array(u),d[b]=new Array(u),l=0;l<u;l++){var P=I[0][l]|0,$=I[1][l]|0;d[g][l]=A[(P+1)*3+($+1)],d[b][l]=0,a[g]=S}}var N=this.jpoint(null,null,null),L=this._wnafT4;for(c=u;c>=0;c--){for(var F=0;c>=0;){var U=!0;for(l=0;l<i;l++)L[l]=d[l][c]|0,L[l]!==0&&(U=!1);if(!U)break;F++,c--}if(c>=0&&F++,N=N.dblp(F),c<0)break;for(l=0;l<i;l++){var G=L[l];G!==0&&(G>0?m=a[l][G-1>>1]:G<0&&(m=a[l][-G-1>>1].neg()),m.type==="affine"?N=N.mixedAdd(m):N=N.add(m))}}for(c=0;c<i;c++)a[c]=null;return o?N:N.toP()};function Hc(t,e){this.curve=t,this.type=e,this.precomputed=null}bp.BasePoint=Hc;Hc.prototype.eq=function(){throw new Error("Not implemented")};Hc.prototype.validate=function(){return this.curve.validate(this)};bp.prototype.decodePoint=function(e,r){e=M_.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?E5(e[e.length-1]%2===0):e[0]===7&&E5(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Hc.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Hc.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Hc.prototype.encode=function(e,r){return M_.encode(this._encode(r),e)};Hc.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Hc.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Hc.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};Hc.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};Hc.prototype._getBeta=function(){return null};Hc.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r}});var LY=W((Glt,qY)=>{"use strict";h();var V5e=oc(),ci=zi(),c7=cr(),pv=B_(),J5e=V5e.assert;function Vc(t){pv.call(this,"short",t),this.a=new ci(t.a,16).toRed(this.red),this.b=new ci(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}c7(Vc,pv);qY.exports=Vc;Vc.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ci(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new ci(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],J5e(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new ci(a.a,16),b:new ci(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};Vc.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ci.mont(e),n=new ci(2).toRed(r).redInvm(),i=n.redNeg(),o=new ci(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};Vc.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new ci(1),s=new ci(0),a=new ci(0),d=new ci(1),u,c,l,m,p,g,b,S=0,A,I;n.cmpn(0)!==0;){var P=i.div(n);A=i.sub(P.mul(n)),I=a.sub(P.mul(o));var $=d.sub(P.mul(s));if(!l&&A.cmp(r)<0)u=b.neg(),c=o,l=A.neg(),m=I;else if(l&&++S===2)break;b=A,i=n,n=A,a=o,o=I,d=s,s=$}p=A.neg(),g=I;var N=l.sqr().add(m.sqr()),L=p.sqr().add(g.sqr());return L.cmp(N)>=0&&(p=u,g=c),l.negative&&(l=l.neg(),m=m.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:l,b:m},{a:p,b:g}]};Vc.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),a=o.mul(n.a),d=s.mul(i.a),u=o.mul(n.b),c=s.mul(i.b),l=e.sub(a).sub(d),m=u.add(c).neg();return{k1:l,k2:m}};Vc.prototype.pointFromX=function(e,r){e=new ci(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};Vc.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Vc.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(r[s]),d=e[s],u=d._getBeta();a.k1.negative&&(a.k1.ineg(),d=d.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=d,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,o,s*2,n),l=0;l<s*2;l++)i[l]=null,o[l]=null;return c};function mo(t,e,r,n){pv.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ci(e,16),this.y=new ci(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}c7(mo,pv.BasePoint);Vc.prototype.point=function(e,r,n){return new mo(this,e,r,n)};Vc.prototype.pointFromJSON=function(e,r){return mo.fromJSON(this,e,r)};mo.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};mo.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};mo.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(a){return e.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};mo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};mo.prototype.isInfinity=function(){return this.inf};mo.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};mo.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};mo.prototype.getX=function(){return this.x.fromRed()};mo.prototype.getY=function(){return this.y.fromRed()};mo.prototype.mul=function(e){return e=new ci(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};mo.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};mo.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};mo.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};mo.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};mo.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function No(t,e,r,n){pv.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ci(0)):(this.x=new ci(e,16),this.y=new ci(r,16),this.z=new ci(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}c7(No,pv.BasePoint);Vc.prototype.jpoint=function(e,r,n){return new No(this,e,r,n)};No.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};No.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};No.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),s=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),d=i.redSub(o),u=s.redSub(a);if(d.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=d.redSqr(),l=c.redMul(d),m=i.redMul(c),p=u.redSqr().redIAdd(l).redISub(m).redISub(m),g=u.redMul(m.redISub(p)).redISub(s.redMul(l)),b=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(p,g,b)};No.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,s=e.y.redMul(r).redMul(this.z),a=n.redSub(i),d=o.redSub(s);if(a.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),m=d.redSqr().redIAdd(c).redISub(l).redISub(l),p=d.redMul(l.redISub(m)).redISub(o.redMul(c)),g=this.z.redMul(a);return this.curve.jpoint(m,p,g)};No.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,d=this.z,u=d.redSqr().redSqr(),c=a.redAdd(a);for(r=0;r<e;r++){var l=s.redSqr(),m=c.redSqr(),p=m.redSqr(),g=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),b=s.redMul(m),S=g.redSqr().redISub(b.redAdd(b)),A=b.redISub(S),I=g.redMul(A);I=I.redIAdd(I).redISub(p);var P=c.redMul(d);r+1<e&&(u=u.redMul(p)),s=S,d=P,c=I}return this.curve.jpoint(s,c.redMul(o),d)};No.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};No.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var d=i.redAdd(i).redIAdd(i),u=d.redSqr().redISub(a).redISub(a),c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),e=u,r=d.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),m=this.y.redSqr(),p=m.redSqr(),g=this.x.redAdd(m).redSqr().redISub(l).redISub(p);g=g.redIAdd(g);var b=l.redAdd(l).redIAdd(l),S=b.redSqr(),A=p.redIAdd(p);A=A.redIAdd(A),A=A.redIAdd(A),e=S.redISub(g).redISub(g),r=b.redMul(g.redISub(e)).redISub(A),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};No.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var d=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=d.redSqr().redISub(a).redISub(a);e=u;var c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),r=d.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),m=this.y.redSqr(),p=this.x.redMul(m),g=this.x.redSub(l).redMul(this.x.redAdd(l));g=g.redAdd(g).redIAdd(g);var b=p.redIAdd(p);b=b.redIAdd(b);var S=b.redAdd(b);e=g.redSqr().redISub(S),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(l);var A=m.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),r=g.redMul(b.redISub(e)).redISub(A)}return this.curve.jpoint(e,r,n)};No.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),d=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var c=u.redMul(a),l=d.redSqr().redISub(c.redAdd(c)),m=c.redISub(l),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=d.redMul(m).redISub(p),b=n.redAdd(n).redMul(i);return this.curve.jpoint(l,g,b)};No.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var d=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=o.redIAdd(a).redSqr().redISub(s).redISub(d).redISub(u),l=r.redMul(c);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.x.redMul(d).redISub(l);m=m.redIAdd(m),m=m.redIAdd(m);var p=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(d)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(d);return this.curve.jpoint(m,p,g)};No.prototype.mul=function(e,r){return e=new ci(e,r),this.curve._wnafMul(this,e)};No.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};No.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};No.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};No.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var GY=W((Hlt,zY)=>{"use strict";h();var mv=zi(),FY=cr(),S5=B_(),Y5e=oc();function yv(t){S5.call(this,"mont",t),this.a=new mv(t.a,16).toRed(this.red),this.b=new mv(t.b,16).toRed(this.red),this.i4=new mv(4).toRed(this.red).redInvm(),this.two=new mv(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}FY(yv,S5);zY.exports=yv;yv.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),o=i.redSqrt();return o.redSqr().cmp(i)===0};function yo(t,e,r){S5.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new mv(e,16),this.z=new mv(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}FY(yo,S5.BasePoint);yv.prototype.decodePoint=function(e,r){return this.point(Y5e.toArray(e,r),1)};yv.prototype.point=function(e,r){return new yo(this,e,r)};yv.prototype.pointFromJSON=function(e){return yo.fromJSON(this,e)};yo.prototype.precompute=function(){};yo.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};yo.fromJSON=function(e,r){return new yo(e,r[0],r[1]||e.one)};yo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};yo.prototype.isInfinity=function(){return this.z.cmpn(0)===0};yo.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=r.redSub(i),s=r.redMul(i),a=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,a)};yo.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};yo.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),s=e.x.redSub(e.z),a=s.redMul(n),d=o.redMul(i),u=r.z.redMul(a.redAdd(d).redSqr()),c=r.x.redMul(a.redISub(d).redSqr());return this.curve.point(u,c)};yo.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),o=this,s=[];r.cmpn(0)!==0;r.iushrn(1))s.push(r.andln(1));for(var a=s.length-1;a>=0;a--)s[a]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};yo.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};yo.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};yo.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};yo.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};yo.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var VY=W((Jlt,HY)=>{"use strict";h();var Z5e=oc(),Mf=zi(),WY=cr(),A5=B_(),X5e=Z5e.assert;function tl(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,A5.call(this,"edwards",t),this.a=new Mf(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Mf(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Mf(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),X5e(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}WY(tl,A5);HY.exports=tl;tl.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};tl.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};tl.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};tl.prototype.pointFromX=function(e,r){e=new Mf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var d=a.fromRed().isOdd();return(r&&!d||!r&&d)&&(a=a.redNeg()),this.point(e,a)};tl.prototype.pointFromY=function(e,r){e=new Mf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(s.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};tl.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(o)===0};function An(t,e,r,n,i){A5.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Mf(e,16),this.y=new Mf(r,16),this.z=n?new Mf(n,16):this.curve.one,this.t=i&&new Mf(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}WY(An,A5.BasePoint);tl.prototype.pointFromJSON=function(e){return An.fromJSON(this,e)};tl.prototype.point=function(e,r,n,i){return new An(this,e,r,n,i)};An.fromJSON=function(e,r){return new An(e,r[0],r[1],r[2])};An.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};An.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};An.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),s=i.redAdd(r),a=s.redSub(n),d=i.redSub(r),u=o.redMul(a),c=s.redMul(d),l=o.redMul(d),m=a.redMul(s);return this.curve.point(u,c,m,l)};An.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,o,s,a,d,u;if(this.curve.twisted){a=this.curve._mulA(r);var c=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(c.redSub(this.curve.two)),o=c.redMul(a.redSub(n)),s=c.redSqr().redSub(c).redSub(c)):(d=this.z.redSqr(),u=c.redSub(d).redISub(d),i=e.redSub(r).redISub(n).redMul(u),o=c.redMul(a.redSub(n)),s=c.redMul(u))}else a=r.redAdd(n),d=this.curve._mulC(this.z).redSqr(),u=a.redSub(d).redSub(d),i=this.curve._mulC(e.redISub(a)).redMul(u),o=this.curve._mulC(a).redMul(r.redISub(n)),s=a.redMul(u);return this.curve.point(i,o,s)};An.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};An.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(r),a=o.redSub(i),d=o.redAdd(i),u=n.redAdd(r),c=s.redMul(a),l=d.redMul(u),m=s.redMul(u),p=a.redMul(d);return this.curve.point(c,l,p,m)};An.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(o),a=n.redSub(s),d=n.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),c=r.redMul(a).redMul(u),l,m;return this.curve.twisted?(l=r.redMul(d).redMul(o.redSub(this.curve._mulA(i))),m=a.redMul(d)):(l=r.redMul(d).redMul(o.redSub(i)),m=this.curve._mulC(a).redMul(d)),this.curve.point(c,l,m)};An.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};An.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};An.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};An.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};An.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};An.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};An.prototype.getX=function(){return this.normalize(),this.x.fromRed()};An.prototype.getY=function(){return this.normalize(),this.y.fromRed()};An.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};An.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};An.prototype.toP=An.prototype.normalize;An.prototype.mixedAdd=An.prototype.add});var d7=W(JY=>{"use strict";h();var P5=JY;P5.base=B_();P5.short=LY();P5.mont=GY();P5.edwards=VY()});var Vd=W(gn=>{"use strict";h();var Q5e=ic(),e8e=cr();gn.inherits=e8e;function t8e(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function r8e(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):t8e(t,i)?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}gn.toArray=r8e;function n8e(t){for(var e="",r=0;r<t.length;r++)e+=ZY(t[r].toString(16));return e}gn.toHex=n8e;function YY(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}gn.htonl=YY;function i8e(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=YY(i)),r+=XY(i.toString(16))}return r}gn.toHex32=i8e;function ZY(t){return t.length===1?"0"+t:t}gn.zero2=ZY;function XY(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}gn.zero8=XY;function o8e(t,e,r,n){var i=r-e;Q5e(i%4===0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var d;n==="big"?d=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:d=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=d>>>0}return o}gn.join32=o8e;function s8e(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];e==="big"?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=o&255):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=o&255)}return r}gn.split32=s8e;function a8e(t,e){return t>>>e|t<<32-e}gn.rotr32=a8e;function c8e(t,e){return t<<e|t>>>32-e}gn.rotl32=c8e;function d8e(t,e){return t+e>>>0}gn.sum32=d8e;function u8e(t,e,r){return t+e+r>>>0}gn.sum32_3=u8e;function l8e(t,e,r,n){return t+e+r+n>>>0}gn.sum32_4=l8e;function f8e(t,e,r,n,i){return t+e+r+n+i>>>0}gn.sum32_5=f8e;function h8e(t,e,r,n){var i=t[e],o=t[e+1],s=n+o>>>0,a=(s<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=s}gn.sum64=h8e;function p8e(t,e,r,n){var i=e+n>>>0,o=(i<e?1:0)+t+r;return o>>>0}gn.sum64_hi=p8e;function m8e(t,e,r,n){var i=e+n;return i>>>0}gn.sum64_lo=m8e;function y8e(t,e,r,n,i,o,s,a){var d=0,u=e;u=u+n>>>0,d+=u<e?1:0,u=u+o>>>0,d+=u<o?1:0,u=u+a>>>0,d+=u<a?1:0;var c=t+r+i+s+d;return c>>>0}gn.sum64_4_hi=y8e;function g8e(t,e,r,n,i,o,s,a){var d=e+n+o+a;return d>>>0}gn.sum64_4_lo=g8e;function b8e(t,e,r,n,i,o,s,a,d,u){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+o>>>0,c+=l<o?1:0,l=l+a>>>0,c+=l<a?1:0,l=l+u>>>0,c+=l<u?1:0;var m=t+r+i+s+d+c;return m>>>0}gn.sum64_5_hi=b8e;function v8e(t,e,r,n,i,o,s,a,d,u){var c=e+n+o+a+u;return c>>>0}gn.sum64_5_lo=v8e;function w8e(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}gn.rotr64_hi=w8e;function _8e(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}gn.rotr64_lo=_8e;function x8e(t,e,r){return t>>>r}gn.shr64_hi=x8e;function E8e(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}gn.shr64_lo=E8e});var gv=W(eZ=>{"use strict";h();var QY=Vd(),S8e=ic();function T5(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}eZ.BlockHash=T5;T5.prototype.update=function(e,r){if(e=QY.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=QY.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};T5.prototype.digest=function(e){return this.update(this._pad()),S8e(this.pending===null),this._digest(e)};T5.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i}});var u7=W(Bf=>{"use strict";h();var A8e=Vd(),rl=A8e.rotr32;function P8e(t,e,r,n){if(t===0)return tZ(e,r,n);if(t===1||t===3)return nZ(e,r,n);if(t===2)return rZ(e,r,n)}Bf.ft_1=P8e;function tZ(t,e,r){return t&e^~t&r}Bf.ch32=tZ;function rZ(t,e,r){return t&e^t&r^e&r}Bf.maj32=rZ;function nZ(t,e,r){return t^e^r}Bf.p32=nZ;function T8e(t){return rl(t,2)^rl(t,13)^rl(t,22)}Bf.s0_256=T8e;function I8e(t){return rl(t,6)^rl(t,11)^rl(t,25)}Bf.s1_256=I8e;function k8e(t){return rl(t,7)^rl(t,18)^t>>>3}Bf.g0_256=k8e;function R8e(t){return rl(t,17)^rl(t,19)^t>>>10}Bf.g1_256=R8e});var sZ=W((oft,oZ)=>{"use strict";h();var bv=Vd(),D8e=gv(),M8e=u7(),l7=bv.rotl32,C_=bv.sum32,B8e=bv.sum32_5,C8e=M8e.ft_1,iZ=D8e.BlockHash,O8e=[1518500249,1859775393,2400959708,3395469782];function nl(){if(!(this instanceof nl))return new nl;iZ.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}bv.inherits(nl,iZ);oZ.exports=nl;nl.blockSize=512;nl.outSize=160;nl.hmacStrength=80;nl.padLength=64;nl.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=l7(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],s=this.h[1],a=this.h[2],d=this.h[3],u=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),l=B8e(l7(o,5),C8e(c,s,a,d),u,n[i],O8e[c]);u=d,d=a,a=l7(s,30),s=o,o=l}this.h[0]=C_(this.h[0],o),this.h[1]=C_(this.h[1],s),this.h[2]=C_(this.h[2],a),this.h[3]=C_(this.h[3],d),this.h[4]=C_(this.h[4],u)};nl.prototype._digest=function(e){return e==="hex"?bv.toHex32(this.h,"big"):bv.split32(this.h,"big")}});var f7=W((aft,cZ)=>{"use strict";h();var vv=Vd(),$8e=gv(),wv=u7(),N8e=ic(),Jd=vv.sum32,j8e=vv.sum32_4,U8e=vv.sum32_5,K8e=wv.ch32,q8e=wv.maj32,L8e=wv.s0_256,F8e=wv.s1_256,z8e=wv.g0_256,G8e=wv.g1_256,aZ=$8e.BlockHash,W8e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function il(){if(!(this instanceof il))return new il;aZ.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=W8e,this.W=new Array(64)}vv.inherits(il,aZ);cZ.exports=il;il.blockSize=512;il.outSize=256;il.hmacStrength=192;il.padLength=64;il.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=j8e(G8e(n[i-2]),n[i-7],z8e(n[i-15]),n[i-16]);var o=this.h[0],s=this.h[1],a=this.h[2],d=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],m=this.h[7];for(N8e(this.k.length===n.length),i=0;i<n.length;i++){var p=U8e(m,F8e(u),K8e(u,c,l),this.k[i],n[i]),g=Jd(L8e(o),q8e(o,s,a));m=l,l=c,c=u,u=Jd(d,p),d=a,a=s,s=o,o=Jd(p,g)}this.h[0]=Jd(this.h[0],o),this.h[1]=Jd(this.h[1],s),this.h[2]=Jd(this.h[2],a),this.h[3]=Jd(this.h[3],d),this.h[4]=Jd(this.h[4],u),this.h[5]=Jd(this.h[5],c),this.h[6]=Jd(this.h[6],l),this.h[7]=Jd(this.h[7],m)};il.prototype._digest=function(e){return e==="hex"?vv.toHex32(this.h,"big"):vv.split32(this.h,"big")}});var lZ=W((dft,uZ)=>{"use strict";h();var h7=Vd(),dZ=f7();function Cf(){if(!(this instanceof Cf))return new Cf;dZ.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}h7.inherits(Cf,dZ);uZ.exports=Cf;Cf.blockSize=512;Cf.outSize=224;Cf.hmacStrength=192;Cf.padLength=64;Cf.prototype._digest=function(e){return e==="hex"?h7.toHex32(this.h.slice(0,7),"big"):h7.split32(this.h.slice(0,7),"big")}});var y7=W((lft,mZ)=>{"use strict";h();var xa=Vd(),H8e=gv(),V8e=ic(),ol=xa.rotr64_hi,sl=xa.rotr64_lo,fZ=xa.shr64_hi,hZ=xa.shr64_lo,vp=xa.sum64,p7=xa.sum64_hi,m7=xa.sum64_lo,J8e=xa.sum64_4_hi,Y8e=xa.sum64_4_lo,Z8e=xa.sum64_5_hi,X8e=xa.sum64_5_lo,pZ=H8e.BlockHash,Q8e=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Yd(){if(!(this instanceof Yd))return new Yd;pZ.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Q8e,this.W=new Array(160)}xa.inherits(Yd,pZ);mZ.exports=Yd;Yd.blockSize=1024;Yd.outSize=512;Yd.hmacStrength=192;Yd.padLength=128;Yd.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var o=u4e(n[i-4],n[i-3]),s=l4e(n[i-4],n[i-3]),a=n[i-14],d=n[i-13],u=c4e(n[i-30],n[i-29]),c=d4e(n[i-30],n[i-29]),l=n[i-32],m=n[i-31];n[i]=J8e(o,s,a,d,u,c,l,m),n[i+1]=Y8e(o,s,a,d,u,c,l,m)}};Yd.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],d=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],m=this.h[8],p=this.h[9],g=this.h[10],b=this.h[11],S=this.h[12],A=this.h[13],I=this.h[14],P=this.h[15];V8e(this.k.length===n.length);for(var $=0;$<n.length;$+=2){var N=I,L=P,F=s4e(m,p),U=a4e(m,p),G=e4e(m,p,g,b,S,A),q=t4e(m,p,g,b,S,A),T=this.k[$],E=this.k[$+1],k=n[$],f=n[$+1],y=Z8e(N,L,F,U,G,q,T,E,k,f),w=X8e(N,L,F,U,G,q,T,E,k,f);N=i4e(i,o),L=o4e(i,o),F=r4e(i,o,s,a,d,u),U=n4e(i,o,s,a,d,u);var _=p7(N,L,F,U),x=m7(N,L,F,U);I=S,P=A,S=g,A=b,g=m,b=p,m=p7(c,l,y,w),p=m7(l,l,y,w),c=d,l=u,d=s,u=a,s=i,a=o,i=p7(y,w,_,x),o=m7(y,w,_,x)}vp(this.h,0,i,o),vp(this.h,2,s,a),vp(this.h,4,d,u),vp(this.h,6,c,l),vp(this.h,8,m,p),vp(this.h,10,g,b),vp(this.h,12,S,A),vp(this.h,14,I,P)};Yd.prototype._digest=function(e){return e==="hex"?xa.toHex32(this.h,"big"):xa.split32(this.h,"big")};function e4e(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function t4e(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function r4e(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function n4e(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function i4e(t,e){var r=ol(t,e,28),n=ol(e,t,2),i=ol(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function o4e(t,e){var r=sl(t,e,28),n=sl(e,t,2),i=sl(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function s4e(t,e){var r=ol(t,e,14),n=ol(t,e,18),i=ol(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function a4e(t,e){var r=sl(t,e,14),n=sl(t,e,18),i=sl(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function c4e(t,e){var r=ol(t,e,1),n=ol(t,e,8),i=fZ(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function d4e(t,e){var r=sl(t,e,1),n=sl(t,e,8),i=hZ(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function u4e(t,e){var r=ol(t,e,19),n=ol(e,t,29),i=fZ(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}function l4e(t,e){var r=sl(t,e,19),n=sl(e,t,29),i=hZ(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}});var bZ=W((hft,gZ)=>{"use strict";h();var g7=Vd(),yZ=y7();function Of(){if(!(this instanceof Of))return new Of;yZ.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}g7.inherits(Of,yZ);gZ.exports=Of;Of.blockSize=1024;Of.outSize=384;Of.hmacStrength=192;Of.padLength=128;Of.prototype._digest=function(e){return e==="hex"?g7.toHex32(this.h.slice(0,12),"big"):g7.split32(this.h.slice(0,12),"big")}});var vZ=W(_v=>{"use strict";h();_v.sha1=sZ();_v.sha224=lZ();_v.sha256=f7();_v.sha384=bZ();_v.sha512=y7()});var AZ=W(SZ=>{"use strict";h();var t0=Vd(),f4e=gv(),I5=t0.rotl32,wZ=t0.sum32,O_=t0.sum32_3,_Z=t0.sum32_4,EZ=f4e.BlockHash;function al(){if(!(this instanceof al))return new al;EZ.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t0.inherits(al,EZ);SZ.ripemd160=al;al.blockSize=512;al.outSize=160;al.hmacStrength=192;al.padLength=64;al.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],d=n,u=i,c=o,l=s,m=a,p=0;p<80;p++){var g=wZ(I5(_Z(n,xZ(p,i,o,s),e[m4e[p]+r],h4e(p)),g4e[p]),a);n=a,a=s,s=I5(o,10),o=i,i=g,g=wZ(I5(_Z(d,xZ(79-p,u,c,l),e[y4e[p]+r],p4e(p)),b4e[p]),m),d=m,m=l,l=I5(c,10),c=u,u=g}g=O_(this.h[1],o,l),this.h[1]=O_(this.h[2],s,m),this.h[2]=O_(this.h[3],a,d),this.h[3]=O_(this.h[4],n,u),this.h[4]=O_(this.h[0],i,c),this.h[0]=g};al.prototype._digest=function(e){return e==="hex"?t0.toHex32(this.h,"little"):t0.split32(this.h,"little")};function xZ(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function h4e(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p4e(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var m4e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y4e=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g4e=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b4e=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var TZ=W((vft,PZ)=>{"use strict";h();var v4e=Vd(),w4e=ic();function xv(t,e,r){if(!(this instanceof xv))return new xv(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(v4e.toArray(e,r))}PZ.exports=xv;xv.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),w4e(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};xv.prototype.update=function(e,r){return this.inner.update(e,r),this};xv.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var k5=W(IZ=>{h();var jo=IZ;jo.utils=Vd();jo.common=gv();jo.sha=vZ();jo.ripemd=AZ();jo.hmac=TZ();jo.sha1=jo.sha.sha1;jo.sha256=jo.sha.sha256;jo.sha224=jo.sha.sha224;jo.sha384=jo.sha.sha384;jo.sha512=jo.sha.sha512;jo.ripemd160=jo.ripemd.ripemd160});var RZ=W((Eft,kZ)=>{h();kZ.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var R5=W(BZ=>{"use strict";h();var v7=BZ,wp=k5(),b7=d7(),_4e=oc(),DZ=_4e.assert;function MZ(t){t.type==="short"?this.curve=new b7.short(t):t.type==="edwards"?this.curve=new b7.edwards(t):this.curve=new b7.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,DZ(this.g.validate(),"Invalid curve"),DZ(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}v7.PresetCurve=MZ;function _p(t,e){Object.defineProperty(v7,t,{configurable:!0,enumerable:!0,get:function(){var r=new MZ(e);return Object.defineProperty(v7,t,{configurable:!0,enumerable:!0,value:r}),r}})}_p("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wp.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});_p("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wp.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});_p("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wp.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});_p("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wp.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});_p("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wp.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});_p("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wp.sha256,gRed:!1,g:["9"]});_p("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wp.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var w7;try{w7=RZ()}catch{w7=void 0}_p("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wp.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",w7]})});var $Z=W((Tft,OZ)=>{"use strict";h();var x4e=k5(),r0=a7(),CZ=ic();function xp(t){if(!(this instanceof xp))return new xp(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=r0.toArray(t.entropy,t.entropyEnc||"hex"),r=r0.toArray(t.nonce,t.nonceEnc||"hex"),n=r0.toArray(t.pers,t.persEnc||"hex");CZ(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}OZ.exports=xp;xp.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};xp.prototype._hmac=function(){return new x4e.hmac(this.hash,this.K)};xp.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};xp.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=r0.toArray(e,r),n=r0.toArray(n,i),CZ(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};xp.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=r0.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,r0.encode(s,r)}});var jZ=W((kft,NZ)=>{"use strict";h();var E4e=zi(),S4e=oc(),_7=S4e.assert;function Ps(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}NZ.exports=Ps;Ps.fromPublic=function(e,r,n){return r instanceof Ps?r:new Ps(e,{pub:r,pubEnc:n})};Ps.fromPrivate=function(e,r,n){return r instanceof Ps?r:new Ps(e,{priv:r,privEnc:n})};Ps.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ps.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Ps.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Ps.prototype._importPrivate=function(e,r){this.priv=new E4e(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Ps.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?_7(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_7(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Ps.prototype.derive=function(e){return e.validate()||_7(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Ps.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Ps.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Ps.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var qZ=W((Dft,KZ)=>{"use strict";h();var D5=zi(),S7=oc(),A4e=S7.assert;function M5(t,e){if(t instanceof M5)return t;this._importDER(t,e)||(A4e(t.r&&t.s,"Signature without r or s"),this.r=new D5(t.r,16),this.s=new D5(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}KZ.exports=M5;function P4e(){this.place=0}function x7(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function UZ(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}M5.prototype._importDER=function(e,r){e=S7.toArray(e,r);var n=new P4e;if(e[n.place++]!==48)return!1;var i=x7(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=x7(e,n);if(o===!1)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var a=x7(e,n);if(a===!1||e.length!==a+n.place)return!1;var d=e.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new D5(s),this.s=new D5(d),this.recoveryParam=null,!0};function E7(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}M5.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=UZ(r),n=UZ(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];E7(i,r.length),i=i.concat(r),i.push(2),E7(i,n.length);var o=i.concat(n),s=[48];return E7(s,o.length),s=s.concat(o),S7.encode(s,e)}});var GZ=W((Bft,zZ)=>{"use strict";h();var n0=zi(),LZ=$Z(),T4e=oc(),A7=R5(),I4e=p5(),FZ=T4e.assert,P7=jZ(),B5=qZ();function Jc(t){if(!(this instanceof Jc))return new Jc(t);typeof t=="string"&&(FZ(Object.prototype.hasOwnProperty.call(A7,t),"Unknown curve "+t),t=A7[t]),t instanceof A7.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}zZ.exports=Jc;Jc.prototype.keyPair=function(e){return new P7(this,e)};Jc.prototype.keyFromPrivate=function(e,r){return P7.fromPrivate(this,e,r)};Jc.prototype.keyFromPublic=function(e,r){return P7.fromPublic(this,e,r)};Jc.prototype.genKeyPair=function(e){e||(e={});for(var r=new LZ({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||I4e(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new n0(2));;){var o=new n0(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Jc.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Jc.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new n0(e,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=e.toArray("be",o),d=new LZ({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new n0(1)),c=0;;c++){var l=i.k?i.k(c):new n0(d.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var m=this.g.mul(l);if(!m.isInfinity()){var p=m.getX(),g=p.umod(this.n);if(g.cmpn(0)!==0){var b=l.invm(this.n).mul(g.mul(r.getPrivate()).iadd(e));if(b=b.umod(this.n),b.cmpn(0)!==0){var S=(m.getY().isOdd()?1:0)|(p.cmp(g)!==0?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),S^=1),new B5({r:g,s:b,recoveryParam:S})}}}}}};Jc.prototype.verify=function(e,r,n,i){e=this._truncateToN(new n0(e,16)),n=this.keyFromPublic(n,i),r=new B5(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),d=a.mul(e).umod(this.n),u=a.mul(o).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(d,n.getPublic(),u),c.isInfinity()?!1:c.eqXToP(o)):(c=this.g.mulAdd(d,n.getPublic(),u),c.isInfinity()?!1:c.getX().umod(this.n).cmp(o)===0)};Jc.prototype.recoverPubKey=function(t,e,r,n){FZ((3&r)===r,"The recovery param is more than two bits"),e=new B5(e,n);var i=this.n,o=new n0(t),s=e.r,a=e.s,d=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),d):s=this.curve.pointFromX(s,d);var c=e.r.invm(i),l=i.sub(o).mul(c).umod(i),m=a.mul(c).umod(i);return this.g.mulAdd(l,s,m)};Jc.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new B5(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}});var JZ=W((Oft,VZ)=>{"use strict";h();var $_=oc(),HZ=$_.assert,WZ=$_.parseBytes,Ev=$_.cachedProperty;function go(t,e){this.eddsa=t,this._secret=WZ(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=WZ(e.pub)}go.fromPublic=function(e,r){return r instanceof go?r:new go(e,{pub:r})};go.fromSecret=function(e,r){return r instanceof go?r:new go(e,{secret:r})};go.prototype.secret=function(){return this._secret};Ev(go,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ev(go,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ev(go,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ev(go,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ev(go,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ev(go,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});go.prototype.sign=function(e){return HZ(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};go.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};go.prototype.getSecret=function(e){return HZ(this._secret,"KeyPair is public only"),$_.encode(this.secret(),e)};go.prototype.getPublic=function(e){return $_.encode(this.pubBytes(),e)};VZ.exports=go});var ZZ=W((Nft,YZ)=>{"use strict";h();var k4e=zi(),C5=oc(),R4e=C5.assert,O5=C5.cachedProperty,D4e=C5.parseBytes;function i0(t,e){this.eddsa=t,typeof e!="object"&&(e=D4e(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),R4e(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof k4e&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}O5(i0,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});O5(i0,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});O5(i0,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});O5(i0,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});i0.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};i0.prototype.toHex=function(){return C5.encode(this.toBytes(),"hex").toUpperCase()};YZ.exports=i0});var rX=W((Uft,tX)=>{"use strict";h();var M4e=k5(),B4e=R5(),Sv=oc(),C4e=Sv.assert,QZ=Sv.parseBytes,eX=JZ(),XZ=ZZ();function Ea(t){if(C4e(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Ea))return new Ea(t);t=B4e[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=M4e.sha512}tX.exports=Ea;Ea.prototype.sign=function(e,r){e=QZ(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),s=this.encodePoint(o),a=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),d=i.add(a).umod(this.curve.n);return this.makeSignature({R:o,S:d,Rencoded:s})};Ea.prototype.verify=function(e,r,n){e=QZ(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),o=this.hashInt(r.Rencoded(),i.pubBytes(),e),s=this.g.mul(r.S()),a=r.R().add(i.pub().mul(o));return a.eq(s)};Ea.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Sv.intFromLE(e.digest()).umod(this.curve.n)};Ea.prototype.keyFromPublic=function(e){return eX.fromPublic(this,e)};Ea.prototype.keyFromSecret=function(e){return eX.fromSecret(this,e)};Ea.prototype.makeSignature=function(e){return e instanceof XZ?e:new XZ(this,e)};Ea.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Ea.prototype.decodePoint=function(e){e=Sv.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,o=Sv.intFromLE(n);return this.curve.pointFromY(o,i)};Ea.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ea.prototype.decodeInt=function(e){return Sv.intFromLE(e)};Ea.prototype.isPoint=function(e){return e instanceof this.pointClass}});var $5=W(nX=>{"use strict";h();var o0=nX;o0.version=OY().version;o0.utils=oc();o0.rand=p5();o0.curve=d7();o0.curves=R5();o0.ec=GZ();o0.eddsa=rX()});var j5=W((Fft,iX)=>{"use strict";h();var N5=Un(),Av=N5.Buffer,Yc={},Zc;for(Zc in N5)N5.hasOwnProperty(Zc)&&(Zc==="SlowBuffer"||Zc==="Buffer"||(Yc[Zc]=N5[Zc]));var Pv=Yc.Buffer={};for(Zc in Av)Av.hasOwnProperty(Zc)&&(Zc==="allocUnsafe"||Zc==="allocUnsafeSlow"||(Pv[Zc]=Av[Zc]));Yc.Buffer.prototype=Av.prototype;(!Pv.from||Pv.from===Uint8Array.from)&&(Pv.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Av(t,e,r)});Pv.alloc||(Pv.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Av(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!Yc.kStringMaxLength)try{Yc.kStringMaxLength=B.default.binding("buffer").kStringMaxLength}catch{}Yc.constants||(Yc.constants={MAX_LENGTH:Yc.kMaxLength},Yc.kStringMaxLength&&(Yc.constants.MAX_STRING_LENGTH=Yc.kStringMaxLength));iX.exports=Yc});var U5=W(oX=>{"use strict";h();var O4e=cr();function Xc(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}oX.Reporter=Xc;Xc.prototype.isError=function(e){return e instanceof Tv};Xc.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Xc.prototype.restore=function(e){let r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};Xc.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Xc.prototype.exitKey=function(e){let r=this._reporterState;r.path=r.path.slice(0,e-1)};Xc.prototype.leaveKey=function(e,r,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[r]=n)};Xc.prototype.path=function(){return this._reporterState.path.join("/")};Xc.prototype.enterObject=function(){let e=this._reporterState,r=e.obj;return e.obj={},r};Xc.prototype.leaveObject=function(e){let r=this._reporterState,n=r.obj;return r.obj=e,n};Xc.prototype.error=function(e){let r,n=this._reporterState,i=e instanceof Tv;if(i?r=e:r=new Tv(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return i||n.errors.push(r),r};Xc.prototype.wrapResult=function(e){let r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function Tv(t,e){this.path=t,this.rethrow(e)}O4e(Tv,Error);Tv.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,Tv),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this}});var Rv=W(T7=>{"use strict";h();var $4e=cr(),K5=U5().Reporter,Iv=j5().Buffer;function Qc(t,e){if(K5.call(this,e),!Iv.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}$4e(Qc,K5);T7.DecoderBuffer=Qc;Qc.isDecoderBuffer=function(e){return e instanceof Qc?!0:typeof e=="object"&&Iv.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Qc.prototype.save=function(){return{offset:this.offset,reporter:K5.prototype.save.call(this)}};Qc.prototype.restore=function(e){let r=new Qc(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,K5.prototype.restore.call(this,e.reporter),r};Qc.prototype.isEmpty=function(){return this.offset===this.length};Qc.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Qc.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");let n=new Qc(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};Qc.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function kv(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return kv.isEncoderBuffer(r)||(r=new kv(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Iv.byteLength(t);else if(Iv.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}T7.EncoderBuffer=kv;kv.isEncoderBuffer=function(e){return e instanceof kv?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};kv.prototype.join=function(e,r){return e||(e=Iv.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):Iv.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e}});var q5=W((Jft,aX)=>{"use strict";h();var N4e=U5().Reporter,j4e=Rv().EncoderBuffer,U4e=Rv().DecoderBuffer,Js=ic(),sX=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],K4e=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(sX),q4e=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function ln(t,e,r){let n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}aX.exports=ln;var L4e=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];ln.prototype.clone=function(){let e=this._baseState,r={};L4e.forEach(function(i){r[i]=e[i]});let n=new this.constructor(r.parent);return n._baseState=r,n};ln.prototype._wrap=function(){let e=this._baseState;K4e.forEach(function(r){this[r]=function(){let i=new this.constructor(this);return e.children.push(i),i[r].apply(i,arguments)}},this)};ln.prototype._init=function(e){let r=this._baseState;Js(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),Js.equal(r.children.length,1,"Root node can have only one child")};ln.prototype._useArgs=function(e){let r=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Js(r.children===null),r.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Js(r.args===null),r.args=e,r.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let o={};return Object.keys(i).forEach(function(s){s==(s|0)&&(s|=0);let a=i[s];o[a]=s}),o}))};q4e.forEach(function(t){ln.prototype[t]=function(){let r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});sX.forEach(function(t){ln.prototype[t]=function(){let r=this._baseState,n=Array.prototype.slice.call(arguments);return Js(r.tag===null),r.tag=t,this._useArgs(n),this}});ln.prototype.use=function(e){Js(e);let r=this._baseState;return Js(r.use===null),r.use=e,this};ln.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};ln.prototype.def=function(e){let r=this._baseState;return Js(r.default===null),r.default=e,r.optional=!0,this};ln.prototype.explicit=function(e){let r=this._baseState;return Js(r.explicit===null&&r.implicit===null),r.explicit=e,this};ln.prototype.implicit=function(e){let r=this._baseState;return Js(r.explicit===null&&r.implicit===null),r.implicit=e,this};ln.prototype.obj=function(){let e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};ln.prototype.key=function(e){let r=this._baseState;return Js(r.key===null),r.key=e,this};ln.prototype.any=function(){let e=this._baseState;return e.any=!0,this};ln.prototype.choice=function(e){let r=this._baseState;return Js(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};ln.prototype.contains=function(e){let r=this._baseState;return Js(r.use===null),r.contains=e,this};ln.prototype._decode=function(e,r){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let i=n.default,o=!0,s=null;if(n.key!==null&&(s=e.enterKey(n.key)),n.optional){let d=null;if(n.explicit!==null?d=n.explicit:n.implicit!==null?d=n.implicit:n.tag!==null&&(d=n.tag),d===null&&!n.any){let u=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),o=!0}catch{o=!1}e.restore(u)}else if(o=this._peekTag(e,d,n.any),e.isError(o))return o}let a;if(n.obj&&o&&(a=e.enterObject()),o){if(n.explicit!==null){let u=this._decodeTag(e,n.explicit);if(e.isError(u))return u;e=u}let d=e.offset;if(n.use===null&&n.choice===null){let u;n.any&&(u=e.save());let c=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(c))return c;n.any?i=e.raw(u):e=c}if(r&&r.track&&n.tag!==null&&r.track(e.path(),d,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,r):i=this._decodeChoice(e,r)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(c){c._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let u=new U4e(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(u,r)}}return n.obj&&o&&(i=e.leaveObject(a)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(s,n.key,i):s!==null&&e.exitKey(s),i};ln.prototype._decodeGeneric=function(e,r,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,i.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&i.args?this._decodeObjid(r,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};ln.prototype._getUse=function(e,r){let n=this._baseState;return n.useDecoder=this._use(e,r),Js(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};ln.prototype._decodeChoice=function(e,r){let n=this._baseState,i=null,o=!1;return Object.keys(n.choice).some(function(s){let a=e.save(),d=n.choice[s];try{let u=d._decode(e,r);if(e.isError(u))return!1;i={type:s,value:u},o=!0}catch{return e.restore(a),!1}return!0},this),o?i:e.error("Choice not matched")};ln.prototype._createEncoderBuffer=function(e){return new j4e(e,this.reporter)};ln.prototype._encode=function(e,r,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let o=this._encodeValue(e,r,n);if(o!==void 0&&!this._skipDefault(o,r,n))return o};ln.prototype._encodeValue=function(e,r,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,r||new N4e);let o=null;if(this.reporter=r,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,r);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,r),a=!0;else if(i.children)s=i.children.map(function(d){if(d._baseState.tag==="null_")return d._encode(null,r,e);if(d._baseState.key===null)return r.error("Child should have a key");let u=r.enterKey(d._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");let c=d._encode(e[d._baseState.key],r,e);return r.leaveKey(u),c},this).filter(function(d){return d}),s=this._createEncoderBuffer(s);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return r.error("Too many args for : "+i.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");let d=this.clone();d._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(u){let c=this._baseState;return this._getUse(c.args[0],e)._encode(u,r)},d))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,r):(s=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&i.choice===null){let d=i.implicit!==null?i.implicit:i.tag,u=i.implicit===null?"universal":"context";d===null?i.use===null&&r.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(d,a,u,s))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};ln.prototype._encodeChoice=function(e,r){let n=this._baseState,i=n.choice[e.type];return i||Js(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,r)};ln.prototype._encodePrimitive=function(e,r){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};ln.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};ln.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var L5=W(s0=>{"use strict";h();function cX(t){let e={};return Object.keys(t).forEach(function(r){(r|0)==r&&(r=r|0);let n=t[r];e[n]=r}),e}s0.tagClass={0:"universal",1:"application",2:"context",3:"private"};s0.tagClassByName=cX(s0.tagClass);s0.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};s0.tagByName=cX(s0.tag)});var k7=W((Qft,lX)=>{"use strict";h();var F4e=cr(),$f=j5().Buffer,dX=q5(),I7=L5();function uX(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Zd,this.tree._init(t.body)}lX.exports=uX;uX.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function Zd(t){dX.call(this,"der",t)}F4e(Zd,dX);Zd.prototype._encodeComposite=function(e,r,n,i){let o=z4e(e,r,n,this.reporter);if(i.length<128){let d=$f.alloc(2);return d[0]=o,d[1]=i.length,this._createEncoderBuffer([d,i])}let s=1;for(let d=i.length;d>=256;d>>=8)s++;let a=$f.alloc(2+s);a[0]=o,a[1]=128|s;for(let d=1+s,u=i.length;u>0;d--,u>>=8)a[d]=u&255;return this._createEncoderBuffer([a,i])};Zd.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){let n=$f.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};Zd.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let a=0;a<e.length;a++)e[a]|=0}else if(Array.isArray(e)){e=e.slice();for(let a=0;a<e.length;a++)e[a]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let a=0;a<e.length;a++){let d=e[a];for(i++;d>=128;d>>=7)i++}let o=$f.alloc(i),s=o.length-1;for(let a=e.length-1;a>=0;a--){let d=e[a];for(o[s--]=d&127;(d>>=7)>0;)o[s--]=128|d&127}return this._createEncoderBuffer(o)};function ed(t){return t<10?"0"+t:t}Zd.prototype._encodeTime=function(e,r){let n,i=new Date(e);return r==="gentime"?n=[ed(i.getUTCFullYear()),ed(i.getUTCMonth()+1),ed(i.getUTCDate()),ed(i.getUTCHours()),ed(i.getUTCMinutes()),ed(i.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[ed(i.getUTCFullYear()%100),ed(i.getUTCMonth()+1),ed(i.getUTCDate()),ed(i.getUTCHours()),ed(i.getUTCMinutes()),ed(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};Zd.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Zd.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!$f.isBuffer(e)){let o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=$f.from(o)}if($f.isBuffer(e)){let o=e.length;e.length===0&&o++;let s=$f.alloc(o);return e.copy(s),e.length===0&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;let i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer($f.from(i))};Zd.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Zd.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};Zd.prototype._skipDefault=function(e,r,n){let i=this._baseState,o;if(i.default===null)return!1;let s=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,r,n).join()),s.length!==i.defaultBuffer.length)return!1;for(o=0;o<s.length;o++)if(s[o]!==i.defaultBuffer[o])return!1;return!0};function z4e(t,e,r,n){let i;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),I7.tagByName.hasOwnProperty(t))i=I7.tagByName[t];else if(typeof t=="number"&&(t|0)===t)i=t;else return n.error("Unknown tag: "+t);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=I7.tagClassByName[r||"universal"]<<6,i)}});var hX=W((tht,fX)=>{"use strict";h();var G4e=cr(),R7=k7();function D7(t){R7.call(this,t),this.enc="pem"}G4e(D7,R7);fX.exports=D7;D7.prototype.encode=function(e,r){let i=R7.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+r.label+"-----"];for(let s=0;s<i.length;s+=64)o.push(i.slice(s,s+64));return o.push("-----END "+r.label+"-----"),o.join(`
`)}});var M7=W(mX=>{"use strict";h();var pX=mX;pX.der=k7();pX.pem=hX()});var C7=W((oht,_X)=>{"use strict";h();var W4e=cr(),H4e=zi(),yX=Rv().DecoderBuffer,bX=q5(),gX=L5();function vX(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new sc,this.tree._init(t.body)}_X.exports=vX;vX.prototype.decode=function(e,r){return yX.isDecoderBuffer(e)||(e=new yX(e,r)),this.tree._decode(e,r)};function sc(t){bX.call(this,"der",t)}W4e(sc,bX);sc.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;let i=e.save(),o=B7(e,'Failed to peek tag: "'+r+'"');return e.isError(o)?o:(e.restore(i),o.tag===r||o.tagStr===r||o.tagStr+"of"===r||n)};sc.prototype._decodeTag=function(e,r,n){let i=B7(e,'Failed to decode tag of "'+r+'"');if(e.isError(i))return i;let o=wX(e,i.primitive,'Failed to get length of "'+r+'"');if(e.isError(o))return o;if(!n&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+r+'"');let s=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(o=e.offset-s.offset,e.restore(s),e.skip(o,'Failed to match body of: "'+r+'"'))};sc.prototype._skipUntilEnd=function(e,r){for(;;){let n=B7(e,r);if(e.isError(n))return n;let i=wX(e,n.primitive,r);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,r),e.isError(o))return o;if(n.tagStr==="end")break}};sc.prototype._decodeList=function(e,r,n,i){let o=[];for(;!e.isEmpty();){let s=this._peekTag(e,"end");if(e.isError(s))return s;let a=n.decode(e,"der",i);if(e.isError(a)&&s)break;o.push(a)}return o};sc.prototype._decodeStr=function(e,r){if(r==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(r==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};sc.prototype._decodeObjid=function(e,r,n){let i,o=[],s=0,a=0;for(;!e.isEmpty();)a=e.readUInt8(),s<<=7,s|=a&127,a&128||(o.push(s),s=0);a&128&&o.push(s);let d=o[0]/40|0,u=o[0]%40;if(n?i=o:i=[d,u].concat(o.slice(1)),r){let c=r[i.join(" ")];c===void 0&&(c=r[i.join(".")]),c!==void 0&&(i=c)}return i};sc.prototype._decodeTime=function(e,r){let n=e.raw().toString(),i,o,s,a,d,u;if(r==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,s=n.slice(6,8)|0,a=n.slice(8,10)|0,d=n.slice(10,12)|0,u=n.slice(12,14)|0;else if(r==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,s=n.slice(4,6)|0,a=n.slice(6,8)|0,d=n.slice(8,10)|0,u=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(i,o-1,s,a,d,u,0)};sc.prototype._decodeNull=function(){return null};sc.prototype._decodeBool=function(e){let r=e.readUInt8();return e.isError(r)?r:r!==0};sc.prototype._decodeInt=function(e,r){let n=e.raw(),i=new H4e(n);return r&&(i=r[i.toString(10)]||i),i};sc.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function B7(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;let n=gX.tagClass[r>>6],i=(r&32)===0;if((r&31)===31){let s=r;for(r=0;(s&128)===128;){if(s=t.readUInt8(e),t.isError(s))return s;r<<=7,r|=s&127}}else r&=31;let o=gX.tag[r];return{cls:n,primitive:i,tag:r,tagStr:o}}function wX(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;let i=n&127;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;let s=t.readUInt8(r);if(t.isError(s))return s;n|=s}return n}});var EX=W((aht,xX)=>{"use strict";h();var V4e=cr(),J4e=j5().Buffer,O7=C7();function $7(t){O7.call(this,t),this.enc="pem"}V4e($7,O7);xX.exports=$7;$7.prototype.decode=function(e,r){let n=e.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,a=-1;for(let c=0;c<n.length;c++){let l=n[c].match(o);if(l!==null&&l[2]===i)if(s===-1){if(l[1]!=="BEGIN")break;s=c}else{if(l[1]!=="END")break;a=c;break}}if(s===-1||a===-1)throw new Error("PEM section not found for: "+i);let d=n.slice(s+1,a).join("");d.replace(/[^a-z0-9+/=]+/gi,"");let u=J4e.from(d,"base64");return O7.prototype.decode.call(this,u,r)}});var N7=W(AX=>{"use strict";h();var SX=AX;SX.der=C7();SX.pem=EX()});var TX=W(PX=>{"use strict";h();var Y4e=M7(),Z4e=N7(),X4e=cr(),Q4e=PX;Q4e.define=function(e,r){return new Dv(e,r)};function Dv(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}Dv.prototype._createNamed=function(e){let r=this.name;function n(i){this._initNamed(i,r)}return X4e(n,e),n.prototype._initNamed=function(o,s){e.call(this,o,s)},new n(this)};Dv.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(Z4e[e])),this.decoders[e]};Dv.prototype.decode=function(e,r,n){return this._getDecoder(r).decode(e,n)};Dv.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(Y4e[e])),this.encoders[e]};Dv.prototype.encode=function(e,r,n){return this._getEncoder(r).encode(e,n)}});var kX=W(IX=>{"use strict";h();var F5=IX;F5.Reporter=U5().Reporter;F5.DecoderBuffer=Rv().DecoderBuffer;F5.EncoderBuffer=Rv().EncoderBuffer;F5.Node=q5()});var MX=W(DX=>{"use strict";h();var RX=DX;RX._reverse=function(e){let r={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];r[i]=n}),r};RX.der=L5()});var j7=W(BX=>{"use strict";h();var Mv=BX;Mv.bignum=zi();Mv.define=TX().define;Mv.base=kX();Mv.constants=MX();Mv.decoders=N7();Mv.encoders=M7()});var NX=W((vht,$X)=>{"use strict";h();var Xd=j7(),CX=Xd.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),eAe=Xd.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),U7=Xd.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),tAe=Xd.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(U7),this.key("subjectPublicKey").bitstr())}),rAe=Xd.define("RelativeDistinguishedName",function(){this.setof(eAe)}),nAe=Xd.define("RDNSequence",function(){this.seqof(rAe)}),OX=Xd.define("Name",function(){this.choice({rdnSequence:this.use(nAe)})}),iAe=Xd.define("Validity",function(){this.seq().obj(this.key("notBefore").use(CX),this.key("notAfter").use(CX))}),oAe=Xd.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),sAe=Xd.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(U7),this.key("issuer").use(OX),this.key("validity").use(iAe),this.key("subject").use(OX),this.key("subjectPublicKeyInfo").use(tAe),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(oAe).optional())}),aAe=Xd.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(sAe),this.key("signatureAlgorithm").use(U7),this.key("signatureValue").bitstr())});$X.exports=aAe});var UX=W(eu=>{"use strict";h();var Qd=j7();eu.certificate=NX();var cAe=Qd.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});eu.RSAPrivateKey=cAe;var dAe=Qd.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});eu.RSAPublicKey=dAe;var uAe=Qd.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(jX),this.key("subjectPublicKey").bitstr())});eu.PublicKey=uAe;var jX=Qd.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),lAe=Qd.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(jX),this.key("subjectPrivateKey").octstr())});eu.PrivateKey=lAe;var fAe=Qd.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});eu.EncryptedPrivateKey=fAe;var hAe=Qd.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});eu.DSAPrivateKey=hAe;eu.DSAparam=Qd.define("DSAparam",function(){this.int()});var pAe=Qd.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(mAe),this.key("publicKey").optional().explicit(1).bitstr())});eu.ECPrivateKey=pAe;var mAe=Qd.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});eu.signature=Qd.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})});var KX=W((Eht,yAe)=>{yAe.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}});var LX=W((Sht,qX)=>{h();var gAe=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,bAe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,vAe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,wAe=k_(),_Ae=h5(),z5=ar().Buffer;qX.exports=function(t,e){var r=t.toString(),n=r.match(gAe),i;if(n){var s="aes"+n[1],a=z5.from(n[2],"hex"),d=z5.from(n[3].replace(/[\r\n]/g,""),"base64"),u=wAe(e,a.slice(0,8),parseInt(n[1],10)).key,c=[],l=_Ae.createDecipheriv(s,u,a);c.push(l.update(d)),c.push(l.final()),i=z5.concat(c)}else{var o=r.match(vAe);i=z5.from(o[2].replace(/[\r\n]/g,""),"base64")}var m=r.match(bAe)[1];return{tag:m,data:i}}});var N_=W((Pht,zX)=>{h();var Sa=UX(),xAe=KX(),EAe=LX(),SAe=h5(),AAe=ID(),K7=ar().Buffer;zX.exports=FX;function FX(t){var e;typeof t=="object"&&!K7.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=K7.from(t));var r=EAe(t,e),n=r.tag,i=r.data,o,s;switch(n){case"CERTIFICATE":s=Sa.certificate.decode(i,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(s||(s=Sa.PublicKey.decode(i,"der")),o=s.algorithm.algorithm.join("."),o){case"1.2.840.113549.1.1.1":return Sa.RSAPublicKey.decode(s.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return s.subjectPrivateKey=s.subjectPublicKey,{type:"ec",data:s};case"1.2.840.10040.4.1":return s.algorithm.params.pub_key=Sa.DSAparam.decode(s.subjectPublicKey.data,"der"),{type:"dsa",data:s.algorithm.params};default:throw new Error("unknown key id "+o)}case"ENCRYPTED PRIVATE KEY":i=Sa.EncryptedPrivateKey.decode(i,"der"),i=PAe(i,e);case"PRIVATE KEY":switch(s=Sa.PrivateKey.decode(i,"der"),o=s.algorithm.algorithm.join("."),o){case"1.2.840.113549.1.1.1":return Sa.RSAPrivateKey.decode(s.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:s.algorithm.curve,privateKey:Sa.ECPrivateKey.decode(s.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return s.algorithm.params.priv_key=Sa.DSAparam.decode(s.subjectPrivateKey,"der"),{type:"dsa",params:s.algorithm.params};default:throw new Error("unknown key id "+o)}case"RSA PUBLIC KEY":return Sa.RSAPublicKey.decode(i,"der");case"RSA PRIVATE KEY":return Sa.RSAPrivateKey.decode(i,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:Sa.DSAPrivateKey.decode(i,"der")};case"EC PRIVATE KEY":return i=Sa.ECPrivateKey.decode(i,"der"),{curve:i.parameters.value,privateKey:i.privateKey};default:throw new Error("unknown key type "+n)}}FX.signature=Sa.signature;function PAe(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=xAe[t.algorithm.decrypt.cipher.algo.join(".")],o=t.algorithm.decrypt.cipher.iv,s=t.subjectPrivateKey,a=parseInt(i.split("-")[1],10)/8,d=AAe.pbkdf2Sync(e,r,n,a,"sha1"),u=SAe.createDecipheriv(i,d,o),c=[];return c.push(u.update(s)),c.push(u.final()),K7.concat(c)}});var q7=W((Iht,TAe)=>{TAe.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}});var HX=W((kht,W5)=>{"use strict";h();var Ts=ar().Buffer,a0=bD(),IAe=v5(),kAe=$5().ec,G5=b5(),RAe=N_(),DAe=q7(),MAe=1;function BAe(t,e,r,n,i){var o=RAe(e);if(o.curve){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");return CAe(t,o)}else if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong private key type");return OAe(t,o,r)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");if(e.padding!==void 0&&e.padding!==MAe)throw new Error("illegal or unsupported padding mode");t=Ts.concat([i,t]);for(var s=o.modulus.byteLength(),a=[0,1];t.length+a.length+1<s;)a.push(255);a.push(0);for(var d=-1;++d<t.length;)a.push(t[d]);var u=IAe(a,o);return u}function CAe(t,e){var r=DAe[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var n=new kAe(r),i=n.keyFromPrivate(e.privateKey),o=i.sign(t);return Ts.from(o.toDER())}function OAe(t,e,r){for(var n=e.params.priv_key,i=e.params.p,o=e.params.q,s=e.params.g,a=new G5(0),d,u=L7(t,o).mod(o),c=!1,l=GX(n,o,t,r);c===!1;)d=WX(o,l,r),a=jAe(s,d,i,o),c=d.invm(o).imul(u.add(n.mul(a))).mod(o),c.cmpn(0)===0&&(c=!1,a=new G5(0));return $Ae(a,c)}function $Ae(t,e){t=t.toArray(),e=e.toArray(),t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e));var r=t.length+e.length+4,n=[48,r,2,t.length];return n=n.concat(t,[2,e.length],e),Ts.from(n)}function GX(t,e,r,n){if(t=Ts.from(t.toArray()),t.length<e.byteLength()){var i=Ts.alloc(e.byteLength()-t.length);t=Ts.concat([i,t])}var o=r.length,s=NAe(r,e),a=Ts.alloc(o);a.fill(1);var d=Ts.alloc(o);return d=a0(n,d).update(a).update(Ts.from([0])).update(t).update(s).digest(),a=a0(n,d).update(a).digest(),d=a0(n,d).update(a).update(Ts.from([1])).update(t).update(s).digest(),a=a0(n,d).update(a).digest(),{k:d,v:a}}function L7(t,e){var r=new G5(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function NAe(t,e){t=L7(t,e),t=t.mod(e);var r=Ts.from(t.toArray());if(r.length<e.byteLength()){var n=Ts.alloc(e.byteLength()-r.length);r=Ts.concat([n,r])}return r}function WX(t,e,r){var n,i;do{for(n=Ts.alloc(0);n.length*8<t.bitLength();)e.v=a0(r,e.k).update(e.v).digest(),n=Ts.concat([n,e.v]);i=L7(n,t),e.k=a0(r,e.k).update(e.v).update(Ts.from([0])).digest(),e.v=a0(r,e.k).update(e.v).digest()}while(i.cmp(t)!==-1);return i}function jAe(t,e,r,n){return t.toRed(G5.mont(r)).redPow(e).fromRed().mod(n)}W5.exports=BAe;W5.exports.getKey=GX;W5.exports.makeKey=WX});var ZX=W((Dht,YX)=>{"use strict";h();var F7=ar().Buffer,j_=b5(),UAe=$5().ec,JX=N_(),KAe=q7();function qAe(t,e,r,n,i){var o=JX(r);if(o.type==="ec"){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");return LAe(t,e,o)}else if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong public key type");return FAe(t,e,o)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");e=F7.concat([i,e]);for(var s=o.modulus.byteLength(),a=[1],d=0;e.length+a.length+2<s;)a.push(255),d+=1;a.push(0);for(var u=-1;++u<e.length;)a.push(e[u]);a=F7.from(a);var c=j_.mont(o.modulus);t=new j_(t).toRed(c),t=t.redPow(new j_(o.publicExponent)),t=F7.from(t.fromRed().toArray());var l=d<8?1:0;for(s=Math.min(t.length,a.length),t.length!==a.length&&(l=1),u=-1;++u<s;)l|=t[u]^a[u];return l===0}function LAe(t,e,r){var n=KAe[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new UAe(n),o=r.data.subjectPrivateKey.data;return i.verify(e,t,o)}function FAe(t,e,r){var n=r.data.p,i=r.data.q,o=r.data.g,s=r.data.pub_key,a=JX.signature.decode(t,"der"),d=a.s,u=a.r;VX(d,i),VX(u,i);var c=j_.mont(n),l=d.invm(i),m=o.toRed(c).redPow(new j_(e).mul(l).mod(i)).fromRed().mul(s.toRed(c).redPow(u.mul(l).mod(i)).fromRed()).mod(n).mod(i);return m.cmp(u)===0}function VX(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=0)throw new Error("invalid sig")}YX.exports=qAe});var nQ=W((Bht,rQ)=>{"use strict";h();var H5=ar().Buffer,eQ=sv(),V5=K3(),tQ=cr(),zAe=HX(),GAe=ZX(),c0=vD();Object.keys(c0).forEach(function(t){c0[t].id=H5.from(c0[t].id,"hex"),c0[t.toLowerCase()]=c0[t]});function U_(t){V5.Writable.call(this);var e=c0[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=eQ(e.hash),this._tag=e.id,this._signType=e.sign}tQ(U_,V5.Writable);U_.prototype._write=function(e,r,n){this._hash.update(e),n()};U_.prototype.update=function(e,r){return this._hash.update(typeof e=="string"?H5.from(e,r):e),this};U_.prototype.sign=function(e,r){this.end();var n=this._hash.digest(),i=zAe(n,e,this._hashType,this._signType,this._tag);return r?i.toString(r):i};function K_(t){V5.Writable.call(this);var e=c0[t];if(!e)throw new Error("Unknown message digest");this._hash=eQ(e.hash),this._tag=e.id,this._signType=e.sign}tQ(K_,V5.Writable);K_.prototype._write=function(e,r,n){this._hash.update(e),n()};K_.prototype.update=function(e,r){return this._hash.update(typeof e=="string"?H5.from(e,r):e),this};K_.prototype.verify=function(e,r,n){var i=typeof r=="string"?H5.from(r,n):r;this.end();var o=this._hash.digest();return GAe(i,o,e,this._signType,this._tag)};function XX(t){return new U_(t)}function QX(t){return new K_(t)}rQ.exports={Sign:XX,Verify:QX,createSign:XX,createVerify:QX}});var oQ=W((Oht,iQ)=>{h();var WAe=$5(),HAe=zi();iQ.exports=function(e){return new d0(e)};var ac={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};ac.p224=ac.secp224r1;ac.p256=ac.secp256r1=ac.prime256v1;ac.p192=ac.secp192r1=ac.prime192v1;ac.p384=ac.secp384r1;ac.p521=ac.secp521r1;function d0(t){this.curveType=ac[t],this.curveType||(this.curveType={name:t}),this.curve=new WAe.ec(this.curveType.name),this.keys=void 0}d0.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)};d0.prototype.computeSecret=function(t,e,r){e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e));var n=this.curve.keyFromPublic(t).getPublic(),i=n.mul(this.keys.getPrivate()).getX();return z7(i,r,this.curveType.byteLength)};d0.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic(e==="compressed",!0);return e==="hybrid"&&(r[r.length-1]%2?r[0]=7:r[0]=6),z7(r,t)};d0.prototype.getPrivateKey=function(t){return z7(this.keys.getPrivate(),t)};d0.prototype.setPublicKey=function(t,e){return e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e)),this.keys._importPublic(t),this};d0.prototype.setPrivateKey=function(t,e){e=e||"utf8",O.Buffer.isBuffer(t)||(t=new O.Buffer(t,e));var r=new HAe(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this};function z7(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new O.Buffer(t);if(r&&n.length<r){var i=new O.Buffer(r-n.length);i.fill(0),n=O.Buffer.concat([i,n])}return e?n.toString(e):n}});var W7=W((Nht,sQ)=>{h();var VAe=sv(),G7=ar().Buffer;sQ.exports=function(t,e){for(var r=G7.alloc(0),n=0,i;r.length<e;)i=JAe(n++),r=G7.concat([r,VAe("sha1").update(t).update(i).digest()]);return r.slice(0,e)};function JAe(t){var e=G7.allocUnsafe(4);return e.writeUInt32BE(t,0),e}});var H7=W((Uht,aQ)=>{h();aQ.exports=function(e,r){for(var n=e.length,i=-1;++i<n;)e[i]^=r[i];return e}});var V7=W((qht,dQ)=>{h();var cQ=zi(),YAe=ar().Buffer;function ZAe(t,e){return YAe.from(t.toRed(cQ.mont(e.modulus)).redPow(new cQ(e.publicExponent)).fromRed().toArray())}dQ.exports=ZAe});var hQ=W((Fht,fQ)=>{h();var XAe=N_(),J7=jy(),QAe=sv(),uQ=W7(),lQ=H7(),Y7=zi(),ePe=V7(),tPe=v5(),tu=ar().Buffer;fQ.exports=function(e,r,n){var i;e.padding?i=e.padding:n?i=1:i=4;var o=XAe(e),s;if(i===4)s=rPe(o,r);else if(i===1)s=nPe(o,r,n);else if(i===3){if(s=new Y7(r),s.cmp(o.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return n?tPe(s,o):ePe(s,o)};function rPe(t,e){var r=t.modulus.byteLength(),n=e.length,i=QAe("sha1").update(tu.alloc(0)).digest(),o=i.length,s=2*o;if(n>r-s-2)throw new Error("message too long");var a=tu.alloc(r-n-s-2),d=r-o-1,u=J7(o),c=lQ(tu.concat([i,a,tu.alloc(1,1),e],d),uQ(u,d)),l=lQ(u,uQ(c,o));return new Y7(tu.concat([tu.alloc(1),l,c],r))}function nPe(t,e,r){var n=e.length,i=t.modulus.byteLength();if(n>i-11)throw new Error("message too long");var o;return r?o=tu.alloc(i-n-3,255):o=iPe(i-n-3),new Y7(tu.concat([tu.from([0,r?1:2]),o,tu.alloc(1),e],i))}function iPe(t){for(var e=tu.allocUnsafe(t),r=0,n=J7(t*2),i=0,o;r<t;)i===n.length&&(n=J7(t*2),i=0),o=n[i++],o&&(e[r++]=o);return e}});var bQ=W((Ght,gQ)=>{h();var oPe=N_(),pQ=W7(),mQ=H7(),yQ=zi(),sPe=v5(),aPe=sv(),cPe=V7(),q_=ar().Buffer;gQ.exports=function(e,r,n){var i;e.padding?i=e.padding:n?i=1:i=4;var o=oPe(e),s=o.modulus.byteLength();if(r.length>s||new yQ(r).cmp(o.modulus)>=0)throw new Error("decryption error");var a;n?a=cPe(new yQ(r),o):a=sPe(r,o);var d=q_.alloc(s-a.length);if(a=q_.concat([d,a],s),i===4)return dPe(o,a);if(i===1)return uPe(o,a,n);if(i===3)return a;throw new Error("unknown padding")};function dPe(t,e){var r=t.modulus.byteLength(),n=aPe("sha1").update(q_.alloc(0)).digest(),i=n.length;if(e[0]!==0)throw new Error("decryption error");var o=e.slice(1,i+1),s=e.slice(i+1),a=mQ(o,pQ(s,i)),d=mQ(s,pQ(a,r-i-1));if(lPe(n,d.slice(0,i)))throw new Error("decryption error");for(var u=i;d[u]===0;)u++;if(d[u++]!==1)throw new Error("decryption error");return d.slice(u)}function uPe(t,e,r){for(var n=e.slice(0,2),i=2,o=0;e[i++]!==0;)if(i>=e.length){o++;break}var s=e.slice(2,i-1);if((n.toString("hex")!=="0002"&&!r||n.toString("hex")!=="0001"&&r)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return e.slice(i)}function lPe(t,e){t=q_.from(t),e=q_.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var i=-1;++i<n;)r+=t[i]^e[i];return r}});var vQ=W(u0=>{h();u0.publicEncrypt=hQ();u0.privateDecrypt=bQ();u0.privateEncrypt=function(e,r){return u0.publicEncrypt(e,r,!0)};u0.publicDecrypt=function(e,r){return u0.privateDecrypt(e,r,!0)}});var kQ=W(L_=>{"use strict";h();function wQ(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var xQ=ar(),_Q=jy(),EQ=xQ.Buffer,SQ=xQ.kMaxLength,Z7=globalThis.crypto||globalThis.msCrypto,AQ=Math.pow(2,32)-1;function PQ(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>AQ||t<0)throw new TypeError("offset must be a uint32");if(t>SQ||t>e)throw new RangeError("offset out of range")}function TQ(t,e,r){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>AQ||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>SQ)throw new RangeError("buffer too small")}Z7&&Z7.getRandomValues||!B.default.browser?(L_.randomFill=fPe,L_.randomFillSync=hPe):(L_.randomFill=wQ,L_.randomFillSync=wQ);function fPe(t,e,r,n){if(!EQ.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")n=e,e=0,r=t.length;else if(typeof r=="function")n=r,r=t.length-e;else if(typeof n!="function")throw new TypeError('"cb" argument must be a function');return PQ(e,t.length),TQ(r,e,t.length),IQ(t,e,r,n)}function IQ(t,e,r,n){if(B.default.browser){var i=t.buffer,o=new Uint8Array(i,e,r);if(Z7.getRandomValues(o),n){B.default.nextTick(function(){n(null,t)});return}return t}if(n){_Q(r,function(a,d){if(a)return n(a);d.copy(t,e),n(null,t)});return}var s=_Q(r);return s.copy(t,e),t}function hPe(t,e,r){if(typeof e>"u"&&(e=0),!EQ.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return PQ(e,t.length),r===void 0&&(r=t.length-e),TQ(r,e,t.length),IQ(t,e,r)}});var m5=W(dr=>{"use strict";h();dr.randomBytes=dr.rng=dr.pseudoRandomBytes=dr.prng=jy();dr.createHash=dr.Hash=sv();dr.createHmac=dr.Hmac=bD();var pPe=JV(),mPe=Object.keys(pPe),yPe=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(mPe);dr.getHashes=function(){return yPe};var RQ=ID();dr.pbkdf2=RQ.pbkdf2;dr.pbkdf2Sync=RQ.pbkdf2Sync;var cl=gY();dr.Cipher=cl.Cipher;dr.createCipher=cl.createCipher;dr.Cipheriv=cl.Cipheriv;dr.createCipheriv=cl.createCipheriv;dr.Decipher=cl.Decipher;dr.createDecipher=cl.createDecipher;dr.Decipheriv=cl.Decipheriv;dr.createDecipheriv=cl.createDecipheriv;dr.getCiphers=cl.getCiphers;dr.listCiphers=cl.listCiphers;var F_=RY();dr.DiffieHellmanGroup=F_.DiffieHellmanGroup;dr.createDiffieHellmanGroup=F_.createDiffieHellmanGroup;dr.getDiffieHellman=F_.getDiffieHellman;dr.createDiffieHellman=F_.createDiffieHellman;dr.DiffieHellman=F_.DiffieHellman;var J5=nQ();dr.createSign=J5.createSign;dr.Sign=J5.Sign;dr.createVerify=J5.createVerify;dr.Verify=J5.Verify;dr.createECDH=oQ();var Y5=vQ();dr.publicEncrypt=Y5.publicEncrypt;dr.privateEncrypt=Y5.privateEncrypt;dr.publicDecrypt=Y5.publicDecrypt;dr.privateDecrypt=Y5.privateDecrypt;var DQ=kQ();dr.randomFill=DQ.randomFill;dr.randomFillSync=DQ.randomFillSync;dr.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))};dr.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var ru=W(ur=>{"use strict";h();Object.defineProperty(ur,"__esModule",{value:!0});ur.setBigUint64=ur.Hash=ur.equalBytes=ur.ensureBytes=ur.checkOpts=ur.concatBytes=ur.toBytes=ur.bytesToUtf8=ur.utf8ToBytes=ur.asyncLoop=ur.nextTick=ur.hexToBytes=ur.bytesToHex=ur.isLE=ur.createView=ur.u32=ur.u16=ur.u8=void 0;var Q7=t=>t instanceof Uint8Array,gPe=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);ur.u8=gPe;var bPe=t=>new Uint16Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/2));ur.u16=bPe;var vPe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));ur.u32=vPe;var wPe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);ur.createView=wPe;ur.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ur.isLE)throw new Error("Non little-endian hardware is not supported");var _Pe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function xPe(t){if(!Q7(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=_Pe[t[r]];return e}ur.bytesToHex=xPe;function EPe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}ur.hexToBytes=EPe;var SPe=async()=>{};ur.nextTick=SPe;async function APe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,ur.nextTick)(),n+=o)}}ur.asyncLoop=APe;function MQ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}ur.utf8ToBytes=MQ;function PPe(t){return new TextDecoder().decode(t)}ur.bytesToUtf8=PPe;function TPe(t){if(typeof t=="string"&&(t=MQ(t)),!Q7(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}ur.toBytes=TPe;function IPe(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!Q7(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}ur.concatBytes=IPe;var kPe=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function RPe(t,e){if(e!==void 0&&(typeof e!="object"||!kPe(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}ur.checkOpts=RPe;function DPe(t,e){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}ur.ensureBytes=DPe;function MPe(t,e){if(t.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let r=!0;for(let n=0;n<t.length;n++)r&&(r=t[n]===e[n]);return r}ur.equalBytes=MPe;var X7=class{};ur.Hash=X7;function BPe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),d=n?4:0,u=n?0:4;t.setUint32(e+d,s,n),t.setUint32(e+u,a,n)}ur.setBigUint64=BPe});var z_=W(Is=>{"use strict";h();Object.defineProperty(Is,"__esModule",{value:!0});Is.AEAD_TAG_LENGTH=Is.XCHACHA20_NONCE_LENGTH=Is.CURVE25519_PUBLIC_KEY_SIZE=Is.ETH_PUBLIC_KEY_SIZE=Is.UNCOMPRESSED_PUBLIC_KEY_SIZE=Is.COMPRESSED_PUBLIC_KEY_SIZE=Is.SECRET_KEY_LENGTH=void 0;Is.SECRET_KEY_LENGTH=32;Is.COMPRESSED_PUBLIC_KEY_SIZE=33;Is.UNCOMPRESSED_PUBLIC_KEY_SIZE=65;Is.ETH_PUBLIC_KEY_SIZE=64;Is.CURVE25519_PUBLIC_KEY_SIZE=32;Is.XCHACHA20_NONCE_LENGTH=24;Is.AEAD_TAG_LENGTH=16});var l0=W(Kn=>{"use strict";h();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ephemeralKeySize=Kn.symmetricNonceLength=Kn.symmetricAlgorithm=Kn.isHkdfKeyCompressed=Kn.isEphemeralKeyCompressed=Kn.ellipticCurve=Kn.ECIES_CONFIG=void 0;var Z5=z_(),CPe=function(){function t(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}return t}();Kn.ECIES_CONFIG=new CPe;var OPe=function(){return Kn.ECIES_CONFIG.ellipticCurve};Kn.ellipticCurve=OPe;var $Pe=function(){return Kn.ECIES_CONFIG.isEphemeralKeyCompressed};Kn.isEphemeralKeyCompressed=$Pe;var NPe=function(){return Kn.ECIES_CONFIG.isHkdfKeyCompressed};Kn.isHkdfKeyCompressed=NPe;var jPe=function(){return Kn.ECIES_CONFIG.symmetricAlgorithm};Kn.symmetricAlgorithm=jPe;var UPe=function(){return Kn.ECIES_CONFIG.symmetricNonceLength};Kn.symmetricNonceLength=UPe;var KPe=function(){var t={secp256k1:Kn.ECIES_CONFIG.isEphemeralKeyCompressed?Z5.COMPRESSED_PUBLIC_KEY_SIZE:Z5.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:Z5.CURVE25519_PUBLIC_KEY_SIZE,ed25519:Z5.CURVE25519_PUBLIC_KEY_SIZE};if(Kn.ECIES_CONFIG.ellipticCurve in t)return t[Kn.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")};Kn.ephemeralKeySize=KPe});var BQ=W(X5=>{"use strict";h();Object.defineProperty(X5,"__esModule",{value:!0});X5.crypto=void 0;X5.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var eM=W(Bv=>{"use strict";h();Object.defineProperty(Bv,"__esModule",{value:!0});Bv.getWebcryptoSubtle=Bv.randomBytes=void 0;var f0=BQ();function qPe(t=32){if(f0.crypto&&typeof f0.crypto.getRandomValues=="function")return f0.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}Bv.randomBytes=qPe;function LPe(){if(f0.crypto&&typeof f0.crypto.subtle=="object"&&f0.crypto.subtle!=null)return f0.crypto.subtle;throw new Error("crypto.subtle must be defined")}Bv.getWebcryptoSubtle=LPe});var rM=W(Ys=>{"use strict";h();Object.defineProperty(Ys,"__esModule",{value:!0});Ys.output=Ys.exists=Ys.hash=Ys.bytes=Ys.bool=Ys.number=void 0;function Q5(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}Ys.number=Q5;function CQ(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}Ys.bool=CQ;function FPe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function tM(t,...e){if(!FPe(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}Ys.bytes=tM;function OQ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Q5(t.outputLen),Q5(t.blockLen)}Ys.hash=OQ;function $Q(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}Ys.exists=$Q;function NQ(t,e){tM(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Ys.output=NQ;var zPe={number:Q5,bool:CQ,bytes:tM,hash:OQ,exists:$Q,output:NQ};Ys.default=zPe});var jQ=W(e8=>{"use strict";h();Object.defineProperty(e8,"__esModule",{value:!0});e8.crypto=void 0;e8.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var Ep=W(lr=>{"use strict";h();Object.defineProperty(lr,"__esModule",{value:!0});lr.randomBytes=lr.wrapXOFConstructorWithOpts=lr.wrapConstructorWithOpts=lr.wrapConstructor=lr.checkOpts=lr.Hash=lr.concatBytes=lr.toBytes=lr.utf8ToBytes=lr.asyncLoop=lr.nextTick=lr.hexToBytes=lr.bytesToHex=lr.isLE=lr.rotr=lr.createView=lr.u32=lr.u8=void 0;var nM=jQ(),GPe=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);lr.u8=GPe;var WPe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));lr.u32=WPe;function oM(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var HPe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);lr.createView=HPe;var VPe=(t,e)=>t<<32-e|t>>>e;lr.rotr=VPe;lr.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lr.isLE)throw new Error("Non little-endian hardware is not supported");var JPe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YPe(t){if(!oM(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=JPe[t[r]];return e}lr.bytesToHex=YPe;var Nf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function UQ(t){if(t>=Nf._0&&t<=Nf._9)return t-Nf._0;if(t>=Nf._A&&t<=Nf._F)return t-(Nf._A-10);if(t>=Nf._a&&t<=Nf._f)return t-(Nf._a-10)}function ZPe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=UQ(t.charCodeAt(o)),a=UQ(t.charCodeAt(o+1));if(s===void 0||a===void 0){let d=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+a}return n}lr.hexToBytes=ZPe;var XPe=async()=>{};lr.nextTick=XPe;async function QPe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,lr.nextTick)(),n+=o)}}lr.asyncLoop=QPe;function KQ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}lr.utf8ToBytes=KQ;function t8(t){if(typeof t=="string"&&(t=KQ(t)),!oM(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}lr.toBytes=t8;function eTe(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!oM(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}lr.concatBytes=eTe;var iM=class{clone(){return this._cloneInto()}};lr.Hash=iM;var tTe={}.toString;function rTe(t,e){if(e!==void 0&&tTe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}lr.checkOpts=rTe;function nTe(t){let e=n=>t().update(t8(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}lr.wrapConstructor=nTe;function iTe(t){let e=(n,i)=>t(i).update(t8(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}lr.wrapConstructorWithOpts=iTe;function oTe(t){let e=(n,i)=>t(i).update(t8(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}lr.wrapXOFConstructorWithOpts=oTe;function sTe(t=32){if(nM.crypto&&typeof nM.crypto.getRandomValues=="function")return nM.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}lr.randomBytes=sTe});var cM=W(r8=>{"use strict";h();Object.defineProperty(r8,"__esModule",{value:!0});r8.SHA2=void 0;var sM=rM(),G_=Ep();function aTe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),d=n?4:0,u=n?0:4;t.setUint32(e+d,s,n),t.setUint32(e+u,a,n)}var aM=class extends G_.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,G_.createView)(this.buffer)}update(e){(0,sM.exists)(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,G_.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let d=(0,G_.createView)(e);for(;i<=o-s;s+=i)this.process(d,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,sM.exists)(this),(0,sM.output)(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;aTe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,G_.createView)(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=d/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,c[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};r8.SHA2=aM});var cee=W(Dt=>{"use strict";h();Object.defineProperty(Dt,"__esModule",{value:!0});Dt.add5L=Dt.add5H=Dt.add4H=Dt.add4L=Dt.add3H=Dt.add3L=Dt.add=Dt.rotlBL=Dt.rotlBH=Dt.rotlSL=Dt.rotlSH=Dt.rotr32L=Dt.rotr32H=Dt.rotrBL=Dt.rotrBH=Dt.rotrSL=Dt.rotrSH=Dt.shrSL=Dt.shrSH=Dt.toBig=Dt.split=Dt.fromBig=void 0;var n8=BigInt(2**32-1),dM=BigInt(32);function uM(t,e=!1){return e?{h:Number(t&n8),l:Number(t>>dM&n8)}:{h:Number(t>>dM&n8)|0,l:Number(t&n8)|0}}Dt.fromBig=uM;function qQ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=uM(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}Dt.split=qQ;var LQ=(t,e)=>BigInt(t>>>0)<<dM|BigInt(e>>>0);Dt.toBig=LQ;var FQ=(t,e,r)=>t>>>r;Dt.shrSH=FQ;var zQ=(t,e,r)=>t<<32-r|e>>>r;Dt.shrSL=zQ;var GQ=(t,e,r)=>t>>>r|e<<32-r;Dt.rotrSH=GQ;var WQ=(t,e,r)=>t<<32-r|e>>>r;Dt.rotrSL=WQ;var HQ=(t,e,r)=>t<<64-r|e>>>r-32;Dt.rotrBH=HQ;var VQ=(t,e,r)=>t>>>r-32|e<<64-r;Dt.rotrBL=VQ;var JQ=(t,e)=>e;Dt.rotr32H=JQ;var YQ=(t,e)=>t;Dt.rotr32L=YQ;var ZQ=(t,e,r)=>t<<r|e>>>32-r;Dt.rotlSH=ZQ;var XQ=(t,e,r)=>e<<r|t>>>32-r;Dt.rotlSL=XQ;var QQ=(t,e,r)=>e<<r-32|t>>>64-r;Dt.rotlBH=QQ;var eee=(t,e,r)=>t<<r-32|e>>>64-r;Dt.rotlBL=eee;function tee(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}Dt.add=tee;var ree=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);Dt.add3L=ree;var nee=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;Dt.add3H=nee;var iee=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);Dt.add4L=iee;var oee=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;Dt.add4H=oee;var see=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);Dt.add5L=see;var aee=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;Dt.add5H=aee;var cTe={fromBig:uM,split:qQ,toBig:LQ,shrSH:FQ,shrSL:zQ,rotrSH:GQ,rotrSL:WQ,rotrBH:HQ,rotrBL:VQ,rotr32H:JQ,rotr32L:YQ,rotlSH:ZQ,rotlSL:XQ,rotlBH:QQ,rotlBL:eee,add:tee,add3L:ree,add3H:nee,add4L:iee,add4H:oee,add5H:aee,add5L:see};Dt.default=cTe});var dee=W(td=>{"use strict";h();Object.defineProperty(td,"__esModule",{value:!0});td.sha384=td.sha512_256=td.sha512_224=td.sha512=td.SHA512=void 0;var dTe=cM(),fr=cee(),i8=Ep(),[uTe,lTe]=fr.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Sp=new Uint32Array(80),Ap=new Uint32Array(80),h0=class extends dTe.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:d,Eh:u,El:c,Fh:l,Fl:m,Gh:p,Gl:g,Hh:b,Hl:S}=this;return[e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S]}set(e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=d|0,this.Eh=u|0,this.El=c|0,this.Fh=l|0,this.Fl=m|0,this.Gh=p|0,this.Gl=g|0,this.Hh=b|0,this.Hl=S|0}process(e,r){for(let P=0;P<16;P++,r+=4)Sp[P]=e.getUint32(r),Ap[P]=e.getUint32(r+=4);for(let P=16;P<80;P++){let $=Sp[P-15]|0,N=Ap[P-15]|0,L=fr.default.rotrSH($,N,1)^fr.default.rotrSH($,N,8)^fr.default.shrSH($,N,7),F=fr.default.rotrSL($,N,1)^fr.default.rotrSL($,N,8)^fr.default.shrSL($,N,7),U=Sp[P-2]|0,G=Ap[P-2]|0,q=fr.default.rotrSH(U,G,19)^fr.default.rotrBH(U,G,61)^fr.default.shrSH(U,G,6),T=fr.default.rotrSL(U,G,19)^fr.default.rotrBL(U,G,61)^fr.default.shrSL(U,G,6),E=fr.default.add4L(F,T,Ap[P-7],Ap[P-16]),k=fr.default.add4H(E,L,q,Sp[P-7],Sp[P-16]);Sp[P]=k|0,Ap[P]=E|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:d,Dh:u,Dl:c,Eh:l,El:m,Fh:p,Fl:g,Gh:b,Gl:S,Hh:A,Hl:I}=this;for(let P=0;P<80;P++){let $=fr.default.rotrSH(l,m,14)^fr.default.rotrSH(l,m,18)^fr.default.rotrBH(l,m,41),N=fr.default.rotrSL(l,m,14)^fr.default.rotrSL(l,m,18)^fr.default.rotrBL(l,m,41),L=l&p^~l&b,F=m&g^~m&S,U=fr.default.add5L(I,N,F,lTe[P],Ap[P]),G=fr.default.add5H(U,A,$,L,uTe[P],Sp[P]),q=U|0,T=fr.default.rotrSH(n,i,28)^fr.default.rotrBH(n,i,34)^fr.default.rotrBH(n,i,39),E=fr.default.rotrSL(n,i,28)^fr.default.rotrBL(n,i,34)^fr.default.rotrBL(n,i,39),k=n&o^n&a^o&a,f=i&s^i&d^s&d;A=b|0,I=S|0,b=p|0,S=g|0,p=l|0,g=m|0,{h:l,l:m}=fr.default.add(u|0,c|0,G|0,q|0),u=a|0,c=d|0,a=o|0,d=s|0,o=n|0,s=i|0;let y=fr.default.add3L(q,E,f);n=fr.default.add3H(y,G,T,k),i=y|0}({h:n,l:i}=fr.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=fr.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:d}=fr.default.add(this.Ch|0,this.Cl|0,a|0,d|0),{h:u,l:c}=fr.default.add(this.Dh|0,this.Dl|0,u|0,c|0),{h:l,l:m}=fr.default.add(this.Eh|0,this.El|0,l|0,m|0),{h:p,l:g}=fr.default.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:b,l:S}=fr.default.add(this.Gh|0,this.Gl|0,b|0,S|0),{h:A,l:I}=fr.default.add(this.Hh|0,this.Hl|0,A|0,I|0),this.set(n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I)}roundClean(){Sp.fill(0),Ap.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};td.SHA512=h0;var lM=class extends h0{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},fM=class extends h0{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},hM=class extends h0{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};td.sha512=(0,i8.wrapConstructor)(()=>new h0);td.sha512_224=(0,i8.wrapConstructor)(()=>new lM);td.sha512_256=(0,i8.wrapConstructor)(()=>new fM);td.sha384=(0,i8.wrapConstructor)(()=>new hM)});var nu=W(Jt=>{"use strict";h();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.validateObject=Jt.createHmacDrbg=Jt.bitMask=Jt.bitSet=Jt.bitGet=Jt.bitLen=Jt.utf8ToBytes=Jt.equalBytes=Jt.concatBytes=Jt.ensureBytes=Jt.numberToVarBytesBE=Jt.numberToBytesLE=Jt.numberToBytesBE=Jt.bytesToNumberLE=Jt.bytesToNumberBE=Jt.hexToBytes=Jt.hexToNumber=Jt.numberToHexUnpadded=Jt.bytesToHex=Jt.isBytes=void 0;var fee=BigInt(0),o8=BigInt(1),fTe=BigInt(2);function Cv(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}Jt.isBytes=Cv;var hTe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mM(t){if(!Cv(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=hTe[t[r]];return e}Jt.bytesToHex=mM;function hee(t){let e=t.toString(16);return e.length&1?`0${e}`:e}Jt.numberToHexUnpadded=hee;function yM(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}Jt.hexToNumber=yM;var jf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function uee(t){if(t>=jf._0&&t<=jf._9)return t-jf._0;if(t>=jf._A&&t<=jf._F)return t-(jf._A-10);if(t>=jf._a&&t<=jf._f)return t-(jf._a-10)}function s8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=uee(t.charCodeAt(o)),a=uee(t.charCodeAt(o+1));if(s===void 0||a===void 0){let d=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+a}return n}Jt.hexToBytes=s8;function pTe(t){return yM(mM(t))}Jt.bytesToNumberBE=pTe;function mTe(t){if(!Cv(t))throw new Error("Uint8Array expected");return yM(mM(Uint8Array.from(t).reverse()))}Jt.bytesToNumberLE=mTe;function pee(t,e){return s8(t.toString(16).padStart(e*2,"0"))}Jt.numberToBytesBE=pee;function yTe(t,e){return pee(t,e).reverse()}Jt.numberToBytesLE=yTe;function gTe(t){return s8(hee(t))}Jt.numberToVarBytesBE=gTe;function bTe(t,e,r){let n;if(typeof e=="string")try{n=s8(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Cv(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}Jt.ensureBytes=bTe;function mee(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!Cv(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}Jt.concatBytes=mee;function vTe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}Jt.equalBytes=vTe;function wTe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}Jt.utf8ToBytes=wTe;function _Te(t){let e;for(e=0;t>fee;t>>=o8,e+=1);return e}Jt.bitLen=_Te;function xTe(t,e){return t>>BigInt(e)&o8}Jt.bitGet=xTe;var ETe=(t,e,r)=>t|(r?o8:fee)<<BigInt(e);Jt.bitSet=ETe;var STe=t=>(fTe<<BigInt(t-1))-o8;Jt.bitMask=STe;var pM=t=>new Uint8Array(t),lee=t=>Uint8Array.from(t);function ATe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=pM(t),i=pM(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),d=(l=pM())=>{i=a(lee([0]),l),n=a(),l.length!==0&&(i=a(lee([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,m=[];for(;l<e;){n=a();let p=n.slice();m.push(p),l+=n.length}return mee(...m)};return(l,m)=>{s(),d(l);let p;for(;!(p=m(u()));)d();return s(),p}}Jt.createHmacDrbg=ATe;var PTe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Cv(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function TTe(t,e,r={}){let n=(i,o,s)=>{let a=PTe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let d=t[i];if(!(s&&d===void 0)&&!a(d,t))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}Jt.validateObject=TTe});var Tp=W(Yt=>{"use strict";h();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.mapHashToField=Yt.getMinHashLength=Yt.getFieldBytesLength=Yt.hashToPrivateScalar=Yt.FpSqrtEven=Yt.FpSqrtOdd=Yt.Field=Yt.nLength=Yt.FpIsSquare=Yt.FpDiv=Yt.FpInvertBatch=Yt.FpPow=Yt.validateField=Yt.isNegativeLE=Yt.FpSqrt=Yt.tonelliShanks=Yt.invert=Yt.pow2=Yt.pow=Yt.mod=void 0;var dc=nu(),Gi=BigInt(0),bn=BigInt(1),Pp=BigInt(2),ITe=BigInt(3),gM=BigInt(4),yee=BigInt(5),gee=BigInt(8),kTe=BigInt(9),RTe=BigInt(16);function cc(t,e){let r=t%e;return r>=Gi?r:e+r}Yt.mod=cc;function bee(t,e,r){if(r<=Gi||e<Gi)throw new Error("Expected power/modulo > 0");if(r===bn)return Gi;let n=bn;for(;e>Gi;)e&bn&&(n=n*t%r),t=t*t%r,e>>=bn;return n}Yt.pow=bee;function DTe(t,e,r){let n=t;for(;e-- >Gi;)n*=n,n%=r;return n}Yt.pow2=DTe;function a8(t,e){if(t===Gi||e<=Gi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=cc(t,e),n=e,i=Gi,o=bn,s=bn,a=Gi;for(;r!==Gi;){let u=n/r,c=n%r,l=i-s*u,m=o-a*u;n=r,r=c,i=s,o=a,s=l,a=m}if(n!==bn)throw new Error("invert: does not exist");return cc(i,e)}Yt.invert=a8;function vee(t){let e=(t-bn)/Pp,r,n,i;for(r=t-bn,n=0;r%Pp===Gi;r/=Pp,n++);for(i=Pp;i<t&&bee(i,e,t)!==t-bn;i++);if(n===1){let s=(t+bn)/gM;return function(d,u){let c=d.pow(u,s);if(!d.eql(d.sqr(c),u))throw new Error("Cannot find square root");return c}}let o=(r+bn)/Pp;return function(a,d){if(a.pow(d,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,c=a.pow(a.mul(a.ONE,i),r),l=a.pow(d,o),m=a.pow(d,r);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let p=1;for(let b=a.sqr(m);p<u&&!a.eql(b,a.ONE);p++)b=a.sqr(b);let g=a.pow(c,bn<<BigInt(u-p-1));c=a.sqr(g),l=a.mul(l,g),m=a.mul(m,c),u=p}return l}}Yt.tonelliShanks=vee;function wee(t){if(t%gM===ITe){let e=(t+bn)/gM;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%gee===yee){let e=(t-yee)/gee;return function(n,i){let o=n.mul(i,Pp),s=n.pow(o,e),a=n.mul(i,s),d=n.mul(n.mul(a,Pp),s),u=n.mul(a,n.sub(d,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return t%RTe,vee(t)}Yt.FpSqrt=wee;var MTe=(t,e)=>(cc(t,e)&bn)===bn;Yt.isNegativeLE=MTe;var BTe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function CTe(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=BTe.reduce((n,i)=>(n[i]="function",n),e);return(0,dc.validateObject)(t,r)}Yt.validateField=CTe;function _ee(t,e,r){if(r<Gi)throw new Error("Expected power > 0");if(r===Gi)return t.ONE;if(r===bn)return e;let n=t.ONE,i=e;for(;r>Gi;)r&bn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=bn;return n}Yt.FpPow=_ee;function xee(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}Yt.FpInvertBatch=xee;function OTe(t,e,r){return t.mul(e,typeof r=="bigint"?a8(r,t.ORDER):t.inv(r))}Yt.FpDiv=OTe;function $Te(t){let e=(t.ORDER-bn)/Pp;return r=>{let n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}}Yt.FpIsSquare=$Te;function bM(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}Yt.nLength=bM;function NTe(t,e,r=!1,n={}){if(t<=Gi)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=bM(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=wee(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:(0,dc.bitMask)(i),ZERO:Gi,ONE:bn,create:d=>cc(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return Gi<=d&&d<t},is0:d=>d===Gi,isOdd:d=>(d&bn)===bn,neg:d=>cc(-d,t),eql:(d,u)=>d===u,sqr:d=>cc(d*d,t),add:(d,u)=>cc(d+u,t),sub:(d,u)=>cc(d-u,t),mul:(d,u)=>cc(d*u,t),pow:(d,u)=>_ee(a,d,u),div:(d,u)=>cc(d*a8(u,t),t),sqrN:d=>d*d,addN:(d,u)=>d+u,subN:(d,u)=>d-u,mulN:(d,u)=>d*u,inv:d=>a8(d,t),sqrt:n.sqrt||(d=>s(a,d)),invertBatch:d=>xee(a,d),cmov:(d,u,c)=>c?u:d,toBytes:d=>r?(0,dc.numberToBytesLE)(d,o):(0,dc.numberToBytesBE)(d,o),fromBytes:d=>{if(d.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${d.length}`);return r?(0,dc.bytesToNumberLE)(d):(0,dc.bytesToNumberBE)(d)}});return Object.freeze(a)}Yt.Field=NTe;function jTe(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}Yt.FpSqrtOdd=jTe;function UTe(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}Yt.FpSqrtEven=UTe;function KTe(t,e,r=!1){t=(0,dc.ensureBytes)("privateHash",t);let n=t.length,i=bM(e).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);let o=r?(0,dc.bytesToNumberLE)(t):(0,dc.bytesToNumberBE)(t);return cc(o,e-bn)+bn}Yt.hashToPrivateScalar=KTe;function vM(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}Yt.getFieldBytesLength=vM;function Eee(t){let e=vM(t);return e+Math.ceil(e/2)}Yt.getMinHashLength=Eee;function qTe(t,e,r=!1){let n=t.length,i=vM(e),o=Eee(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?(0,dc.bytesToNumberBE)(t):(0,dc.bytesToNumberLE)(t),a=cc(s,e-bn)+bn;return r?(0,dc.numberToBytesLE)(a,i):(0,dc.numberToBytesBE)(a,i)}Yt.mapHashToField=qTe});var _M=W(Ov=>{"use strict";h();Object.defineProperty(Ov,"__esModule",{value:!0});Ov.validateBasic=Ov.wNAF=void 0;var See=Tp(),LTe=nu(),FTe=BigInt(0),wM=BigInt(1);function zTe(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>FTe;)o&wM&&(s=s.add(a)),a=a.double(),o>>=wM;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),d=[],u=i,c=u;for(let l=0;l<s;l++){c=u,d.push(c);for(let m=1;m<a;m++)c=c.add(u),d.push(c);u=c.double()}return d},wNAF(i,o,s){let{windows:a,windowSize:d}=n(i),u=t.ZERO,c=t.BASE,l=BigInt(2**i-1),m=2**i,p=BigInt(i);for(let g=0;g<a;g++){let b=g*d,S=Number(s&l);s>>=p,S>d&&(S-=m,s+=wM);let A=b,I=b+Math.abs(S)-1,P=g%2!==0,$=S<0;S===0?c=c.add(r(P,o[A])):u=u.add(r($,o[I]))}return{p:u,f:c}},wNAFCached(i,o,s,a){let d=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,d),d!==1&&o.set(i,a(u))),this.wNAF(d,u,s)}}}Ov.wNAF=zTe;function GTe(t){return(0,See.validateField)(t.Fp),(0,LTe.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,See.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}Ov.validateBasic=GTe});var Pee=W(d8=>{"use strict";h();Object.defineProperty(d8,"__esModule",{value:!0});d8.twistedEdwards=void 0;var WTe=Tp(),Uf=nu(),Ip=nu(),Aee=_M(),iu=BigInt(0),uc=BigInt(1),c8=BigInt(2),HTe=BigInt(8),VTe={zip215:!0};function JTe(t){let e=(0,Aee.validateBasic)(t);return Uf.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function YTe(t){let e=JTe(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:d}=e,u=c8<<BigInt(a*8)-uc,c=r.create,l=e.uvRatio||((x,v)=>{try{return{isValid:!0,value:r.sqrt(x*r.inv(v))}}catch{return{isValid:!1,value:iu}}}),m=e.adjustScalarBytes||(x=>x),p=e.domain||((x,v,D)=>{if(v.length||D)throw new Error("Contexts/pre-hash are not supported");return x}),g=x=>typeof x=="bigint"&&iu<x,b=(x,v)=>g(x)&&g(v)&&x<v,S=x=>x===iu||b(x,u);function A(x,v){if(b(x,v))return x;throw new Error(`Expected valid scalar < ${v}, got ${typeof x} ${x}`)}function I(x){return x===iu?x:A(x,n)}let P=new Map;function $(x){if(!(x instanceof N))throw new Error("ExtendedPoint expected")}class N{constructor(v,D,K,M){if(this.ex=v,this.ey=D,this.ez=K,this.et=M,!S(v))throw new Error("x required");if(!S(D))throw new Error("y required");if(!S(K))throw new Error("z required");if(!S(M))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof N)throw new Error("extended point not allowed");let{x:D,y:K}=v||{};if(!S(D)||!S(K))throw new Error("invalid affine point");return new N(D,K,uc,c(D*K))}static normalizeZ(v){let D=r.invertBatch(v.map(K=>K.ez));return v.map((K,M)=>K.toAffine(D[M])).map(N.fromAffine)}_setWindowSize(v){this._WINDOW_SIZE=v,P.delete(this)}assertValidity(){let{a:v,d:D}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:K,ey:M,ez:j,et:J}=this,Z=c(K*K),V=c(M*M),H=c(j*j),X=c(H*H),ee=c(Z*v),ue=c(H*c(ee+V)),ae=c(X+c(D*c(Z*V)));if(ue!==ae)throw new Error("bad point: equation left != right (1)");let ce=c(K*M),pe=c(j*J);if(ce!==pe)throw new Error("bad point: equation left != right (2)")}equals(v){$(v);let{ex:D,ey:K,ez:M}=this,{ex:j,ey:J,ez:Z}=v,V=c(D*Z),H=c(j*M),X=c(K*Z),ee=c(J*M);return V===H&&X===ee}is0(){return this.equals(N.ZERO)}negate(){return new N(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){let{a:v}=e,{ex:D,ey:K,ez:M}=this,j=c(D*D),J=c(K*K),Z=c(c8*c(M*M)),V=c(v*j),H=D+K,X=c(c(H*H)-j-J),ee=V+J,ue=ee-Z,ae=V-J,ce=c(X*ue),pe=c(ee*ae),Ee=c(X*ae),Ue=c(ue*ee);return new N(ce,pe,Ue,Ee)}add(v){$(v);let{a:D,d:K}=e,{ex:M,ey:j,ez:J,et:Z}=this,{ex:V,ey:H,ez:X,et:ee}=v;if(D===BigInt(-1)){let gt=c((j-M)*(H+V)),Pe=c((j+M)*(H-V)),De=c(Pe-gt);if(De===iu)return this.double();let It=c(J*c8*ee),we=c(Z*c8*X),Se=we+It,Kr=Pe+gt,Fe=we-It,He=c(Se*De),js=c(Kr*Fe),ft=c(Se*Fe),Rt=c(De*Kr);return new N(He,js,Rt,ft)}let ue=c(M*V),ae=c(j*H),ce=c(Z*K*ee),pe=c(J*X),Ee=c((M+j)*(V+H)-ue-ae),Ue=pe-ce,le=pe+ce,ge=c(ae-D*ue),ve=c(Ee*Ue),Ce=c(le*ge),Ie=c(Ee*ge),je=c(Ue*le);return new N(ve,Ce,je,Ie)}subtract(v){return this.add(v.negate())}wNAF(v){return U.wNAFCached(this,P,v,N.normalizeZ)}multiply(v){let{p:D,f:K}=this.wNAF(A(v,n));return N.normalizeZ([D,K])[0]}multiplyUnsafe(v){let D=I(v);return D===iu?F:this.equals(F)||D===uc?this:this.equals(L)?this.wNAF(D).p:U.unsafeLadder(this,D)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return U.unsafeLadder(this,n).is0()}toAffine(v){let{ex:D,ey:K,ez:M}=this,j=this.is0();v==null&&(v=j?HTe:r.inv(M));let J=c(D*v),Z=c(K*v),V=c(M*v);if(j)return{x:iu,y:uc};if(V!==uc)throw new Error("invZ was invalid");return{x:J,y:Z}}clearCofactor(){let{h:v}=e;return v===uc?this:this.multiplyUnsafe(v)}static fromHex(v,D=!1){let{d:K,a:M}=e,j=r.BYTES;v=(0,Ip.ensureBytes)("pointHex",v,j);let J=v.slice(),Z=v[j-1];J[j-1]=Z&-129;let V=Uf.bytesToNumberLE(J);V===iu||(D?A(V,u):A(V,r.ORDER));let H=c(V*V),X=c(H-uc),ee=c(K*H-M),{isValid:ue,value:ae}=l(X,ee);if(!ue)throw new Error("Point.fromHex: invalid y coordinate");let ce=(ae&uc)===uc,pe=(Z&128)!==0;if(!D&&ae===iu&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==ce&&(ae=c(-ae)),N.fromAffine({x:ae,y:V})}static fromPrivateKey(v){return T(v).point}toRawBytes(){let{x:v,y:D}=this.toAffine(),K=Uf.numberToBytesLE(D,r.BYTES);return K[K.length-1]|=v&uc?128:0,K}toHex(){return Uf.bytesToHex(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,uc,c(e.Gx*e.Gy)),N.ZERO=new N(iu,uc,uc,iu);let{BASE:L,ZERO:F}=N,U=(0,Aee.wNAF)(N,a*8);function G(x){return(0,WTe.mod)(x,n)}function q(x){return G(Uf.bytesToNumberLE(x))}function T(x){let v=a;x=(0,Ip.ensureBytes)("private key",x,v);let D=(0,Ip.ensureBytes)("hashed private key",o(x),2*v),K=m(D.slice(0,v)),M=D.slice(v,2*v),j=q(K),J=L.multiply(j),Z=J.toRawBytes();return{head:K,prefix:M,scalar:j,point:J,pointBytes:Z}}function E(x){return T(x).pointBytes}function k(x=new Uint8Array,...v){let D=Uf.concatBytes(...v);return q(o(p(D,(0,Ip.ensureBytes)("context",x),!!i)))}function f(x,v,D={}){x=(0,Ip.ensureBytes)("message",x),i&&(x=i(x));let{prefix:K,scalar:M,pointBytes:j}=T(v),J=k(D.context,K,x),Z=L.multiply(J).toRawBytes(),V=k(D.context,Z,j,x),H=G(J+V*M);I(H);let X=Uf.concatBytes(Z,Uf.numberToBytesLE(H,r.BYTES));return(0,Ip.ensureBytes)("result",X,a*2)}let y=VTe;function w(x,v,D,K=y){let{context:M,zip215:j}=K,J=r.BYTES;x=(0,Ip.ensureBytes)("signature",x,2*J),v=(0,Ip.ensureBytes)("message",v),i&&(v=i(v));let Z=Uf.bytesToNumberLE(x.slice(J,2*J)),V,H,X;try{V=N.fromHex(D,j),H=N.fromHex(x.slice(0,J),j),X=L.multiplyUnsafe(Z)}catch{return!1}if(!j&&V.isSmallOrder())return!1;let ee=k(M,H.toRawBytes(),V.toRawBytes(),v);return H.add(V.multiplyUnsafe(ee)).subtract(X).clearCofactor().equals(N.ZERO)}return L._setWindowSize(8),{CURVE:e,getPublicKey:E,sign:f,verify:w,ExtendedPoint:N,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>s(r.BYTES),precompute(x=8,v=N.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}}}}d8.twistedEdwards=YTe});var Iee=W(u8=>{"use strict";h();Object.defineProperty(u8,"__esModule",{value:!0});u8.montgomery=void 0;var Tee=Tp(),$v=nu(),W_=BigInt(0),xM=BigInt(1);function ZTe(t){return(0,$v.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function XTe(t){let e=ZTe(t),{P:r}=e,n=P=>(0,Tee.mod)(P,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(P=>P),d=e.powPminus2||(P=>(0,Tee.pow)(P,r-BigInt(2),r));function u(P,$,N){let L=n(P*($-N));return $=n($-L),N=n(N+L),[$,N]}function c(P){if(typeof P=="bigint"&&W_<=P&&P<r)return P;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let l=(e.a-BigInt(2))/BigInt(4);function m(P,$){let N=c(P),L=c($),F=N,U=xM,G=W_,q=N,T=xM,E=W_,k;for(let y=BigInt(i-1);y>=W_;y--){let w=L>>y&xM;E^=w,k=u(E,U,q),U=k[0],q=k[1],k=u(E,G,T),G=k[0],T=k[1],E=w;let _=U+G,x=n(_*_),v=U-G,D=n(v*v),K=x-D,M=q+T,j=q-T,J=n(j*_),Z=n(M*v),V=J+Z,H=J-Z;q=n(V*V),T=n(F*n(H*H)),U=n(x*D),G=n(K*(x+n(l*K)))}k=u(E,U,q),U=k[0],q=k[1],k=u(E,G,T),G=k[0],T=k[1];let f=d(G);return n(U*f)}function p(P){return(0,$v.numberToBytesLE)(n(P),o)}function g(P){let $=(0,$v.ensureBytes)("u coordinate",P,o);return s===32&&($[31]&=127),(0,$v.bytesToNumberLE)($)}function b(P){let $=(0,$v.ensureBytes)("scalar",P),N=$.length;if(N!==o&&N!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${N}`);return(0,$v.bytesToNumberLE)(a($))}function S(P,$){let N=g($),L=b(P),F=m(N,L);if(F===W_)throw new Error("Invalid private or public key received");return p(F)}let A=p(e.Gu);function I(P){return S(P,A)}return{scalarMult:S,scalarMultBase:I,getSharedSecret:(P,$)=>S(P,$),getPublicKey:P=>I(P),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:A}}u8.montgomery=XTe});var AM=W(rd=>{"use strict";h();Object.defineProperty(rd,"__esModule",{value:!0});rd.createHasher=rd.isogenyMap=rd.hash_to_field=rd.expand_message_xof=rd.expand_message_xmd=void 0;var QTe=Tp(),lc=nu();function eIe(t){if((0,lc.isBytes)(t))return t;if(typeof t=="string")return(0,lc.utf8ToBytes)(t);throw new Error("DST must be Uint8Array or string")}var tIe=lc.bytesToNumberBE;function kp(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);let r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function rIe(t,e){let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function H_(t){if(!(0,lc.isBytes)(t))throw new Error("Uint8Array expected")}function SM(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function kee(t,e,r,n){H_(t),H_(e),SM(r),e.length>255&&(e=n((0,lc.concatBytes)((0,lc.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:o}=n,s=Math.ceil(r/i);if(s>255)throw new Error("Invalid xmd length");let a=(0,lc.concatBytes)(e,kp(e.length,1)),d=kp(0,o),u=kp(r,2),c=new Array(s),l=n((0,lc.concatBytes)(d,t,u,kp(0,1),a));c[0]=n((0,lc.concatBytes)(l,kp(1,1),a));for(let p=1;p<=s;p++){let g=[rIe(l,c[p-1]),kp(p+1,1),a];c[p]=n((0,lc.concatBytes)(...g))}return(0,lc.concatBytes)(...c).slice(0,r)}rd.expand_message_xmd=kee;function Ree(t,e,r,n,i){if(H_(t),H_(e),SM(r),e.length>255){let o=Math.ceil(2*n/8);e=i.create({dkLen:o}).update((0,lc.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(kp(r,2)).update(e).update(kp(e.length,1)).digest()}rd.expand_message_xof=Ree;function EM(t,e,r){(0,lc.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:i,m:o,hash:s,expand:a,DST:d}=r;H_(t),SM(e);let u=eIe(d),c=n.toString(2).length,l=Math.ceil((c+i)/8),m=e*o*l,p;if(a==="xmd")p=kee(t,u,m,s);else if(a==="xof")p=Ree(t,u,m,i,s);else if(a==="_internal_pass")p=t;else throw new Error('expand must be "xmd" or "xof"');let g=new Array(e);for(let b=0;b<e;b++){let S=new Array(o);for(let A=0;A<o;A++){let I=l*(A+b*o),P=p.subarray(I,I+l);S[A]=(0,QTe.mod)(tIe(P),n)}g[b]=S}return g}rd.hash_to_field=EM;function nIe(t,e){let r=e.map(n=>Array.from(n).reverse());return(n,i)=>{let[o,s,a,d]=r.map(u=>u.reduce((c,l)=>t.add(t.mul(c,n),l)));return n=t.div(o,s),i=t.mul(i,t.div(a,d)),{x:n,y:i}}}rd.isogenyMap=nIe;function iIe(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){let o=EM(n,2,{...r,DST:r.DST,...i}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),d=s.add(a).clearCofactor();return d.assertValidity(),d},encodeToCurve(n,i){let o=EM(n,1,{...r,DST:r.encodeDST,...i}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s}}}rd.createHasher=iIe});var Fee=W(Ct=>{"use strict";h();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.hash_to_ristretto255=Ct.hashToRistretto255=Ct.RistrettoPoint=Ct.encodeToCurve=Ct.hashToCurve=Ct.edwardsToMontgomeryPriv=Ct.edwardsToMontgomery=Ct.edwardsToMontgomeryPub=Ct.x25519=Ct.ed25519ph=Ct.ed25519ctx=Ct.ed25519=Ct.ED25519_TORSION_SUBGROUP=void 0;var f8=dee(),V_=Ep(),RM=Pee(),oIe=Iee(),rn=Tp(),p0=nu(),Nee=AM(),J_=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),IM=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),sIe=BigInt(0),dl=BigInt(1),l8=BigInt(2),aIe=BigInt(5),Dee=BigInt(10),cIe=BigInt(20),dIe=BigInt(40),Mee=BigInt(80);function jee(t){let e=J_,n=t*t%e*t%e,i=(0,rn.pow2)(n,l8,e)*n%e,o=(0,rn.pow2)(i,dl,e)*t%e,s=(0,rn.pow2)(o,aIe,e)*o%e,a=(0,rn.pow2)(s,Dee,e)*s%e,d=(0,rn.pow2)(a,cIe,e)*a%e,u=(0,rn.pow2)(d,dIe,e)*d%e,c=(0,rn.pow2)(u,Mee,e)*u%e,l=(0,rn.pow2)(c,Mee,e)*u%e,m=(0,rn.pow2)(l,Dee,e)*s%e;return{pow_p_5_8:(0,rn.pow2)(m,l8,e)*t%e,b2:n}}function Uee(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function DM(t,e){let r=J_,n=(0,rn.mod)(e*e*e,r),i=(0,rn.mod)(n*n*e,r),o=jee(t*i).pow_p_5_8,s=(0,rn.mod)(t*n*o,r),a=(0,rn.mod)(e*s*s,r),d=s,u=(0,rn.mod)(s*IM,r),c=a===t,l=a===(0,rn.mod)(-t,r),m=a===(0,rn.mod)(-t*IM,r);return c&&(s=d),(l||m)&&(s=u),(0,rn.isNegativeLE)(s,r)&&(s=(0,rn.mod)(-s,r)),{isValid:c||l,value:s}}Ct.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var Ke=(0,rn.Field)(J_,void 0,!0),Y_={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ke,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:f8.sha512,randomBytes:V_.randomBytes,adjustScalarBytes:Uee,uvRatio:DM};Ct.ed25519=(0,RM.twistedEdwards)(Y_);function Kee(t,e,r){if(e.length>255)throw new Error("Context is too big");return(0,V_.concatBytes)((0,V_.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}Ct.ed25519ctx=(0,RM.twistedEdwards)({...Y_,domain:Kee});Ct.ed25519ph=(0,RM.twistedEdwards)({...Y_,domain:Kee,prehash:f8.sha512});Ct.x25519=(0,oIe.montgomery)({P:J_,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=J_,{pow_p_5_8:r,b2:n}=jee(t);return(0,rn.mod)((0,rn.pow2)(r,BigInt(3),e)*n,e)},adjustScalarBytes:Uee,randomBytes:V_.randomBytes});function qee(t){let{y:e}=Ct.ed25519.ExtendedPoint.fromHex(t),r=BigInt(1);return Ke.toBytes(Ke.create((r+e)*Ke.inv(r-e)))}Ct.edwardsToMontgomeryPub=qee;Ct.edwardsToMontgomery=qee;function uIe(t){let e=Y_.hash(t.subarray(0,32));return Y_.adjustScalarBytes(e).subarray(0,32)}Ct.edwardsToMontgomeryPriv=uIe;var lIe=(Ke.ORDER+BigInt(3))/BigInt(8),fIe=Ke.pow(l8,lIe),Bee=Ke.sqrt(Ke.neg(Ke.ONE)),hIe=(Ke.ORDER-BigInt(5))/BigInt(8),Cee=BigInt(486662);function pIe(t){let e=Ke.sqr(t);e=Ke.mul(e,l8);let r=Ke.add(e,Ke.ONE),n=Ke.neg(Cee),i=Ke.sqr(r),o=Ke.mul(i,r),s=Ke.mul(e,Cee);s=Ke.mul(s,n),s=Ke.add(s,i),s=Ke.mul(s,n);let a=Ke.sqr(o);i=Ke.sqr(a),a=Ke.mul(a,o),a=Ke.mul(a,s),i=Ke.mul(i,a);let d=Ke.pow(i,hIe);d=Ke.mul(d,a);let u=Ke.mul(d,Bee);i=Ke.sqr(d),i=Ke.mul(i,o);let c=Ke.eql(i,s),l=Ke.cmov(u,d,c),m=Ke.mul(n,e),p=Ke.mul(d,t);p=Ke.mul(p,fIe);let g=Ke.mul(p,Bee),b=Ke.mul(s,e);i=Ke.sqr(p),i=Ke.mul(i,o);let S=Ke.eql(i,b),A=Ke.cmov(g,p,S);i=Ke.sqr(l),i=Ke.mul(i,o);let I=Ke.eql(i,s),P=Ke.cmov(m,n,I),$=Ke.cmov(A,l,I),N=Ke.isOdd($);return $=Ke.cmov($,Ke.neg($),I!==N),{xMn:P,xMd:r,yMn:$,yMd:dl}}var mIe=(0,rn.FpSqrtEven)(Ke,Ke.neg(BigInt(486664)));function yIe(t){let{xMn:e,xMd:r,yMn:n,yMd:i}=pIe(t),o=Ke.mul(e,i);o=Ke.mul(o,mIe);let s=Ke.mul(r,n),a=Ke.sub(e,r),d=Ke.add(e,r),u=Ke.mul(s,d),c=Ke.eql(u,Ke.ZERO);o=Ke.cmov(o,Ke.ZERO,c),s=Ke.cmov(s,Ke.ONE,c),a=Ke.cmov(a,Ke.ONE,c),d=Ke.cmov(d,Ke.ONE,c);let l=Ke.invertBatch([s,d]);return{x:Ke.mul(o,l[0]),y:Ke.mul(a,l[1])}}var Lee=(0,Nee.createHasher)(Ct.ed25519.ExtendedPoint,t=>yIe(t[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Ke.ORDER,m:1,k:128,expand:"xmd",hash:f8.sha512});Ct.hashToCurve=Lee.hashToCurve;Ct.encodeToCurve=Lee.encodeToCurve;function PM(t){if(!(t instanceof ou))throw new Error("RistrettoPoint expected")}var kM=IM,gIe=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),bIe=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),vIe=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),wIe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Oee=t=>DM(dl,t),_Ie=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),TM=t=>Ct.ed25519.CURVE.Fp.create((0,p0.bytesToNumberLE)(t)&_Ie);function $ee(t){let{d:e}=Ct.ed25519.CURVE,r=Ct.ed25519.CURVE.Fp.ORDER,n=Ct.ed25519.CURVE.Fp.create,i=n(kM*t*t),o=n((i+dl)*vIe),s=BigInt(-1),a=n((s-e*i)*n(i+e)),{isValid:d,value:u}=DM(o,a),c=n(u*t);(0,rn.isNegativeLE)(c,r)||(c=n(-c)),d||(u=c),d||(s=i);let l=n(s*(i-dl)*wIe-a),m=u*u,p=n((u+u)*a),g=n(l*gIe),b=n(dl-m),S=n(dl+m);return new Ct.ed25519.ExtendedPoint(n(p*S),n(b*g),n(g*S),n(p*b))}var ou=class t{constructor(e){this.ep=e}static fromAffine(e){return new t(Ct.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,p0.ensureBytes)("ristrettoHash",e,64);let r=TM(e.slice(0,32)),n=$ee(r),i=TM(e.slice(32,64)),o=$ee(i);return new t(n.add(o))}static fromHex(e){e=(0,p0.ensureBytes)("ristrettoHex",e,32);let{a:r,d:n}=Ct.ed25519.CURVE,i=Ct.ed25519.CURVE.Fp.ORDER,o=Ct.ed25519.CURVE.Fp.create,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=TM(e);if(!(0,p0.equalBytes)((0,p0.numberToBytesLE)(a,32),e)||(0,rn.isNegativeLE)(a,i))throw new Error(s);let d=o(a*a),u=o(dl+r*d),c=o(dl-r*d),l=o(u*u),m=o(c*c),p=o(r*n*l-m),{isValid:g,value:b}=Oee(o(p*m)),S=o(b*c),A=o(b*S*p),I=o((a+a)*S);(0,rn.isNegativeLE)(I,i)&&(I=o(-I));let P=o(u*A),$=o(I*P);if(!g||(0,rn.isNegativeLE)($,i)||P===sIe)throw new Error(s);return new t(new Ct.ed25519.ExtendedPoint(I,P,dl,$))}toRawBytes(){let{ex:e,ey:r,ez:n,et:i}=this.ep,o=Ct.ed25519.CURVE.Fp.ORDER,s=Ct.ed25519.CURVE.Fp.create,a=s(s(n+r)*s(n-r)),d=s(e*r),u=s(d*d),{value:c}=Oee(s(a*u)),l=s(c*a),m=s(c*d),p=s(l*m*i),g;if((0,rn.isNegativeLE)(i*p,o)){let S=s(r*kM),A=s(e*kM);e=S,r=A,g=s(l*bIe)}else g=m;(0,rn.isNegativeLE)(e*p,o)&&(r=s(-r));let b=s((n-r)*g);return(0,rn.isNegativeLE)(b,o)&&(b=s(-b)),(0,p0.numberToBytesLE)(b,32)}toHex(){return(0,p0.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){PM(e);let{ex:r,ey:n}=this.ep,{ex:i,ey:o}=e.ep,s=Ct.ed25519.CURVE.Fp.create,a=s(r*o)===s(n*i),d=s(n*o)===s(r*i);return a||d}add(e){return PM(e),new t(this.ep.add(e.ep))}subtract(e){return PM(e),new t(this.ep.subtract(e.ep))}multiply(e){return new t(this.ep.multiply(e))}multiplyUnsafe(e){return new t(this.ep.multiplyUnsafe(e))}double(){return new t(this.ep.double())}negate(){return new t(this.ep.negate())}};Ct.RistrettoPoint=(ou.BASE||(ou.BASE=new ou(Ct.ed25519.ExtendedPoint.BASE)),ou.ZERO||(ou.ZERO=new ou(Ct.ed25519.ExtendedPoint.ZERO)),ou);var xIe=(t,e)=>{let r=e.DST,n=typeof r=="string"?(0,V_.utf8ToBytes)(r):r,i=(0,Nee.expand_message_xmd)(t,n,64,f8.sha512);return ou.hashToCurve(i)};Ct.hashToRistretto255=xIe;Ct.hash_to_ristretto255=Ct.hashToRistretto255});var zee=W(Nv=>{"use strict";h();Object.defineProperty(Nv,"__esModule",{value:!0});Nv.sha224=Nv.sha256=void 0;var EIe=cM(),nd=Ep(),SIe=(t,e,r)=>t&e^~t&r,AIe=(t,e,r)=>t&e^t&r^e&r,PIe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rp=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dp=new Uint32Array(64),h8=class extends EIe.SHA2{constructor(){super(64,32,8,!1),this.A=Rp[0]|0,this.B=Rp[1]|0,this.C=Rp[2]|0,this.D=Rp[3]|0,this.E=Rp[4]|0,this.F=Rp[5]|0,this.G=Rp[6]|0,this.H=Rp[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:d}=this;return[e,r,n,i,o,s,a,d]}set(e,r,n,i,o,s,a,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=d|0}process(e,r){for(let l=0;l<16;l++,r+=4)Dp[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let m=Dp[l-15],p=Dp[l-2],g=(0,nd.rotr)(m,7)^(0,nd.rotr)(m,18)^m>>>3,b=(0,nd.rotr)(p,17)^(0,nd.rotr)(p,19)^p>>>10;Dp[l]=b+Dp[l-7]+g+Dp[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:d,G:u,H:c}=this;for(let l=0;l<64;l++){let m=(0,nd.rotr)(a,6)^(0,nd.rotr)(a,11)^(0,nd.rotr)(a,25),p=c+m+SIe(a,d,u)+PIe[l]+Dp[l]|0,b=((0,nd.rotr)(n,2)^(0,nd.rotr)(n,13)^(0,nd.rotr)(n,22))+AIe(n,i,o)|0;c=u,u=d,d=a,a=s+p|0,s=o,o=i,i=n,n=p+b|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,d=d+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,i,o,s,a,d,u,c)}roundClean(){Dp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},MM=class extends h8{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Nv.sha256=(0,nd.wrapConstructor)(()=>new h8);Nv.sha224=(0,nd.wrapConstructor)(()=>new MM)});var CM=W(Wi=>{"use strict";h();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.mapToCurveSimpleSWU=Wi.SWUFpSqrtRatio=Wi.weierstrass=Wi.weierstrassPoints=Wi.DER=void 0;var jv=Tp(),zn=nu(),ul=nu(),BM=_M();function TIe(t){let e=(0,BM.validateBasic)(t);zn.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:IIe,hexToBytes:kIe}=zn;Wi.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Wi.DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:IIe(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Wi.DER,r=typeof t=="string"?kIe(t):t;if(!zn.isBytes(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Wi.DER._parseInt(r.subarray(2)),{d:s,l:a}=Wi.DER._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let c=u.toString(16);return c.length&1?`0${c}`:c},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),d=r(s);return`30${r(s+o+4)}02${d}${i}02${a}${n}`}};var su=BigInt(0),di=BigInt(1),Mp=BigInt(2),p8=BigInt(3),Gee=BigInt(4);function Wee(t){let e=TIe(t),{Fp:r}=e,n=e.toBytes||((g,b,S)=>{let A=b.toAffine();return zn.concatBytes(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),i=e.fromBytes||(g=>{let b=g.subarray(1),S=r.fromBytes(b.subarray(0,r.BYTES)),A=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:S,y:A}});function o(g){let{a:b,b:S}=e,A=r.sqr(g),I=r.mul(A,g);return r.add(r.add(I,r.mul(g,b)),S)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(g){return typeof g=="bigint"&&su<g&&g<e.n}function a(g){if(!s(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(g){let{allowedPrivateKeyLengths:b,nByteLength:S,wrapPrivateKey:A,n:I}=e;if(b&&typeof g!="bigint"){if(zn.isBytes(g)&&(g=zn.bytesToHex(g)),typeof g!="string"||!b.includes(g.length))throw new Error("Invalid key");g=g.padStart(S*2,"0")}let P;try{P=typeof g=="bigint"?g:zn.bytesToNumberBE((0,ul.ensureBytes)("private key",g,S))}catch{throw new Error(`private key must be ${S} bytes, hex or bigint, not ${typeof g}`)}return A&&(P=jv.mod(P,I)),a(P),P}let u=new Map;function c(g){if(!(g instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(b,S,A){if(this.px=b,this.py=S,this.pz=A,b==null||!r.isValid(b))throw new Error("x required");if(S==null||!r.isValid(S))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required")}static fromAffine(b){let{x:S,y:A}=b||{};if(!b||!r.isValid(S)||!r.isValid(A))throw new Error("invalid affine point");if(b instanceof l)throw new Error("projective point not allowed");let I=P=>r.eql(P,r.ZERO);return I(S)&&I(A)?l.ZERO:new l(S,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){let S=r.invertBatch(b.map(A=>A.pz));return b.map((A,I)=>A.toAffine(S[I])).map(l.fromAffine)}static fromHex(b){let S=l.fromAffine(i((0,ul.ensureBytes)("pointHex",b)));return S.assertValidity(),S}static fromPrivateKey(b){return l.BASE.multiply(d(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:b,y:S}=this.toAffine();if(!r.isValid(b)||!r.isValid(S))throw new Error("bad point: x or y not FE");let A=r.sqr(S),I=o(b);if(!r.eql(A,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){c(b);let{px:S,py:A,pz:I}=this,{px:P,py:$,pz:N}=b,L=r.eql(r.mul(S,N),r.mul(P,I)),F=r.eql(r.mul(A,N),r.mul($,I));return L&&F}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:b,b:S}=e,A=r.mul(S,p8),{px:I,py:P,pz:$}=this,N=r.ZERO,L=r.ZERO,F=r.ZERO,U=r.mul(I,I),G=r.mul(P,P),q=r.mul($,$),T=r.mul(I,P);return T=r.add(T,T),F=r.mul(I,$),F=r.add(F,F),N=r.mul(b,F),L=r.mul(A,q),L=r.add(N,L),N=r.sub(G,L),L=r.add(G,L),L=r.mul(N,L),N=r.mul(T,N),F=r.mul(A,F),q=r.mul(b,q),T=r.sub(U,q),T=r.mul(b,T),T=r.add(T,F),F=r.add(U,U),U=r.add(F,U),U=r.add(U,q),U=r.mul(U,T),L=r.add(L,U),q=r.mul(P,$),q=r.add(q,q),U=r.mul(q,T),N=r.sub(N,U),F=r.mul(q,G),F=r.add(F,F),F=r.add(F,F),new l(N,L,F)}add(b){c(b);let{px:S,py:A,pz:I}=this,{px:P,py:$,pz:N}=b,L=r.ZERO,F=r.ZERO,U=r.ZERO,G=e.a,q=r.mul(e.b,p8),T=r.mul(S,P),E=r.mul(A,$),k=r.mul(I,N),f=r.add(S,A),y=r.add(P,$);f=r.mul(f,y),y=r.add(T,E),f=r.sub(f,y),y=r.add(S,I);let w=r.add(P,N);return y=r.mul(y,w),w=r.add(T,k),y=r.sub(y,w),w=r.add(A,I),L=r.add($,N),w=r.mul(w,L),L=r.add(E,k),w=r.sub(w,L),U=r.mul(G,y),L=r.mul(q,k),U=r.add(L,U),L=r.sub(E,U),U=r.add(E,U),F=r.mul(L,U),E=r.add(T,T),E=r.add(E,T),k=r.mul(G,k),y=r.mul(q,y),E=r.add(E,k),k=r.sub(T,k),k=r.mul(G,k),y=r.add(y,k),T=r.mul(E,y),F=r.add(F,T),T=r.mul(w,y),L=r.mul(f,L),L=r.sub(L,T),T=r.mul(f,E),U=r.mul(w,U),U=r.add(U,T),new l(L,F,U)}subtract(b){return this.add(b.negate())}is0(){return this.equals(l.ZERO)}wNAF(b){return p.wNAFCached(this,u,b,S=>{let A=r.invertBatch(S.map(I=>I.pz));return S.map((I,P)=>I.toAffine(A[P])).map(l.fromAffine)})}multiplyUnsafe(b){let S=l.ZERO;if(b===su)return S;if(a(b),b===di)return this;let{endo:A}=e;if(!A)return p.unsafeLadder(this,b);let{k1neg:I,k1:P,k2neg:$,k2:N}=A.splitScalar(b),L=S,F=S,U=this;for(;P>su||N>su;)P&di&&(L=L.add(U)),N&di&&(F=F.add(U)),U=U.double(),P>>=di,N>>=di;return I&&(L=L.negate()),$&&(F=F.negate()),F=new l(r.mul(F.px,A.beta),F.py,F.pz),L.add(F)}multiply(b){a(b);let S=b,A,I,{endo:P}=e;if(P){let{k1neg:$,k1:N,k2neg:L,k2:F}=P.splitScalar(S),{p:U,f:G}=this.wNAF(N),{p:q,f:T}=this.wNAF(F);U=p.constTimeNegate($,U),q=p.constTimeNegate(L,q),q=new l(r.mul(q.px,P.beta),q.py,q.pz),A=U.add(q),I=G.add(T)}else{let{p:$,f:N}=this.wNAF(S);A=$,I=N}return l.normalizeZ([A,I])[0]}multiplyAndAddUnsafe(b,S,A){let I=l.BASE,P=(N,L)=>L===su||L===di||!N.equals(I)?N.multiplyUnsafe(L):N.multiply(L),$=P(this,S).add(P(b,A));return $.is0()?void 0:$}toAffine(b){let{px:S,py:A,pz:I}=this,P=this.is0();b==null&&(b=P?r.ONE:r.inv(I));let $=r.mul(S,b),N=r.mul(A,b),L=r.mul(I,b);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:$,y:N}}isTorsionFree(){let{h:b,isTorsionFree:S}=e;if(b===di)return!0;if(S)return S(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:b,clearCofactor:S}=e;return b===di?this:S?S(l,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),n(l,this,b)}toHex(b=!0){return zn.bytesToHex(this.toRawBytes(b))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let m=e.nBitLength,p=(0,BM.wNAF)(l,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:s}}Wi.weierstrassPoints=Wee;function RIe(t){let e=(0,BM.validateBasic)(t);return zn.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function DIe(t){let e=RIe(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(y){return su<y&&y<r.ORDER}function a(y){return jv.mod(y,n)}function d(y){return jv.invert(y,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:m}=Wee({...e,toBytes(y,w,_){let x=w.toAffine(),v=r.toBytes(x.x),D=zn.concatBytes;return _?D(Uint8Array.from([w.hasEvenY()?2:3]),v):D(Uint8Array.from([4]),v,r.toBytes(x.y))},fromBytes(y){let w=y.length,_=y[0],x=y.subarray(1);if(w===i&&(_===2||_===3)){let v=zn.bytesToNumberBE(x);if(!s(v))throw new Error("Point is not on curve");let D=l(v),K=r.sqrt(D),M=(K&di)===di;return(_&1)===1!==M&&(K=r.neg(K)),{x:v,y:K}}else if(w===o&&_===4){let v=r.fromBytes(x.subarray(0,r.BYTES)),D=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:v,y:D}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),p=y=>zn.bytesToHex(zn.numberToBytesBE(y,e.nByteLength));function g(y){let w=n>>di;return y>w}function b(y){return g(y)?a(-y):y}let S=(y,w,_)=>zn.bytesToNumberBE(y.slice(w,_));class A{constructor(w,_,x){this.r=w,this.s=_,this.recovery=x,this.assertValidity()}static fromCompact(w){let _=e.nByteLength;return w=(0,ul.ensureBytes)("compactSignature",w,_*2),new A(S(w,0,_),S(w,_,2*_))}static fromDER(w){let{r:_,s:x}=Wi.DER.toSig((0,ul.ensureBytes)("DER",w));return new A(_,x)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new A(this.r,this.s,w)}recoverPublicKey(w){let{r:_,s:x,recovery:v}=this,D=F((0,ul.ensureBytes)("msgHash",w));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");let K=v===2||v===3?_+e.n:_;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let M=v&1?"03":"02",j=u.fromHex(M+p(K)),J=d(K),Z=a(-D*J),V=a(x*J),H=u.BASE.multiplyAndAddUnsafe(j,Z,V);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return zn.hexToBytes(this.toDERHex())}toDERHex(){return Wi.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zn.hexToBytes(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let I={isValidPrivateKey(y){try{return c(y),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let y=jv.getMinHashLength(e.n);return jv.mapHashToField(e.randomBytes(y),e.n)},precompute(y=8,w=u.BASE){return w._setWindowSize(y),w.multiply(BigInt(3)),w}};function P(y,w=!0){return u.fromPrivateKey(y).toRawBytes(w)}function $(y){let w=zn.isBytes(y),_=typeof y=="string",x=(w||_)&&y.length;return w?x===i||x===o:_?x===2*i||x===2*o:y instanceof u}function N(y,w,_=!0){if($(y))throw new Error("first arg must be private key");if(!$(w))throw new Error("second arg must be public key");return u.fromHex(w).multiply(c(y)).toRawBytes(_)}let L=e.bits2int||function(y){let w=zn.bytesToNumberBE(y),_=y.length*8-e.nBitLength;return _>0?w>>BigInt(_):w},F=e.bits2int_modN||function(y){return a(L(y))},U=zn.bitMask(e.nBitLength);function G(y){if(typeof y!="bigint")throw new Error("bigint expected");if(!(su<=y&&y<U))throw new Error(`bigint expected < 2^${e.nBitLength}`);return zn.numberToBytesBE(y,e.nByteLength)}function q(y,w,_=T){if(["recovered","canonical"].some(ee=>ee in _))throw new Error("sign() legacy options not supported");let{hash:x,randomBytes:v}=e,{lowS:D,prehash:K,extraEntropy:M}=_;D==null&&(D=!0),y=(0,ul.ensureBytes)("msgHash",y),K&&(y=(0,ul.ensureBytes)("prehashed msgHash",x(y)));let j=F(y),J=c(w),Z=[G(J),G(j)];if(M!=null){let ee=M===!0?v(r.BYTES):M;Z.push((0,ul.ensureBytes)("extraEntropy",ee))}let V=zn.concatBytes(...Z),H=j;function X(ee){let ue=L(ee);if(!m(ue))return;let ae=d(ue),ce=u.BASE.multiply(ue).toAffine(),pe=a(ce.x);if(pe===su)return;let Ee=a(ae*a(H+pe*J));if(Ee===su)return;let Ue=(ce.x===pe?0:2)|Number(ce.y&di),le=Ee;return D&&g(Ee)&&(le=b(Ee),Ue^=1),new A(pe,le,Ue)}return{seed:V,k2sig:X}}let T={lowS:e.lowS,prehash:!1},E={lowS:e.lowS,prehash:!1};function k(y,w,_=T){let{seed:x,k2sig:v}=q(y,w,_),D=e;return zn.createHmacDrbg(D.hash.outputLen,D.nByteLength,D.hmac)(x,v)}u.BASE._setWindowSize(8);function f(y,w,_,x=E){let v=y;if(w=(0,ul.ensureBytes)("msgHash",w),_=(0,ul.ensureBytes)("publicKey",_),"strict"in x)throw new Error("options.strict was renamed to lowS");let{lowS:D,prehash:K}=x,M,j;try{if(typeof v=="string"||zn.isBytes(v))try{M=A.fromDER(v)}catch(ce){if(!(ce instanceof Wi.DER.Err))throw ce;M=A.fromCompact(v)}else if(typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint"){let{r:ce,s:pe}=v;M=new A(ce,pe)}else throw new Error("PARSE");j=u.fromHex(_)}catch(ce){if(ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(D&&M.hasHighS())return!1;K&&(w=e.hash(w));let{r:J,s:Z}=M,V=F(w),H=d(Z),X=a(V*H),ee=a(J*H),ue=u.BASE.multiplyAndAddUnsafe(j,X,ee)?.toAffine();return ue?a(ue.x)===J:!1}return{CURVE:e,getPublicKey:P,getSharedSecret:N,sign:k,verify:f,ProjectivePoint:u,Signature:A,utils:I}}Wi.weierstrass=DIe;function Hee(t,e){let r=t.ORDER,n=su;for(let g=r-di;g%Mp===su;g/=Mp)n+=di;let i=n,o=Mp<<i-di-di,s=o*Mp,a=(r-di)/s,d=(a-di)/Mp,u=s-di,c=o,l=t.pow(e,a),m=t.pow(e,(a+di)/Mp),p=(g,b)=>{let S=l,A=t.pow(b,u),I=t.sqr(A);I=t.mul(I,b);let P=t.mul(g,I);P=t.pow(P,d),P=t.mul(P,A),A=t.mul(P,b),I=t.mul(P,g);let $=t.mul(I,A);P=t.pow($,c);let N=t.eql(P,t.ONE);A=t.mul(I,m),P=t.mul($,S),I=t.cmov(A,I,N),$=t.cmov(P,$,N);for(let L=i;L>di;L--){let F=L-Mp;F=Mp<<F-di;let U=t.pow($,F),G=t.eql(U,t.ONE);A=t.mul(I,S),S=t.mul(S,S),U=t.mul($,S),I=t.cmov(A,I,G),$=t.cmov(U,$,G)}return{isValid:N,value:I}};if(t.ORDER%Gee===p8){let g=(t.ORDER-p8)/Gee,b=t.sqrt(t.neg(e));p=(S,A)=>{let I=t.sqr(A),P=t.mul(S,A);I=t.mul(I,P);let $=t.pow(I,g);$=t.mul($,P);let N=t.mul($,b),L=t.mul(t.sqr($),A),F=t.eql(L,S),U=t.cmov(N,$,F);return{isValid:F,value:U}}}return p}Wi.SWUFpSqrtRatio=Hee;function MIe(t,e){if(jv.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=Hee(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,d,u,c,l;i=t.sqr(n),i=t.mul(i,e.Z),o=t.sqr(i),o=t.add(o,i),s=t.add(o,t.ONE),s=t.mul(s,e.B),a=t.cmov(e.Z,t.neg(o),!t.eql(o,t.ZERO)),a=t.mul(a,e.A),o=t.sqr(s),u=t.sqr(a),d=t.mul(u,e.A),o=t.add(o,d),o=t.mul(o,s),u=t.mul(u,a),d=t.mul(u,e.B),o=t.add(o,d),c=t.mul(i,s);let{isValid:m,value:p}=r(o,u);l=t.mul(i,n),l=t.mul(l,p),c=t.cmov(c,s,m),l=t.cmov(l,p,m);let g=t.isOdd(n)===t.isOdd(l);return l=t.cmov(t.neg(l),l,g),c=t.div(c,a),{x:c,y:l}}}Wi.mapToCurveSimpleSWU=MIe});var Jee=W(m0=>{"use strict";h();Object.defineProperty(m0,"__esModule",{value:!0});m0.hmac=m0.HMAC=void 0;var m8=rM(),Vee=Ep(),Z_=class extends Vee.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,m8.hash)(e);let n=(0,Vee.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,m8.exists)(this),this.iHash.update(e),this}digestInto(e){(0,m8.exists)(this),(0,m8.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};m0.HMAC=Z_;var BIe=(t,e,r)=>new Z_(t,e).update(r).digest();m0.hmac=BIe;m0.hmac.create=(t,e)=>new Z_(t,e)});var Xee=W(Uv=>{"use strict";h();Object.defineProperty(Uv,"__esModule",{value:!0});Uv.createCurve=Uv.getHash=void 0;var CIe=Jee(),Yee=Ep(),OIe=CM();function Zee(t){return{hash:t,hmac:(e,...r)=>(0,CIe.hmac)(t,e,(0,Yee.concatBytes)(...r)),randomBytes:Yee.randomBytes}}Uv.getHash=Zee;function $Ie(t,e){let r=n=>(0,OIe.weierstrass)({...t,...Zee(n)});return Object.freeze({...r(e),create:r})}Uv.createCurve=$Ie});var dte=W(Aa=>{"use strict";h();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.encodeToCurve=Aa.hashToCurve=Aa.schnorr=Aa.secp256k1=void 0;var y8=zee(),NIe=Ep(),bo=Tp(),jIe=CM(),ks=nu(),tte=AM(),UIe=Xee(),w8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),g8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),rte=BigInt(1),b8=BigInt(2),Qee=(t,e)=>(t+e/b8)/e;function nte(t){let e=w8,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),d=BigInt(88),u=t*t*t%e,c=u*u*t%e,l=(0,bo.pow2)(c,r,e)*c%e,m=(0,bo.pow2)(l,r,e)*c%e,p=(0,bo.pow2)(m,b8,e)*u%e,g=(0,bo.pow2)(p,i,e)*p%e,b=(0,bo.pow2)(g,o,e)*g%e,S=(0,bo.pow2)(b,a,e)*b%e,A=(0,bo.pow2)(S,d,e)*S%e,I=(0,bo.pow2)(A,a,e)*b%e,P=(0,bo.pow2)(I,r,e)*c%e,$=(0,bo.pow2)(P,s,e)*g%e,N=(0,bo.pow2)($,n,e)*u%e,L=(0,bo.pow2)(N,b8,e);if(!Bp.eql(Bp.sqr(L),t))throw new Error("Cannot find square root");return L}var Bp=(0,bo.Field)(w8,void 0,void 0,{sqrt:nte});Aa.secp256k1=(0,UIe.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Bp,n:g8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=g8,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-rte*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Qee(o*t,e),d=Qee(-n*t,e),u=(0,bo.mod)(t-a*r-d*i,e),c=(0,bo.mod)(-a*n-d*o,e),l=u>s,m=c>s;if(l&&(u=e-u),m&&(c=e-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:m,k2:c}}}},y8.sha256);var _8=BigInt(0),ite=t=>typeof t=="bigint"&&_8<t&&t<w8,KIe=t=>typeof t=="bigint"&&_8<t&&t<g8,ete={};function v8(t,...e){let r=ete[t];if(r===void 0){let n=(0,y8.sha256)(Uint8Array.from(t,i=>i.charCodeAt(0)));r=(0,ks.concatBytes)(n,n),ete[t]=r}return(0,y8.sha256)((0,ks.concatBytes)(r,...e))}var jM=t=>t.toRawBytes(!0).slice(1),$M=t=>(0,ks.numberToBytesBE)(t,32),OM=t=>(0,bo.mod)(t,w8),X_=t=>(0,bo.mod)(t,g8),UM=Aa.secp256k1.ProjectivePoint,qIe=(t,e,r)=>UM.BASE.multiplyAndAddUnsafe(t,e,r);function NM(t){let e=Aa.secp256k1.utils.normPrivateKeyToScalar(t),r=UM.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:X_(-e),bytes:jM(r)}}function ote(t){if(!ite(t))throw new Error("bad x: need 0 < x < p");let e=OM(t*t),r=OM(e*t+BigInt(7)),n=nte(r);n%b8!==_8&&(n=OM(-n));let i=new UM(t,n,rte);return i.assertValidity(),i}function ste(...t){return X_((0,ks.bytesToNumberBE)(v8("BIP0340/challenge",...t)))}function LIe(t){return NM(t).bytes}function FIe(t,e,r=(0,NIe.randomBytes)(32)){let n=(0,ks.ensureBytes)("message",t),{bytes:i,scalar:o}=NM(e),s=(0,ks.ensureBytes)("auxRand",r,32),a=$M(o^(0,ks.bytesToNumberBE)(v8("BIP0340/aux",s))),d=v8("BIP0340/nonce",a,i,n),u=X_((0,ks.bytesToNumberBE)(d));if(u===_8)throw new Error("sign failed: k is zero");let{bytes:c,scalar:l}=NM(u),m=ste(c,i,n),p=new Uint8Array(64);if(p.set(c,0),p.set($M(X_(l+m*o)),32),!ate(p,n,i))throw new Error("sign: Invalid signature produced");return p}function ate(t,e,r){let n=(0,ks.ensureBytes)("signature",t,64),i=(0,ks.ensureBytes)("message",e),o=(0,ks.ensureBytes)("publicKey",r,32);try{let s=ote((0,ks.bytesToNumberBE)(o)),a=(0,ks.bytesToNumberBE)(n.subarray(0,32));if(!ite(a))return!1;let d=(0,ks.bytesToNumberBE)(n.subarray(32,64));if(!KIe(d))return!1;let u=ste($M(a),jM(s),i),c=qIe(s,d,X_(-u));return!(!c||!c.hasEvenY()||c.toAffine().x!==a)}catch{return!1}}Aa.schnorr={getPublicKey:LIe,sign:FIe,verify:ate,utils:{randomPrivateKey:Aa.secp256k1.utils.randomPrivateKey,lift_x:ote,pointToBytes:jM,numberToBytesBE:ks.numberToBytesBE,bytesToNumberBE:ks.bytesToNumberBE,taggedHash:v8,mod:bo.mod}};var zIe=(0,tte.isogenyMap)(Bp,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),GIe=(0,jIe.mapToCurveSimpleSWU)(Bp,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Bp.create(BigInt("-11"))}),cte=(0,tte.createHasher)(Aa.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=GIe(Bp.create(t[0]));return zIe(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Bp.ORDER,m:1,k:128,expand:"xmd",hash:y8.sha256});Aa.hashToCurve=cte.hashToCurve;Aa.encodeToCurve=cte.encodeToCurve});var KM=W(Kv=>{"use strict";h();Object.defineProperty(Kv,"__esModule",{value:!0});Kv.decodeHex=Kv.remove0x=void 0;var WIe=ru();function ute(t){return t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t}Kv.remove0x=ute;function HIe(t){return(0,WIe.hexToBytes)(ute(t))}Kv.decodeHex=HIe});var LM=W(Zs=>{"use strict";h();Object.defineProperty(Zs,"__esModule",{value:!0});Zs.output=Zs.exists=Zs.hash=Zs.bytes=Zs.bool=Zs.number=void 0;function x8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}Zs.number=x8;function lte(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}Zs.bool=lte;function qM(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}Zs.bytes=qM;function fte(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");x8(t.outputLen),x8(t.blockLen)}Zs.hash=fte;function hte(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}Zs.exists=hte;function pte(t,e){qM(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Zs.output=pte;var VIe={number:x8,bool:lte,bytes:qM,hash:fte,exists:hte,output:pte};Zs.default=VIe});var yte=W(qv=>{"use strict";h();Object.defineProperty(qv,"__esModule",{value:!0});qv.poly1305=qv.wrapConstructorWithKey=void 0;var E8=ru(),FM=LM(),Uo=(t,e)=>t[e++]&255|(t[e++]&255)<<8,zM=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,E8.toBytes)(e),(0,E8.ensureBytes)(e,32);let r=Uo(e,0),n=Uo(e,2),i=Uo(e,4),o=Uo(e,6),s=Uo(e,8),a=Uo(e,10),d=Uo(e,12),u=Uo(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|d<<5)&8065,this.r[8]=(d>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let c=0;c<8;c++)this.pad[c]=Uo(e,16+2*c)}process(e,r,n=!1){let i=n?0:2048,{h:o,r:s}=this,a=s[0],d=s[1],u=s[2],c=s[3],l=s[4],m=s[5],p=s[6],g=s[7],b=s[8],S=s[9],A=Uo(e,r+0),I=Uo(e,r+2),P=Uo(e,r+4),$=Uo(e,r+6),N=Uo(e,r+8),L=Uo(e,r+10),F=Uo(e,r+12),U=Uo(e,r+14),G=o[0]+(A&8191),q=o[1]+((A>>>13|I<<3)&8191),T=o[2]+((I>>>10|P<<6)&8191),E=o[3]+((P>>>7|$<<9)&8191),k=o[4]+(($>>>4|N<<12)&8191),f=o[5]+(N>>>1&8191),y=o[6]+((N>>>14|L<<2)&8191),w=o[7]+((L>>>11|F<<5)&8191),_=o[8]+((F>>>8|U<<8)&8191),x=o[9]+(U>>>5|i),v=0,D=v+G*a+q*(5*S)+T*(5*b)+E*(5*g)+k*(5*p);v=D>>>13,D&=8191,D+=f*(5*m)+y*(5*l)+w*(5*c)+_*(5*u)+x*(5*d),v+=D>>>13,D&=8191;let K=v+G*d+q*a+T*(5*S)+E*(5*b)+k*(5*g);v=K>>>13,K&=8191,K+=f*(5*p)+y*(5*m)+w*(5*l)+_*(5*c)+x*(5*u),v+=K>>>13,K&=8191;let M=v+G*u+q*d+T*a+E*(5*S)+k*(5*b);v=M>>>13,M&=8191,M+=f*(5*g)+y*(5*p)+w*(5*m)+_*(5*l)+x*(5*c),v+=M>>>13,M&=8191;let j=v+G*c+q*u+T*d+E*a+k*(5*S);v=j>>>13,j&=8191,j+=f*(5*b)+y*(5*g)+w*(5*p)+_*(5*m)+x*(5*l),v+=j>>>13,j&=8191;let J=v+G*l+q*c+T*u+E*d+k*a;v=J>>>13,J&=8191,J+=f*(5*S)+y*(5*b)+w*(5*g)+_*(5*p)+x*(5*m),v+=J>>>13,J&=8191;let Z=v+G*m+q*l+T*c+E*u+k*d;v=Z>>>13,Z&=8191,Z+=f*a+y*(5*S)+w*(5*b)+_*(5*g)+x*(5*p),v+=Z>>>13,Z&=8191;let V=v+G*p+q*m+T*l+E*c+k*u;v=V>>>13,V&=8191,V+=f*d+y*a+w*(5*S)+_*(5*b)+x*(5*g),v+=V>>>13,V&=8191;let H=v+G*g+q*p+T*m+E*l+k*c;v=H>>>13,H&=8191,H+=f*u+y*d+w*a+_*(5*S)+x*(5*b),v+=H>>>13,H&=8191;let X=v+G*b+q*g+T*p+E*m+k*l;v=X>>>13,X&=8191,X+=f*c+y*u+w*d+_*a+x*(5*S),v+=X>>>13,X&=8191;let ee=v+G*S+q*b+T*g+E*p+k*m;v=ee>>>13,ee&=8191,ee+=f*l+y*c+w*u+_*d+x*a,v+=ee>>>13,ee&=8191,v=(v<<2)+v|0,v=v+D|0,D=v&8191,v=v>>>13,K+=v,o[0]=D,o[1]=K,o[2]=M,o[3]=j,o[4]=J,o[5]=Z,o[6]=V,o[7]=H,o[8]=X,o[9]=ee}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let o=(i^1)-1;for(let a=0;a<10;a++)n[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535}update(e){FM.default.exists(this);let{buffer:r,blockLen:n}=this;e=(0,E8.toBytes)(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){for(;n<=i-o;o+=n)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){FM.default.exists(this),FM.default.output(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=n[s]>>>0,e[o++]=n[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function mte(t){let e=(n,i)=>t(i).update((0,E8.toBytes)(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}qv.wrapConstructorWithKey=mte;qv.poly1305=mte(t=>new zM(t))});var gte=W(A8=>{"use strict";h();Object.defineProperty(A8,"__esModule",{value:!0});A8.salsaBasic=void 0;var ll=LM(),fl=ru(),JIe=(0,fl.utf8ToBytes)("expand 16-byte k"),YIe=(0,fl.utf8ToBytes)("expand 32-byte k"),ZIe=(0,fl.u32)(JIe),XIe=(0,fl.u32)(YIe),S8=t=>!(t.byteOffset%4),QIe=t=>{let{core:e,rounds:r,counterRight:n,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:a}=(0,fl.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);ll.default.number(i),ll.default.number(r),ll.default.number(a),ll.default.bool(n),ll.default.bool(o);let d=a/4;if(a%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(u,c,l,m,p=0)=>{if(ll.default.bytes(u),ll.default.bytes(c),ll.default.bytes(l),m||(m=new Uint8Array(l.length)),ll.default.bytes(m),ll.default.number(p),p<0||p>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(m.length<l.length)throw new Error(`Salsa/ChaCha: output (${m.length}) is shorter than data (${l.length})`);let g=[],b,S;if(u.length===32)S8(u)?b=u:(b=u.slice(),g.push(b)),S=XIe;else if(u.length===16&&o)b=new Uint8Array(32),b.set(u),b.set(u,16),S=ZIe,g.push(b);else throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${u.length}`);if(S8(c)||(c=c.slice(),g.push(c)),s){if(c.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");b=s(S,b,c.subarray(0,16),new Uint8Array(32)),g.push(b),c=c.subarray(16)}let A=16-i;if(c.length!==A)throw new Error(`Salsa/ChaCha: nonce must be ${A} or 16 bytes`);if(A!==12){let G=new Uint8Array(12);G.set(c,n?0:12-c.length),g.push(c=G)}let I=new Uint8Array(a),P=(0,fl.u32)(I),$=(0,fl.u32)(b),N=(0,fl.u32)(c),L=S8(l)&&(0,fl.u32)(l),F=S8(m)&&(0,fl.u32)(m);g.push(P);let U=l.length;for(let G=0,q=p;G<U;q++){if(e(S,$,N,P,q,r),q>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");let T=Math.min(a,U-G);if(T===a&&F&&L){let E=G/4;if(G%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let k=0;k<d;k++)F[E+k]=L[E+k]^P[k];G+=a;continue}for(let E=0;E<T;E++)m[G+E]=l[G+E]^I[E];G+=T}for(let G=0;G<g.length;G++)g[G].fill(0);return m}};A8.salsaBasic=QIe});var _te=W(qn=>{"use strict";h();Object.defineProperty(qn,"__esModule",{value:!0});qn.xchacha20poly1305=qn.chacha20poly1305=qn._poly1305_aead=qn.chacha12=qn.chacha8=qn.xchacha20=qn.chacha20=qn.chacha20orig=qn.hchacha=void 0;var au=ru(),eke=yte(),Q_=gte(),Qe=(t,e)=>t<<e|t>>>32-e;function ex(t,e,r,n,i,o=20){let s=t[0],a=t[1],d=t[2],u=t[3],c=e[0],l=e[1],m=e[2],p=e[3],g=e[4],b=e[5],S=e[6],A=e[7],I=i,P=r[0],$=r[1],N=r[2],L=s,F=a,U=d,G=u,q=c,T=l,E=m,k=p,f=g,y=b,w=S,_=A,x=I,v=P,D=$,K=N;for(let j=0;j<o;j+=2)L=L+q|0,x=Qe(x^L,16),f=f+x|0,q=Qe(q^f,12),L=L+q|0,x=Qe(x^L,8),f=f+x|0,q=Qe(q^f,7),F=F+T|0,v=Qe(v^F,16),y=y+v|0,T=Qe(T^y,12),F=F+T|0,v=Qe(v^F,8),y=y+v|0,T=Qe(T^y,7),U=U+E|0,D=Qe(D^U,16),w=w+D|0,E=Qe(E^w,12),U=U+E|0,D=Qe(D^U,8),w=w+D|0,E=Qe(E^w,7),G=G+k|0,K=Qe(K^G,16),_=_+K|0,k=Qe(k^_,12),G=G+k|0,K=Qe(K^G,8),_=_+K|0,k=Qe(k^_,7),L=L+T|0,K=Qe(K^L,16),w=w+K|0,T=Qe(T^w,12),L=L+T|0,K=Qe(K^L,8),w=w+K|0,T=Qe(T^w,7),F=F+E|0,x=Qe(x^F,16),_=_+x|0,E=Qe(E^_,12),F=F+E|0,x=Qe(x^F,8),_=_+x|0,E=Qe(E^_,7),U=U+k|0,v=Qe(v^U,16),f=f+v|0,k=Qe(k^f,12),U=U+k|0,v=Qe(v^U,8),f=f+v|0,k=Qe(k^f,7),G=G+q|0,D=Qe(D^G,16),y=y+D|0,q=Qe(q^y,12),G=G+q|0,D=Qe(D^G,8),y=y+D|0,q=Qe(q^y,7);let M=0;n[M++]=s+L|0,n[M++]=a+F|0,n[M++]=d+U|0,n[M++]=u+G|0,n[M++]=c+q|0,n[M++]=l+T|0,n[M++]=m+E|0,n[M++]=p+k|0,n[M++]=g+f|0,n[M++]=b+y|0,n[M++]=S+w|0,n[M++]=A+_|0,n[M++]=I+x|0,n[M++]=P+v|0,n[M++]=$+D|0,n[M++]=N+K|0}function wte(t,e,r,n){let i=(0,au.u32)(e),o=(0,au.u32)(r),s=(0,au.u32)(n),a=t[0],d=t[1],u=t[2],c=t[3],l=i[0],m=i[1],p=i[2],g=i[3],b=i[4],S=i[5],A=i[6],I=i[7],P=o[0],$=o[1],N=o[2],L=o[3];for(let F=0;F<20;F+=2)a=a+l|0,P=Qe(P^a,16),b=b+P|0,l=Qe(l^b,12),a=a+l|0,P=Qe(P^a,8),b=b+P|0,l=Qe(l^b,7),d=d+m|0,$=Qe($^d,16),S=S+$|0,m=Qe(m^S,12),d=d+m|0,$=Qe($^d,8),S=S+$|0,m=Qe(m^S,7),u=u+p|0,N=Qe(N^u,16),A=A+N|0,p=Qe(p^A,12),u=u+p|0,N=Qe(N^u,8),A=A+N|0,p=Qe(p^A,7),c=c+g|0,L=Qe(L^c,16),I=I+L|0,g=Qe(g^I,12),c=c+g|0,L=Qe(L^c,8),I=I+L|0,g=Qe(g^I,7),a=a+m|0,L=Qe(L^a,16),A=A+L|0,m=Qe(m^A,12),a=a+m|0,L=Qe(L^a,8),A=A+L|0,m=Qe(m^A,7),d=d+p|0,P=Qe(P^d,16),I=I+P|0,p=Qe(p^I,12),d=d+p|0,P=Qe(P^d,8),I=I+P|0,p=Qe(p^I,7),u=u+g|0,$=Qe($^u,16),b=b+$|0,g=Qe(g^b,12),u=u+g|0,$=Qe($^u,8),b=b+$|0,g=Qe(g^b,7),c=c+l|0,N=Qe(N^c,16),S=S+N|0,l=Qe(l^S,12),c=c+l|0,N=Qe(N^c,8),S=S+N|0,l=Qe(l^S,7);return s[0]=a,s[1]=d,s[2]=u,s[3]=c,s[4]=P,s[5]=$,s[6]=N,s[7]=L,n}qn.hchacha=wte;qn.chacha20orig=(0,Q_.salsaBasic)({core:ex,counterRight:!1,counterLen:8});qn.chacha20=(0,Q_.salsaBasic)({core:ex,counterRight:!1,counterLen:4,allow128bitKeys:!1});qn.xchacha20=(0,Q_.salsaBasic)({core:ex,counterRight:!1,counterLen:8,extendNonceFn:wte,allow128bitKeys:!1});qn.chacha8=(0,Q_.salsaBasic)({core:ex,counterRight:!1,counterLen:4,rounds:8});qn.chacha12=(0,Q_.salsaBasic)({core:ex,counterRight:!1,counterLen:4,rounds:12});var tke=new Uint8Array(16),bte=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(tke.subarray(r))},vte=(t,e,r,n,i)=>{let o=t(e,r,new Uint8Array(32)),s=eke.poly1305.create(o);i&&bte(s,i),bte(s,n);let a=new Uint8Array(16),d=(0,au.createView)(a);(0,au.setBigUint64)(d,0,BigInt(i?i.length:0),!0),(0,au.setBigUint64)(d,8,BigInt(n.length),!0),s.update(a);let u=s.digest();return o.fill(0),u},rke=t=>(e,r,n)=>((0,au.ensureBytes)(e,32),(0,au.ensureBytes)(r),{tagLength:16,encrypt:(o,s)=>{let a=o.length,d=a+16;s?(0,au.ensureBytes)(s,d):s=new Uint8Array(d),t(e,r,o,s,1);let u=vte(t,e,r,s.subarray(0,-16),n);return s.set(u,a),s},decrypt:(o,s)=>{let a=o.length,d=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");s?(0,au.ensureBytes)(s,d):s=new Uint8Array(d);let u=o.subarray(0,-16),c=o.subarray(-16),l=vte(t,e,r,u,n);if(!(0,au.equalBytes)(c,l))throw new Error("invalid tag");return t(e,r,u,s,1),s}});qn._poly1305_aead=rke;qn.chacha20poly1305=(0,qn._poly1305_aead)(qn.chacha20);qn.xchacha20poly1305=(0,qn._poly1305_aead)(qn.xchacha20)});var tx=W(Ko=>{"use strict";h();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.output=Ko.exists=Ko.hash=Ko.bytes=Ko.bool=Ko.number=Ko.isBytes=void 0;function P8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}Ko.number=P8;function xte(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}Ko.bool=xte;function Ete(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}Ko.isBytes=Ete;function GM(t,...e){if(!Ete(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}Ko.bytes=GM;function Ste(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");P8(t.outputLen),P8(t.blockLen)}Ko.hash=Ste;function Ate(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}Ko.exists=Ate;function Pte(t,e){GM(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Ko.output=Pte;var nke={number:P8,bool:xte,bytes:GM,hash:Ste,exists:Ate,output:Pte};Ko.default=nke});var Tte=W(T8=>{"use strict";h();Object.defineProperty(T8,"__esModule",{value:!0});T8.crypto=void 0;T8.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var rx=W(yt=>{"use strict";h();Object.defineProperty(yt,"__esModule",{value:!0});yt.randomBytes=yt.wrapXOFConstructorWithOpts=yt.wrapConstructorWithOpts=yt.wrapConstructor=yt.checkOpts=yt.Hash=yt.concatBytes=yt.toBytes=yt.utf8ToBytes=yt.asyncLoop=yt.nextTick=yt.hexToBytes=yt.bytesToHex=yt.byteSwap32=yt.byteSwapIfBE=yt.byteSwap=yt.isLE=yt.rotl=yt.rotr=yt.createView=yt.u32=yt.u8=yt.isBytes=void 0;var WM=Tte(),VM=tx();function ike(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}yt.isBytes=ike;var oke=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);yt.u8=oke;var ske=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));yt.u32=ske;var ake=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);yt.createView=ake;var cke=(t,e)=>t<<32-e|t>>>e;yt.rotr=cke;var dke=(t,e)=>t<<e|t>>>32-e>>>0;yt.rotl=dke;yt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var uke=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;yt.byteSwap=uke;yt.byteSwapIfBE=yt.isLE?t=>t:t=>(0,yt.byteSwap)(t);function lke(t){for(let e=0;e<t.length;e++)t[e]=(0,yt.byteSwap)(t[e])}yt.byteSwap32=lke;var fke=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hke(t){(0,VM.bytes)(t);let e="";for(let r=0;r<t.length;r++)e+=fke[t[r]];return e}yt.bytesToHex=hke;var Kf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ite(t){if(t>=Kf._0&&t<=Kf._9)return t-Kf._0;if(t>=Kf._A&&t<=Kf._F)return t-(Kf._A-10);if(t>=Kf._a&&t<=Kf._f)return t-(Kf._a-10)}function pke(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=Ite(t.charCodeAt(o)),a=Ite(t.charCodeAt(o+1));if(s===void 0||a===void 0){let d=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+a}return n}yt.hexToBytes=pke;var mke=async()=>{};yt.nextTick=mke;async function yke(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,yt.nextTick)(),n+=o)}}yt.asyncLoop=yke;function kte(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}yt.utf8ToBytes=kte;function I8(t){return typeof t=="string"&&(t=kte(t)),(0,VM.bytes)(t),t}yt.toBytes=I8;function gke(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];(0,VM.bytes)(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}yt.concatBytes=gke;var HM=class{clone(){return this._cloneInto()}};yt.Hash=HM;var bke={}.toString;function vke(t,e){if(e!==void 0&&bke.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}yt.checkOpts=vke;function wke(t){let e=n=>t().update(I8(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}yt.wrapConstructor=wke;function _ke(t){let e=(n,i)=>t(i).update(I8(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}yt.wrapConstructorWithOpts=_ke;function xke(t){let e=(n,i)=>t(i).update(I8(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}yt.wrapXOFConstructorWithOpts=xke;function Eke(t=32){if(WM.crypto&&typeof WM.crypto.getRandomValues=="function")return WM.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}yt.randomBytes=Eke});var Dte=W(y0=>{"use strict";h();Object.defineProperty(y0,"__esModule",{value:!0});y0.hmac=y0.HMAC=void 0;var k8=tx(),Rte=rx(),nx=class extends Rte.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,k8.hash)(e);let n=(0,Rte.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,k8.exists)(this),this.iHash.update(e),this}digestInto(e){(0,k8.exists)(this),(0,k8.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};y0.HMAC=nx;var Ske=(t,e,r)=>new nx(t,e).update(r).digest();y0.hmac=Ske;y0.hmac.create=(t,e)=>new nx(t,e)});var Nte=W(Cp=>{"use strict";h();Object.defineProperty(Cp,"__esModule",{value:!0});Cp.hkdf=Cp.expand=Cp.extract=void 0;var YM=tx(),Mte=rx(),Cte=Dte();function Ote(t,e,r){return(0,YM.hash)(t),r===void 0&&(r=new Uint8Array(t.outputLen)),(0,Cte.hmac)(t,(0,Mte.toBytes)(r),(0,Mte.toBytes)(e))}Cp.extract=Ote;var JM=new Uint8Array([0]),Bte=new Uint8Array;function $te(t,e,r,n=32){if((0,YM.hash)(t),(0,YM.number)(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");let i=Math.ceil(n/t.outputLen);r===void 0&&(r=Bte);let o=new Uint8Array(i*t.outputLen),s=Cte.hmac.create(t,e),a=s._cloneInto(),d=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)JM[0]=u+1,a.update(u===0?Bte:d).update(r).update(JM).digestInto(d),o.set(d,t.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),d.fill(0),JM.fill(0),o.slice(0,n)}Cp.expand=$te;var Ake=(t,e,r,n,i)=>$te(t,Ote(t,e,r),n,i);Cp.hkdf=Ake});var jte=W(Op=>{"use strict";h();Object.defineProperty(Op,"__esModule",{value:!0});Op.HashMD=Op.Maj=Op.Chi=void 0;var ZM=tx(),ix=rx();function Pke(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),d=n?4:0,u=n?0:4;t.setUint32(e+d,s,n),t.setUint32(e+u,a,n)}var Tke=(t,e,r)=>t&e^~t&r;Op.Chi=Tke;var Ike=(t,e,r)=>t&e^t&r^e&r;Op.Maj=Ike;var XM=class extends ix.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,ix.createView)(this.buffer)}update(e){(0,ZM.exists)(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,ix.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let d=(0,ix.createView)(e);for(;i<=o-s;s+=i)this.process(d,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,ZM.exists)(this),(0,ZM.output)(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;Pke(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,ix.createView)(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=d/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,c[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};Op.HashMD=XM});var Ute=W(Lv=>{"use strict";h();Object.defineProperty(Lv,"__esModule",{value:!0});Lv.sha224=Lv.sha256=void 0;var QM=jte(),id=rx(),kke=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$p=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Np=new Uint32Array(64),R8=class extends QM.HashMD{constructor(){super(64,32,8,!1),this.A=$p[0]|0,this.B=$p[1]|0,this.C=$p[2]|0,this.D=$p[3]|0,this.E=$p[4]|0,this.F=$p[5]|0,this.G=$p[6]|0,this.H=$p[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:d}=this;return[e,r,n,i,o,s,a,d]}set(e,r,n,i,o,s,a,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=d|0}process(e,r){for(let l=0;l<16;l++,r+=4)Np[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let m=Np[l-15],p=Np[l-2],g=(0,id.rotr)(m,7)^(0,id.rotr)(m,18)^m>>>3,b=(0,id.rotr)(p,17)^(0,id.rotr)(p,19)^p>>>10;Np[l]=b+Np[l-7]+g+Np[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:d,G:u,H:c}=this;for(let l=0;l<64;l++){let m=(0,id.rotr)(a,6)^(0,id.rotr)(a,11)^(0,id.rotr)(a,25),p=c+m+(0,QM.Chi)(a,d,u)+kke[l]+Np[l]|0,b=((0,id.rotr)(n,2)^(0,id.rotr)(n,13)^(0,id.rotr)(n,22))+(0,QM.Maj)(n,i,o)|0;c=u,u=d,d=a,a=s+p|0,s=o,o=i,i=n,n=p+b|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,d=d+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,i,o,s,a,d,u,c)}roundClean(){Np.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},eB=class extends R8{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Lv.sha256=(0,id.wrapConstructor)(()=>new R8);Lv.sha224=(0,id.wrapConstructor)(()=>new eB)});var Lte=W(D8=>{"use strict";h();Object.defineProperty(D8,"__esModule",{value:!0});D8.aes256gcm=void 0;var Kte=ru(),qte=m5(),tB=z_();function Rke(t,e,r){var n=function(o){var s=(0,qte.createCipheriv)("aes-256-gcm",t,e);r&&s.setAAD(r);var a=s.update(o),d=s.final();return(0,Kte.concatBytes)(a,d,s.getAuthTag())},i=function(o){var s=o.subarray(0,o.length-tB.AEAD_TAG_LENGTH),a=o.subarray(-tB.AEAD_TAG_LENGTH),d=(0,qte.createDecipheriv)("aes-256-gcm",t,e);r&&d.setAAD(r),d.setAuthTag(a);var u=d.update(s),c=d.final();return(0,Kte.concatBytes)(u,c)};return{tagLength:tB.AEAD_TAG_LENGTH,encrypt:n,decrypt:i}}D8.aes256gcm=Rke});var rB=W(jp=>{"use strict";h();Object.defineProperty(jp,"__esModule",{value:!0});jp.deriveKey=jp.aesDecrypt=jp.aesEncrypt=void 0;var Dke=_te(),zte=ru(),Mke=eM(),Bke=Nte(),Cke=Ute(),Fte=l0(),M8=z_(),Oke=Lte();function $ke(t,e){return Gte(!0,t,e)}jp.aesEncrypt=$ke;function Nke(t,e){return Gte(!1,t,e)}jp.aesDecrypt=Nke;function jke(t){return(0,Bke.hkdf)(Cke.sha256,t,void 0,void 0,32)}jp.deriveKey=jke;function Gte(t,e,r){var n=(0,Fte.symmetricAlgorithm)(),i=t?Uke:Kke;if(n==="aes-256-gcm")return i(Oke.aes256gcm,e,r,(0,Fte.symmetricNonceLength)());if(n==="xchacha20")return i(Dke.xchacha20poly1305,e,r,M8.XCHACHA20_NONCE_LENGTH);throw new Error("Not implemented")}function Uke(t,e,r,n){var i=(0,Mke.randomBytes)(n),o=t(e,i),s=o.encrypt(r),a=s.subarray(0,s.length-M8.AEAD_TAG_LENGTH),d=s.subarray(-M8.AEAD_TAG_LENGTH);return(0,zte.concatBytes)(i,d,a)}function Kke(t,e,r,n){var i=n+M8.AEAD_TAG_LENGTH,o=r.subarray(0,n),s=r.subarray(n,i),a=r.subarray(i),d=t(e,Uint8Array.from(o)),u=(0,zte.concatBytes)(a,s);return d.decrypt(u)}});var Jte=W(Rs=>{"use strict";h();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.hexToPublicKey=Rs.convertPublicKeyFormat=Rs.getSharedPoint=Rs.getSharedKey=Rs.getPublicKey=Rs.isValidPrivateKey=Rs.getValidSecret=void 0;var qke=ru(),Lke=eM(),Wte=Fee(),Fke=dte(),nB=l0(),Hte=z_(),zke=KM(),Gke=rB();function Wke(){var t;do t=(0,Lke.randomBytes)(Hte.SECRET_KEY_LENGTH);while(!Vte(t));return t}Rs.getValidSecret=Wke;function Vte(t){return ox(function(e){return e.utils.isValidPrivateKey(t)},function(){return!0},function(){return!0})}Rs.isValidPrivateKey=Vte;function Hke(t){return ox(function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)})}Rs.getPublicKey=Hke;function Vke(t,e){return(0,Gke.deriveKey)((0,qke.concatBytes)(t,e))}Rs.getSharedKey=Vke;function Jke(t,e,r){return ox(function(n){return n.getSharedSecret(t,e,r)},function(n){return n.getSharedSecret(t,e)},function(n){var i=n.utils.getExtendedPublicKey(t).scalar,o=n.ExtendedPoint.fromHex(e).multiply(i);return o.toRawBytes()})}Rs.getSharedPoint=Jke;function Yke(t,e){return ox(function(r){return r.getSharedSecret(BigInt(1),t,e)},function(){return t},function(){return t})}Rs.convertPublicKeyFormat=Yke;function Zke(t){var e=(0,zke.decodeHex)(t);return ox(function(){if(e.length===Hte.ETH_PUBLIC_KEY_SIZE){var r=new Uint8Array(1+e.length);return r.set([4]),r.set(e,1),r}return e},function(){return e},function(){return e})}Rs.hexToPublicKey=Zke;function ox(t,e,r){if((0,nB.ellipticCurve)()==="secp256k1")return t(Fke.secp256k1);if((0,nB.ellipticCurve)()==="x25519")return e(Wte.x25519);if((0,nB.ellipticCurve)()==="ed25519")return r(Wte.ed25519);throw new Error("Not implemented")}});var B8=W(qf=>{"use strict";h();var Xke=qf&&qf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iB=qf&&qf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xke(e,t,r)};Object.defineProperty(qf,"__esModule",{value:!0});iB(Jte(),qf);iB(KM(),qf);iB(rB(),qf)});var sB=W(O8=>{"use strict";h();Object.defineProperty(O8,"__esModule",{value:!0});O8.PublicKey=void 0;var oB=ru(),Qke=l0(),C8=B8(),eRe=function(){function t(e){this.data=(0,C8.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,C8.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return O.Buffer.from((0,C8.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return O.Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),e?(0,oB.bytesToHex)(this.data):(0,oB.bytesToHex)(this.uncompressed)},t.prototype.decapsulate=function(e){var r,n;return(0,Qke.isHkdfKeyCompressed)()?(r=this.data,n=e.multiply(this,!0)):(r=this.uncompressed,n=e.multiply(this,!1)),(0,C8.getSharedKey)(r,n)},t.prototype.equals=function(e){return(0,oB.equalBytes)(this.data,e.data)},t}();O8.PublicKey=eRe});var Zte=W($8=>{"use strict";h();Object.defineProperty($8,"__esModule",{value:!0});$8.PrivateKey=void 0;var Yte=ru(),tRe=l0(),Fv=B8(),rRe=sB(),nRe=function(){function t(e){var r=e===void 0?(0,Fv.getValidSecret)():e;if(!(0,Fv.isValidPrivateKey)(r))throw new Error("Invalid private key");this.data=r,this.publicKey=new rRe.PublicKey((0,Fv.getPublicKey)(r))}return t.fromHex=function(e){return new t((0,Fv.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return O.Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,Yte.bytesToHex)(this.data)},t.prototype.encapsulate=function(e){var r,n;return(0,tRe.isHkdfKeyCompressed)()?(r=this.publicKey.compressed,n=this.multiply(e,!0)):(r=this.publicKey.uncompressed,n=this.multiply(e,!1)),(0,Fv.getSharedKey)(r,n)},t.prototype.multiply=function(e,r){return r===void 0&&(r=!1),(0,Fv.getSharedPoint)(this.data,e.compressed,r)},t.prototype.equals=function(e){return(0,Yte.equalBytes)(this.data,e.data)},t}();$8.PrivateKey=nRe});var aB=W(zv=>{"use strict";h();Object.defineProperty(zv,"__esModule",{value:!0});zv.PublicKey=zv.PrivateKey=void 0;var iRe=Zte();Object.defineProperty(zv,"PrivateKey",{enumerable:!0,get:function(){return iRe.PrivateKey}});var oRe=sB();Object.defineProperty(zv,"PublicKey",{enumerable:!0,get:function(){return oRe.PublicKey}})});var ere=W(Pa=>{"use strict";h();Object.defineProperty(Pa,"__esModule",{value:!0});Pa.utils=Pa.PublicKey=Pa.PrivateKey=Pa.ECIES_CONFIG=Pa.decrypt=Pa.encrypt=void 0;var sRe=ru(),Xte=l0(),Gv=aB(),g0=B8();function aRe(t,e){var r=new Gv.PrivateKey,n=t instanceof Uint8Array?new Gv.PublicKey(t):Gv.PublicKey.fromHex(t),i=r.encapsulate(n),o=(0,g0.aesEncrypt)(i,e),s;return(0,Xte.isEphemeralKeyCompressed)()?s=r.publicKey.compressed:s=r.publicKey.uncompressed,O.Buffer.from((0,sRe.concatBytes)(s,o))}Pa.encrypt=aRe;function cRe(t,e){var r=t instanceof Uint8Array?new Gv.PrivateKey(t):Gv.PrivateKey.fromHex(t),n=(0,Xte.ephemeralKeySize)(),i=new Gv.PublicKey(e.subarray(0,n)),o=e.subarray(n),s=i.decapsulate(r);return O.Buffer.from((0,g0.aesDecrypt)(s,o))}Pa.decrypt=cRe;var dRe=l0();Object.defineProperty(Pa,"ECIES_CONFIG",{enumerable:!0,get:function(){return dRe.ECIES_CONFIG}});var Qte=aB();Object.defineProperty(Pa,"PrivateKey",{enumerable:!0,get:function(){return Qte.PrivateKey}});Object.defineProperty(Pa,"PublicKey",{enumerable:!0,get:function(){return Qte.PublicKey}});Pa.utils={aesDecrypt:g0.aesDecrypt,aesEncrypt:g0.aesEncrypt,decodeHex:g0.decodeHex,getValidSecret:g0.getValidSecret,remove0x:g0.remove0x}});var Gn=W((Mmt,tre)=>{"use strict";h();tre.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Lf=W((Cmt,N8)=>{"use strict";h();var{AbortController:rre,AbortSignal:uRe}=typeof self<"u"?self:typeof window<"u"?window:void 0;N8.exports=rre;N8.exports.AbortSignal=uRe;N8.exports.default=rre});var Ds=W(($mt,dB)=>{"use strict";h();var lRe=Un(),{kResistStopPropagation:fRe,SymbolDispose:hRe}=Gn(),pRe=globalThis.AbortSignal||Lf().AbortSignal,mRe=globalThis.AbortController||Lf().AbortController,yRe=Object.getPrototypeOf(async function(){}).constructor,nre=globalThis.Blob||lRe.Blob,gRe=typeof nre<"u"?function(e){return e instanceof nre}:function(e){return!1},ire=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},bRe=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},cB=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};dB.exports={AggregateError:cB,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof yRe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:gRe,deprecate(t,e){return t},addAbortListener:nc().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);ire(e,"signal"),bRe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[fRe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[hRe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:pRe.any||function(e){if(e.length===1)return e[0];let r=new mRe,n=()=>r.abort();return e.forEach(i=>{ire(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};dB.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Xs=W((jmt,are)=>{"use strict";h();var{format:vRe,inspect:j8,AggregateError:wRe}=Ds(),_Re=globalThis.AggregateError||wRe,xRe=Symbol("kIsNodeError"),ERe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],SRe=/^([A-Z][a-z0-9]*)+$/,ARe="__node_internal_",U8={};function b0(t,e){if(!t)throw new U8.ERR_INTERNAL_ASSERTION(e)}function ore(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function PRe(t,e,r){if(typeof e=="function")return b0(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return b0(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:vRe(e,...r)}function qo(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(PRe(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[xRe]=!0,U8[t]=n}function sre(t){let e=ARe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function TRe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new _Re([e,t],e.message);return r.code=e.code,r}return t||e}var uB=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new U8.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};qo("ERR_ASSERTION","%s",Error);qo("ERR_INVALID_ARG_TYPE",(t,e,r)=>{b0(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let d of e)b0(typeof d=="string","All expected entries have to be of type string"),ERe.includes(d)?i.push(d.toLowerCase()):SRe.test(d)?o.push(d):(b0(d!=="object",'The value "object" should be written as "Object"'),s.push(d));if(o.length>0){let d=i.indexOf("object");d!==-1&&(i.splice(i,d,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let d=i.pop();n+=`one of type ${i.join(", ")}, or ${d}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let d=o.pop();n+=`an instance of ${o.join(", ")}, or ${d}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let d=s.pop();n+=`one of ${s.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let d=j8(r,{depth:-1});n+=`. Received ${d}`}}else{let d=j8(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);qo("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=j8(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);qo("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);qo("ERR_MISSING_ARGS",(...t)=>{b0(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);qo("ERR_OUT_OF_RANGE",(t,e,r)=>{b0(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=ore(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=ore(n)),n+="n"):n=j8(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);qo("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);qo("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);qo("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);qo("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);qo("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);qo("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);qo("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);qo("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);qo("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);qo("ERR_STREAM_WRITE_AFTER_END","write after end",Error);qo("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);are.exports={AbortError:uB,aggregateTwoErrors:sre(TRe),hideStackFrames:sre,codes:U8}});var Hv=W((Kmt,gre)=>{"use strict";h();var{ArrayIsArray:fB,ArrayPrototypeIncludes:lre,ArrayPrototypeJoin:fre,ArrayPrototypeMap:IRe,NumberIsInteger:hB,NumberIsNaN:kRe,NumberMAX_SAFE_INTEGER:RRe,NumberMIN_SAFE_INTEGER:DRe,NumberParseInt:MRe,ObjectPrototypeHasOwnProperty:BRe,RegExpPrototypeExec:hre,String:CRe,StringPrototypeToUpperCase:ORe,StringPrototypeTrim:$Re}=Gn(),{hideStackFrames:od,codes:{ERR_SOCKET_BAD_PORT:NRe,ERR_INVALID_ARG_TYPE:Ms,ERR_INVALID_ARG_VALUE:Wv,ERR_OUT_OF_RANGE:v0,ERR_UNKNOWN_SIGNAL:cre}}=Xs(),{normalizeEncoding:jRe}=Ds(),{isAsyncFunction:URe,isArrayBufferView:KRe}=Ds().types,dre={};function qRe(t){return t===(t|0)}function LRe(t){return t===t>>>0}var FRe=/^[0-7]+$/,zRe="must be a 32-bit unsigned integer or an octal string";function GRe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(hre(FRe,t)===null)throw new Wv(e,t,zRe);t=MRe(t,8)}return pre(t,e),t}var WRe=od((t,e,r=DRe,n=RRe)=>{if(typeof t!="number")throw new Ms(e,"number",t);if(!hB(t))throw new v0(e,"an integer",t);if(t<r||t>n)throw new v0(e,`>= ${r} && <= ${n}`,t)}),HRe=od((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Ms(e,"number",t);if(!hB(t))throw new v0(e,"an integer",t);if(t<r||t>n)throw new v0(e,`>= ${r} && <= ${n}`,t)}),pre=od((t,e,r=!1)=>{if(typeof t!="number")throw new Ms(e,"number",t);if(!hB(t))throw new v0(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new v0(e,`>= ${n} && <= ${i}`,t)});function pB(t,e){if(typeof t!="string")throw new Ms(e,"string",t)}function VRe(t,e,r=void 0,n){if(typeof t!="number")throw new Ms(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&kRe(t))throw new v0(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var JRe=od((t,e,r)=>{if(!lre(r,t)){let i="must be one of: "+fre(IRe(r,o=>typeof o=="string"?`'${o}'`:CRe(o)),", ");throw new Wv(e,t,i)}});function mre(t,e){if(typeof t!="boolean")throw new Ms(e,"boolean",t)}function lB(t,e,r){return t==null||!BRe(t,e)?r:t[e]}var YRe=od((t,e,r=null)=>{let n=lB(r,"allowArray",!1),i=lB(r,"allowFunction",!1);if(!lB(r,"nullable",!1)&&t===null||!n&&fB(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Ms(e,"Object",t)}),ZRe=od((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Ms(e,"a dictionary",t)}),K8=od((t,e,r=0)=>{if(!fB(t))throw new Ms(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Wv(e,t,n)}});function XRe(t,e){K8(t,e);for(let r=0;r<t.length;r++)pB(t[r],`${e}[${r}]`)}function QRe(t,e){K8(t,e);for(let r=0;r<t.length;r++)mre(t[r],`${e}[${r}]`)}function e9e(t,e){K8(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Ms(i,"AbortSignal",n);yre(n,i)}}function t9e(t,e="signal"){if(pB(t,e),dre[t]===void 0)throw dre[ORe(t)]!==void 0?new cre(t+" (signals must use all capital letters)"):new cre(t)}var r9e=od((t,e="buffer")=>{if(!KRe(t))throw new Ms(e,["Buffer","TypedArray","DataView"],t)});function n9e(t,e){let r=jRe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Wv("encoding",e,`is invalid for data of length ${n}`)}function i9e(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&$Re(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new NRe(e,t,r);return t|0}var yre=od((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Ms(e,"AbortSignal",t)}),o9e=od((t,e)=>{if(typeof t!="function")throw new Ms(e,"Function",t)}),s9e=od((t,e)=>{if(typeof t!="function"||URe(t))throw new Ms(e,"Function",t)}),a9e=od((t,e)=>{if(t!==void 0)throw new Ms(e,"undefined",t)});function c9e(t,e,r){if(!lre(r,t))throw new Ms(e,`('${fre(r,"|")}')`,t)}var d9e=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ure(t,e){if(typeof t>"u"||!hre(d9e,t))throw new Wv(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function u9e(t){if(typeof t=="string")return ure(t,"hints"),t;if(fB(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];ure(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Wv("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}gre.exports={isInt32:qRe,isUint32:LRe,parseFileMode:GRe,validateArray:K8,validateStringArray:XRe,validateBooleanArray:QRe,validateAbortSignalArray:e9e,validateBoolean:mre,validateBuffer:r9e,validateDictionary:ZRe,validateEncoding:n9e,validateFunction:o9e,validateInt32:HRe,validateInteger:WRe,validateNumber:VRe,validateObject:YRe,validateOneOf:JRe,validatePlainFunction:s9e,validatePort:i9e,validateSignalName:t9e,validateString:pB,validateUint32:pre,validateUndefined:a9e,validateUnion:c9e,validateAbortSignal:yre,validateLinkHeaderValue:u9e}});var pl=W((Lmt,Mre)=>{"use strict";h();var{SymbolAsyncIterator:bre,SymbolIterator:vre,SymbolFor:w0}=Gn(),wre=w0("nodejs.stream.destroyed"),_re=w0("nodejs.stream.errored"),mB=w0("nodejs.stream.readable"),yB=w0("nodejs.stream.writable"),xre=w0("nodejs.stream.disturbed"),l9e=w0("nodejs.webstream.isClosedPromise"),f9e=w0("nodejs.webstream.controllerErrorFunction");function q8(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function L8(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function h9e(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function hl(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Ere(t){return!!(t&&!hl(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Sre(t){return!!(t&&!hl(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Are(t){return!!(t&&!hl(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function p9e(t){return Ere(t)||Sre(t)||Are(t)}function m9e(t,e){return t==null?!1:e===!0?typeof t[bre]=="function":e===!1?typeof t[vre]=="function":typeof t[bre]=="function"||typeof t[vre]=="function"}function F8(t){if(!hl(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[wre]||n!=null&&n.destroyed)}function Pre(t){if(!L8(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function y9e(t,e){if(!L8(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function g9e(t){if(!q8(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Tre(t,e){if(!q8(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Ire(t){return t&&t[mB]!=null?t[mB]:typeof t?.readable!="boolean"?null:F8(t)?!1:q8(t)&&t.readable&&!Tre(t)}function kre(t){return t&&t[yB]!=null?t[yB]:typeof t?.writable!="boolean"?null:F8(t)?!1:L8(t)&&t.writable&&!Pre(t)}function b9e(t,e){return hl(t)?F8(t)?!0:!(e?.readable!==!1&&Ire(t)||e?.writable!==!1&&kre(t)):null}function v9e(t){var e,r;return hl(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function w9e(t){var e,r;return hl(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function _9e(t){if(!hl(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Rre(t)?t._closed:null}function Rre(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Dre(t){return typeof t._sent100=="boolean"&&Rre(t)}function x9e(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function E9e(t){if(!hl(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Dre(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function S9e(t){var e;return!!(t&&((e=t[xre])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function A9e(t){var e,r,n,i,o,s,a,d,u,c;return!!(t&&((e=(r=(n=(i=(o=(s=t[_re])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(d=t._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}Mre.exports={isDestroyed:F8,kIsDestroyed:wre,isDisturbed:S9e,kIsDisturbed:xre,isErrored:A9e,kIsErrored:_re,isReadable:Ire,kIsReadable:mB,kIsClosedPromise:l9e,kControllerErrorFunction:f9e,kIsWritable:yB,isClosed:_9e,isDuplexNodeStream:h9e,isFinished:b9e,isIterable:m9e,isReadableNodeStream:q8,isReadableStream:Ere,isReadableEnded:g9e,isReadableFinished:Tre,isReadableErrored:w9e,isNodeStream:hl,isWebStream:p9e,isWritable:kre,isWritableNodeStream:L8,isWritableStream:Sre,isWritableEnded:Pre,isWritableFinished:y9e,isWritableErrored:v9e,isServerRequest:x9e,isServerResponse:Dre,willEmitClose:E9e,isTransformStream:Are}});var Ff=W((zmt,_B)=>{h();var Up=ls(),{AbortError:qre,codes:P9e}=Xs(),{ERR_INVALID_ARG_TYPE:T9e,ERR_STREAM_PREMATURE_CLOSE:Bre}=P9e,{kEmptyObject:bB,once:vB}=Ds(),{validateAbortSignal:I9e,validateFunction:k9e,validateObject:R9e,validateBoolean:D9e}=Hv(),{Promise:M9e,PromisePrototypeThen:B9e,SymbolDispose:Lre}=Gn(),{isClosed:C9e,isReadable:Cre,isReadableNodeStream:gB,isReadableStream:O9e,isReadableFinished:Ore,isReadableErrored:$re,isWritable:Nre,isWritableNodeStream:jre,isWritableStream:$9e,isWritableFinished:Ure,isWritableErrored:Kre,isNodeStream:N9e,willEmitClose:j9e,kIsClosedPromise:U9e}=pl(),Vv;function K9e(t){return t.setHeader&&typeof t.abort=="function"}var wB=()=>{};function Fre(t,e,r){var n,i;if(arguments.length===2?(r=e,e=bB):e==null?e=bB:R9e(e,"options"),k9e(r,"callback"),I9e(e.signal,"options.signal"),r=vB(r),O9e(t)||$9e(t))return q9e(t,e,r);if(!N9e(t))throw new T9e("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:gB(t),s=(i=e.writable)!==null&&i!==void 0?i:jre(t),a=t._writableState,d=t._readableState,u=()=>{t.writable||m()},c=j9e(t)&&gB(t)===o&&jre(t)===s,l=Ure(t,!1),m=()=>{l=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||o))&&(!o||p)&&r.call(t)},p=Ore(t,!1),g=()=>{p=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||s))&&(!s||l)&&r.call(t)},b=N=>{r.call(t,N)},S=C9e(t),A=()=>{S=!0;let N=Kre(t)||$re(t);if(N&&typeof N!="boolean")return r.call(t,N);if(o&&!p&&gB(t,!0)&&!Ore(t,!1))return r.call(t,new Bre);if(s&&!l&&!Ure(t,!1))return r.call(t,new Bre);r.call(t)},I=()=>{S=!0;let N=Kre(t)||$re(t);if(N&&typeof N!="boolean")return r.call(t,N);r.call(t)},P=()=>{t.req.on("finish",m)};K9e(t)?(t.on("complete",m),c||t.on("abort",A),t.req?P():t.on("request",P)):s&&!a&&(t.on("end",u),t.on("close",u)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",A),t.on("end",g),t.on("finish",m),e.error!==!1&&t.on("error",b),t.on("close",A),S?Up.nextTick(A):a!=null&&a.errorEmitted||d!=null&&d.errorEmitted?c||Up.nextTick(I):(!o&&(!c||Cre(t))&&(l||Nre(t)===!1)||!s&&(!c||Nre(t))&&(p||Cre(t)===!1)||d&&t.req&&t.aborted)&&Up.nextTick(I);let $=()=>{r=wB,t.removeListener("aborted",A),t.removeListener("complete",m),t.removeListener("abort",A),t.removeListener("request",P),t.req&&t.req.removeListener("finish",m),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",m),t.removeListener("end",g),t.removeListener("error",b),t.removeListener("close",A)};if(e.signal&&!S){let N=()=>{let L=r;$(),L.call(t,new qre(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Up.nextTick(N);else{Vv=Vv||Ds().addAbortListener;let L=Vv(e.signal,N),F=r;r=vB((...U)=>{L[Lre](),F.apply(t,U)})}}return $}function q9e(t,e,r){let n=!1,i=wB;if(e.signal)if(i=()=>{n=!0,r.call(t,new qre(void 0,{cause:e.signal.reason}))},e.signal.aborted)Up.nextTick(i);else{Vv=Vv||Ds().addAbortListener;let s=Vv(e.signal,i),a=r;r=vB((...d)=>{s[Lre](),a.apply(t,d)})}let o=(...s)=>{n||Up.nextTick(()=>r.apply(t,s))};return B9e(t[U9e].promise,o,o),wB}function L9e(t,e){var r;let n=!1;return e===null&&(e=bB),(r=e)!==null&&r!==void 0&&r.cleanup&&(D9e(e.cleanup,"cleanup"),n=e.cleanup),new M9e((i,o)=>{let s=Fre(t,e,a=>{n&&s(),a?o(a):i()})})}_B.exports=Fre;_B.exports.finished=L9e});var _0=W((Wmt,Zre)=>{"use strict";h();var ml=ls(),{aggregateTwoErrors:F9e,codes:{ERR_MULTIPLE_CALLBACK:z9e},AbortError:G9e}=Xs(),{Symbol:Wre}=Gn(),{kIsDestroyed:W9e,isDestroyed:H9e,isFinished:V9e,isServerRequest:J9e}=pl(),Hre=Wre("kDestroy"),xB=Wre("kConstruct");function Vre(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Y9e(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Vre(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?zre(this,t,e):this.once(Hre,function(o){zre(this,F9e(o,t),e)}),this)}function zre(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;Vre(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?ml.nextTick(Z9e,t,o):ml.nextTick(Jre,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function Z9e(t,e){EB(t,e),Jre(t)}function Jre(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function EB(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function X9e(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function SB(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?ml.nextTick(EB,t,e):EB(t,e))}function Q9e(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(xB,e),!(t.listenerCount(xB)>1)&&ml.nextTick(eDe,t)}function eDe(t){let e=!1;function r(n){if(e){SB(t,n??new z9e);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Hre,n):n?SB(t,n,!0):ml.nextTick(tDe,t)}try{t._construct(n=>{ml.nextTick(r,n)})}catch(n){ml.nextTick(r,n)}}function tDe(t){t.emit(xB)}function Gre(t){return t?.setHeader&&typeof t.abort=="function"}function Yre(t){t.emit("close")}function rDe(t,e){t.emit("error",e),ml.nextTick(Yre,t)}function nDe(t,e){!t||H9e(t)||(!e&&!V9e(t)&&(e=new G9e),J9e(t)?(t.socket=null,t.destroy(e)):Gre(t)?t.abort():Gre(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ml.nextTick(rDe,t,e):ml.nextTick(Yre,t),t.destroyed||(t[W9e]=!0))}Zre.exports={construct:Q9e,destroyer:nDe,destroy:Y9e,undestroy:X9e,errorOrDestroy:SB}});var W8=W((Vmt,Qre)=>{"use strict";h();var{ArrayIsArray:iDe,ObjectSetPrototypeOf:Xre}=Gn(),{EventEmitter:z8}=nc();function G8(t){z8.call(this,t)}Xre(G8.prototype,z8.prototype);Xre(G8,z8);G8.prototype.pipe=function(t,e){let r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function d(c){u(),z8.listenerCount(this,"error")===0&&this.emit("error",c)}AB(r,"error",d),AB(t,"error",d);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",d),t.removeListener("error",d),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function AB(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):iDe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Qre.exports={Stream:G8,prependListener:AB}});var sx=W((Ymt,H8)=>{"use strict";h();var{SymbolDispose:oDe}=Gn(),{AbortError:ene,codes:sDe}=Xs(),{isNodeStream:tne,isWebStream:aDe,kControllerErrorFunction:cDe}=pl(),dDe=Ff(),{ERR_INVALID_ARG_TYPE:rne}=sDe,PB,uDe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new rne(e,"AbortSignal",t)};H8.exports.addAbortSignal=function(e,r){if(uDe(e,"signal"),!tne(r)&&!aDe(r))throw new rne("stream",["ReadableStream","WritableStream","Stream"],r);return H8.exports.addAbortSignalNoValidate(e,r)};H8.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=tne(e)?()=>{e.destroy(new ene(void 0,{cause:t.reason}))}:()=>{e[cDe](new ene(void 0,{cause:t.reason}))};if(t.aborted)r();else{PB=PB||Ds().addAbortListener;let n=PB(t,r);dDe(e,n[oDe])}return e}});var one=W((Qmt,ine)=>{"use strict";h();var{StringPrototypeSlice:nne,SymbolIterator:lDe,TypedArrayPrototypeSet:V8,Uint8Array:fDe}=Gn(),{Buffer:TB}=Un(),{inspect:hDe}=Ds();ine.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return TB.alloc(0);let r=TB.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)V8(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[lDe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=nne(o,0,e),this.head=n,n.data=nne(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=TB.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)V8(r,s,n-e),e-=s.length;else{e===s.length?(V8(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(V8(r,new fDe(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return hDe(this,{...r,depth:0,customInspect:!1})}}});var ax=W((tyt,dne)=>{"use strict";h();var{MathFloor:pDe,NumberIsInteger:mDe}=Gn(),{validateInteger:yDe}=Hv(),{ERR_INVALID_ARG_VALUE:gDe}=Xs().codes,sne=16*1024,ane=16;function bDe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function cne(t){return t?ane:sne}function vDe(t,e){yDe(e,"value",0),t?ane=e:sne=e}function wDe(t,e,r,n){let i=bDe(e,n,r);if(i!=null){if(!mDe(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new gDe(o,i)}return pDe(i)}return cne(t.objectMode)}dne.exports={getHighWaterMark:wDe,getDefaultHighWaterMark:cne,setDefaultHighWaterMark:vDe}});var IB=W((nyt,hne)=>{"use strict";h();var une=ls(),{PromisePrototypeThen:_De,SymbolAsyncIterator:lne,SymbolIterator:fne}=Gn(),{Buffer:xDe}=Un(),{ERR_INVALID_ARG_TYPE:EDe,ERR_STREAM_NULL_VALUES:SDe}=Xs().codes;function ADe(t,e,r){let n;if(typeof e=="string"||e instanceof xDe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[lne])i=!0,n=e[lne]();else if(e&&e[fne])i=!1,n=e[fne]();else throw new EDe("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,d())},o._destroy=function(u,c){_De(a(u),()=>une.nextTick(c,u),l=>une.nextTick(c,l||u))};async function a(u){let c=u!=null,l=typeof n.throw=="function";if(c&&l){let{value:m,done:p}=await n.throw(u);if(await m,p)return}if(typeof n.return=="function"){let{value:m}=await n.return();await m}}async function d(){for(;;){try{let{value:u,done:c}=i?await n.next():n.next();if(c)o.push(null);else{let l=u&&typeof u.then=="function"?await u:u;if(l===null)throw s=!1,new SDe;if(o.push(l))continue;s=!1}}catch(u){o.destroy(u)}break}}return o}hne.exports=ADe});var dx=W((oyt,Dne)=>{h();var cu=ls(),{ArrayPrototypeIndexOf:PDe,NumberIsInteger:TDe,NumberIsNaN:IDe,NumberParseInt:kDe,ObjectDefineProperties:$B,ObjectKeys:RDe,ObjectSetPrototypeOf:yne,Promise:gne,SafeSet:DDe,SymbolAsyncDispose:MDe,SymbolAsyncIterator:BDe,Symbol:CDe}=Gn();Dne.exports=hr;hr.ReadableState=X8;var{EventEmitter:ODe}=nc(),{Stream:Kp,prependListener:$De}=W8(),{Buffer:kB}=Un(),{addAbortSignal:NDe}=sx(),bne=Ff(),Dr=Ds().debuglog("stream",t=>{Dr=t}),jDe=one(),Zv=_0(),{getHighWaterMark:UDe,getDefaultHighWaterMark:KDe}=ax(),{aggregateTwoErrors:pne,codes:{ERR_INVALID_ARG_TYPE:qDe,ERR_METHOD_NOT_IMPLEMENTED:LDe,ERR_OUT_OF_RANGE:FDe,ERR_STREAM_PUSH_AFTER_EOF:zDe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:GDe},AbortError:WDe}=Xs(),{validateObject:HDe}=Hv(),x0=CDe("kPaused"),{StringDecoder:vne}=nv(),VDe=IB();yne(hr.prototype,Kp.prototype);yne(hr,Kp);var RB=()=>{},{errorOrDestroy:Jv}=Zv,Yv=1,JDe=2,wne=4,cx=8,_ne=16,J8=32,Y8=64,xne=128,YDe=256,ZDe=512,XDe=1024,CB=2048,OB=4096,QDe=8192,e7e=16384,t7e=32768,Ene=65536,r7e=1<<17,n7e=1<<18;function Hi(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}$B(X8.prototype,{objectMode:Hi(Yv),ended:Hi(JDe),endEmitted:Hi(wne),reading:Hi(cx),constructed:Hi(_ne),sync:Hi(J8),needReadable:Hi(Y8),emittedReadable:Hi(xne),readableListening:Hi(YDe),resumeScheduled:Hi(ZDe),errorEmitted:Hi(XDe),emitClose:Hi(CB),autoDestroy:Hi(OB),destroyed:Hi(QDe),closed:Hi(e7e),closeEmitted:Hi(t7e),multiAwaitDrain:Hi(Ene),readingMore:Hi(r7e),dataEmitted:Hi(n7e)});function X8(t,e,r){typeof r!="boolean"&&(r=e instanceof yl()),this.state=CB|OB|_ne|J8,t&&t.objectMode&&(this.state|=Yv),r&&t&&t.readableObjectMode&&(this.state|=Yv),this.highWaterMark=t?UDe(this,t,"readableHighWaterMark",r):KDe(!1),this.buffer=new jDe,this.length=0,this.pipes=[],this.flowing=null,this[x0]=null,t&&t.emitClose===!1&&(this.state&=~CB),t&&t.autoDestroy===!1&&(this.state&=~OB),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new vne(t.encoding),this.encoding=t.encoding)}function hr(t){if(!(this instanceof hr))return new hr(t);let e=this instanceof yl();this._readableState=new X8(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&NDe(t.signal,this)),Kp.call(this,t),Zv.construct(this,()=>{this._readableState.needReadable&&Z8(this,this._readableState)})}hr.prototype.destroy=Zv.destroy;hr.prototype._undestroy=Zv.undestroy;hr.prototype._destroy=function(t,e){e(t)};hr.prototype[ODe.captureRejectionSymbol]=function(t){this.destroy(t)};hr.prototype[MDe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new WDe,this.destroy(t)),new gne((e,r)=>bne(this,n=>n&&n!==t?r(n):e(null)))};hr.prototype.push=function(t,e){return Sne(this,t,e,!1)};hr.prototype.unshift=function(t,e){return Sne(this,t,e,!0)};function Sne(t,e,r,n){Dr("readableAddChunk",e);let i=t._readableState,o;if(i.state&Yv||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=kB.from(e,r).toString(i.encoding):(e=kB.from(e,r),r=""))):e instanceof kB?r="":Kp._isUint8Array(e)?(e=Kp._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new qDe("chunk",["string","Buffer","Uint8Array"],e))),o)Jv(t,o);else if(e===null)i.state&=~cx,s7e(t,i);else if(i.state&Yv||e&&e.length>0)if(n)if(i.state&wne)Jv(t,new GDe);else{if(i.destroyed||i.errored)return!1;DB(t,i,e,!0)}else if(i.ended)Jv(t,new zDe);else{if(i.destroyed||i.errored)return!1;i.state&=~cx,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?DB(t,i,e,!1):Z8(t,i)):DB(t,i,e,!1)}else n||(i.state&=~cx,Z8(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function DB(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&Ene?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&Y8&&Q8(t)),Z8(t,e)}hr.prototype.isPaused=function(){let t=this._readableState;return t[x0]===!0||t.flowing===!1};hr.prototype.setEncoding=function(t){let e=new vne(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var i7e=1073741824;function o7e(t){if(t>i7e)throw new FDe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function mne(t,e){return t<=0||e.length===0&&e.ended?0:e.state&Yv?1:IDe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}hr.prototype.read=function(t){Dr("read",t),t===void 0?t=NaN:TDe(t)||(t=kDe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=o7e(t)),t!==0&&(e.state&=~xne),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Dr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?MB(this):Q8(this),null;if(t=mne(t,e),t===0&&e.ended)return e.length===0&&MB(this),null;let n=(e.state&Y8)!==0;if(Dr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Dr("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Dr("reading, ended or constructing",n);else if(n){Dr("do read"),e.state|=cx|J8,e.length===0&&(e.state|=Y8);try{this._read(e.highWaterMark)}catch(o){Jv(this,o)}e.state&=~J8,e.reading||(t=mne(r,e))}let i;return t>0?i=kne(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&MB(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function s7e(t,e){if(Dr("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Q8(t):(e.needReadable=!1,e.emittedReadable=!0,Ane(t))}}function Q8(t){let e=t._readableState;Dr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Dr("emitReadable",e.flowing),e.emittedReadable=!0,cu.nextTick(Ane,t))}function Ane(t){let e=t._readableState;Dr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Tne(t)}function Z8(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,cu.nextTick(a7e,t,e))}function a7e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Dr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}hr.prototype._read=function(t){throw new LDe("_read()")};hr.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new DDe(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Dr("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==cu.stdout&&t!==cu.stderr?a:S;n.endEmitted?cu.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(A,I){Dr("onunpipe"),A===r&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,c())}function a(){Dr("onend"),t.end()}let d,u=!1;function c(){Dr("cleanup"),t.removeListener("close",g),t.removeListener("finish",b),d&&t.removeListener("drain",d),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",m),u=!0,d&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&d()}function l(){u||(n.pipes.length===1&&n.pipes[0]===t?(Dr("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Dr("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),d||(d=c7e(r,t),t.on("drain",d))}r.on("data",m);function m(A){Dr("ondata");let I=t.write(A);Dr("dest.write",I),I===!1&&l()}function p(A){if(Dr("onerror",A),S(),t.removeListener("error",p),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?Jv(t,A):t.emit("error",A)}}$De(t,"error",p);function g(){t.removeListener("finish",b),S()}t.once("close",g);function b(){Dr("onfinish"),t.removeListener("close",g),S()}t.once("finish",b);function S(){Dr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?l():n.flowing||(Dr("pipe resume"),r.resume()),t};function c7e(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Dr("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Dr("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}hr.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=PDe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};hr.prototype.on=function(t,e){let r=Kp.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Dr("on readable",n.length,n.reading),n.length?Q8(this):n.reading||cu.nextTick(d7e,this)),r};hr.prototype.addListener=hr.prototype.on;hr.prototype.removeListener=function(t,e){let r=Kp.prototype.removeListener.call(this,t,e);return t==="readable"&&cu.nextTick(Pne,this),r};hr.prototype.off=hr.prototype.removeListener;hr.prototype.removeAllListeners=function(t){let e=Kp.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&cu.nextTick(Pne,this),e};function Pne(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[x0]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function d7e(t){Dr("readable nexttick read 0"),t.read(0)}hr.prototype.resume=function(){let t=this._readableState;return t.flowing||(Dr("resume"),t.flowing=!t.readableListening,u7e(this,t)),t[x0]=!1,this};function u7e(t,e){e.resumeScheduled||(e.resumeScheduled=!0,cu.nextTick(l7e,t,e))}function l7e(t,e){Dr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Tne(t),e.flowing&&!e.reading&&t.read(0)}hr.prototype.pause=function(){return Dr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Dr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[x0]=!0,this};function Tne(t){let e=t._readableState;for(Dr("flow",e.flowing);e.flowing&&t.read()!==null;);}hr.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Jv(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=RDe(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};hr.prototype[BDe]=function(){return Ine(this)};hr.prototype.iterator=function(t){return t!==void 0&&HDe(t,"options"),Ine(this,t)};function Ine(t,e){typeof t.read!="function"&&(t=hr.wrap(t,{objectMode:!0}));let r=f7e(t,e);return r.stream=t,r}async function*f7e(t,e){let r=RB;function n(s){this===t?(r(),r=RB):r=s}t.on("readable",n);let i,o=bne(t,{writable:!1},s=>{i=s?pne(i,s):null,r(),r=RB});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new gne(n)}}}catch(s){throw i=pne(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Zv.destroyer(t,null):(t.off("readable",n),o())}}$B(hr.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});$B(X8.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[x0]!==!1},set(t){this[x0]=!!t}}});hr._fromList=kne;function kne(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function MB(t){let e=t._readableState;Dr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,cu.nextTick(h7e,e,t))}function h7e(t,e){if(Dr("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)cu.nextTick(p7e,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function p7e(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}hr.from=function(t,e){return VDe(hr,t,e)};var BB;function Rne(){return BB===void 0&&(BB={}),BB}hr.fromWeb=function(t,e){return Rne().newStreamReadableFromReadableStream(t,e)};hr.toWeb=function(t,e){return Rne().newReadableStreamFromStreamReadable(t,e)};hr.wrap=function(t,e){var r,n;return new hr({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){Zv.destroyer(t,i),o(i)}}).wrap(t)}});var i4=W((ayt,Fne)=>{h();var E0=ls(),{ArrayPrototypeSlice:Cne,Error:m7e,FunctionPrototypeSymbolHasInstance:One,ObjectDefineProperty:$ne,ObjectDefineProperties:y7e,ObjectSetPrototypeOf:Nne,StringPrototypeToLowerCase:g7e,Symbol:b7e,SymbolHasInstance:v7e}=Gn();Fne.exports=Wn;Wn.WritableState=fx;var{EventEmitter:w7e}=nc(),ux=W8().Stream,{Buffer:e4}=Un(),n4=_0(),{addAbortSignal:_7e}=sx(),{getHighWaterMark:x7e,getDefaultHighWaterMark:E7e}=ax(),{ERR_INVALID_ARG_TYPE:S7e,ERR_METHOD_NOT_IMPLEMENTED:A7e,ERR_MULTIPLE_CALLBACK:jne,ERR_STREAM_CANNOT_PIPE:P7e,ERR_STREAM_DESTROYED:lx,ERR_STREAM_ALREADY_FINISHED:T7e,ERR_STREAM_NULL_VALUES:I7e,ERR_STREAM_WRITE_AFTER_END:k7e,ERR_UNKNOWN_ENCODING:Une}=Xs().codes,{errorOrDestroy:Xv}=n4;Nne(Wn.prototype,ux.prototype);Nne(Wn,ux);function UB(){}var Qv=b7e("kOnFinished");function fx(t,e,r){typeof r!="boolean"&&(r=e instanceof yl()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?x7e(this,t,"writableHighWaterMark",r):E7e(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=D7e.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,r4(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Qv]=[]}function r4(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}fx.prototype.getBuffer=function(){return Cne(this.buffered,this.bufferedIndex)};$ne(fx.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Wn(t){let e=this instanceof yl();if(!e&&!One(Wn,this))return new Wn(t);this._writableState=new fx(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&_7e(t.signal,this)),ux.call(this,t),n4.construct(this,()=>{let r=this._writableState;r.writing||qB(this,r),LB(this,r)})}$ne(Wn,v7e,{__proto__:null,value:function(t){return One(this,t)?!0:this!==Wn?!1:t&&t._writableState instanceof fx}});Wn.prototype.pipe=function(){Xv(this,new P7e)};function Kne(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!e4.isEncoding(r))throw new Une(r);typeof n!="function"&&(n=UB)}if(e===null)throw new I7e;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=e4.from(e,r),r="buffer");else if(e instanceof e4)r="buffer";else if(ux._isUint8Array(e))e=ux._uint8ArrayToBuffer(e),r="buffer";else throw new S7e("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new k7e:i.destroyed&&(o=new lx("write")),o?(E0.nextTick(n,o),Xv(t,o,!0),o):(i.pendingcb++,R7e(t,i,e,r,n))}Wn.prototype.write=function(t,e,r){return Kne(this,t,e,r)===!0};Wn.prototype.cork=function(){this._writableState.corked++};Wn.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||qB(this,t))};Wn.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=g7e(e)),!e4.isEncoding(e))throw new Une(e);return this._writableState.defaultEncoding=e,this};function R7e(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==UB&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function Mne(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new lx("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Bne(t,e,r,n){--e.pendingcb,n(r),KB(e),Xv(t,r)}function D7e(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Xv(t,new jne);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?E0.nextTick(Bne,t,r,e,i):Bne(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&qB(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},E0.nextTick(M7e,r.afterWriteTickInfo)):qne(t,r,1,i))}function M7e({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,qne(t,e,r,n)}function qne(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&KB(e),LB(t,e)}function KB(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new lx("write"))}let r=t[Qv].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new lx("end"))}r4(t)}function qB(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?UB:u=>{for(let c=s;c<r.length;++c)r[c].callback(u)},d=e.allNoop&&s===0?r:Cne(r,s);d.allBuffers=e.allBuffers,Mne(t,e,!0,e.length,d,"",a),r4(e)}else{do{let{chunk:a,encoding:d,callback:u}=r[s];r[s++]=null;let c=i?1:a.length;Mne(t,e,!1,c,a,d,u)}while(s<r.length&&!e.writing);s===r.length?r4(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}Wn.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new A7e("_write()")};Wn.prototype._writev=null;Wn.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=Kne(this,t,e);o instanceof m7e&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,LB(this,n,!0),n.ended=!0):n.finished?i=new T7e("end"):n.destroyed&&(i=new lx("end"))),typeof r=="function"&&(i||n.finished?E0.nextTick(r,i):n[Qv].push(r)),this};function t4(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function B7e(t,e){let r=!1;function n(i){if(r){Xv(t,i??jne());return}if(r=!0,e.pendingcb--,i){let o=e[Qv].splice(0);for(let s=0;s<o.length;s++)o[s](i);Xv(t,i,e.sync)}else t4(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,E0.nextTick(jB,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function C7e(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,B7e(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function LB(t,e,r){t4(e)&&(C7e(t,e),e.pendingcb===0&&(r?(e.pendingcb++,E0.nextTick((n,i)=>{t4(i)?jB(n,i):i.pendingcb--},t,e)):t4(e)&&(e.pendingcb++,jB(t,e))))}function jB(t,e){e.pendingcb--,e.finished=!0;let r=e[Qv].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}y7e(Wn.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var O7e=n4.destroy;Wn.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Qv].length)&&E0.nextTick(KB,r),O7e.call(this,t,e),this};Wn.prototype._undestroy=n4.undestroy;Wn.prototype._destroy=function(t,e){e(t)};Wn.prototype[w7e.captureRejectionSymbol]=function(t){this.destroy(t)};var NB;function Lne(){return NB===void 0&&(NB={}),NB}Wn.fromWeb=function(t,e){return Lne().newStreamWritableFromWritableStream(t,e)};Wn.toWeb=function(t){return Lne().newWritableStreamFromStreamWritable(t)}});var iie=W((dyt,nie)=>{h();var FB=ls(),$7e=Un(),{isReadable:N7e,isWritable:j7e,isIterable:zne,isNodeStream:U7e,isReadableNodeStream:Gne,isWritableNodeStream:Wne,isDuplexNodeStream:K7e,isReadableStream:Hne,isWritableStream:Vne}=pl(),Jne=Ff(),{AbortError:tie,codes:{ERR_INVALID_ARG_TYPE:q7e,ERR_INVALID_RETURN_VALUE:Yne}}=Xs(),{destroyer:tw}=_0(),L7e=yl(),rie=dx(),F7e=i4(),{createDeferredPromise:Zne}=Ds(),Xne=IB(),Qne=globalThis.Blob||$7e.Blob,z7e=typeof Qne<"u"?function(e){return e instanceof Qne}:function(e){return!1},G7e=globalThis.AbortController||Lf().AbortController,{FunctionPrototypeCall:eie}=Gn(),qp=class extends L7e{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};nie.exports=function t(e,r){if(K7e(e))return e;if(Gne(e))return ew({readable:e});if(Wne(e))return ew({writable:e});if(U7e(e))return ew({writable:!1,readable:!1});if(Hne(e))return ew({readable:rie.fromWeb(e)});if(Vne(e))return ew({writable:F7e.fromWeb(e)});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=W7e(e);if(zne(i))return Xne(qp,i,{objectMode:!0,write:o,final:s,destroy:a});let d=i?.then;if(typeof d=="function"){let u,c=eie(d,i,l=>{if(l!=null)throw new Yne("nully","body",l)},l=>{tw(u,l)});return u=new qp({objectMode:!0,readable:!1,write:o,final(l){s(async()=>{try{await c,FB.nextTick(l,null)}catch(m){FB.nextTick(l,m)}})},destroy:a})}throw new Yne("Iterable, AsyncIterable or AsyncFunction",r,i)}if(z7e(e))return t(e.arrayBuffer());if(zne(e))return Xne(qp,e,{objectMode:!0,writable:!1});if(Hne(e?.readable)&&Vne(e?.writable))return qp.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?Gne(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?Wne(e?.writable)?e?.writable:t(e.writable):void 0;return ew({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return eie(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{tw(i,o)}),i=new qp({objectMode:!0,writable:!1,read(){}})}throw new q7e(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function W7e(t){let{promise:e,resolve:r}=Zne(),n=new G7e,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:d,cb:u}=await s;if(FB.nextTick(u),d)return;if(i.aborted)throw new tie(void 0,{cause:i.reason});({promise:e,resolve:r}=Zne()),yield a}}(),{signal:i}),write(s,a,d){let u=r;r=null,u({chunk:s,done:!1,cb:d})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function ew(t){let e=t.readable&&typeof t.readable.read!="function"?rie.wrap(t.readable):t.readable,r=t.writable,n=!!N7e(e),i=!!j7e(r),o,s,a,d,u;function c(l){let m=d;d=null,m?m(l):l&&u.destroy(l)}return u=new qp({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(Jne(r,l=>{i=!1,l&&tw(e,l),c(l)}),u._write=function(l,m,p){r.write(l,m)?p():o=p},u._final=function(l){r.end(),s=l},r.on("drain",function(){if(o){let l=o;o=null,l()}}),r.on("finish",function(){if(s){let l=s;s=null,l()}})),n&&(Jne(e,l=>{n=!1,l&&tw(e,l),c(l)}),e.on("readable",function(){if(a){let l=a;a=null,l()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let l=e.read();if(l===null){a=u._read;return}if(!u.push(l))return}}),u._destroy=function(l,m){!l&&d!==null&&(l=new tie),a=null,o=null,s=null,d===null?m(l):(d=m,tw(r,l),tw(e,l))},u}});var yl=W((lyt,aie)=>{"use strict";h();var{ObjectDefineProperties:H7e,ObjectGetOwnPropertyDescriptor:zf,ObjectKeys:V7e,ObjectSetPrototypeOf:oie}=Gn();aie.exports=du;var WB=dx(),sd=i4();oie(du.prototype,WB.prototype);oie(du,WB);{let t=V7e(sd.prototype);for(let e=0;e<t.length;e++){let r=t[e];du.prototype[r]||(du.prototype[r]=sd.prototype[r])}}function du(t){if(!(this instanceof du))return new du(t);WB.call(this,t),sd.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}H7e(du.prototype,{writable:{__proto__:null,...zf(sd.prototype,"writable")},writableHighWaterMark:{__proto__:null,...zf(sd.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...zf(sd.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...zf(sd.prototype,"writableBuffer")},writableLength:{__proto__:null,...zf(sd.prototype,"writableLength")},writableFinished:{__proto__:null,...zf(sd.prototype,"writableFinished")},writableCorked:{__proto__:null,...zf(sd.prototype,"writableCorked")},writableEnded:{__proto__:null,...zf(sd.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...zf(sd.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var zB;function sie(){return zB===void 0&&(zB={}),zB}du.fromWeb=function(t,e){return sie().newStreamDuplexFromReadableWritablePair(t,e)};du.toWeb=function(t){return sie().newReadableWritablePairFromDuplex(t)};var GB;du.from=function(t){return GB||(GB=iie()),GB(t,"body")}});var JB=W((hyt,die)=>{"use strict";h();var{ObjectSetPrototypeOf:cie,Symbol:J7e}=Gn();die.exports=Gf;var{ERR_METHOD_NOT_IMPLEMENTED:Y7e}=Xs().codes,VB=yl(),{getHighWaterMark:Z7e}=ax();cie(Gf.prototype,VB.prototype);cie(Gf,VB);var hx=J7e("kCallback");function Gf(t){if(!(this instanceof Gf))return new Gf(t);let e=t?Z7e(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),VB.call(this,t),this._readableState.sync=!1,this[hx]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",X7e)}function HB(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function X7e(){this._final!==HB&&HB.call(this)}Gf.prototype._final=HB;Gf.prototype._transform=function(t,e,r){throw new Y7e("_transform()")};Gf.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[hx]=r})};Gf.prototype._read=function(){if(this[hx]){let t=this[hx];this[hx]=null,t()}}});var ZB=W((myt,lie)=>{"use strict";h();var{ObjectSetPrototypeOf:uie}=Gn();lie.exports=rw;var YB=JB();uie(rw.prototype,YB.prototype);uie(rw,YB);function rw(t){if(!(this instanceof rw))return new rw(t);YB.call(this,t)}rw.prototype._transform=function(t,e,r){r(null,t)}});var c4=W((gyt,yie)=>{h();var px=ls(),{ArrayIsArray:Q7e,Promise:eMe,SymbolAsyncIterator:tMe,SymbolDispose:rMe}=Gn(),a4=Ff(),{once:nMe}=Ds(),iMe=_0(),fie=yl(),{aggregateTwoErrors:oMe,codes:{ERR_INVALID_ARG_TYPE:sC,ERR_INVALID_RETURN_VALUE:XB,ERR_MISSING_ARGS:sMe,ERR_STREAM_DESTROYED:aMe,ERR_STREAM_PREMATURE_CLOSE:cMe},AbortError:dMe}=Xs(),{validateFunction:uMe,validateAbortSignal:lMe}=Hv(),{isIterable:S0,isReadable:QB,isReadableNodeStream:s4,isNodeStream:hie,isTransformStream:nw,isWebStream:fMe,isReadableStream:eC,isReadableFinished:hMe}=pl(),pMe=globalThis.AbortController||Lf().AbortController,tC,rC,nC;function pie(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=a4(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,iMe.destroyer(t,o||new aMe("pipe")))},cleanup:i}}function mMe(t){return uMe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function iC(t){if(S0(t))return t;if(s4(t))return yMe(t);throw new sC("val",["Readable","Iterable","AsyncIterable"],t)}async function*yMe(t){rC||(rC=dx()),yield*rC.prototype[tMe].call(t)}async function o4(t,e,r,{end:n}){let i,o=null,s=u=>{if(u&&(i=u),o){let c=o;o=null,c()}},a=()=>new eMe((u,c)=>{i?c(i):o=()=>{i?c(i):u()}});e.on("drain",s);let d=a4(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&(e.end(),await a()),r()}catch(u){r(i!==u?oMe(i,u):u)}finally{d(),e.off("drain",s)}}async function oC(t,e,r,{end:n}){nw(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function gMe(...t){return mie(t,nMe(mMe(t)))}function mie(t,e,r){if(t.length===1&&Q7e(t[0])&&(t=t[0]),t.length<2)throw new sMe("streams");let n=new pMe,i=n.signal,o=r?.signal,s=[];lMe(o,"options.signal");function a(){g(new dMe)}nC=nC||Ds().addAbortListener;let d;o&&(d=nC(o,a));let u,c,l=[],m=0;function p(P){g(P,--m===0)}function g(P,$){var N;if(P&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=P),!(!u&&!$)){for(;l.length;)l.shift()(u);(N=d)===null||N===void 0||N[rMe](),n.abort(),$&&(u||s.forEach(L=>L()),px.nextTick(e,u,c))}}let b;for(let P=0;P<t.length;P++){let $=t[P],N=P<t.length-1,L=P>0,F=N||r?.end!==!1,U=P===t.length-1;if(hie($)){let G=function(q){q&&q.name!=="AbortError"&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(q)};var I=G;if(F){let{destroy:q,cleanup:T}=pie($,N,L);l.push(q),QB($)&&U&&s.push(T)}$.on("error",G),QB($)&&U&&s.push(()=>{$.removeListener("error",G)})}if(P===0)if(typeof $=="function"){if(b=$({signal:i}),!S0(b))throw new XB("Iterable, AsyncIterable or Stream","source",b)}else S0($)||s4($)||nw($)?b=$:b=fie.from($);else if(typeof $=="function"){if(nw(b)){var S;b=iC((S=b)===null||S===void 0?void 0:S.readable)}else b=iC(b);if(b=$(b,{signal:i}),N){if(!S0(b,!0))throw new XB("AsyncIterable",`transform[${P-1}]`,b)}else{var A;tC||(tC=ZB());let G=new tC({objectMode:!0}),q=(A=b)===null||A===void 0?void 0:A.then;if(typeof q=="function")m++,q.call(b,k=>{c=k,k!=null&&G.write(k),F&&G.end(),px.nextTick(p)},k=>{G.destroy(k),px.nextTick(p,k)});else if(S0(b,!0))m++,o4(b,G,p,{end:F});else if(eC(b)||nw(b)){let k=b.readable||b;m++,o4(k,G,p,{end:F})}else throw new XB("AsyncIterable or Promise","destination",b);b=G;let{destroy:T,cleanup:E}=pie(b,!1,!0);l.push(T),U&&s.push(E)}}else if(hie($)){if(s4(b)){m+=2;let G=bMe(b,$,p,{end:F});QB($)&&U&&s.push(G)}else if(nw(b)||eC(b)){let G=b.readable||b;m++,o4(G,$,p,{end:F})}else if(S0(b))m++,o4(b,$,p,{end:F});else throw new sC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=$}else if(fMe($)){if(s4(b))m++,oC(iC(b),$,p,{end:F});else if(eC(b)||S0(b))m++,oC(b,$,p,{end:F});else if(nw(b))m++,oC(b.readable,$,p,{end:F});else throw new sC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=$}else b=fie.from($)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&px.nextTick(a),b}function bMe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new cMe)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;hMe(t)?px.nextTick(s):t.once("end",s)}else r();return a4(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),a4(e,{readable:!1,writable:!0},r)}yie.exports={pipelineImpl:mie,pipeline:gMe}});var cC=W((vyt,xie)=>{"use strict";h();var{pipeline:vMe}=c4(),d4=yl(),{destroyer:wMe}=_0(),{isNodeStream:u4,isReadable:gie,isWritable:bie,isWebStream:aC,isTransformStream:A0,isWritableStream:vie,isReadableStream:wie}=pl(),{AbortError:_Me,codes:{ERR_INVALID_ARG_VALUE:_ie,ERR_MISSING_ARGS:xMe}}=Xs(),EMe=Ff();xie.exports=function(...e){if(e.length===0)throw new xMe("streams");if(e.length===1)return d4.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=d4.from(e[0])),typeof e[e.length-1]=="function"){let p=e.length-1;e[p]=d4.from(e[p])}for(let p=0;p<e.length;++p)if(!(!u4(e[p])&&!aC(e[p]))){if(p<e.length-1&&!(gie(e[p])||wie(e[p])||A0(e[p])))throw new _ie(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(bie(e[p])||vie(e[p])||A0(e[p])))throw new _ie(`streams[${p}]`,r[p],"must be writable")}let n,i,o,s,a;function d(p){let g=s;s=null,g?g(p):p?a.destroy(p):!m&&!l&&a.destroy()}let u=e[0],c=vMe(e,d),l=!!(bie(u)||vie(u)||A0(u)),m=!!(gie(c)||wie(c)||A0(c));if(a=new d4({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(c!=null&&c.readableObjectMode),writable:l,readable:m}),l){if(u4(u))a._write=function(g,b,S){u.write(g,b)?S():n=S},a._final=function(g){u.end(),i=g},u.on("drain",function(){if(n){let g=n;n=null,g()}});else if(aC(u)){let b=(A0(u)?u.writable:u).getWriter();a._write=async function(S,A,I){try{await b.ready,b.write(S).catch(()=>{}),I()}catch(P){I(P)}},a._final=async function(S){try{await b.ready,b.close().catch(()=>{}),i=S}catch(A){S(A)}}}let p=A0(c)?c.readable:c;EMe(p,()=>{if(i){let g=i;i=null,g()}})}if(m){if(u4(c))c.on("readable",function(){if(o){let p=o;o=null,p()}}),c.on("end",function(){a.push(null)}),a._read=function(){for(;;){let p=c.read();if(p===null){o=a._read;return}if(!a.push(p))return}};else if(aC(c)){let g=(A0(c)?c.readable:c).getReader();a._read=async function(){for(;;)try{let{value:b,done:S}=await g.read();if(!a.push(b))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(p,g){!p&&s!==null&&(p=new _Me),o=null,n=null,i=null,s===null?g(p):(s=g,u4(c)&&wMe(c,p))},a}});var Mie=W((_yt,lC)=>{"use strict";h();var SMe=globalThis.AbortController||Lf().AbortController,{codes:{ERR_INVALID_ARG_VALUE:AMe,ERR_INVALID_ARG_TYPE:mx,ERR_MISSING_ARGS:PMe,ERR_OUT_OF_RANGE:TMe},AbortError:gl}=Xs(),{validateAbortSignal:P0,validateInteger:Eie,validateObject:T0}=Hv(),IMe=Gn().Symbol("kWeak"),kMe=Gn().Symbol("kResistStopPropagation"),{finished:RMe}=Ff(),DMe=cC(),{addAbortSignalNoValidate:MMe}=sx(),{isWritable:BMe,isNodeStream:CMe}=pl(),{deprecate:OMe}=Ds(),{ArrayPrototypePush:$Me,Boolean:NMe,MathFloor:Sie,Number:jMe,NumberIsNaN:UMe,Promise:Aie,PromiseReject:Pie,PromiseResolve:KMe,PromisePrototypeThen:Tie,Symbol:kie}=Gn(),l4=kie("kEmpty"),Iie=kie("kEof");function qMe(t,e){if(e!=null&&T0(e,"options"),e?.signal!=null&&P0(e.signal,"options.signal"),CMe(t)&&!BMe(t))throw new AMe("stream",t,"must be writable");let r=DMe(this,t);return e!=null&&e.signal&&MMe(e.signal,r),r}function f4(t,e){if(typeof t!="function")throw new mx("fn",["Function","AsyncFunction"],t);e!=null&&T0(e,"options"),e?.signal!=null&&P0(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Sie(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Sie(e.highWaterMark)),Eie(r,"options.concurrency",1),Eie(n,"options.highWaterMark",0),n+=r,(async function*(){let o=Ds().AbortSignalAny([e?.signal].filter(NMe)),s=this,a=[],d={signal:o},u,c,l=!1,m=0;function p(){l=!0,g()}function g(){m-=1,b()}function b(){c&&!l&&m<r&&a.length<n&&(c(),c=null)}async function S(){try{for await(let A of s){if(l)return;if(o.aborted)throw new gl;try{if(A=t(A,d),A===l4)continue;A=KMe(A)}catch(I){A=Pie(I)}m+=1,Tie(A,g,p),a.push(A),u&&(u(),u=null),!l&&(a.length>=n||m>=r)&&await new Aie(I=>{c=I})}a.push(Iie)}catch(A){let I=Pie(A);Tie(I,g,p),a.push(I)}finally{l=!0,u&&(u(),u=null)}}S();try{for(;;){for(;a.length>0;){let A=await a[0];if(A===Iie)return;if(o.aborted)throw new gl;A!==l4&&(yield A),a.shift(),b()}await new Aie(A=>{u=A})}}finally{l=!0,c&&(c(),c=null)}}).call(this)}function LMe(t=void 0){return t!=null&&T0(t,"options"),t?.signal!=null&&P0(t.signal,"options.signal"),(async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new gl({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function Rie(t,e=void 0){for await(let r of uC.call(this,t,e))return!0;return!1}async function FMe(t,e=void 0){if(typeof t!="function")throw new mx("fn",["Function","AsyncFunction"],t);return!await Rie.call(this,async(...r)=>!await t(...r),e)}async function zMe(t,e){for await(let r of uC.call(this,t,e))return r}async function GMe(t,e){if(typeof t!="function")throw new mx("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),l4}for await(let n of f4.call(this,r,e));}function uC(t,e){if(typeof t!="function")throw new mx("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:l4}return f4.call(this,r,e)}var dC=class extends PMe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function WMe(t,e,r){var n;if(typeof t!="function")throw new mx("reducer",["Function","AsyncFunction"],t);r!=null&&T0(r,"options"),r?.signal!=null&&P0(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new gl(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await RMe(this.destroy(u)),u}let o=new SMe,s=o.signal;if(r!=null&&r.signal){let u={once:!0,[IMe]:this,[kMe]:!0};r.signal.addEventListener("abort",()=>o.abort(),u)}let a=!1;try{for await(let u of this){var d;if(a=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new gl;i?e=await t(e,u,{signal:s}):(e=u,i=!0)}if(!a&&!i)throw new dC}finally{o.abort()}return e}async function HMe(t){t!=null&&T0(t,"options"),t?.signal!=null&&P0(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new gl(void 0,{cause:t.signal.reason});$Me(e,n)}return e}function VMe(t,e){let r=f4.call(this,t,e);return(async function*(){for await(let i of r)yield*i}).call(this)}function Die(t){if(t=jMe(t),UMe(t))return 0;if(t<0)throw new TMe("number",">= 0",t);return t}function JMe(t,e=void 0){return e!=null&&T0(e,"options"),e?.signal!=null&&P0(e.signal,"options.signal"),t=Die(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new gl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new gl;t--<=0&&(yield o)}}).call(this)}function YMe(t,e=void 0){return e!=null&&T0(e,"options"),e?.signal!=null&&P0(e.signal,"options.signal"),t=Die(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new gl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new gl;if(t-- >0&&(yield o),t<=0)return}}).call(this)}lC.exports.streamReturningOperators={asIndexedPairs:OMe(LMe,"readable.asIndexedPairs will be removed in a future version."),drop:JMe,filter:uC,flatMap:VMe,map:f4,take:YMe,compose:qMe};lC.exports.promiseReturningOperators={every:FMe,forEach:GMe,reduce:WMe,toArray:HMe,some:Rie,find:zMe}});var fC=W((Eyt,Bie)=>{"use strict";h();var{ArrayPrototypePop:ZMe,Promise:XMe}=Gn(),{isIterable:QMe,isNodeStream:eBe,isWebStream:tBe}=pl(),{pipelineImpl:rBe}=c4(),{finished:nBe}=Ff();hC();function iBe(...t){return new XMe((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!eBe(o)&&!QMe(o)&&!tBe(o)){let s=ZMe(t);n=s.signal,i=s.end}rBe(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}Bie.exports={finished:nBe,pipeline:iBe}});var hC=W((Ayt,Lie)=>{h();var{Buffer:oBe}=Un(),{ObjectDefineProperty:Wf,ObjectKeys:$ie,ReflectApply:Nie}=Gn(),{promisify:{custom:jie}}=Ds(),{streamReturningOperators:Cie,promiseReturningOperators:Oie}=Mie(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Uie}}=Xs(),sBe=cC(),{setDefaultHighWaterMark:aBe,getDefaultHighWaterMark:cBe}=ax(),{pipeline:Kie}=c4(),{destroyer:dBe}=_0(),qie=Ff(),pC=fC(),yx=pl(),Mn=Lie.exports=W8().Stream;Mn.isDestroyed=yx.isDestroyed;Mn.isDisturbed=yx.isDisturbed;Mn.isErrored=yx.isErrored;Mn.isReadable=yx.isReadable;Mn.isWritable=yx.isWritable;Mn.Readable=dx();for(let t of $ie(Cie)){let r=function(...n){if(new.target)throw Uie();return Mn.Readable.from(Nie(e,this,n))};mC=r;let e=Cie[t];Wf(r,"name",{__proto__:null,value:e.name}),Wf(r,"length",{__proto__:null,value:e.length}),Wf(Mn.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var mC;for(let t of $ie(Oie)){let r=function(...i){if(new.target)throw Uie();return Nie(e,this,i)};mC=r;let e=Oie[t];Wf(r,"name",{__proto__:null,value:e.name}),Wf(r,"length",{__proto__:null,value:e.length}),Wf(Mn.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var mC;Mn.Writable=i4();Mn.Duplex=yl();Mn.Transform=JB();Mn.PassThrough=ZB();Mn.pipeline=Kie;var{addAbortSignal:uBe}=sx();Mn.addAbortSignal=uBe;Mn.finished=qie;Mn.destroy=dBe;Mn.compose=sBe;Mn.setDefaultHighWaterMark=aBe;Mn.getDefaultHighWaterMark=cBe;Wf(Mn,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return pC}});Wf(Kie,jie,{__proto__:null,enumerable:!0,get(){return pC.pipeline}});Wf(qie,jie,{__proto__:null,enumerable:!0,get(){return pC.finished}});Mn.Stream=Mn;Mn._isUint8Array=function(e){return e instanceof Uint8Array};Mn._uint8ArrayToBuffer=function(e){return oBe.from(e.buffer,e.byteOffset,e.byteLength)}});var h4=W((Tyt,_i)=>{"use strict";h();var Vi=hC(),lBe=fC(),fBe=Vi.Readable.destroy;_i.exports=Vi.Readable;_i.exports._uint8ArrayToBuffer=Vi._uint8ArrayToBuffer;_i.exports._isUint8Array=Vi._isUint8Array;_i.exports.isDisturbed=Vi.isDisturbed;_i.exports.isErrored=Vi.isErrored;_i.exports.isReadable=Vi.isReadable;_i.exports.Readable=Vi.Readable;_i.exports.Writable=Vi.Writable;_i.exports.Duplex=Vi.Duplex;_i.exports.Transform=Vi.Transform;_i.exports.PassThrough=Vi.PassThrough;_i.exports.addAbortSignal=Vi.addAbortSignal;_i.exports.finished=Vi.finished;_i.exports.destroy=Vi.destroy;_i.exports.destroy=fBe;_i.exports.pipeline=Vi.pipeline;_i.exports.compose=Vi.compose;Object.defineProperty(Vi,"promises",{configurable:!0,enumerable:!0,get(){return lBe}});_i.exports.Stream=Vi.Stream;_i.exports.default=_i.exports});var Wie=W((wC,_C)=>{h();(function(t,e){typeof wC=="object"&&typeof _C<"u"?_C.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.JSBI=e())})(wC,function(){"use strict";var t=Math.imul,e=Math.clz32;function r(U){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},r(U)}function n(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function i(U,G){for(var q,T=0;T<G.length;T++)q=G[T],q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,q.key,q)}function o(U,G,q){return G&&i(U.prototype,G),q&&i(U,q),Object.defineProperty(U,"prototype",{writable:!1}),U}function s(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),G&&d(U,G)}function a(U){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)},a(U)}function d(U,G){return d=Object.setPrototypeOf||function(q,T){return q.__proto__=T,q},d(U,G)}function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(){return c=u()?Reflect.construct:function(U,G,q){var T=[null];T.push.apply(T,G);var E=Function.bind.apply(U,T),k=new E;return q&&d(k,q.prototype),k},c.apply(null,arguments)}function l(U){return Function.toString.call(U).indexOf("[native code]")!==-1}function m(U){var G=typeof Map=="function"?new Map:void 0;return m=function(q){function T(){return c(q,arguments,a(this).constructor)}if(q===null||!l(q))return q;if(typeof q!="function")throw new TypeError("Super expression must either be null or a function");if(typeof G<"u"){if(G.has(q))return G.get(q);G.set(q,T)}return T.prototype=Object.create(q.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),d(T,q)},m(U)}function p(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function g(U,G){if(G&&(typeof G=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(U)}function b(U){var G=u();return function(){var q,T=a(U);if(G){var E=a(this).constructor;q=Reflect.construct(T,arguments,E)}else q=T.apply(this,arguments);return g(this,q)}}function S(U,G){return A(U)||I(U,G)||P(U,G)||N()}function A(U){if(Array.isArray(U))return U}function I(U,G){var q=U==null?null:typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(q!=null){var T,E,k=[],f=!0,y=!1;try{for(q=q.call(U);!(f=(T=q.next()).done)&&(k.push(T.value),!(G&&k.length===G));f=!0);}catch(w){y=!0,E=w}finally{try{f||q.return==null||q.return()}finally{if(y)throw E}}return k}}function P(U,G){if(U){if(typeof U=="string")return $(U,G);var q=Object.prototype.toString.call(U).slice(8,-1);return q==="Object"&&U.constructor&&(q=U.constructor.name),q==="Map"||q==="Set"?Array.from(U):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?$(U,G):void 0}}function $(U,G){(G==null||G>U.length)&&(G=U.length);for(var q=0,T=Array(G);q<G;q++)T[q]=U[q];return T}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(U,G){var q=typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(!q){if(Array.isArray(U)||(q=P(U))||G&&U&&typeof U.length=="number"){q&&(U=q);var T=0,E=function(){};return{s:E,n:function(){return T>=U.length?{done:!0}:{done:!1,value:U[T++]}},e:function(w){throw w},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k,f=!0,y=!1;return{s:function(){q=q.call(U)},n:function(){var w=q.next();return f=w.done,w},e:function(w){y=!0,k=w},f:function(){try{f||q.return==null||q.return()}finally{if(y)throw k}}}}var F=function(U){var G=Math.abs,q=Math.max,T=Math.floor;function E(f,y){var w;if(n(this,E),w=k.call(this,f),w.sign=y,Object.setPrototypeOf(p(w),E.prototype),f>E.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return w}s(E,U);var k=b(E);return o(E,[{key:"toDebugString",value:function(){var f,y=["BigInt["],w=L(this);try{for(w.s();!(f=w.n()).done;){var _=f.value;y.push((_&&(_>>>0).toString(16))+", ")}}catch(x){w.e(x)}finally{w.f()}return y.push("]"),y.join("")}},{key:"toString",value:function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>f||36<f)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":f&f-1?E.__toStringGeneric(this,f,!1):E.__toStringBasePowerOfTwo(this,f)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var f=new E(this.length,this.sign),y=0;y<this.length;y++)f[y]=this[y];return f}},{key:"__trim",value:function(){for(var f=this.length,y=this[f-1];y===0;)f--,y=this[f-1],this.pop();return f===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var f=0;f<this.length;f++)this[f]=0}},{key:"__clzmsd",value:function(){return E.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(f,y,w){w>this.length&&(w=this.length);for(var _=32767&f,x=f>>>15,v=0,D=y,K=0;K<w;K++){var M=this.__digit(K),j=32767&M,J=M>>>15,Z=E.__imul(j,_),V=E.__imul(j,x),H=E.__imul(J,_),X=E.__imul(J,x),ee=D+Z+v;v=ee>>>30,ee&=1073741823,ee+=((32767&V)<<15)+((32767&H)<<15),v+=ee>>>30,D=X+(V>>>15)+(H>>>15),this.__setDigit(K,1073741823&ee)}if(v!==0||D!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(f,y,w){for(var _,x=0,v=0;v<w;v++)_=this.__halfDigit(y+v)+f.__halfDigit(v)+x,x=_>>>15,this.__setHalfDigit(y+v,32767&_);return x}},{key:"__inplaceSub",value:function(f,y,w){var _=0;if(1&y){y>>=1;for(var x=this.__digit(y),v=32767&x,D=0;D<w-1>>>1;D++){var K=f.__digit(D),M=(x>>>15)-(32767&K)-_;_=1&M>>>15,this.__setDigit(y+D,(32767&M)<<15|32767&v),x=this.__digit(y+D+1),v=(32767&x)-(K>>>15)-_,_=1&v>>>15}var j=f.__digit(D),J=(x>>>15)-(32767&j)-_;if(_=1&J>>>15,this.__setDigit(y+D,(32767&J)<<15|32767&v),y+D+1>=this.length)throw new RangeError("out of bounds");!(1&w)&&(x=this.__digit(y+D+1),v=(32767&x)-(j>>>15)-_,_=1&v>>>15,this.__setDigit(y+f.length,1073709056&x|32767&v))}else{y>>=1;for(var Z=0;Z<f.length-1;Z++){var V=this.__digit(y+Z),H=f.__digit(Z),X=(32767&V)-(32767&H)-_;_=1&X>>>15;var ee=(V>>>15)-(H>>>15)-_;_=1&ee>>>15,this.__setDigit(y+Z,(32767&ee)<<15|32767&X)}var ue=this.__digit(y+Z),ae=f.__digit(Z),ce=(32767&ue)-(32767&ae)-_;_=1&ce>>>15;var pe=0;!(1&w)&&(pe=(ue>>>15)-(ae>>>15)-_,_=1&pe>>>15),this.__setDigit(y+Z,(32767&pe)<<15|32767&ce)}return _}},{key:"__inplaceRightShift",value:function(f){if(f!==0){for(var y,w=this.__digit(0)>>>f,_=this.length-1,x=0;x<_;x++)y=this.__digit(x+1),this.__setDigit(x,1073741823&y<<30-f|w),w=y>>>f;this.__setDigit(_,w)}}},{key:"__digit",value:function(f){return this[f]}},{key:"__unsignedDigit",value:function(f){return this[f]>>>0}},{key:"__setDigit",value:function(f,y){this[f]=0|y}},{key:"__setDigitGrow",value:function(f,y){this[f]=0|y}},{key:"__halfDigitLength",value:function(){var f=this.length;return 32767>=this.__unsignedDigit(f-1)?2*f-1:2*f}},{key:"__halfDigit",value:function(f){return 32767&this[f>>>1]>>>15*(1&f)}},{key:"__setHalfDigit",value:function(f,y){var w=f>>>1,_=this.__digit(w),x=1&f?32767&_|y<<15:1073709056&_|32767&y;this.__setDigit(w,x)}}],[{key:"BigInt",value:function(f){var y=Number.isFinite;if(typeof f=="number"){if(f===0)return E.__zero();if(E.__isOneDigitInt(f))return 0>f?E.__oneDigit(-f,!0):E.__oneDigit(f,!1);if(!y(f)||T(f)!==f)throw new RangeError("The number "+f+" cannot be converted to BigInt because it is not an integer");return E.__fromDouble(f)}if(typeof f=="string"){var w=E.__fromString(f);if(w===null)throw new SyntaxError("Cannot convert "+f+" to a BigInt");return w}if(typeof f=="boolean")return f===!0?E.__oneDigit(1,!1):E.__zero();if(r(f)==="object"){if(f.constructor===E)return f;var _=E.__toPrimitive(f);return E.BigInt(_)}throw new TypeError("Cannot convert "+f+" to a BigInt")}},{key:"toNumber",value:function(f){var y=f.length;if(y===0)return 0;if(y===1){var w=f.__unsignedDigit(0);return f.sign?-w:w}var _=f.__digit(y-1),x=E.__clz30(_),v=30*y-x;if(1024<v)return f.sign?-1/0:1/0;var D=v-1,K=_,M=y-1,j=x+3,J=j===32?0:K<<j;J>>>=12;var Z=j-12,V=12<=j?0:K<<20+j,H=20+j;for(0<Z&&0<M&&(M--,K=f.__digit(M),J|=K>>>30-Z,V=K<<Z+2,H=Z+2);0<H&&0<M;)M--,K=f.__digit(M),V|=30<=H?K<<H-30:K>>>30-H,H-=30;var X=E.__decideRounding(f,H,M,K);if((X===1||X===0&&(1&V)==1)&&(V=V+1>>>0,V===0&&(J++,J>>>20!=0&&(J=0,D++,1023<D))))return f.sign?-1/0:1/0;var ee=f.sign?-2147483648:0;return D=D+1023<<20,E.__kBitConversionInts[1]=ee|D|J,E.__kBitConversionInts[0]=V,E.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(f){if(f.length===0)return f;var y=f.__copy();return y.sign=!f.sign,y}},{key:"bitwiseNot",value:function(f){return f.sign?E.__absoluteSubOne(f).__trim():E.__absoluteAddOne(f,!0)}},{key:"exponentiate",value:function(f,y){if(y.sign)throw new RangeError("Exponent must be positive");if(y.length===0)return E.__oneDigit(1,!1);if(f.length===0)return f;if(f.length===1&&f.__digit(0)===1)return f.sign&&!(1&y.__digit(0))?E.unaryMinus(f):f;if(1<y.length)throw new RangeError("BigInt too big");var w=y.__unsignedDigit(0);if(w===1)return f;if(w>=E.__kMaxLengthBits)throw new RangeError("BigInt too big");if(f.length===1&&f.__digit(0)===2){var _=1+(0|w/30),x=f.sign&&(1&w)!=0,v=new E(_,x);v.__initializeDigits();var D=1<<w%30;return v.__setDigit(_-1,D),v}var K=null,M=f;for(1&w&&(K=f),w>>=1;w!==0;w>>=1)M=E.multiply(M,M),1&w&&(K===null?K=M:K=E.multiply(K,M));return K}},{key:"multiply",value:function(f,y){if(f.length===0)return f;if(y.length===0)return y;var w=f.length+y.length;30<=f.__clzmsd()+y.__clzmsd()&&w--;var _=new E(w,f.sign!==y.sign);_.__initializeDigits();for(var x=0;x<f.length;x++)E.__multiplyAccumulate(y,f.__digit(x),_,x);return _.__trim()}},{key:"divide",value:function(f,y){if(y.length===0)throw new RangeError("Division by zero");if(0>E.__absoluteCompare(f,y))return E.__zero();var w,_=f.sign!==y.sign,x=y.__unsignedDigit(0);if(y.length===1&&32767>=x){if(x===1)return _===f.sign?f:E.unaryMinus(f);w=E.__absoluteDivSmall(f,x,null)}else w=E.__absoluteDivLarge(f,y,!0,!1);return w.sign=_,w.__trim()}},{key:"remainder",value:function(y,w){if(w.length===0)throw new RangeError("Division by zero");if(0>E.__absoluteCompare(y,w))return y;var _=w.__unsignedDigit(0);if(w.length===1&&32767>=_){if(_===1)return E.__zero();var x=E.__absoluteModSmall(y,_);return x===0?E.__zero():E.__oneDigit(x,y.sign)}var v=E.__absoluteDivLarge(y,w,!1,!0);return v.sign=y.sign,v.__trim()}},{key:"add",value:function(f,y){var w=f.sign;return w===y.sign?E.__absoluteAdd(f,y,w):0<=E.__absoluteCompare(f,y)?E.__absoluteSub(f,y,w):E.__absoluteSub(y,f,!w)}},{key:"subtract",value:function(f,y){var w=f.sign;return w===y.sign?0<=E.__absoluteCompare(f,y)?E.__absoluteSub(f,y,w):E.__absoluteSub(y,f,!w):E.__absoluteAdd(f,y,w)}},{key:"leftShift",value:function(f,y){return y.length===0||f.length===0?f:y.sign?E.__rightShiftByAbsolute(f,y):E.__leftShiftByAbsolute(f,y)}},{key:"signedRightShift",value:function(f,y){return y.length===0||f.length===0?f:y.sign?E.__leftShiftByAbsolute(f,y):E.__rightShiftByAbsolute(f,y)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(f,y){return 0>E.__compareToBigInt(f,y)}},{key:"lessThanOrEqual",value:function(f,y){return 0>=E.__compareToBigInt(f,y)}},{key:"greaterThan",value:function(f,y){return 0<E.__compareToBigInt(f,y)}},{key:"greaterThanOrEqual",value:function(f,y){return 0<=E.__compareToBigInt(f,y)}},{key:"equal",value:function(f,y){if(f.sign!==y.sign||f.length!==y.length)return!1;for(var w=0;w<f.length;w++)if(f.__digit(w)!==y.__digit(w))return!1;return!0}},{key:"notEqual",value:function(f,y){return!E.equal(f,y)}},{key:"bitwiseAnd",value:function(f,y){if(!f.sign&&!y.sign)return E.__absoluteAnd(f,y).__trim();if(f.sign&&y.sign){var w=q(f.length,y.length)+1,_=E.__absoluteSubOne(f,w),x=E.__absoluteSubOne(y);return _=E.__absoluteOr(_,x,_),E.__absoluteAddOne(_,!0,_).__trim()}if(f.sign){var v=[y,f];f=v[0],y=v[1]}return E.__absoluteAndNot(f,E.__absoluteSubOne(y)).__trim()}},{key:"bitwiseXor",value:function(f,y){if(!f.sign&&!y.sign)return E.__absoluteXor(f,y).__trim();if(f.sign&&y.sign){var w=q(f.length,y.length),_=E.__absoluteSubOne(f,w),x=E.__absoluteSubOne(y);return E.__absoluteXor(_,x,_).__trim()}var v=q(f.length,y.length)+1;if(f.sign){var D=[y,f];f=D[0],y=D[1]}var K=E.__absoluteSubOne(y,v);return K=E.__absoluteXor(K,f,K),E.__absoluteAddOne(K,!0,K).__trim()}},{key:"bitwiseOr",value:function(f,y){var w=q(f.length,y.length);if(!f.sign&&!y.sign)return E.__absoluteOr(f,y).__trim();if(f.sign&&y.sign){var _=E.__absoluteSubOne(f,w),x=E.__absoluteSubOne(y);return _=E.__absoluteAnd(_,x,_),E.__absoluteAddOne(_,!0,_).__trim()}if(f.sign){var v=[y,f];f=v[0],y=v[1]}var D=E.__absoluteSubOne(y,w);return D=E.__absoluteAndNot(D,f,D),E.__absoluteAddOne(D,!0,D).__trim()}},{key:"asIntN",value:function(f,y){if(y.length===0)return y;if(f=T(f),0>f)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(f===0)return E.__zero();if(f>=E.__kMaxLengthBits)return y;var w=0|(f+29)/30;if(y.length<w)return y;var _=y.__unsignedDigit(w-1),x=1<<(f-1)%30;if(y.length===w&&_<x)return y;if((_&x)!==x)return E.__truncateToNBits(f,y);if(!y.sign)return E.__truncateAndSubFromPowerOfTwo(f,y,!0);if(!(_&x-1)){for(var v=w-2;0<=v;v--)if(y.__digit(v)!==0)return E.__truncateAndSubFromPowerOfTwo(f,y,!1);return y.length===w&&_===x?y:E.__truncateToNBits(f,y)}return E.__truncateAndSubFromPowerOfTwo(f,y,!1)}},{key:"asUintN",value:function(f,y){if(y.length===0)return y;if(f=T(f),0>f)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(f===0)return E.__zero();if(y.sign){if(f>E.__kMaxLengthBits)throw new RangeError("BigInt too big");return E.__truncateAndSubFromPowerOfTwo(f,y,!1)}if(f>=E.__kMaxLengthBits)return y;var w=0|(f+29)/30;if(y.length<w)return y;var _=f%30;if(y.length==w){if(_===0)return y;var x=y.__digit(w-1);if(!(x>>>_))return y}return E.__truncateToNBits(f,y)}},{key:"ADD",value:function(f,y){if(f=E.__toPrimitive(f),y=E.__toPrimitive(y),typeof f=="string")return typeof y!="string"&&(y=y.toString()),f+y;if(typeof y=="string")return f.toString()+y;if(f=E.__toNumeric(f),y=E.__toNumeric(y),E.__isBigInt(f)&&E.__isBigInt(y))return E.add(f,y);if(typeof f=="number"&&typeof y=="number")return f+y;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(f,y){return E.__compare(f,y,0)}},{key:"LE",value:function(f,y){return E.__compare(f,y,1)}},{key:"GT",value:function(f,y){return E.__compare(f,y,2)}},{key:"GE",value:function(f,y){return E.__compare(f,y,3)}},{key:"EQ",value:function(f,y){for(;;){if(E.__isBigInt(f))return E.__isBigInt(y)?E.equal(f,y):E.EQ(y,f);if(typeof f=="number"){if(E.__isBigInt(y))return E.__equalToNumber(y,f);if(r(y)!=="object")return f==y;y=E.__toPrimitive(y)}else if(typeof f=="string"){if(E.__isBigInt(y))return f=E.__fromString(f),f!==null&&E.equal(f,y);if(r(y)!=="object")return f==y;y=E.__toPrimitive(y)}else if(typeof f=="boolean"){if(E.__isBigInt(y))return E.__equalToNumber(y,+f);if(r(y)!=="object")return f==y;y=E.__toPrimitive(y)}else if(r(f)==="symbol"){if(E.__isBigInt(y))return!1;if(r(y)!=="object")return f==y;y=E.__toPrimitive(y)}else if(r(f)==="object"){if(r(y)==="object"&&y.constructor!==E)return f==y;f=E.__toPrimitive(f)}else return f==y}}},{key:"NE",value:function(f,y){return!E.EQ(f,y)}},{key:"DataViewGetBigInt64",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return E.asIntN(64,E.DataViewGetBigUint64(f,y,w))}},{key:"DataViewGetBigUint64",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0&&arguments[2],_=w?[4,0]:[0,4],x=S(_,2),v=x[0],D=x[1],K=f.getUint32(y+v,w),M=f.getUint32(y+D,w),j=new E(3,!1);return j.__setDigit(0,1073741823&M),j.__setDigit(1,(268435455&K)<<2|M>>>30),j.__setDigit(2,K>>>28),j.__trim()}},{key:"DataViewSetBigInt64",value:function(f,y,w){var _=3<arguments.length&&arguments[3]!==void 0&&arguments[3];E.DataViewSetBigUint64(f,y,w,_)}},{key:"DataViewSetBigUint64",value:function(f,y,w){var _=3<arguments.length&&arguments[3]!==void 0&&arguments[3];w=E.asUintN(64,w);var x=0,v=0;if(0<w.length&&(v=w.__digit(0),1<w.length)){var D=w.__digit(1);v|=D<<30,x=D>>>2,2<w.length&&(x|=w.__digit(2)<<28)}var K=_?[4,0]:[0,4],M=S(K,2),j=M[0],J=M[1];f.setUint32(y+j,x,_),f.setUint32(y+J,v,_)}},{key:"__zero",value:function(){return new E(0,!1)}},{key:"__oneDigit",value:function(f,y){var w=new E(1,y);return w.__setDigit(0,f),w}},{key:"__decideRounding",value:function(f,y,w,_){if(0<y)return-1;var x;if(0>y)x=-y-1;else{if(w===0)return-1;w--,_=f.__digit(w),x=29}var v=1<<x;if(!(_&v))return-1;if(v-=1,(_&v)!=0)return 1;for(;0<w;)if(w--,f.__digit(w)!==0)return 1;return 0}},{key:"__fromDouble",value:function(f){E.__kBitConversionDouble[0]=f;var y,w=2047&E.__kBitConversionInts[1]>>>20,_=w-1023,x=(0|_/30)+1,v=new E(x,0>f),D=1048575&E.__kBitConversionInts[1]|1048576,K=E.__kBitConversionInts[0],M=20,j=_%30,J=0;if(j<M){var Z=M-j;J=Z+32,y=D>>>Z,D=D<<32-Z|K>>>Z,K<<=32-Z}else if(j===M)J=32,y=D,D=K,K=0;else{var V=j-M;J=32-V,y=D<<V|K>>>32-V,D=K<<V,K=0}v.__setDigit(x-1,y);for(var H=x-2;0<=H;H--)0<J?(J-=30,y=D>>>2,D=D<<30|K>>>2,K<<=30):y=0,v.__setDigit(H,y);return v.__trim()}},{key:"__isWhitespace",value:function(f){return 13>=f&&9<=f||(159>=f?f==32:131071>=f?f==160||f==5760:196607>=f?(f&=131071,10>=f||f==40||f==41||f==47||f==95||f==4096):f==65279)}},{key:"__fromString",value:function(f){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,w=0,_=f.length,x=0;if(x===_)return E.__zero();for(var v=f.charCodeAt(x);E.__isWhitespace(v);){if(++x===_)return E.__zero();v=f.charCodeAt(x)}if(v===43){if(++x===_)return null;v=f.charCodeAt(x),w=1}else if(v===45){if(++x===_)return null;v=f.charCodeAt(x),w=-1}if(y===0){if(y=10,v===48){if(++x===_)return E.__zero();if(v=f.charCodeAt(x),v===88||v===120){if(y=16,++x===_)return null;v=f.charCodeAt(x)}else if(v===79||v===111){if(y=8,++x===_)return null;v=f.charCodeAt(x)}else if(v===66||v===98){if(y=2,++x===_)return null;v=f.charCodeAt(x)}}}else if(y===16&&v===48){if(++x===_)return E.__zero();if(v=f.charCodeAt(x),v===88||v===120){if(++x===_)return null;v=f.charCodeAt(x)}}if(w!==0&&y!==10)return null;for(;v===48;){if(++x===_)return E.__zero();v=f.charCodeAt(x)}var D=_-x,K=E.__kMaxBitsPerChar[y],M=E.__kBitsPerCharTableMultiplier-1;if(D>1073741824/K)return null;var j=K*D+M>>>E.__kBitsPerCharTableShift,J=new E(0|(j+29)/30,!1),Z=10>y?y:10,V=10<y?y-10:0;if(y&y-1){J.__initializeDigits();var pe=!1,Ee=0;do{for(var Ue,le=0,ge=1;;){if(Ue=void 0,v-48>>>0<Z)Ue=v-48;else if((32|v)-97>>>0<V)Ue=(32|v)-87;else{pe=!0;break}var ve=ge*y;if(1073741823<ve)break;if(ge=ve,le=le*y+Ue,Ee++,++x===_){pe=!0;break}v=f.charCodeAt(x)}M=30*E.__kBitsPerCharTableMultiplier-1;var Ce=0|(K*Ee+M>>>E.__kBitsPerCharTableShift)/30;J.__inplaceMultiplyAdd(ge,le,Ce)}while(!pe)}else{K>>=E.__kBitsPerCharTableShift;var H=[],X=[],ee=!1;do{for(var ue,ae=0,ce=0;;){if(ue=void 0,v-48>>>0<Z)ue=v-48;else if((32|v)-97>>>0<V)ue=(32|v)-87;else{ee=!0;break}if(ce+=K,ae=ae<<K|ue,++x===_){ee=!0;break}if(v=f.charCodeAt(x),30<ce+K)break}H.push(ae),X.push(ce)}while(!ee);E.__fillFromParts(J,H,X)}if(x!==_){if(!E.__isWhitespace(v))return null;for(x++;x<_;x++)if(v=f.charCodeAt(x),!E.__isWhitespace(v))return null}return J.sign=w===-1,J.__trim()}},{key:"__fillFromParts",value:function(f,y,w){for(var _=0,x=0,v=0,D=y.length-1;0<=D;D--){var K=y[D],M=w[D];x|=K<<v,v+=M,v===30?(f.__setDigit(_++,x),v=0,x=0):30<v&&(f.__setDigit(_++,1073741823&x),v-=30,x=K>>>M-v)}if(x!==0){if(_>=f.length)throw new Error("implementation bug");f.__setDigit(_++,x)}for(;_<f.length;_++)f.__setDigit(_,0)}},{key:"__toStringBasePowerOfTwo",value:function(f,y){var w=f.length,_=y-1;_=(85&_>>>1)+(85&_),_=(51&_>>>2)+(51&_),_=(15&_>>>4)+(15&_);var x=_,v=y-1,D=f.__digit(w-1),K=E.__clz30(D),M=0|(30*w-K+x-1)/x;if(f.sign&&M++,268435456<M)throw new Error("string too long");for(var j=Array(M),J=M-1,Z=0,V=0,H=0;H<w-1;H++){var X=f.__digit(H),ee=(Z|X<<V)&v;j[J--]=E.__kConversionChars[ee];var ue=x-V;for(Z=X>>>ue,V=30-ue;V>=x;)j[J--]=E.__kConversionChars[Z&v],Z>>>=x,V-=x}var ae=(Z|D<<V)&v;for(j[J--]=E.__kConversionChars[ae],Z=D>>>x-V;Z!==0;)j[J--]=E.__kConversionChars[Z&v],Z>>>=x;if(f.sign&&(j[J--]="-"),J!==-1)throw new Error("implementation bug");return j.join("")}},{key:"__toStringGeneric",value:function(f,y,w){var _=f.length;if(_===0)return"";if(_===1){var x=f.__unsignedDigit(0).toString(y);return w===!1&&f.sign&&(x="-"+x),x}var v=30*_-E.__clz30(f.__digit(_-1)),D=E.__kMaxBitsPerChar[y],K=D-1,M=v*E.__kBitsPerCharTableMultiplier;M+=K-1,M=0|M/K;var j,J,Z=M+1>>1,V=E.exponentiate(E.__oneDigit(y,!1),E.__oneDigit(Z,!1)),H=V.__unsignedDigit(0);if(V.length===1&&32767>=H){j=new E(f.length,!1),j.__initializeDigits();for(var X,ee=0,ue=2*f.length-1;0<=ue;ue--)X=ee<<15|f.__halfDigit(ue),j.__setHalfDigit(ue,0|X/H),ee=0|X%H;J=ee.toString(y)}else{var ae=E.__absoluteDivLarge(f,V,!0,!0);j=ae.quotient;var ce=ae.remainder.__trim();J=E.__toStringGeneric(ce,y,!0)}j.__trim();for(var pe=E.__toStringGeneric(j,y,!0);J.length<Z;)J="0"+J;return w===!1&&f.sign&&(pe="-"+pe),pe+J}},{key:"__unequalSign",value:function(f){return f?-1:1}},{key:"__absoluteGreater",value:function(f){return f?-1:1}},{key:"__absoluteLess",value:function(f){return f?1:-1}},{key:"__compareToBigInt",value:function(f,y){var w=f.sign;if(w!==y.sign)return E.__unequalSign(w);var _=E.__absoluteCompare(f,y);return 0<_?E.__absoluteGreater(w):0>_?E.__absoluteLess(w):0}},{key:"__compareToNumber",value:function(f,y){if(E.__isOneDigitInt(y)){var w=f.sign,_=0>y;if(w!==_)return E.__unequalSign(w);if(f.length===0){if(_)throw new Error("implementation bug");return y===0?0:-1}if(1<f.length)return E.__absoluteGreater(w);var x=G(y),v=f.__unsignedDigit(0);return v>x?E.__absoluteGreater(w):v<x?E.__absoluteLess(w):0}return E.__compareToDouble(f,y)}},{key:"__compareToDouble",value:function(f,y){if(y!==y)return y;if(y===1/0)return-1;if(y===-1/0)return 1;var w=f.sign;if(w!==0>y)return E.__unequalSign(w);if(y===0)throw new Error("implementation bug: should be handled elsewhere");if(f.length===0)return-1;E.__kBitConversionDouble[0]=y;var _=2047&E.__kBitConversionInts[1]>>>20;if(_==2047)throw new Error("implementation bug: handled elsewhere");var x=_-1023;if(0>x)return E.__absoluteGreater(w);var v=f.length,D=f.__digit(v-1),K=E.__clz30(D),M=30*v-K,j=x+1;if(M<j)return E.__absoluteLess(w);if(M>j)return E.__absoluteGreater(w);var J=1048576|1048575&E.__kBitConversionInts[1],Z=E.__kBitConversionInts[0],V=20,H=29-K;if(H!==(0|(M-1)%30))throw new Error("implementation bug");var X,ee=0;if(H<V){var ue=V-H;ee=ue+32,X=J>>>ue,J=J<<32-ue|Z>>>ue,Z<<=32-ue}else if(H===V)ee=32,X=J,J=Z,Z=0;else{var ae=H-V;ee=32-ae,X=J<<ae|Z>>>32-ae,J=Z<<ae,Z=0}if(D>>>=0,X>>>=0,D>X)return E.__absoluteGreater(w);if(D<X)return E.__absoluteLess(w);for(var ce=v-2;0<=ce;ce--){0<ee?(ee-=30,X=J>>>2,J=J<<30|Z>>>2,Z<<=30):X=0;var pe=f.__unsignedDigit(ce);if(pe>X)return E.__absoluteGreater(w);if(pe<X)return E.__absoluteLess(w)}if(J!==0||Z!==0){if(ee===0)throw new Error("implementation bug");return E.__absoluteLess(w)}return 0}},{key:"__equalToNumber",value:function(f,y){return E.__isOneDigitInt(y)?y===0?f.length===0:f.length===1&&f.sign===0>y&&f.__unsignedDigit(0)===G(y):E.__compareToDouble(f,y)===0}},{key:"__comparisonResultToBool",value:function(f,y){return y===0?0>f:y===1?0>=f:y===2?0<f:y===3?0<=f:void 0}},{key:"__compare",value:function(f,y,w){if(f=E.__toPrimitive(f),y=E.__toPrimitive(y),typeof f=="string"&&typeof y=="string")switch(w){case 0:return f<y;case 1:return f<=y;case 2:return f>y;case 3:return f>=y}if(E.__isBigInt(f)&&typeof y=="string")return y=E.__fromString(y),y!==null&&E.__comparisonResultToBool(E.__compareToBigInt(f,y),w);if(typeof f=="string"&&E.__isBigInt(y))return f=E.__fromString(f),f!==null&&E.__comparisonResultToBool(E.__compareToBigInt(f,y),w);if(f=E.__toNumeric(f),y=E.__toNumeric(y),E.__isBigInt(f)){if(E.__isBigInt(y))return E.__comparisonResultToBool(E.__compareToBigInt(f,y),w);if(typeof y!="number")throw new Error("implementation bug");return E.__comparisonResultToBool(E.__compareToNumber(f,y),w)}if(typeof f!="number")throw new Error("implementation bug");if(E.__isBigInt(y))return E.__comparisonResultToBool(E.__compareToNumber(y,f),2^w);if(typeof y!="number")throw new Error("implementation bug");return w===0?f<y:w===1?f<=y:w===2?f>y:w===3?f>=y:void 0}},{key:"__absoluteAdd",value:function(f,y,w){if(f.length<y.length)return E.__absoluteAdd(y,f,w);if(f.length===0)return f;if(y.length===0)return f.sign===w?f:E.unaryMinus(f);var _=f.length;(f.__clzmsd()===0||y.length===f.length&&y.__clzmsd()===0)&&_++;for(var x,v=new E(_,w),D=0,K=0;K<y.length;K++)x=f.__digit(K)+y.__digit(K)+D,D=x>>>30,v.__setDigit(K,1073741823&x);for(;K<f.length;K++){var M=f.__digit(K)+D;D=M>>>30,v.__setDigit(K,1073741823&M)}return K<v.length&&v.__setDigit(K,D),v.__trim()}},{key:"__absoluteSub",value:function(f,y,w){if(f.length===0)return f;if(y.length===0)return f.sign===w?f:E.unaryMinus(f);for(var _,x=new E(f.length,w),v=0,D=0;D<y.length;D++)_=f.__digit(D)-y.__digit(D)-v,v=1&_>>>30,x.__setDigit(D,1073741823&_);for(;D<f.length;D++){var K=f.__digit(D)-v;v=1&K>>>30,x.__setDigit(D,1073741823&K)}return x.__trim()}},{key:"__absoluteAddOne",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_=f.length;w===null?w=new E(_,y):w.sign=y;for(var x,v=1,D=0;D<_;D++)x=f.__digit(D)+v,v=x>>>30,w.__setDigit(D,1073741823&x);return v!==0&&w.__setDigitGrow(_,1),w}},{key:"__absoluteSubOne",value:function(f,y){var w=f.length;y=y||w;for(var _,x=new E(y,!1),v=1,D=0;D<w;D++)_=f.__digit(D)-v,v=1&_>>>30,x.__setDigit(D,1073741823&_);if(v!==0)throw new Error("implementation bug");for(var K=w;K<y;K++)x.__setDigit(K,0);return x}},{key:"__absoluteAnd",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_=f.length,x=y.length,v=x;if(_<x){v=_;var D=f,K=_;f=y,_=x,y=D,x=K}var M=v;w===null?w=new E(M,!1):M=w.length;for(var j=0;j<v;j++)w.__setDigit(j,f.__digit(j)&y.__digit(j));for(;j<M;j++)w.__setDigit(j,0);return w}},{key:"__absoluteAndNot",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_=f.length,x=y.length,v=x;_<x&&(v=_);var D=_;w===null?w=new E(D,!1):D=w.length;for(var K=0;K<v;K++)w.__setDigit(K,f.__digit(K)&~y.__digit(K));for(;K<_;K++)w.__setDigit(K,f.__digit(K));for(;K<D;K++)w.__setDigit(K,0);return w}},{key:"__absoluteOr",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_=f.length,x=y.length,v=x;if(_<x){v=_;var D=f,K=_;f=y,_=x,y=D,x=K}var M=_;w===null?w=new E(M,!1):M=w.length;for(var j=0;j<v;j++)w.__setDigit(j,f.__digit(j)|y.__digit(j));for(;j<_;j++)w.__setDigit(j,f.__digit(j));for(;j<M;j++)w.__setDigit(j,0);return w}},{key:"__absoluteXor",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_=f.length,x=y.length,v=x;if(_<x){v=_;var D=f,K=_;f=y,_=x,y=D,x=K}var M=_;w===null?w=new E(M,!1):M=w.length;for(var j=0;j<v;j++)w.__setDigit(j,f.__digit(j)^y.__digit(j));for(;j<_;j++)w.__setDigit(j,f.__digit(j));for(;j<M;j++)w.__setDigit(j,0);return w}},{key:"__absoluteCompare",value:function(f,y){var w=f.length-y.length;if(w!=0)return w;for(var _=f.length-1;0<=_&&f.__digit(_)===y.__digit(_);)_--;return 0>_?0:f.__unsignedDigit(_)>y.__unsignedDigit(_)?1:-1}},{key:"__multiplyAccumulate",value:function(f,y,w,_){if(y!==0){for(var x=32767&y,v=y>>>15,D=0,K=0,M=0;M<f.length;M++,_++){var j=w.__digit(_),J=f.__digit(M),Z=32767&J,V=J>>>15,H=E.__imul(Z,x),X=E.__imul(Z,v),ee=E.__imul(V,x),ue=E.__imul(V,v);j+=K+H+D,D=j>>>30,j&=1073741823,j+=((32767&X)<<15)+((32767&ee)<<15),D+=j>>>30,K=ue+(X>>>15)+(ee>>>15),w.__setDigit(_,1073741823&j)}for(;D!==0||K!==0;_++){var ae=w.__digit(_);ae+=D+K,K=0,D=ae>>>30,w.__setDigit(_,1073741823&ae)}}}},{key:"__internalMultiplyAdd",value:function(f,y,w,_,x){for(var v=w,D=0,K=0;K<_;K++){var M=f.__digit(K),j=E.__imul(32767&M,y),J=E.__imul(M>>>15,y),Z=j+((32767&J)<<15)+D+v;v=Z>>>30,D=J>>>15,x.__setDigit(K,1073741823&Z)}if(x.length>_)for(x.__setDigit(_++,v+D);_<x.length;)x.__setDigit(_++,0);else if(v+D!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(f,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;w===null&&(w=new E(f.length,!1));for(var _=0,x=2*f.length-1;0<=x;x-=2){var v=(_<<15|f.__halfDigit(x))>>>0,D=0|v/y;_=0|v%y,v=(_<<15|f.__halfDigit(x-1))>>>0;var K=0|v/y;_=0|v%y,w.__setDigit(x>>>1,D<<15|K)}return w}},{key:"__absoluteModSmall",value:function(f,y){for(var w,_=0,x=2*f.length-1;0<=x;x--)w=(_<<15|f.__halfDigit(x))>>>0,_=0|w%y;return _}},{key:"__absoluteDivLarge",value:function(f,y,w,_){var x=y.__halfDigitLength(),v=y.length,D=f.__halfDigitLength()-x,K=null;w&&(K=new E(D+2>>>1,!1),K.__initializeDigits());var M=new E(x+2>>>1,!1);M.__initializeDigits();var j=E.__clz15(y.__halfDigit(x-1));0<j&&(y=E.__specialLeftShift(y,j,0));for(var J=E.__specialLeftShift(f,j,1),Z=y.__halfDigit(x-1),V=0,H=D;0<=H;H--){var X=32767,ee=J.__halfDigit(H+x);if(ee!==Z){var ue=(ee<<15|J.__halfDigit(H+x-1))>>>0;X=0|ue/Z;for(var ae=0|ue%Z,ce=y.__halfDigit(x-2),pe=J.__halfDigit(H+x-2);E.__imul(X,ce)>>>0>(ae<<16|pe)>>>0&&(X--,ae+=Z,!(32767<ae)););}E.__internalMultiplyAdd(y,X,0,v,M);var Ee=J.__inplaceSub(M,H,x+1);Ee!==0&&(Ee=J.__inplaceAdd(y,H,x),J.__setHalfDigit(H+x,32767&J.__halfDigit(H+x)+Ee),X--),w&&(1&H?V=X<<15:K.__setDigit(H>>>1,V|X))}if(_)return J.__inplaceRightShift(j),w?{quotient:K,remainder:J}:J;if(w)return K;throw new Error("unreachable")}},{key:"__clz15",value:function(f){return E.__clz30(f)-15}},{key:"__specialLeftShift",value:function(f,y,w){var _=f.length,x=new E(_+w,!1);if(y===0){for(var v=0;v<_;v++)x.__setDigit(v,f.__digit(v));return 0<w&&x.__setDigit(_,0),x}for(var D,K=0,M=0;M<_;M++)D=f.__digit(M),x.__setDigit(M,1073741823&D<<y|K),K=D>>>30-y;return 0<w&&x.__setDigit(_,K),x}},{key:"__leftShiftByAbsolute",value:function(f,y){var w=E.__toShiftAmount(y);if(0>w)throw new RangeError("BigInt too big");var _=0|w/30,x=w%30,v=f.length,D=x!==0&&f.__digit(v-1)>>>30-x!=0,K=v+_+(D?1:0),M=new E(K,f.sign);if(x===0){for(var j=0;j<_;j++)M.__setDigit(j,0);for(;j<K;j++)M.__setDigit(j,f.__digit(j-_))}else{for(var J=0,Z=0;Z<_;Z++)M.__setDigit(Z,0);for(var V,H=0;H<v;H++)V=f.__digit(H),M.__setDigit(H+_,1073741823&V<<x|J),J=V>>>30-x;if(D)M.__setDigit(v+_,J);else if(J!==0)throw new Error("implementation bug")}return M.__trim()}},{key:"__rightShiftByAbsolute",value:function(f,y){var w=f.length,_=f.sign,x=E.__toShiftAmount(y);if(0>x)return E.__rightShiftByMaximum(_);var v=0|x/30,D=x%30,K=w-v;if(0>=K)return E.__rightShiftByMaximum(_);var M=!1;if(_){if(f.__digit(v)&(1<<D)-1)M=!0;else for(var j=0;j<v;j++)if(f.__digit(j)!==0){M=!0;break}}if(M&&D===0){var J=f.__digit(w-1);!~J&&K++}var Z=new E(K,_);if(D===0){Z.__setDigit(K-1,0);for(var V=v;V<w;V++)Z.__setDigit(V-v,f.__digit(V))}else{for(var H,X=f.__digit(v)>>>D,ee=w-v-1,ue=0;ue<ee;ue++)H=f.__digit(ue+v+1),Z.__setDigit(ue,1073741823&H<<30-D|X),X=H>>>D;Z.__setDigit(ee,X)}return M&&(Z=E.__absoluteAddOne(Z,!0,Z)),Z.__trim()}},{key:"__rightShiftByMaximum",value:function(f){return f?E.__oneDigit(1,!0):E.__zero()}},{key:"__toShiftAmount",value:function(f){if(1<f.length)return-1;var y=f.__unsignedDigit(0);return y>E.__kMaxLengthBits?-1:y}},{key:"__toPrimitive",value:function(f){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(r(f)!=="object"||f.constructor===E)return f;if(typeof Symbol<"u"&&r(Symbol.toPrimitive)==="symbol"){var w=f[Symbol.toPrimitive];if(w){var _=w(y);if(r(_)!=="object")return _;throw new TypeError("Cannot convert object to primitive value")}}var x=f.valueOf;if(x){var v=x.call(f);if(r(v)!=="object")return v}var D=f.toString;if(D){var K=D.call(f);if(r(K)!=="object")return K}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(f){return E.__isBigInt(f)?f:+f}},{key:"__isBigInt",value:function(f){return r(f)==="object"&&f!==null&&f.constructor===E}},{key:"__truncateToNBits",value:function(f,y){for(var w=0|(f+29)/30,_=new E(w,y.sign),x=w-1,v=0;v<x;v++)_.__setDigit(v,y.__digit(v));var D=y.__digit(x);if(f%30!=0){var K=32-f%30;D=D<<K>>>K}return _.__setDigit(x,D),_.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(f,y,w){for(var _=Math.min,x,v=0|(f+29)/30,D=new E(v,w),K=0,M=v-1,j=0,J=_(M,y.length);K<J;K++)x=0-y.__digit(K)-j,j=1&x>>>30,D.__setDigit(K,1073741823&x);for(;K<M;K++)D.__setDigit(K,0|1073741823&-j);var Z,V=M<y.length?y.__digit(M):0,H=f%30;if(H===0)Z=0-V-j,Z&=1073741823;else{var X=32-H;V=V<<X>>>X;var ee=1<<32-X;Z=ee-V-j,Z&=ee-1}return D.__setDigit(M,Z),D.__trim()}},{key:"__digitPow",value:function(f,y){for(var w=1;0<y;)1&y&&(w*=f),y>>>=1,f*=f;return w}},{key:"__isOneDigitInt",value:function(f){return(1073741823&f)===f}}]),E}(m(Array));return F.__kMaxLength=33554432,F.__kMaxLengthBits=F.__kMaxLength<<5,F.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],F.__kBitsPerCharTableShift=5,F.__kBitsPerCharTableMultiplier=1<<F.__kBitsPerCharTableShift,F.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],F.__kBitConversionBuffer=new ArrayBuffer(8),F.__kBitConversionDouble=new Float64Array(F.__kBitConversionBuffer),F.__kBitConversionInts=new Int32Array(F.__kBitConversionBuffer),F.__clz30=e?function(U){return e(U)-2}:function(U){var G=Math.LN2,q=Math.log;return U===0?30:0|29-(0|q(U>>>0)/G)},F.__imul=t||function(U,G){return 0|U*G},F})});var eE=W(zr=>{"use strict";h();Object.defineProperty(zr,"__esModule",{value:!0});zr.regexpCode=zr.getEsmExportName=zr.getProperty=zr.safeStringify=zr.stringify=zr.strConcat=zr.addCodeArg=zr.str=zr._=zr.nil=zr._Code=zr.Name=zr.IDENTIFIER=zr._CodeOrName=void 0;var Xx=class{};zr._CodeOrName=Xx;zr.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var H0=class extends Xx{constructor(e){if(super(),!zr.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};zr.Name=H0;var ud=class extends Xx{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof H0&&(r[n.str]=(r[n.str]||0)+1),r),{})}};zr._Code=ud;zr.nil=new ud("");function Kse(t,...e){let r=[t[0]],n=0;for(;n<e.length;)DO(r,e[n]),r.push(t[++n]);return new ud(r)}zr._=Kse;var RO=new ud("+");function qse(t,...e){let r=[Qx(t[0])],n=0;for(;n<e.length;)r.push(RO),DO(r,e[n]),r.push(RO,Qx(t[++n]));return lCe(r),new ud(r)}zr.str=qse;function DO(t,e){e instanceof ud?t.push(...e._items):e instanceof H0?t.push(e):t.push(pCe(e))}zr.addCodeArg=DO;function lCe(t){let e=1;for(;e<t.length-1;){if(t[e]===RO){let r=fCe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function fCe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof H0||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof H0))return`"${t}${e.slice(1)}`}function hCe(t,e){return e.emptyStr()?t:t.emptyStr()?e:qse`${t}${e}`}zr.strConcat=hCe;function pCe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Qx(Array.isArray(t)?t.join(","):t)}function mCe(t){return new ud(Qx(t))}zr.stringify=mCe;function Qx(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}zr.safeStringify=Qx;function yCe(t){return typeof t=="string"&&zr.IDENTIFIER.test(t)?new ud(`.${t}`):Kse`[${t}]`}zr.getProperty=yCe;function gCe(t){if(typeof t=="string"&&zr.IDENTIFIER.test(t))return new ud(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}zr.getEsmExportName=gCe;function bCe(t){return new ud(t.toString())}zr.regexpCode=bCe});var OO=W(ia=>{"use strict";h();Object.defineProperty(ia,"__esModule",{value:!0});ia.ValueScope=ia.ValueScopeName=ia.Scope=ia.varKinds=ia.UsedValueState=void 0;var Da=eE(),MO=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},BO;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(BO=ia.UsedValueState||(ia.UsedValueState={}));ia.varKinds={const:new Da.Name("const"),let:new Da.Name("let"),var:new Da.Name("var")};var cA=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Da.Name?e:this.name(e)}name(e){return new Da.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};ia.Scope=cA;var dA=class extends Da.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Da._)`.${new Da.Name(r)}[${n}]`}};ia.ValueScopeName=dA;var vCe=(0,Da._)`\n`,CO=class extends cA{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?vCe:Da.nil}}get(){return this._scope}name(e){return new dA(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:o}=i,s=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[o];if(a){let c=a.get(s);if(c)return c}else a=this._values[o]=new Map;a.set(s,i);let d=this._scope[o]||(this._scope[o]=[]),u=d.length;return d[u]=r.ref,i.setValue(r,{property:o,itemIndex:u}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Da._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let o=Da.nil;for(let s in e){let a=e[s];if(!a)continue;let d=n[s]=n[s]||new Map;a.forEach(u=>{if(d.has(u))return;d.set(u,BO.Started);let c=r(u);if(c){let l=this.opts.es5?ia.varKinds.var:ia.varKinds.const;o=(0,Da._)`${o}${l} ${u} = ${c};${this.opts._n}`}else if(c=i?.(u))o=(0,Da._)`${o}${c}${this.opts._n}`;else throw new MO(u);d.set(u,BO.Completed)})}return o}};ia.ValueScope=CO});var Qt=W(yr=>{"use strict";h();Object.defineProperty(yr,"__esModule",{value:!0});yr.or=yr.and=yr.not=yr.CodeGen=yr.operators=yr.varKinds=yr.ValueScopeName=yr.ValueScope=yr.Scope=yr.Name=yr.regexpCode=yr.stringify=yr.getProperty=yr.nil=yr.strConcat=yr.str=yr._=void 0;var Nr=eE(),yu=OO(),sm=eE();Object.defineProperty(yr,"_",{enumerable:!0,get:function(){return sm._}});Object.defineProperty(yr,"str",{enumerable:!0,get:function(){return sm.str}});Object.defineProperty(yr,"strConcat",{enumerable:!0,get:function(){return sm.strConcat}});Object.defineProperty(yr,"nil",{enumerable:!0,get:function(){return sm.nil}});Object.defineProperty(yr,"getProperty",{enumerable:!0,get:function(){return sm.getProperty}});Object.defineProperty(yr,"stringify",{enumerable:!0,get:function(){return sm.stringify}});Object.defineProperty(yr,"regexpCode",{enumerable:!0,get:function(){return sm.regexpCode}});Object.defineProperty(yr,"Name",{enumerable:!0,get:function(){return sm.Name}});var hA=OO();Object.defineProperty(yr,"Scope",{enumerable:!0,get:function(){return hA.Scope}});Object.defineProperty(yr,"ValueScope",{enumerable:!0,get:function(){return hA.ValueScope}});Object.defineProperty(yr,"ValueScopeName",{enumerable:!0,get:function(){return hA.ValueScopeName}});Object.defineProperty(yr,"varKinds",{enumerable:!0,get:function(){return hA.varKinds}});yr.operators={GT:new Nr._Code(">"),GTE:new Nr._Code(">="),LT:new Nr._Code("<"),LTE:new Nr._Code("<="),EQ:new Nr._Code("==="),NEQ:new Nr._Code("!=="),NOT:new Nr._Code("!"),OR:new Nr._Code("||"),AND:new Nr._Code("&&"),ADD:new Nr._Code("+")};var sh=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},$O=class extends sh{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?yu.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Rw(this.rhs,e,r)),this}get names(){return this.rhs instanceof Nr._CodeOrName?this.rhs.names:{}}},uA=class extends sh{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Nr.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Rw(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Nr.Name?{}:{...this.lhs.names};return fA(e,this.rhs)}},NO=class extends uA{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},jO=class extends sh{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},UO=class extends sh{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},KO=class extends sh{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},qO=class extends sh{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Rw(this.code,e,r),this}get names(){return this.code instanceof Nr._CodeOrName?this.code.names:{}}},tE=class extends sh{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let o=n[i];o.optimizeNames(e,r)||(wCe(e,o.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Y0(e,r.names),{})}},ah=class extends tE{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},LO=class extends tE{},kw=class extends ah{};kw.kind="else";var V0=class t extends ah{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new kw(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(Lse(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Rw(this.condition,e,r),this}get names(){let e=super.names;return fA(e,this.condition),this.else&&Y0(e,this.else.names),e}};V0.kind="if";var J0=class extends ah{};J0.kind="for";var FO=class extends J0{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Rw(this.iteration,e,r),this}get names(){return Y0(super.names,this.iteration.names)}},zO=class extends J0{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?yu.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${r} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){let e=fA(super.names,this.from);return fA(e,this.to)}},lA=class extends J0{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Rw(this.iterable,e,r),this}get names(){return Y0(super.names,this.iterable.names)}},rE=class extends ah{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};rE.kind="func";var nE=class extends tE{render(e){return"return "+super.render(e)}};nE.kind="return";var GO=class extends ah{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Y0(e,this.catch.names),this.finally&&Y0(e,this.finally.names),e}},iE=class extends ah{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};iE.kind="catch";var oE=class extends ah{render(e){return"finally"+super.render(e)}};oE.kind="finally";var WO=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new yu.Scope({parent:e}),this._nodes=[new LO]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let o=this._scope.toName(r);return n!==void 0&&i&&(this._constants[o.str]=n),this._leafNode(new $O(e,o,n)),o}const(e,r,n){return this._def(yu.varKinds.const,e,r,n)}let(e,r,n){return this._def(yu.varKinds.let,e,r,n)}var(e,r,n){return this._def(yu.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new uA(e,r,n))}add(e,r){return this._leafNode(new NO(e,yr.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Nr.nil&&this._leafNode(new qO(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,Nr.addCodeArg)(r,i));return r.push("}"),new Nr._Code(r)}if(e,r,n){if(this._blockNode(new V0(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new V0(e))}else(){return this._elseNode(new kw)}endIf(){return this._endBlockNode(V0,kw)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new FO(e),r)}forRange(e,r,n,i,o=this.opts.es5?yu.varKinds.var:yu.varKinds.let){let s=this._scope.toName(e);return this._for(new zO(o,s,r,n),()=>i(s))}forOf(e,r,n,i=yu.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let s=r instanceof Nr.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Nr._)`${s}.length`,a=>{this.var(o,(0,Nr._)`${s}[${a}]`),n(o)})}return this._for(new lA("of",i,o,r),()=>n(o))}forIn(e,r,n,i=this.opts.es5?yu.varKinds.var:yu.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Nr._)`Object.keys(${r})`,n);let o=this._scope.toName(e);return this._for(new lA("in",i,o,r),()=>n(o))}endFor(){return this._endBlockNode(J0)}label(e){return this._leafNode(new jO(e))}break(e){return this._leafNode(new UO(e))}return(e){let r=new nE;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(nE)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new GO;if(this._blockNode(i),this.code(e),r){let o=this.name("e");this._currNode=i.catch=new iE(o),r(o)}return n&&(this._currNode=i.finally=new oE,this.code(n)),this._endBlockNode(iE,oE)}throw(e){return this._leafNode(new KO(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Nr.nil,n,i){return this._blockNode(new rE(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(rE)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof V0))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};yr.CodeGen=WO;function Y0(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function fA(t,e){return e instanceof Nr._CodeOrName?Y0(t,e.names):t}function Rw(t,e,r){if(t instanceof Nr.Name)return n(t);if(!i(t))return t;return new Nr._Code(t._items.reduce((o,s)=>(s instanceof Nr.Name&&(s=n(s)),s instanceof Nr._Code?o.push(...s._items):o.push(s),o),[]));function n(o){let s=r[o.str];return s===void 0||e[o.str]!==1?o:(delete e[o.str],s)}function i(o){return o instanceof Nr._Code&&o._items.some(s=>s instanceof Nr.Name&&e[s.str]===1&&r[s.str]!==void 0)}}function wCe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Lse(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Nr._)`!${HO(t)}`}yr.not=Lse;var _Ce=Fse(yr.operators.AND);function xCe(...t){return t.reduce(_Ce)}yr.and=xCe;var ECe=Fse(yr.operators.OR);function SCe(...t){return t.reduce(ECe)}yr.or=SCe;function Fse(t){return(e,r)=>e===Nr.nil?r:r===Nr.nil?e:(0,Nr._)`${HO(e)} ${t} ${HO(r)}`}function HO(t){return t instanceof Nr.Name?t:(0,Nr._)`(${t})`}});var Ir=W(gr=>{"use strict";h();Object.defineProperty(gr,"__esModule",{value:!0});gr.checkStrictMode=gr.getErrorPath=gr.Type=gr.useFunc=gr.setEvaluated=gr.evaluatedPropsToName=gr.mergeEvaluated=gr.eachItem=gr.unescapeJsonPointer=gr.escapeJsonPointer=gr.escapeFragment=gr.unescapeFragment=gr.schemaRefOrVal=gr.schemaHasRulesButRef=gr.schemaHasRules=gr.checkUnknownRules=gr.alwaysValidSchema=gr.toHash=void 0;var xn=Qt(),ACe=eE();function PCe(t){let e={};for(let r of t)e[r]=!0;return e}gr.toHash=PCe;function TCe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Wse(t,e),!Hse(e,t.self.RULES.all))}gr.alwaysValidSchema=TCe;function Wse(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let o in e)i[o]||Zse(t,`unknown keyword: "${o}"`)}gr.checkUnknownRules=Wse;function Hse(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}gr.schemaHasRules=Hse;function ICe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}gr.schemaHasRulesButRef=ICe;function kCe({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,xn._)`${r}`}return(0,xn._)`${t}${e}${(0,xn.getProperty)(n)}`}gr.schemaRefOrVal=kCe;function RCe(t){return Vse(decodeURIComponent(t))}gr.unescapeFragment=RCe;function DCe(t){return encodeURIComponent(VO(t))}gr.escapeFragment=DCe;function VO(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}gr.escapeJsonPointer=VO;function Vse(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}gr.unescapeJsonPointer=Vse;function MCe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}gr.eachItem=MCe;function zse({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,o,s,a)=>{let d=s===void 0?o:s instanceof xn.Name?(o instanceof xn.Name?t(i,o,s):e(i,o,s),s):o instanceof xn.Name?(e(i,s,o),o):r(o,s);return a===xn.Name&&!(d instanceof xn.Name)?n(i,d):d}}gr.mergeEvaluated={props:zse({mergeNames:(t,e,r)=>t.if((0,xn._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,xn._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,xn._)`${r} || {}`).code((0,xn._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,xn._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,xn._)`${r} || {}`),JO(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Jse}),items:zse({mergeNames:(t,e,r)=>t.if((0,xn._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,xn._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,xn._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,xn._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Jse(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,xn._)`{}`);return e!==void 0&&JO(t,r,e),r}gr.evaluatedPropsToName=Jse;function JO(t,e,r){Object.keys(r).forEach(n=>t.assign((0,xn._)`${e}${(0,xn.getProperty)(n)}`,!0))}gr.setEvaluated=JO;var Gse={};function BCe(t,e){return t.scopeValue("func",{ref:e,code:Gse[e.code]||(Gse[e.code]=new ACe._Code(e.code))})}gr.useFunc=BCe;var Yse;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Yse=gr.Type||(gr.Type={}));function CCe(t,e,r){if(t instanceof xn.Name){let n=e===Yse.Num;return r?n?(0,xn._)`"[" + ${t} + "]"`:(0,xn._)`"['" + ${t} + "']"`:n?(0,xn._)`"/" + ${t}`:(0,xn._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,xn.getProperty)(t).toString():"/"+VO(t)}gr.getErrorPath=CCe;function Zse(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}gr.checkStrictMode=Zse});var ld=W(YO=>{"use strict";h();Object.defineProperty(YO,"__esModule",{value:!0});var Cs=Qt(),OCe={data:new Cs.Name("data"),valCxt:new Cs.Name("valCxt"),instancePath:new Cs.Name("instancePath"),parentData:new Cs.Name("parentData"),parentDataProperty:new Cs.Name("parentDataProperty"),rootData:new Cs.Name("rootData"),dynamicAnchors:new Cs.Name("dynamicAnchors"),vErrors:new Cs.Name("vErrors"),errors:new Cs.Name("errors"),this:new Cs.Name("this"),self:new Cs.Name("self"),scope:new Cs.Name("scope"),json:new Cs.Name("json"),jsonPos:new Cs.Name("jsonPos"),jsonLen:new Cs.Name("jsonLen"),jsonPart:new Cs.Name("jsonPart")};YO.default=OCe});var sE=W(Os=>{"use strict";h();Object.defineProperty(Os,"__esModule",{value:!0});Os.extendErrors=Os.resetErrorsCount=Os.reportExtraError=Os.reportError=Os.keyword$DataError=Os.keywordError=void 0;var Ur=Qt(),pA=Ir(),oa=ld();Os.keywordError={message:({keyword:t})=>(0,Ur.str)`must pass "${t}" keyword validation`};Os.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ur.str)`"${t}" keyword must be ${e} ($data)`:(0,Ur.str)`"${t}" keyword is invalid ($data)`};function $Ce(t,e=Os.keywordError,r,n){let{it:i}=t,{gen:o,compositeRule:s,allErrors:a}=i,d=eae(t,e,r);n??(s||a)?Xse(o,d):Qse(i,(0,Ur._)`[${d}]`)}Os.reportError=$Ce;function NCe(t,e=Os.keywordError,r){let{it:n}=t,{gen:i,compositeRule:o,allErrors:s}=n,a=eae(t,e,r);Xse(i,a),o||s||Qse(n,oa.default.vErrors)}Os.reportExtraError=NCe;function jCe(t,e){t.assign(oa.default.errors,e),t.if((0,Ur._)`${oa.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ur._)`${oa.default.vErrors}.length`,e),()=>t.assign(oa.default.vErrors,null)))}Os.resetErrorsCount=jCe;function UCe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let s=t.name("err");t.forRange("i",i,oa.default.errors,a=>{t.const(s,(0,Ur._)`${oa.default.vErrors}[${a}]`),t.if((0,Ur._)`${s}.instancePath === undefined`,()=>t.assign((0,Ur._)`${s}.instancePath`,(0,Ur.strConcat)(oa.default.instancePath,o.errorPath))),t.assign((0,Ur._)`${s}.schemaPath`,(0,Ur.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,Ur._)`${s}.schema`,r),t.assign((0,Ur._)`${s}.data`,n))})}Os.extendErrors=UCe;function Xse(t,e){let r=t.const("err",e);t.if((0,Ur._)`${oa.default.vErrors} === null`,()=>t.assign(oa.default.vErrors,(0,Ur._)`[${r}]`),(0,Ur._)`${oa.default.vErrors}.push(${r})`),t.code((0,Ur._)`${oa.default.errors}++`)}function Qse(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,Ur._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ur._)`${n}.errors`,e),r.return(!1))}var Z0={keyword:new Ur.Name("keyword"),schemaPath:new Ur.Name("schemaPath"),params:new Ur.Name("params"),propertyName:new Ur.Name("propertyName"),message:new Ur.Name("message"),schema:new Ur.Name("schema"),parentSchema:new Ur.Name("parentSchema")};function eae(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ur._)`{}`:KCe(t,e,r)}function KCe(t,e,r={}){let{gen:n,it:i}=t,o=[qCe(i,r),LCe(t,r)];return FCe(t,e,o),n.object(...o)}function qCe({errorPath:t},{instancePath:e}){let r=e?(0,Ur.str)`${t}${(0,pA.getErrorPath)(e,pA.Type.Str)}`:t;return[oa.default.instancePath,(0,Ur.strConcat)(oa.default.instancePath,r)]}function LCe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,Ur.str)`${e}/${t}`;return r&&(i=(0,Ur.str)`${i}${(0,pA.getErrorPath)(r,pA.Type.Str)}`),[Z0.schemaPath,i]}function FCe(t,{params:e,message:r},n){let{keyword:i,data:o,schemaValue:s,it:a}=t,{opts:d,propertyName:u,topSchemaRef:c,schemaPath:l}=a;n.push([Z0.keyword,i],[Z0.params,typeof e=="function"?e(t):e||(0,Ur._)`{}`]),d.messages&&n.push([Z0.message,typeof r=="function"?r(t):r]),d.verbose&&n.push([Z0.schema,s],[Z0.parentSchema,(0,Ur._)`${c}${l}`],[oa.default.data,o]),u&&n.push([Z0.propertyName,u])}});var rae=W(Dw=>{"use strict";h();Object.defineProperty(Dw,"__esModule",{value:!0});Dw.boolOrEmptySchema=Dw.topBoolOrEmptySchema=void 0;var zCe=sE(),GCe=Qt(),WCe=ld(),HCe={message:"boolean schema is false"};function VCe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?tae(t,!1):typeof r=="object"&&r.$async===!0?e.return(WCe.default.data):(e.assign((0,GCe._)`${n}.errors`,null),e.return(!0))}Dw.topBoolOrEmptySchema=VCe;function JCe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),tae(t)):r.var(e,!0)}Dw.boolOrEmptySchema=JCe;function tae(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,zCe.reportError)(i,HCe,void 0,e)}});var ZO=W(Mw=>{"use strict";h();Object.defineProperty(Mw,"__esModule",{value:!0});Mw.getRules=Mw.isJSONType=void 0;var YCe=["string","number","integer","boolean","null","object","array"],ZCe=new Set(YCe);function XCe(t){return typeof t=="string"&&ZCe.has(t)}Mw.isJSONType=XCe;function QCe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Mw.getRules=QCe});var XO=W(am=>{"use strict";h();Object.defineProperty(am,"__esModule",{value:!0});am.shouldUseRule=am.shouldUseGroup=am.schemaHasRulesForType=void 0;function eOe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&nae(t,n)}am.schemaHasRulesForType=eOe;function nae(t,e){return e.rules.some(r=>iae(t,r))}am.shouldUseGroup=nae;function iae(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}am.shouldUseRule=iae});var cE=W(es=>{"use strict";h();Object.defineProperty(es,"__esModule",{value:!0});es.reportTypeError=es.checkDataTypes=es.checkDataType=es.coerceAndCheckDataType=es.getJSONTypes=es.getSchemaTypes=es.DataType=void 0;var tOe=ZO(),rOe=XO(),nOe=sE(),rr=Qt(),oae=Ir(),aE;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(aE=es.DataType||(es.DataType={}));function iOe(t){let e=sae(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}es.getSchemaTypes=iOe;function sae(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(tOe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}es.getJSONTypes=sae;function oOe(t,e){let{gen:r,data:n,opts:i}=t,o=sOe(e,i.coerceTypes),s=e.length>0&&!(o.length===0&&e.length===1&&(0,rOe.schemaHasRulesForType)(t,e[0]));if(s){let a=e$(e,n,i.strictNumbers,aE.Wrong);r.if(a,()=>{o.length?aOe(t,e,o):t$(t)})}return s}es.coerceAndCheckDataType=oOe;var aae=new Set(["string","number","integer","boolean","null"]);function sOe(t,e){return e?t.filter(r=>aae.has(r)||e==="array"&&r==="array"):[]}function aOe(t,e,r){let{gen:n,data:i,opts:o}=t,s=n.let("dataType",(0,rr._)`typeof ${i}`),a=n.let("coerced",(0,rr._)`undefined`);o.coerceTypes==="array"&&n.if((0,rr._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,rr._)`${i}[0]`).assign(s,(0,rr._)`typeof ${i}`).if(e$(e,i,o.strictNumbers),()=>n.assign(a,i))),n.if((0,rr._)`${a} !== undefined`);for(let u of r)(aae.has(u)||u==="array"&&o.coerceTypes==="array")&&d(u);n.else(),t$(t),n.endIf(),n.if((0,rr._)`${a} !== undefined`,()=>{n.assign(i,a),cOe(t,a)});function d(u){switch(u){case"string":n.elseIf((0,rr._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,rr._)`"" + ${i}`).elseIf((0,rr._)`${i} === null`).assign(a,(0,rr._)`""`);return;case"number":n.elseIf((0,rr._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,rr._)`+${i}`);return;case"integer":n.elseIf((0,rr._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,rr._)`+${i}`);return;case"boolean":n.elseIf((0,rr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,rr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,rr._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,rr._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(a,(0,rr._)`[${i}]`)}}}function cOe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,rr._)`${e} !== undefined`,()=>t.assign((0,rr._)`${e}[${r}]`,n))}function QO(t,e,r,n=aE.Correct){let i=n===aE.Correct?rr.operators.EQ:rr.operators.NEQ,o;switch(t){case"null":return(0,rr._)`${e} ${i} null`;case"array":o=(0,rr._)`Array.isArray(${e})`;break;case"object":o=(0,rr._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=s((0,rr._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=s();break;default:return(0,rr._)`typeof ${e} ${i} ${t}`}return n===aE.Correct?o:(0,rr.not)(o);function s(a=rr.nil){return(0,rr.and)((0,rr._)`typeof ${e} == "number"`,a,r?(0,rr._)`isFinite(${e})`:rr.nil)}}es.checkDataType=QO;function e$(t,e,r,n){if(t.length===1)return QO(t[0],e,r,n);let i,o=(0,oae.toHash)(t);if(o.array&&o.object){let s=(0,rr._)`typeof ${e} != "object"`;i=o.null?s:(0,rr._)`!${e} || ${s}`,delete o.null,delete o.array,delete o.object}else i=rr.nil;o.number&&delete o.integer;for(let s in o)i=(0,rr.and)(i,QO(s,e,r,n));return i}es.checkDataTypes=e$;var dOe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,rr._)`{type: ${t}}`:(0,rr._)`{type: ${e}}`};function t$(t){let e=uOe(t);(0,nOe.reportError)(e,dOe)}es.reportTypeError=t$;function uOe(t){let{gen:e,data:r,schema:n}=t,i=(0,oae.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var dae=W(mA=>{"use strict";h();Object.defineProperty(mA,"__esModule",{value:!0});mA.assignDefaults=void 0;var Bw=Qt(),lOe=Ir();function fOe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)cae(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,o)=>cae(t,o,i.default))}mA.assignDefaults=fOe;function cae(t,e,r){let{gen:n,compositeRule:i,data:o,opts:s}=t;if(r===void 0)return;let a=(0,Bw._)`${o}${(0,Bw.getProperty)(e)}`;if(i){(0,lOe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let d=(0,Bw._)`${a} === undefined`;s.useDefaults==="empty"&&(d=(0,Bw._)`${d} || ${a} === null || ${a} === ""`),n.if(d,(0,Bw._)`${a} = ${(0,Bw.stringify)(r)}`)}});var fd=W(mn=>{"use strict";h();Object.defineProperty(mn,"__esModule",{value:!0});mn.validateUnion=mn.validateArray=mn.usePattern=mn.callValidateCode=mn.schemaProperties=mn.allSchemaProperties=mn.noPropertyInData=mn.propertyInData=mn.isOwnProperty=mn.hasPropFunc=mn.reportMissingProp=mn.checkMissingProp=mn.checkReportMissingProp=void 0;var Bn=Qt(),r$=Ir(),cm=ld(),hOe=Ir();function pOe(t,e){let{gen:r,data:n,it:i}=t;r.if(i$(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Bn._)`${e}`},!0),t.error()})}mn.checkReportMissingProp=pOe;function mOe({gen:t,data:e,it:{opts:r}},n,i){return(0,Bn.or)(...n.map(o=>(0,Bn.and)(i$(t,e,o,r.ownProperties),(0,Bn._)`${i} = ${o}`)))}mn.checkMissingProp=mOe;function yOe(t,e){t.setParams({missingProperty:e},!0),t.error()}mn.reportMissingProp=yOe;function uae(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Bn._)`Object.prototype.hasOwnProperty`})}mn.hasPropFunc=uae;function n$(t,e,r){return(0,Bn._)`${uae(t)}.call(${e}, ${r})`}mn.isOwnProperty=n$;function gOe(t,e,r,n){let i=(0,Bn._)`${e}${(0,Bn.getProperty)(r)} !== undefined`;return n?(0,Bn._)`${i} && ${n$(t,e,r)}`:i}mn.propertyInData=gOe;function i$(t,e,r,n){let i=(0,Bn._)`${e}${(0,Bn.getProperty)(r)} === undefined`;return n?(0,Bn.or)(i,(0,Bn.not)(n$(t,e,r))):i}mn.noPropertyInData=i$;function lae(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}mn.allSchemaProperties=lae;function bOe(t,e){return lae(e).filter(r=>!(0,r$.alwaysValidSchema)(t,e[r]))}mn.schemaProperties=bOe;function vOe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:o},it:s},a,d,u){let c=u?(0,Bn._)`${t}, ${e}, ${n}${i}`:e,l=[[cm.default.instancePath,(0,Bn.strConcat)(cm.default.instancePath,o)],[cm.default.parentData,s.parentData],[cm.default.parentDataProperty,s.parentDataProperty],[cm.default.rootData,cm.default.rootData]];s.opts.dynamicRef&&l.push([cm.default.dynamicAnchors,cm.default.dynamicAnchors]);let m=(0,Bn._)`${c}, ${r.object(...l)}`;return d!==Bn.nil?(0,Bn._)`${a}.call(${d}, ${m})`:(0,Bn._)`${a}(${m})`}mn.callValidateCode=vOe;var wOe=(0,Bn._)`new RegExp`;function _Oe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,o=i(r,n);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Bn._)`${i.code==="new RegExp"?wOe:(0,hOe.useFunc)(t,i)}(${r}, ${n})`})}mn.usePattern=_Oe;function xOe(t){let{gen:e,data:r,keyword:n,it:i}=t,o=e.name("valid");if(i.allErrors){let a=e.let("valid",!0);return s(()=>e.assign(a,!1)),a}return e.var(o,!0),s(()=>e.break()),o;function s(a){let d=e.const("len",(0,Bn._)`${r}.length`);e.forRange("i",0,d,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:r$.Type.Num},o),e.if((0,Bn.not)(o),a)})}}mn.validateArray=xOe;function EOe(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,r$.alwaysValidSchema)(i,d))&&!i.opts.unevaluated)return;let s=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((d,u)=>{let c=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(s,(0,Bn._)`${s} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,Bn.not)(s))})),t.result(s,()=>t.reset(),()=>t.error(!0))}mn.validateUnion=EOe});var pae=W(Ml=>{"use strict";h();Object.defineProperty(Ml,"__esModule",{value:!0});Ml.validateKeywordUsage=Ml.validSchemaType=Ml.funcKeywordCode=Ml.macroKeywordCode=void 0;var sa=Qt(),X0=ld(),SOe=fd(),AOe=sE();function POe(t,e){let{gen:r,keyword:n,schema:i,parentSchema:o,it:s}=t,a=e.macro.call(s.self,i,o,s),d=hae(r,n,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let u=r.name("valid");t.subschema({schema:a,schemaPath:sa.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:d,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Ml.macroKeywordCode=POe;function TOe(t,e){var r;let{gen:n,keyword:i,schema:o,parentSchema:s,$data:a,it:d}=t;kOe(d,e);let u=!a&&e.compile?e.compile.call(d.self,o,s,d):e.validate,c=hae(n,i,u),l=n.let("valid");t.block$data(l,m),t.ok((r=e.valid)!==null&&r!==void 0?r:l);function m(){if(e.errors===!1)b(),e.modifying&&fae(t),S(()=>t.error());else{let A=e.async?p():g();e.modifying&&fae(t),S(()=>IOe(t,A))}}function p(){let A=n.let("ruleErrs",null);return n.try(()=>b((0,sa._)`await `),I=>n.assign(l,!1).if((0,sa._)`${I} instanceof ${d.ValidationError}`,()=>n.assign(A,(0,sa._)`${I}.errors`),()=>n.throw(I))),A}function g(){let A=(0,sa._)`${c}.errors`;return n.assign(A,null),b(sa.nil),A}function b(A=e.async?(0,sa._)`await `:sa.nil){let I=d.opts.passContext?X0.default.this:X0.default.self,P=!("compile"in e&&!a||e.schema===!1);n.assign(l,(0,sa._)`${A}${(0,SOe.callValidateCode)(t,c,I,P)}`,e.modifying)}function S(A){var I;n.if((0,sa.not)((I=e.valid)!==null&&I!==void 0?I:l),A)}}Ml.funcKeywordCode=TOe;function fae(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,sa._)`${n.parentData}[${n.parentDataProperty}]`))}function IOe(t,e){let{gen:r}=t;r.if((0,sa._)`Array.isArray(${e})`,()=>{r.assign(X0.default.vErrors,(0,sa._)`${X0.default.vErrors} === null ? ${e} : ${X0.default.vErrors}.concat(${e})`).assign(X0.default.errors,(0,sa._)`${X0.default.vErrors}.length`),(0,AOe.extendErrors)(t)},()=>t.error())}function kOe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function hae(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,sa.stringify)(r)})}function ROe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ml.validSchemaType=ROe;function DOe({schema:t,opts:e,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let s=i.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[o])){let d=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}Ml.validateKeywordUsage=DOe});var yae=W(dm=>{"use strict";h();Object.defineProperty(dm,"__esModule",{value:!0});dm.extendSubschemaMode=dm.extendSubschemaData=dm.getSubschema=void 0;var Bl=Qt(),mae=Ir();function MOe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Bl._)`${t.schemaPath}${(0,Bl.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Bl._)`${t.schemaPath}${(0,Bl.getProperty)(e)}${(0,Bl.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,mae.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}dm.getSubschema=MOe;function BOe(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:o,propertyName:s}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:u,dataPathArr:c,opts:l}=e,m=a.let("data",(0,Bl._)`${e.data}${(0,Bl.getProperty)(r)}`,!0);d(m),t.errorPath=(0,Bl.str)`${u}${(0,mae.getErrorPath)(r,n,l.jsPropertySyntax)}`,t.parentDataProperty=(0,Bl._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){let u=i instanceof Bl.Name?i:a.let("data",i,!0);d(u),s!==void 0&&(t.propertyName=s)}o&&(t.dataTypes=o);function d(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}dm.extendSubschemaData=BOe;function COe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}dm.extendSubschemaMode=COe});var o$=W(($vt,gae)=>{"use strict";h();gae.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});var vae=W((jvt,bae)=>{"use strict";h();var um=bae.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};yA(e,n,i,t,"",t)};um.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};um.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};um.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};um.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yA(t,e,r,n,i,o,s,a,d,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,s,a,d,u);for(var c in n){var l=n[c];if(Array.isArray(l)){if(c in um.arrayKeywords)for(var m=0;m<l.length;m++)yA(t,e,r,l[m],i+"/"+c+"/"+m,o,i,c,n,m)}else if(c in um.propsKeywords){if(l&&typeof l=="object")for(var p in l)yA(t,e,r,l[p],i+"/"+c+"/"+OOe(p),o,i,c,n,p)}else(c in um.keywords||t.allKeys&&!(c in um.skipKeywords))&&yA(t,e,r,l,i+"/"+c,o,i,c,n)}r(n,i,o,s,a,d,u)}}function OOe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var dE=W(Ma=>{"use strict";h();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.getSchemaRefs=Ma.resolveUrl=Ma.normalizeId=Ma._getFullPath=Ma.getFullPath=Ma.inlineRef=void 0;var $Oe=Ir(),NOe=o$(),jOe=vae(),UOe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function KOe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!s$(t):e?wae(t)<=e:!1}Ma.inlineRef=KOe;var qOe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function s$(t){for(let e in t){if(qOe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(s$)||typeof r=="object"&&s$(r))return!0}return!1}function wae(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!UOe.has(r)&&(typeof t[r]=="object"&&(0,$Oe.eachItem)(t[r],n=>e+=wae(n)),e===1/0))return 1/0}return e}function _ae(t,e="",r){r!==!1&&(e=Cw(e));let n=t.parse(e);return xae(t,n)}Ma.getFullPath=_ae;function xae(t,e){return t.serialize(e).split("#")[0]+"#"}Ma._getFullPath=xae;var LOe=/#\/?$/;function Cw(t){return t?t.replace(LOe,""):""}Ma.normalizeId=Cw;function FOe(t,e,r){return r=Cw(r),t.resolve(e,r)}Ma.resolveUrl=FOe;var zOe=/^[a-z_][-a-z0-9._]*$/i;function GOe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Cw(t[r]||e),o={"":i},s=_ae(n,i,!1),a={},d=new Set;return jOe(t,{allKeys:!0},(l,m,p,g)=>{if(g===void 0)return;let b=s+m,S=o[g];typeof l[r]=="string"&&(S=A.call(this,l[r])),I.call(this,l.$anchor),I.call(this,l.$dynamicAnchor),o[m]=S;function A(P){let $=this.opts.uriResolver.resolve;if(P=Cw(S?$(S,P):P),d.has(P))throw c(P);d.add(P);let N=this.refs[P];return typeof N=="string"&&(N=this.refs[N]),typeof N=="object"?u(l,N.schema,P):P!==Cw(b)&&(P[0]==="#"?(u(l,a[P],P),a[P]=l):this.refs[P]=b),P}function I(P){if(typeof P=="string"){if(!zOe.test(P))throw new Error(`invalid anchor "${P}"`);A.call(this,`#${P}`)}}}),a;function u(l,m,p){if(m!==void 0&&!NOe(l,m))throw c(p)}function c(l){return new Error(`reference "${l}" resolves to more than one schema`)}}Ma.getSchemaRefs=GOe});var fE=W(lm=>{"use strict";h();Object.defineProperty(lm,"__esModule",{value:!0});lm.getData=lm.KeywordCxt=lm.validateFunctionCode=void 0;var Tae=rae(),Eae=cE(),c$=XO(),gA=cE(),WOe=dae(),lE=pae(),a$=yae(),lt=Qt(),Ot=ld(),HOe=dE(),ch=Ir(),uE=sE();function VOe(t){if(Rae(t)&&(Dae(t),kae(t))){ZOe(t);return}Iae(t,()=>(0,Tae.topBoolOrEmptySchema)(t))}lm.validateFunctionCode=VOe;function Iae({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},o){i.code.es5?t.func(e,(0,lt._)`${Ot.default.data}, ${Ot.default.valCxt}`,n.$async,()=>{t.code((0,lt._)`"use strict"; ${Sae(r,i)}`),YOe(t,i),t.code(o)}):t.func(e,(0,lt._)`${Ot.default.data}, ${JOe(i)}`,n.$async,()=>t.code(Sae(r,i)).code(o))}function JOe(t){return(0,lt._)`{${Ot.default.instancePath}="", ${Ot.default.parentData}, ${Ot.default.parentDataProperty}, ${Ot.default.rootData}=${Ot.default.data}${t.dynamicRef?(0,lt._)`, ${Ot.default.dynamicAnchors}={}`:lt.nil}}={}`}function YOe(t,e){t.if(Ot.default.valCxt,()=>{t.var(Ot.default.instancePath,(0,lt._)`${Ot.default.valCxt}.${Ot.default.instancePath}`),t.var(Ot.default.parentData,(0,lt._)`${Ot.default.valCxt}.${Ot.default.parentData}`),t.var(Ot.default.parentDataProperty,(0,lt._)`${Ot.default.valCxt}.${Ot.default.parentDataProperty}`),t.var(Ot.default.rootData,(0,lt._)`${Ot.default.valCxt}.${Ot.default.rootData}`),e.dynamicRef&&t.var(Ot.default.dynamicAnchors,(0,lt._)`${Ot.default.valCxt}.${Ot.default.dynamicAnchors}`)},()=>{t.var(Ot.default.instancePath,(0,lt._)`""`),t.var(Ot.default.parentData,(0,lt._)`undefined`),t.var(Ot.default.parentDataProperty,(0,lt._)`undefined`),t.var(Ot.default.rootData,Ot.default.data),e.dynamicRef&&t.var(Ot.default.dynamicAnchors,(0,lt._)`{}`)})}function ZOe(t){let{schema:e,opts:r,gen:n}=t;Iae(t,()=>{r.$comment&&e.$comment&&Bae(t),r$e(t),n.let(Ot.default.vErrors,null),n.let(Ot.default.errors,0),r.unevaluated&&XOe(t),Mae(t),o$e(t)})}function XOe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,lt._)`${r}.evaluated`),e.if((0,lt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,lt._)`${t.evaluated}.props`,(0,lt._)`undefined`)),e.if((0,lt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,lt._)`${t.evaluated}.items`,(0,lt._)`undefined`))}function Sae(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,lt._)`/*# sourceURL=${r} */`:lt.nil}function QOe(t,e){if(Rae(t)&&(Dae(t),kae(t))){e$e(t,e);return}(0,Tae.boolOrEmptySchema)(t,e)}function kae({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Rae(t){return typeof t.schema!="boolean"}function e$e(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&Bae(t),n$e(t),i$e(t);let o=n.const("_errs",Ot.default.errors);Mae(t,o),n.var(e,(0,lt._)`${o} === ${Ot.default.errors}`)}function Dae(t){(0,ch.checkUnknownRules)(t),t$e(t)}function Mae(t,e){if(t.opts.jtd)return Aae(t,[],!1,e);let r=(0,Eae.getSchemaTypes)(t.schema),n=(0,Eae.coerceAndCheckDataType)(t,r);Aae(t,r,!n,e)}function t$e(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ch.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function r$e(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ch.checkStrictMode)(t,"default is ignored in the schema root")}function n$e(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,HOe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function i$e(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Bae({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let o=r.$comment;if(i.$comment===!0)t.code((0,lt._)`${Ot.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let s=(0,lt.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,lt._)`${Ot.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function o$e(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:o}=t;r.$async?e.if((0,lt._)`${Ot.default.errors} === 0`,()=>e.return(Ot.default.data),()=>e.throw((0,lt._)`new ${i}(${Ot.default.vErrors})`)):(e.assign((0,lt._)`${n}.errors`,Ot.default.vErrors),o.unevaluated&&s$e(t),e.return((0,lt._)`${Ot.default.errors} === 0`))}function s$e({gen:t,evaluated:e,props:r,items:n}){r instanceof lt.Name&&t.assign((0,lt._)`${e}.props`,r),n instanceof lt.Name&&t.assign((0,lt._)`${e}.items`,n)}function Aae(t,e,r,n){let{gen:i,schema:o,data:s,allErrors:a,opts:d,self:u}=t,{RULES:c}=u;if(o.$ref&&(d.ignoreKeywordsWithRef||!(0,ch.schemaHasRulesButRef)(o,c))){i.block(()=>Oae(t,"$ref",c.all.$ref.definition));return}d.jtd||a$e(t,e),i.block(()=>{for(let m of c.rules)l(m);l(c.post)});function l(m){(0,c$.shouldUseGroup)(o,m)&&(m.type?(i.if((0,gA.checkDataType)(m.type,s,d.strictNumbers)),Pae(t,m),e.length===1&&e[0]===m.type&&r&&(i.else(),(0,gA.reportTypeError)(t)),i.endIf()):Pae(t,m),a||i.if((0,lt._)`${Ot.default.errors} === ${n||0}`))}}function Pae(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,WOe.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,c$.shouldUseRule)(n,o)&&Oae(t,o.keyword,o.definition,e.type)})}function a$e(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(c$e(t,e),t.opts.allowUnionTypes||d$e(t,e),u$e(t,t.dataTypes))}function c$e(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Cae(t.dataTypes,r)||d$(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),f$e(t,e)}}function d$e(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&d$(t,"use allowUnionTypes to allow union type keyword")}function u$e(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,c$.shouldUseRule)(t.schema,i)){let{type:o}=i.definition;o.length&&!o.some(s=>l$e(e,s))&&d$(t,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function l$e(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Cae(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function f$e(t,e){let r=[];for(let n of t.dataTypes)Cae(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function d$(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ch.checkStrictMode)(t,e,t.opts.strictTypes)}var bA=class{constructor(e,r,n){if((0,lE.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ch.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",$ae(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,lE.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ot.default.errors))}result(e,r,n){this.failResult((0,lt.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,lt.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,lt._)`${r} !== undefined && (${(0,lt.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?uE.reportExtraError:uE.reportError)(this,this.def.error,r)}$dataError(){(0,uE.reportError)(this,this.def.$dataError||uE.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,uE.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=lt.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=lt.nil,r=lt.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:o,def:s}=this;n.if((0,lt.or)((0,lt._)`${i} === undefined`,r)),e!==lt.nil&&n.assign(e,!0),(o.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==lt.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:o}=this;return(0,lt.or)(s(),a());function s(){if(n.length){if(!(r instanceof lt.Name))throw new Error("ajv implementation error");let d=Array.isArray(n)?n:[n];return(0,lt._)`${(0,gA.checkDataTypes)(d,r,o.opts.strictNumbers,gA.DataType.Wrong)}`}return lt.nil}function a(){if(i.validateSchema){let d=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,lt._)`!${d}(${r})`}return lt.nil}}subschema(e,r){let n=(0,a$.getSubschema)(this.it,e);(0,a$.extendSubschemaData)(n,this.it,e),(0,a$.extendSubschemaMode)(n,e);let i={...this.it,...n,items:void 0,props:void 0};return QOe(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ch.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ch.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,lt.Name)),!0}};lm.KeywordCxt=bA;function Oae(t,e,r,n){let i=new bA(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,lE.funcKeywordCode)(i,r):"macro"in r?(0,lE.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,lE.funcKeywordCode)(i,r)}var h$e=/^\/(?:[^~]|~0|~1)*$/,p$e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $ae(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,o;if(t==="")return Ot.default.rootData;if(t[0]==="/"){if(!h$e.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,o=Ot.default.rootData}else{let u=p$e.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(d("property/index",c));return n[e-c]}if(c>e)throw new Error(d("data",c));if(o=r[e-c],!i)return o}let s=o,a=i.split("/");for(let u of a)u&&(o=(0,lt._)`${o}${(0,lt.getProperty)((0,ch.unescapeJsonPointer)(u))}`,s=(0,lt._)`${s} && ${o}`);return s;function d(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}lm.getData=$ae});var vA=W(l$=>{"use strict";h();Object.defineProperty(l$,"__esModule",{value:!0});var u$=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};l$.default=u$});var wA=W(p$=>{"use strict";h();Object.defineProperty(p$,"__esModule",{value:!0});var f$=dE(),h$=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,f$.resolveUrl)(e,r,n),this.missingSchema=(0,f$.normalizeId)((0,f$.getFullPath)(e,this.missingRef))}};p$.default=h$});var hE=W(hd=>{"use strict";h();Object.defineProperty(hd,"__esModule",{value:!0});hd.resolveSchema=hd.getCompilingSchema=hd.resolveRef=hd.compileSchema=hd.SchemaEnv=void 0;var gu=Qt(),m$e=vA(),Q0=ld(),bu=dE(),Nae=Ir(),y$e=fE(),Ow=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,bu.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};hd.SchemaEnv=Ow;function y$(t){let e=jae.call(this,t);if(e)return e;let r=(0,bu.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new gu.CodeGen(this.scope,{es5:n,lines:i,ownProperties:o}),a;t.$async&&(a=s.scopeValue("Error",{ref:m$e.default,code:(0,gu._)`require("ajv/dist/runtime/validation_error").default`}));let d=s.scopeName("validate");t.validateName=d;let u={gen:s,allErrors:this.opts.allErrors,data:Q0.default.data,parentData:Q0.default.parentData,parentDataProperty:Q0.default.parentDataProperty,dataNames:[Q0.default.data],dataPathArr:[gu.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,gu.stringify)(t.schema)}:{ref:t.schema}),validateName:d,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:gu.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,gu._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,y$e.validateFunctionCode)(u),s.optimize(this.opts.code.optimize);let l=s.toString();c=`${s.scopeRefs(Q0.default.scope)}return ${l}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let p=new Function(`${Q0.default.self}`,`${Q0.default.scope}`,c)(this,this.scope.get());if(this.scope.value(d,{ref:p}),p.errors=null,p.schema=t.schema,p.schemaEnv=t,t.$async&&(p.$async=!0),this.opts.code.source===!0&&(p.source={validateName:d,validateCode:l,scopeValues:s._values}),this.opts.unevaluated){let{props:g,items:b}=u;p.evaluated={props:g instanceof gu.Name?void 0:g,items:b instanceof gu.Name?void 0:b,dynamicProps:g instanceof gu.Name,dynamicItems:b instanceof gu.Name},p.source&&(p.source.evaluated=(0,gu.stringify)(p.evaluated))}return t.validate=p,t}catch(l){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),l}finally{this._compilations.delete(t)}}hd.compileSchema=y$;function g$e(t,e,r){var n;r=(0,bu.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let o=w$e.call(this,t,r);if(o===void 0){let s=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;s&&(o=new Ow({schema:s,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=b$e.call(this,o)}hd.resolveRef=g$e;function b$e(t){return(0,bu.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:y$.call(this,t)}function jae(t){for(let e of this._compilations)if(v$e(e,t))return e}hd.getCompilingSchema=jae;function v$e(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function w$e(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||_A.call(this,t,e)}function _A(t,e){let r=this.opts.uriResolver.parse(e),n=(0,bu._getFullPath)(this.opts.uriResolver,r),i=(0,bu.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return m$.call(this,r,t);let o=(0,bu.normalizeId)(n),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){let a=_A.call(this,t,s);return typeof a?.schema!="object"?void 0:m$.call(this,r,a)}if(typeof s?.schema=="object"){if(s.validate||y$.call(this,s),o===(0,bu.normalizeId)(e)){let{schema:a}=s,{schemaId:d}=this.opts,u=a[d];return u&&(i=(0,bu.resolveUrl)(this.opts.uriResolver,i,u)),new Ow({schema:a,schemaId:d,root:t,baseId:i})}return m$.call(this,r,s)}}hd.resolveSchema=_A;var _$e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m$(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let d=r[(0,Nae.unescapeFragment)(a)];if(d===void 0)return;r=d;let u=typeof r=="object"&&r[this.opts.schemaId];!_$e.has(a)&&u&&(e=(0,bu.resolveUrl)(this.opts.uriResolver,e,u))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Nae.schemaHasRulesButRef)(r,this.RULES)){let a=(0,bu.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=_A.call(this,n,a)}let{schemaId:s}=this.opts;if(o=o||new Ow({schema:r,schemaId:s,root:n,baseId:e}),o.schema!==o.root.schema)return o}});var Uae=W((Yvt,x$e)=>{x$e.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var g$=W((xA,Kae)=>{h();(function(t,e){typeof xA=="object"&&typeof Kae<"u"?e(xA):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(xA,function(t){"use strict";function e(){for(var Q=arguments.length,Y=Array(Q),te=0;te<Q;te++)Y[te]=arguments[te];if(Y.length>1){Y[0]=Y[0].slice(0,-1);for(var re=Y.length-1,ie=1;ie<re;++ie)Y[ie]=Y[ie].slice(1,-1);return Y[re]=Y[re].slice(1),Y.join("")}else return Y[0]}function r(Q){return"(?:"+Q+")"}function n(Q){return Q===void 0?"undefined":Q===null?"null":Object.prototype.toString.call(Q).split(" ").pop().split("]").shift().toLowerCase()}function i(Q){return Q.toUpperCase()}function o(Q){return Q!=null?Q instanceof Array?Q:typeof Q.length!="number"||Q.split||Q.setInterval||Q.call?[Q]:Array.prototype.slice.call(Q):[]}function s(Q,Y){var te=Q;if(Y)for(var re in Y)te[re]=Y[re];return te}function a(Q){var Y="[A-Za-z]",te="[\\x0D]",re="[0-9]",ie="[\\x22]",$e=e(re,"[A-Fa-f]"),ke="[\\x0A]",Ne="[\\x20]",Ar=r(r("%[EFef]"+$e+"%"+$e+$e+"%"+$e+$e)+"|"+r("%[89A-Fa-f]"+$e+"%"+$e+$e)+"|"+r("%"+$e+$e)),jt="[\\:\\/\\?\\#\\[\\]\\@]",dt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Jr=e(jt,dt),an=Q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Wr=Q?"[\\uE000-\\uF8FF]":"[]",sr=e(Y,re,"[\\-\\.\\_\\~]",an),Yr=r(Y+e(Y,re,"[\\+\\-\\.]")+"*"),Rr=r(r(Ar+"|"+e(sr,dt,"[\\:]"))+"*"),Us=r(r("25[0-5]")+"|"+r("2[0-4]"+re)+"|"+r("1"+re+re)+"|"+r("[1-9]"+re)+"|"+re),gi=r(r("25[0-5]")+"|"+r("2[0-4]"+re)+"|"+r("1"+re+re)+"|"+r("0?[1-9]"+re)+"|0?0?"+re),Di=r(gi+"\\."+gi+"\\."+gi+"\\."+gi),Cr=r($e+"{1,4}"),bi=r(r(Cr+"\\:"+Cr)+"|"+Di),Mi=r(r(Cr+"\\:")+"{6}"+bi),oo=r("\\:\\:"+r(Cr+"\\:")+"{5}"+bi),Ks=r(r(Cr)+"?\\:\\:"+r(Cr+"\\:")+"{4}"+bi),Mo=r(r(r(Cr+"\\:")+"{0,1}"+Cr)+"?\\:\\:"+r(Cr+"\\:")+"{3}"+bi),Ga=r(r(r(Cr+"\\:")+"{0,2}"+Cr)+"?\\:\\:"+r(Cr+"\\:")+"{2}"+bi),jh=r(r(r(Cr+"\\:")+"{0,3}"+Cr)+"?\\:\\:"+Cr+"\\:"+bi),Uh=r(r(r(Cr+"\\:")+"{0,4}"+Cr)+"?\\:\\:"+bi),$u=r(r(r(Cr+"\\:")+"{0,5}"+Cr)+"?\\:\\:"+Cr),ob=r(r(r(Cr+"\\:")+"{0,6}"+Cr)+"?\\:\\:"),Xl=r([Mi,oo,Ks,Mo,Ga,jh,Uh,$u,ob].join("|")),sb=r(r(sr+"|"+Ar)+"+"),FI=r(Xl+"\\%25"+sb),sy=r(Xl+r("\\%25|\\%(?!"+$e+"{2})")+sb),E0e=r("[vV]"+$e+"+\\."+e(sr,dt,"[\\:]")+"+"),S0e=r("\\["+r(sy+"|"+Xl+"|"+E0e)+"\\]"),fq=r(r(Ar+"|"+e(sr,dt))+"*"),X1=r(S0e+"|"+Di+"(?!"+fq+")|"+fq),Q1=r(re+"*"),hq=r(r(Rr+"@")+"?"+X1+r("\\:"+Q1)+"?"),e2=r(Ar+"|"+e(sr,dt,"[\\:\\@]")),A0e=r(e2+"*"),pq=r(e2+"+"),P0e=r(r(Ar+"|"+e(sr,dt,"[\\@]"))+"+"),Ql=r(r("\\/"+A0e)+"*"),ab=r("\\/"+r(pq+Ql)+"?"),zI=r(P0e+Ql),uS=r(pq+Ql),cb="(?!"+e2+")",uYe=r(Ql+"|"+ab+"|"+zI+"|"+uS+"|"+cb),db=r(r(e2+"|"+e("[\\/\\?]",Wr))+"*"),t2=r(r(e2+"|[\\/\\?]")+"*"),mq=r(r("\\/\\/"+hq+Ql)+"|"+ab+"|"+uS+"|"+cb),T0e=r(Yr+"\\:"+mq+r("\\?"+db)+"?"+r("\\#"+t2)+"?"),I0e=r(r("\\/\\/"+hq+Ql)+"|"+ab+"|"+zI+"|"+cb),k0e=r(I0e+r("\\?"+db)+"?"+r("\\#"+t2)+"?"),lYe=r(T0e+"|"+k0e),fYe=r(Yr+"\\:"+mq+r("\\?"+db)+"?"),hYe="^("+Yr+")\\:"+r(r("\\/\\/("+r("("+Rr+")@")+"?("+X1+")"+r("\\:("+Q1+")")+"?)")+"?("+Ql+"|"+ab+"|"+uS+"|"+cb+")")+r("\\?("+db+")")+"?"+r("\\#("+t2+")")+"?$",pYe="^(){0}"+r(r("\\/\\/("+r("("+Rr+")@")+"?("+X1+")"+r("\\:("+Q1+")")+"?)")+"?("+Ql+"|"+ab+"|"+zI+"|"+cb+")")+r("\\?("+db+")")+"?"+r("\\#("+t2+")")+"?$",mYe="^("+Yr+")\\:"+r(r("\\/\\/("+r("("+Rr+")@")+"?("+X1+")"+r("\\:("+Q1+")")+"?)")+"?("+Ql+"|"+ab+"|"+uS+"|"+cb+")")+r("\\?("+db+")")+"?$",yYe="^"+r("\\#("+t2+")")+"?$",gYe="^"+r("("+Rr+")@")+"?("+X1+")"+r("\\:("+Q1+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",Y,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",sr,dt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",sr,dt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",sr,dt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",sr,dt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",sr,dt,"[\\:\\@\\/\\?]",Wr),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",sr,dt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",sr,dt),"g"),UNRESERVED:new RegExp(sr,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",sr,Jr),"g"),PCT_ENCODED:new RegExp(Ar,"g"),IPV4ADDRESS:new RegExp("^("+Di+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xl+")"+r(r("\\%25|\\%(?!"+$e+"{2})")+"("+sb+")")+"?\\]?$")}}var d=a(!1),u=a(!0),c=function(){function Q(Y,te){var re=[],ie=!0,$e=!1,ke=void 0;try{for(var Ne=Y[Symbol.iterator](),Ar;!(ie=(Ar=Ne.next()).done)&&(re.push(Ar.value),!(te&&re.length===te));ie=!0);}catch(jt){$e=!0,ke=jt}finally{try{!ie&&Ne.return&&Ne.return()}finally{if($e)throw ke}}return re}return function(Y,te){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return Q(Y,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(Q){if(Array.isArray(Q)){for(var Y=0,te=Array(Q.length);Y<Q.length;Y++)te[Y]=Q[Y];return te}else return Array.from(Q)},m=2147483647,p=36,g=1,b=26,S=38,A=700,I=72,P=128,$="-",N=/^xn--/,L=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=p-g,q=Math.floor,T=String.fromCharCode;function E(Q){throw new RangeError(U[Q])}function k(Q,Y){for(var te=[],re=Q.length;re--;)te[re]=Y(Q[re]);return te}function f(Q,Y){var te=Q.split("@"),re="";te.length>1&&(re=te[0]+"@",Q=te[1]),Q=Q.replace(F,".");var ie=Q.split("."),$e=k(ie,Y).join(".");return re+$e}function y(Q){for(var Y=[],te=0,re=Q.length;te<re;){var ie=Q.charCodeAt(te++);if(ie>=55296&&ie<=56319&&te<re){var $e=Q.charCodeAt(te++);($e&64512)==56320?Y.push(((ie&1023)<<10)+($e&1023)+65536):(Y.push(ie),te--)}else Y.push(ie)}return Y}var w=function(Y){return String.fromCodePoint.apply(String,l(Y))},_=function(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:p},x=function(Y,te){return Y+22+75*(Y<26)-((te!=0)<<5)},v=function(Y,te,re){var ie=0;for(Y=re?q(Y/A):Y>>1,Y+=q(Y/te);Y>G*b>>1;ie+=p)Y=q(Y/G);return q(ie+(G+1)*Y/(Y+S))},D=function(Y){var te=[],re=Y.length,ie=0,$e=P,ke=I,Ne=Y.lastIndexOf($);Ne<0&&(Ne=0);for(var Ar=0;Ar<Ne;++Ar)Y.charCodeAt(Ar)>=128&&E("not-basic"),te.push(Y.charCodeAt(Ar));for(var jt=Ne>0?Ne+1:0;jt<re;){for(var dt=ie,Jr=1,an=p;;an+=p){jt>=re&&E("invalid-input");var Wr=_(Y.charCodeAt(jt++));(Wr>=p||Wr>q((m-ie)/Jr))&&E("overflow"),ie+=Wr*Jr;var sr=an<=ke?g:an>=ke+b?b:an-ke;if(Wr<sr)break;var Yr=p-sr;Jr>q(m/Yr)&&E("overflow"),Jr*=Yr}var Rr=te.length+1;ke=v(ie-dt,Rr,dt==0),q(ie/Rr)>m-$e&&E("overflow"),$e+=q(ie/Rr),ie%=Rr,te.splice(ie++,0,$e)}return String.fromCodePoint.apply(String,te)},K=function(Y){var te=[];Y=y(Y);var re=Y.length,ie=P,$e=0,ke=I,Ne=!0,Ar=!1,jt=void 0;try{for(var dt=Y[Symbol.iterator](),Jr;!(Ne=(Jr=dt.next()).done);Ne=!0){var an=Jr.value;an<128&&te.push(T(an))}}catch(sy){Ar=!0,jt=sy}finally{try{!Ne&&dt.return&&dt.return()}finally{if(Ar)throw jt}}var Wr=te.length,sr=Wr;for(Wr&&te.push($);sr<re;){var Yr=m,Rr=!0,Us=!1,gi=void 0;try{for(var Di=Y[Symbol.iterator](),Cr;!(Rr=(Cr=Di.next()).done);Rr=!0){var bi=Cr.value;bi>=ie&&bi<Yr&&(Yr=bi)}}catch(sy){Us=!0,gi=sy}finally{try{!Rr&&Di.return&&Di.return()}finally{if(Us)throw gi}}var Mi=sr+1;Yr-ie>q((m-$e)/Mi)&&E("overflow"),$e+=(Yr-ie)*Mi,ie=Yr;var oo=!0,Ks=!1,Mo=void 0;try{for(var Ga=Y[Symbol.iterator](),jh;!(oo=(jh=Ga.next()).done);oo=!0){var Uh=jh.value;if(Uh<ie&&++$e>m&&E("overflow"),Uh==ie){for(var $u=$e,ob=p;;ob+=p){var Xl=ob<=ke?g:ob>=ke+b?b:ob-ke;if($u<Xl)break;var sb=$u-Xl,FI=p-Xl;te.push(T(x(Xl+sb%FI,0))),$u=q(sb/FI)}te.push(T(x($u,0))),ke=v($e,Mi,sr==Wr),$e=0,++sr}}}catch(sy){Ks=!0,Mo=sy}finally{try{!oo&&Ga.return&&Ga.return()}finally{if(Ks)throw Mo}}++$e,++ie}return te.join("")},M=function(Y){return f(Y,function(te){return N.test(te)?D(te.slice(4).toLowerCase()):te})},j=function(Y){return f(Y,function(te){return L.test(te)?"xn--"+K(te):te})},J={version:"2.1.0",ucs2:{decode:y,encode:w},decode:D,encode:K,toASCII:j,toUnicode:M},Z={};function V(Q){var Y=Q.charCodeAt(0),te=void 0;return Y<16?te="%0"+Y.toString(16).toUpperCase():Y<128?te="%"+Y.toString(16).toUpperCase():Y<2048?te="%"+(Y>>6|192).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase():te="%"+(Y>>12|224).toString(16).toUpperCase()+"%"+(Y>>6&63|128).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase(),te}function H(Q){for(var Y="",te=0,re=Q.length;te<re;){var ie=parseInt(Q.substr(te+1,2),16);if(ie<128)Y+=String.fromCharCode(ie),te+=3;else if(ie>=194&&ie<224){if(re-te>=6){var $e=parseInt(Q.substr(te+4,2),16);Y+=String.fromCharCode((ie&31)<<6|$e&63)}else Y+=Q.substr(te,6);te+=6}else if(ie>=224){if(re-te>=9){var ke=parseInt(Q.substr(te+4,2),16),Ne=parseInt(Q.substr(te+7,2),16);Y+=String.fromCharCode((ie&15)<<12|(ke&63)<<6|Ne&63)}else Y+=Q.substr(te,9);te+=9}else Y+=Q.substr(te,3),te+=3}return Y}function X(Q,Y){function te(re){var ie=H(re);return ie.match(Y.UNRESERVED)?ie:re}return Q.scheme&&(Q.scheme=String(Q.scheme).replace(Y.PCT_ENCODED,te).toLowerCase().replace(Y.NOT_SCHEME,"")),Q.userinfo!==void 0&&(Q.userinfo=String(Q.userinfo).replace(Y.PCT_ENCODED,te).replace(Y.NOT_USERINFO,V).replace(Y.PCT_ENCODED,i)),Q.host!==void 0&&(Q.host=String(Q.host).replace(Y.PCT_ENCODED,te).toLowerCase().replace(Y.NOT_HOST,V).replace(Y.PCT_ENCODED,i)),Q.path!==void 0&&(Q.path=String(Q.path).replace(Y.PCT_ENCODED,te).replace(Q.scheme?Y.NOT_PATH:Y.NOT_PATH_NOSCHEME,V).replace(Y.PCT_ENCODED,i)),Q.query!==void 0&&(Q.query=String(Q.query).replace(Y.PCT_ENCODED,te).replace(Y.NOT_QUERY,V).replace(Y.PCT_ENCODED,i)),Q.fragment!==void 0&&(Q.fragment=String(Q.fragment).replace(Y.PCT_ENCODED,te).replace(Y.NOT_FRAGMENT,V).replace(Y.PCT_ENCODED,i)),Q}function ee(Q){return Q.replace(/^0*(.*)/,"$1")||"0"}function ue(Q,Y){var te=Q.match(Y.IPV4ADDRESS)||[],re=c(te,2),ie=re[1];return ie?ie.split(".").map(ee).join("."):Q}function ae(Q,Y){var te=Q.match(Y.IPV6ADDRESS)||[],re=c(te,3),ie=re[1],$e=re[2];if(ie){for(var ke=ie.toLowerCase().split("::").reverse(),Ne=c(ke,2),Ar=Ne[0],jt=Ne[1],dt=jt?jt.split(":").map(ee):[],Jr=Ar.split(":").map(ee),an=Y.IPV4ADDRESS.test(Jr[Jr.length-1]),Wr=an?7:8,sr=Jr.length-Wr,Yr=Array(Wr),Rr=0;Rr<Wr;++Rr)Yr[Rr]=dt[Rr]||Jr[sr+Rr]||"";an&&(Yr[Wr-1]=ue(Yr[Wr-1],Y));var Us=Yr.reduce(function(Mi,oo,Ks){if(!oo||oo==="0"){var Mo=Mi[Mi.length-1];Mo&&Mo.index+Mo.length===Ks?Mo.length++:Mi.push({index:Ks,length:1})}return Mi},[]),gi=Us.sort(function(Mi,oo){return oo.length-Mi.length})[0],Di=void 0;if(gi&&gi.length>1){var Cr=Yr.slice(0,gi.index),bi=Yr.slice(gi.index+gi.length);Di=Cr.join(":")+"::"+bi.join(":")}else Di=Yr.join(":");return $e&&(Di+="%"+$e),Di}else return Q}var ce=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,pe="".match(/(){0}/)[1]===void 0;function Ee(Q){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te={},re=Y.iri!==!1?u:d;Y.reference==="suffix"&&(Q=(Y.scheme?Y.scheme+":":"")+"//"+Q);var ie=Q.match(ce);if(ie){pe?(te.scheme=ie[1],te.userinfo=ie[3],te.host=ie[4],te.port=parseInt(ie[5],10),te.path=ie[6]||"",te.query=ie[7],te.fragment=ie[8],isNaN(te.port)&&(te.port=ie[5])):(te.scheme=ie[1]||void 0,te.userinfo=Q.indexOf("@")!==-1?ie[3]:void 0,te.host=Q.indexOf("//")!==-1?ie[4]:void 0,te.port=parseInt(ie[5],10),te.path=ie[6]||"",te.query=Q.indexOf("?")!==-1?ie[7]:void 0,te.fragment=Q.indexOf("#")!==-1?ie[8]:void 0,isNaN(te.port)&&(te.port=Q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ie[4]:void 0)),te.host&&(te.host=ae(ue(te.host,re),re)),te.scheme===void 0&&te.userinfo===void 0&&te.host===void 0&&te.port===void 0&&!te.path&&te.query===void 0?te.reference="same-document":te.scheme===void 0?te.reference="relative":te.fragment===void 0?te.reference="absolute":te.reference="uri",Y.reference&&Y.reference!=="suffix"&&Y.reference!==te.reference&&(te.error=te.error||"URI is not a "+Y.reference+" reference.");var $e=Z[(Y.scheme||te.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!$e||!$e.unicodeSupport)){if(te.host&&(Y.domainHost||$e&&$e.domainHost))try{te.host=J.toASCII(te.host.replace(re.PCT_ENCODED,H).toLowerCase())}catch(ke){te.error=te.error||"Host's domain name can not be converted to ASCII via punycode: "+ke}X(te,d)}else X(te,re);$e&&$e.parse&&$e.parse(te,Y)}else te.error=te.error||"URI can not be parsed.";return te}function Ue(Q,Y){var te=Y.iri!==!1?u:d,re=[];return Q.userinfo!==void 0&&(re.push(Q.userinfo),re.push("@")),Q.host!==void 0&&re.push(ae(ue(String(Q.host),te),te).replace(te.IPV6ADDRESS,function(ie,$e,ke){return"["+$e+(ke?"%25"+ke:"")+"]"})),(typeof Q.port=="number"||typeof Q.port=="string")&&(re.push(":"),re.push(String(Q.port))),re.length?re.join(""):void 0}var le=/^\.\.?\//,ge=/^\/\.(\/|$)/,ve=/^\/\.\.(\/|$)/,Ce=/^\/?(?:.|\n)*?(?=\/|$)/;function Ie(Q){for(var Y=[];Q.length;)if(Q.match(le))Q=Q.replace(le,"");else if(Q.match(ge))Q=Q.replace(ge,"/");else if(Q.match(ve))Q=Q.replace(ve,"/"),Y.pop();else if(Q==="."||Q==="..")Q="";else{var te=Q.match(Ce);if(te){var re=te[0];Q=Q.slice(re.length),Y.push(re)}else throw new Error("Unexpected dot segment condition")}return Y.join("")}function je(Q){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=Y.iri?u:d,re=[],ie=Z[(Y.scheme||Q.scheme||"").toLowerCase()];if(ie&&ie.serialize&&ie.serialize(Q,Y),Q.host&&!te.IPV6ADDRESS.test(Q.host)){if(Y.domainHost||ie&&ie.domainHost)try{Q.host=Y.iri?J.toUnicode(Q.host):J.toASCII(Q.host.replace(te.PCT_ENCODED,H).toLowerCase())}catch(Ne){Q.error=Q.error||"Host's domain name can not be converted to "+(Y.iri?"Unicode":"ASCII")+" via punycode: "+Ne}}X(Q,te),Y.reference!=="suffix"&&Q.scheme&&(re.push(Q.scheme),re.push(":"));var $e=Ue(Q,Y);if($e!==void 0&&(Y.reference!=="suffix"&&re.push("//"),re.push($e),Q.path&&Q.path.charAt(0)!=="/"&&re.push("/")),Q.path!==void 0){var ke=Q.path;!Y.absolutePath&&(!ie||!ie.absolutePath)&&(ke=Ie(ke)),$e===void 0&&(ke=ke.replace(/^\/\//,"/%2F")),re.push(ke)}return Q.query!==void 0&&(re.push("?"),re.push(Q.query)),Q.fragment!==void 0&&(re.push("#"),re.push(Q.fragment)),re.join("")}function gt(Q,Y){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=arguments[3],ie={};return re||(Q=Ee(je(Q,te),te),Y=Ee(je(Y,te),te)),te=te||{},!te.tolerant&&Y.scheme?(ie.scheme=Y.scheme,ie.userinfo=Y.userinfo,ie.host=Y.host,ie.port=Y.port,ie.path=Ie(Y.path||""),ie.query=Y.query):(Y.userinfo!==void 0||Y.host!==void 0||Y.port!==void 0?(ie.userinfo=Y.userinfo,ie.host=Y.host,ie.port=Y.port,ie.path=Ie(Y.path||""),ie.query=Y.query):(Y.path?(Y.path.charAt(0)==="/"?ie.path=Ie(Y.path):((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path?ie.path="/"+Y.path:Q.path?ie.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+Y.path:ie.path=Y.path,ie.path=Ie(ie.path)),ie.query=Y.query):(ie.path=Q.path,Y.query!==void 0?ie.query=Y.query:ie.query=Q.query),ie.userinfo=Q.userinfo,ie.host=Q.host,ie.port=Q.port),ie.scheme=Q.scheme),ie.fragment=Y.fragment,ie}function Pe(Q,Y,te){var re=s({scheme:"null"},te);return je(gt(Ee(Q,re),Ee(Y,re),re,!0),re)}function De(Q,Y){return typeof Q=="string"?Q=je(Ee(Q,Y),Y):n(Q)==="object"&&(Q=Ee(je(Q,Y),Y)),Q}function It(Q,Y,te){return typeof Q=="string"?Q=je(Ee(Q,te),te):n(Q)==="object"&&(Q=je(Q,te)),typeof Y=="string"?Y=je(Ee(Y,te),te):n(Y)==="object"&&(Y=je(Y,te)),Q===Y}function we(Q,Y){return Q&&Q.toString().replace(!Y||!Y.iri?d.ESCAPE:u.ESCAPE,V)}function Se(Q,Y){return Q&&Q.toString().replace(!Y||!Y.iri?d.PCT_ENCODED:u.PCT_ENCODED,H)}var Kr={scheme:"http",domainHost:!0,parse:function(Y,te){return Y.host||(Y.error=Y.error||"HTTP URIs must have a host."),Y},serialize:function(Y,te){var re=String(Y.scheme).toLowerCase()==="https";return(Y.port===(re?443:80)||Y.port==="")&&(Y.port=void 0),Y.path||(Y.path="/"),Y}},Fe={scheme:"https",domainHost:Kr.domainHost,parse:Kr.parse,serialize:Kr.serialize};function He(Q){return typeof Q.secure=="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"}var js={scheme:"ws",domainHost:!0,parse:function(Y,te){var re=Y;return re.secure=He(re),re.resourceName=(re.path||"/")+(re.query?"?"+re.query:""),re.path=void 0,re.query=void 0,re},serialize:function(Y,te){if((Y.port===(He(Y)?443:80)||Y.port==="")&&(Y.port=void 0),typeof Y.secure=="boolean"&&(Y.scheme=Y.secure?"wss":"ws",Y.secure=void 0),Y.resourceName){var re=Y.resourceName.split("?"),ie=c(re,2),$e=ie[0],ke=ie[1];Y.path=$e&&$e!=="/"?$e:void 0,Y.query=ke,Y.resourceName=void 0}return Y.fragment=void 0,Y}},ft={scheme:"wss",domainHost:js.domainHost,parse:js.parse,serialize:js.serialize},Rt={},yi=!0,At="[A-Za-z0-9\\-\\.\\_\\~"+(yi?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Ze="[0-9A-Fa-f]",Mc=r(r("%[EFef]"+Ze+"%"+Ze+Ze+"%"+Ze+Ze)+"|"+r("%[89A-Fa-f]"+Ze+"%"+Ze+Ze)+"|"+r("%"+Ze+Ze)),Pt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$t="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ny=e($t,'[\\"\\\\]'),Bt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wt=new RegExp(At,"g"),Bc=new RegExp(Mc,"g"),Ht=new RegExp(e("[^]",Pt,"[\\.]",'[\\"]',ny),"g"),Lt=new RegExp(e("[^]",At,Bt),"g"),iy=Lt;function Nt(Q){var Y=H(Q);return Y.match(Wt)?Y:Q}var Ft={scheme:"mailto",parse:function(Y,te){var re=Y,ie=re.to=re.path?re.path.split(","):[];if(re.path=void 0,re.query){for(var $e=!1,ke={},Ne=re.query.split("&"),Ar=0,jt=Ne.length;Ar<jt;++Ar){var dt=Ne[Ar].split("=");switch(dt[0]){case"to":for(var Jr=dt[1].split(","),an=0,Wr=Jr.length;an<Wr;++an)ie.push(Jr[an]);break;case"subject":re.subject=Se(dt[1],te);break;case"body":re.body=Se(dt[1],te);break;default:$e=!0,ke[Se(dt[0],te)]=Se(dt[1],te);break}}$e&&(re.headers=ke)}re.query=void 0;for(var sr=0,Yr=ie.length;sr<Yr;++sr){var Rr=ie[sr].split("@");if(Rr[0]=Se(Rr[0]),te.unicodeSupport)Rr[1]=Se(Rr[1],te).toLowerCase();else try{Rr[1]=J.toASCII(Se(Rr[1],te).toLowerCase())}catch(Us){re.error=re.error||"Email address's domain name can not be converted to ASCII via punycode: "+Us}ie[sr]=Rr.join("@")}return re},serialize:function(Y,te){var re=Y,ie=o(Y.to);if(ie){for(var $e=0,ke=ie.length;$e<ke;++$e){var Ne=String(ie[$e]),Ar=Ne.lastIndexOf("@"),jt=Ne.slice(0,Ar).replace(Bc,Nt).replace(Bc,i).replace(Ht,V),dt=Ne.slice(Ar+1);try{dt=te.iri?J.toUnicode(dt):J.toASCII(Se(dt,te).toLowerCase())}catch(sr){re.error=re.error||"Email address's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+sr}ie[$e]=jt+"@"+dt}re.path=ie.join(",")}var Jr=Y.headers=Y.headers||{};Y.subject&&(Jr.subject=Y.subject),Y.body&&(Jr.body=Y.body);var an=[];for(var Wr in Jr)Jr[Wr]!==Rt[Wr]&&an.push(Wr.replace(Bc,Nt).replace(Bc,i).replace(Lt,V)+"="+Jr[Wr].replace(Bc,Nt).replace(Bc,i).replace(iy,V));return an.length&&(re.query=an.join("&")),re}},oy=/^([^\:]+)\:(.*)/,zt={scheme:"urn",parse:function(Y,te){var re=Y.path&&Y.path.match(oy),ie=Y;if(re){var $e=te.scheme||ie.scheme||"urn",ke=re[1].toLowerCase(),Ne=re[2],Ar=$e+":"+(te.nid||ke),jt=Z[Ar];ie.nid=ke,ie.nss=Ne,ie.path=void 0,jt&&(ie=jt.parse(ie,te))}else ie.error=ie.error||"URN can not be parsed.";return ie},serialize:function(Y,te){var re=te.scheme||Y.scheme||"urn",ie=Y.nid,$e=re+":"+(te.nid||ie),ke=Z[$e];ke&&(Y=ke.serialize(Y,te));var Ne=Y,Ar=Y.nss;return Ne.path=(ie||te.nid)+":"+Ar,Ne}},Vt=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Nh={scheme:"urn:uuid",parse:function(Y,te){var re=Y;return re.uuid=re.nss,re.nss=void 0,!te.tolerant&&(!re.uuid||!re.uuid.match(Vt))&&(re.error=re.error||"UUID is not valid."),re},serialize:function(Y,te){var re=Y;return re.nss=(Y.uuid||"").toLowerCase(),re}};Z[Kr.scheme]=Kr,Z[Fe.scheme]=Fe,Z[js.scheme]=js,Z[ft.scheme]=ft,Z[Ft.scheme]=Ft,Z[zt.scheme]=zt,Z[Nh.scheme]=Nh,t.SCHEMES=Z,t.pctEncChar=V,t.pctDecChars=H,t.parse=Ee,t.removeDotSegments=Ie,t.serialize=je,t.resolveComponents=gt,t.resolve=Pe,t.normalize=De,t.equal=It,t.escapeComponent=we,t.unescapeComponent=Se,Object.defineProperty(t,"__esModule",{value:!0})})});var Lae=W(b$=>{"use strict";h();Object.defineProperty(b$,"__esModule",{value:!0});var qae=g$();qae.code='require("ajv/dist/runtime/uri").default';b$.default=qae});var Yae=W(ts=>{"use strict";h();Object.defineProperty(ts,"__esModule",{value:!0});ts.CodeGen=ts.Name=ts.nil=ts.stringify=ts.str=ts._=ts.KeywordCxt=void 0;var E$e=fE();Object.defineProperty(ts,"KeywordCxt",{enumerable:!0,get:function(){return E$e.KeywordCxt}});var $w=Qt();Object.defineProperty(ts,"_",{enumerable:!0,get:function(){return $w._}});Object.defineProperty(ts,"str",{enumerable:!0,get:function(){return $w.str}});Object.defineProperty(ts,"stringify",{enumerable:!0,get:function(){return $w.stringify}});Object.defineProperty(ts,"nil",{enumerable:!0,get:function(){return $w.nil}});Object.defineProperty(ts,"Name",{enumerable:!0,get:function(){return $w.Name}});Object.defineProperty(ts,"CodeGen",{enumerable:!0,get:function(){return $w.CodeGen}});var S$e=vA(),Hae=wA(),A$e=ZO(),pE=hE(),P$e=Qt(),mE=dE(),EA=cE(),w$=Ir(),Fae=Uae(),T$e=Lae(),Vae=(t,e)=>new RegExp(t,e);Vae.code="new RegExp";var I$e=["removeAdditional","useDefaults","coerceTypes"],k$e=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),R$e={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},D$e={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},zae=200;function M$e(t){var e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I,P,$,N,L,F,U,G;let q=t.strict,T=(e=t.code)===null||e===void 0?void 0:e.optimize,E=T===!0||T===void 0?1:T||0,k=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Vae,f=(i=t.uriResolver)!==null&&i!==void 0?i:T$e.default;return{strictSchema:(s=(o=t.strictSchema)!==null&&o!==void 0?o:q)!==null&&s!==void 0?s:!0,strictNumbers:(d=(a=t.strictNumbers)!==null&&a!==void 0?a:q)!==null&&d!==void 0?d:!0,strictTypes:(c=(u=t.strictTypes)!==null&&u!==void 0?u:q)!==null&&c!==void 0?c:"log",strictTuples:(m=(l=t.strictTuples)!==null&&l!==void 0?l:q)!==null&&m!==void 0?m:"log",strictRequired:(g=(p=t.strictRequired)!==null&&p!==void 0?p:q)!==null&&g!==void 0?g:!1,code:t.code?{...t.code,optimize:E,regExp:k}:{optimize:E,regExp:k},loopRequired:(b=t.loopRequired)!==null&&b!==void 0?b:zae,loopEnum:(S=t.loopEnum)!==null&&S!==void 0?S:zae,meta:(A=t.meta)!==null&&A!==void 0?A:!0,messages:(I=t.messages)!==null&&I!==void 0?I:!0,inlineRefs:(P=t.inlineRefs)!==null&&P!==void 0?P:!0,schemaId:($=t.schemaId)!==null&&$!==void 0?$:"$id",addUsedSchema:(N=t.addUsedSchema)!==null&&N!==void 0?N:!0,validateSchema:(L=t.validateSchema)!==null&&L!==void 0?L:!0,validateFormats:(F=t.validateFormats)!==null&&F!==void 0?F:!0,unicodeRegExp:(U=t.unicodeRegExp)!==null&&U!==void 0?U:!0,int32range:(G=t.int32range)!==null&&G!==void 0?G:!0,uriResolver:f}}var yE=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...M$e(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new P$e.ValueScope({scope:{},prefixes:k$e,es5:r,lines:n}),this.logger=j$e(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,A$e.getRules)(),Gae.call(this,R$e,e,"NOT SUPPORTED"),Gae.call(this,D$e,e,"DEPRECATED","warn"),this._metaOpts=$$e.call(this),e.formats&&C$e.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&O$e.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),B$e.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=Fae;n==="id"&&(i={...Fae},i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);async function i(c,l){await o.call(this,c.$schema);let m=this._addSchema(c,l);return m.validate||s.call(this,m)}async function o(c){c&&!this.getSchema(c)&&await i.call(this,{$ref:c},!0)}async function s(c){try{return this._compileSchemaEnv(c)}catch(l){if(!(l instanceof Hae.default))throw l;return a.call(this,l),await d.call(this,l.missingSchema),s.call(this,c)}}function a({missingSchema:c,missingRef:l}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${l} cannot be resolved`)}async function d(c){let l=await u.call(this,c);this.refs[c]||await o.call(this,l.$schema),this.refs[c]||this.addSchema(l,c,r)}async function u(c){let l=this._loading[c];if(l)return l;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let s of e)this.addSchema(s,void 0,n,i);return this}let o;if(typeof e=="object"){let{schemaId:s}=this.opts;if(o=e[s],o!==void 0&&typeof o!="string")throw new Error(`schema ${s} must be string`)}return r=(0,mE.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(e){let r;for(;typeof(r=Wae.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new pE.SchemaEnv({schema:{},schemaId:n});if(r=pE.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Wae.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,mE.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K$e.call(this,n,r),!r)return(0,w$.eachItem)(n,o=>v$.call(this,o)),this;L$e.call(this,r);let i={...r,type:(0,EA.getJSONTypes)(r.type),schemaType:(0,EA.getJSONTypes)(r.schemaType)};return(0,w$.eachItem)(n,i.type.length===0?o=>v$.call(this,o,i):o=>i.type.forEach(s=>v$.call(this,o,i,s))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(o=>o.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let o=i.split("/").slice(1),s=e;for(let a of o)s=s[a];for(let a in n){let d=n[a];if(typeof d!="object")continue;let{$data:u}=d.definition,c=s[a];u&&c&&(s[a]=Jae(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof e=="object")s=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let d=this._cache.get(e);if(d!==void 0)return d;n=(0,mE.normalizeId)(s||n);let u=mE.getSchemaRefs.call(this,e,n);return d=new pE.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(d.schema,d),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=d),i&&this.validateSchema(e,!0),d}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):pE.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{pE.compileSchema.call(this,e)}finally{this.opts=r}}};ts.default=yE;yE.ValidationError=S$e.default;yE.MissingRefError=Hae.default;function Gae(t,e,r,n="error"){for(let i in t){let o=i;o in e&&this.logger[n](`${r}: option ${i}. ${t[o]}`)}}function Wae(t){return t=(0,mE.normalizeId)(t),this.schemas[t]||this.refs[t]}function B$e(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function C$e(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function O$e(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function $$e(){let t={...this.opts};for(let e of I$e)delete t[e];return t}var N$e={log(){},warn(){},error(){}};function j$e(t){if(t===!1)return N$e;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var U$e=/^[a-z_$][a-z0-9_$:-]*$/i;function K$e(t,e){let{RULES:r}=this;if((0,w$.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!U$e.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function v$(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,s=i?o.post:o.rules.find(({type:d})=>d===r);if(s||(s={type:r,rules:[]},o.rules.push(s)),o.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,EA.getJSONTypes)(e.type),schemaType:(0,EA.getJSONTypes)(e.schemaType)}};e.before?q$e.call(this,s,a,e.before):s.rules.push(a),o.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(d=>this.addKeyword(d))}function q$e(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function L$e(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Jae(e)),t.validateSchema=this.compile(e,!0))}var F$e={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Jae(t){return{anyOf:[t,F$e]}}});var Zae=W(_$=>{"use strict";h();Object.defineProperty(_$,"__esModule",{value:!0});var z$e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};_$.default=z$e});var PA=W(eg=>{"use strict";h();Object.defineProperty(eg,"__esModule",{value:!0});eg.callRef=eg.getValidate=void 0;var G$e=wA(),Xae=fd(),Ba=Qt(),Nw=ld(),Qae=hE(),SA=Ir(),W$e={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:d}=n,{root:u}=o;if((r==="#"||r==="#/")&&i===u.baseId)return l();let c=Qae.resolveRef.call(d,u,i,r);if(c===void 0)throw new G$e.default(n.opts.uriResolver,i,r);if(c instanceof Qae.SchemaEnv)return m(c);return p(c);function l(){if(o===u)return AA(t,s,o,o.$async);let g=e.scopeValue("root",{ref:u});return AA(t,(0,Ba._)`${g}.validate`,u,u.$async)}function m(g){let b=ece(t,g);AA(t,b,g,g.$async)}function p(g){let b=e.scopeValue("schema",a.code.source===!0?{ref:g,code:(0,Ba.stringify)(g)}:{ref:g}),S=e.name("valid"),A=t.subschema({schema:g,dataTypes:[],schemaPath:Ba.nil,topSchemaRef:b,errSchemaPath:r},S);t.mergeEvaluated(A),t.ok(S)}}};function ece(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ba._)`${r.scopeValue("wrapper",{ref:e})}.validate`}eg.getValidate=ece;function AA(t,e,r,n){let{gen:i,it:o}=t,{allErrors:s,schemaEnv:a,opts:d}=o,u=d.passContext?Nw.default.this:Ba.nil;n?c():l();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let g=i.let("valid");i.try(()=>{i.code((0,Ba._)`await ${(0,Xae.callValidateCode)(t,e,u)}`),p(e),s||i.assign(g,!0)},b=>{i.if((0,Ba._)`!(${b} instanceof ${o.ValidationError})`,()=>i.throw(b)),m(b),s||i.assign(g,!1)}),t.ok(g)}function l(){t.result((0,Xae.callValidateCode)(t,e,u),()=>p(e),()=>m(e))}function m(g){let b=(0,Ba._)`${g}.errors`;i.assign(Nw.default.vErrors,(0,Ba._)`${Nw.default.vErrors} === null ? ${b} : ${Nw.default.vErrors}.concat(${b})`),i.assign(Nw.default.errors,(0,Ba._)`${Nw.default.vErrors}.length`)}function p(g){var b;if(!o.opts.unevaluated)return;let S=(b=r?.validate)===null||b===void 0?void 0:b.evaluated;if(o.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(o.props=SA.mergeEvaluated.props(i,S.props,o.props));else{let A=i.var("props",(0,Ba._)`${g}.evaluated.props`);o.props=SA.mergeEvaluated.props(i,A,o.props,Ba.Name)}if(o.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(o.items=SA.mergeEvaluated.items(i,S.items,o.items));else{let A=i.var("items",(0,Ba._)`${g}.evaluated.items`);o.items=SA.mergeEvaluated.items(i,A,o.items,Ba.Name)}}}eg.callRef=AA;eg.default=W$e});var tce=W(x$=>{"use strict";h();Object.defineProperty(x$,"__esModule",{value:!0});var H$e=Zae(),V$e=PA(),J$e=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",H$e.default,V$e.default];x$.default=J$e});var rce=W(E$=>{"use strict";h();Object.defineProperty(E$,"__esModule",{value:!0});var TA=Qt(),fm=TA.operators,IA={maximum:{okStr:"<=",ok:fm.LTE,fail:fm.GT},minimum:{okStr:">=",ok:fm.GTE,fail:fm.LT},exclusiveMaximum:{okStr:"<",ok:fm.LT,fail:fm.GTE},exclusiveMinimum:{okStr:">",ok:fm.GT,fail:fm.LTE}},Y$e={message:({keyword:t,schemaCode:e})=>(0,TA.str)`must be ${IA[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,TA._)`{comparison: ${IA[t].okStr}, limit: ${e}}`},Z$e={keyword:Object.keys(IA),type:"number",schemaType:"number",$data:!0,error:Y$e,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,TA._)`${r} ${IA[e].fail} ${n} || isNaN(${r})`)}};E$.default=Z$e});var nce=W(S$=>{"use strict";h();Object.defineProperty(S$,"__esModule",{value:!0});var gE=Qt(),X$e={message:({schemaCode:t})=>(0,gE.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,gE._)`{multipleOf: ${t}}`},Q$e={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:X$e,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,o=i.opts.multipleOfPrecision,s=e.let("res"),a=o?(0,gE._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,gE._)`${s} !== parseInt(${s})`;t.fail$data((0,gE._)`(${n} === 0 || (${s} = ${r}/${n}, ${a}))`)}};S$.default=Q$e});var oce=W(A$=>{"use strict";h();Object.defineProperty(A$,"__esModule",{value:!0});function ice(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}A$.default=ice;ice.code='require("ajv/dist/runtime/ucs2length").default'});var sce=W(P$=>{"use strict";h();Object.defineProperty(P$,"__esModule",{value:!0});var tg=Qt(),eNe=Ir(),tNe=oce(),rNe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,tg.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,tg._)`{limit: ${t}}`},nNe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:rNe,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,o=e==="maxLength"?tg.operators.GT:tg.operators.LT,s=i.opts.unicode===!1?(0,tg._)`${r}.length`:(0,tg._)`${(0,eNe.useFunc)(t.gen,tNe.default)}(${r})`;t.fail$data((0,tg._)`${s} ${o} ${n}`)}};P$.default=nNe});var ace=W(T$=>{"use strict";h();Object.defineProperty(T$,"__esModule",{value:!0});var iNe=fd(),kA=Qt(),oNe={message:({schemaCode:t})=>(0,kA.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,kA._)`{pattern: ${t}}`},sNe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:oNe,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:o}=t,s=o.opts.unicodeRegExp?"u":"",a=r?(0,kA._)`(new RegExp(${i}, ${s}))`:(0,iNe.usePattern)(t,n);t.fail$data((0,kA._)`!${a}.test(${e})`)}};T$.default=sNe});var cce=W(I$=>{"use strict";h();Object.defineProperty(I$,"__esModule",{value:!0});var bE=Qt(),aNe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,bE.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,bE._)`{limit: ${t}}`},cNe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:aNe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?bE.operators.GT:bE.operators.LT;t.fail$data((0,bE._)`Object.keys(${r}).length ${i} ${n}`)}};I$.default=cNe});var dce=W(k$=>{"use strict";h();Object.defineProperty(k$,"__esModule",{value:!0});var vE=fd(),wE=Qt(),dNe=Ir(),uNe={message:({params:{missingProperty:t}})=>(0,wE.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,wE._)`{missingProperty: ${t}}`},lNe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:uNe,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:o,it:s}=t,{opts:a}=s;if(!o&&r.length===0)return;let d=r.length>=a.loopRequired;if(s.allErrors?u():c(),a.strictRequired){let p=t.parentSchema.properties,{definedProperties:g}=t.it;for(let b of r)if(p?.[b]===void 0&&!g.has(b)){let S=s.schemaEnv.baseId+s.errSchemaPath,A=`required property "${b}" is not defined at "${S}" (strictRequired)`;(0,dNe.checkStrictMode)(s,A,s.opts.strictRequired)}}function u(){if(d||o)t.block$data(wE.nil,l);else for(let p of r)(0,vE.checkReportMissingProp)(t,p)}function c(){let p=e.let("missing");if(d||o){let g=e.let("valid",!0);t.block$data(g,()=>m(p,g)),t.ok(g)}else e.if((0,vE.checkMissingProp)(t,r,p)),(0,vE.reportMissingProp)(t,p),e.else()}function l(){e.forOf("prop",n,p=>{t.setParams({missingProperty:p}),e.if((0,vE.noPropertyInData)(e,i,p,a.ownProperties),()=>t.error())})}function m(p,g){t.setParams({missingProperty:p}),e.forOf(p,n,()=>{e.assign(g,(0,vE.propertyInData)(e,i,p,a.ownProperties)),e.if((0,wE.not)(g),()=>{t.error(),e.break()})},wE.nil)}}};k$.default=lNe});var uce=W(R$=>{"use strict";h();Object.defineProperty(R$,"__esModule",{value:!0});var _E=Qt(),fNe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,_E.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,_E._)`{limit: ${t}}`},hNe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:fNe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?_E.operators.GT:_E.operators.LT;t.fail$data((0,_E._)`${r}.length ${i} ${n}`)}};R$.default=hNe});var RA=W(D$=>{"use strict";h();Object.defineProperty(D$,"__esModule",{value:!0});var lce=o$();lce.code='require("ajv/dist/runtime/equal").default';D$.default=lce});var fce=W(B$=>{"use strict";h();Object.defineProperty(B$,"__esModule",{value:!0});var M$=cE(),rs=Qt(),pNe=Ir(),mNe=RA(),yNe={message:({params:{i:t,j:e}})=>(0,rs.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,rs._)`{i: ${t}, j: ${e}}`},gNe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:yNe,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:o,schemaCode:s,it:a}=t;if(!n&&!i)return;let d=e.let("valid"),u=o.items?(0,M$.getSchemaTypes)(o.items):[];t.block$data(d,c,(0,rs._)`${s} === false`),t.ok(d);function c(){let g=e.let("i",(0,rs._)`${r}.length`),b=e.let("j");t.setParams({i:g,j:b}),e.assign(d,!0),e.if((0,rs._)`${g} > 1`,()=>(l()?m:p)(g,b))}function l(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function m(g,b){let S=e.name("item"),A=(0,M$.checkDataTypes)(u,S,a.opts.strictNumbers,M$.DataType.Wrong),I=e.const("indices",(0,rs._)`{}`);e.for((0,rs._)`;${g}--;`,()=>{e.let(S,(0,rs._)`${r}[${g}]`),e.if(A,(0,rs._)`continue`),u.length>1&&e.if((0,rs._)`typeof ${S} == "string"`,(0,rs._)`${S} += "_"`),e.if((0,rs._)`typeof ${I}[${S}] == "number"`,()=>{e.assign(b,(0,rs._)`${I}[${S}]`),t.error(),e.assign(d,!1).break()}).code((0,rs._)`${I}[${S}] = ${g}`)})}function p(g,b){let S=(0,pNe.useFunc)(e,mNe.default),A=e.name("outer");e.label(A).for((0,rs._)`;${g}--;`,()=>e.for((0,rs._)`${b} = ${g}; ${b}--;`,()=>e.if((0,rs._)`${S}(${r}[${g}], ${r}[${b}])`,()=>{t.error(),e.assign(d,!1).break(A)})))}}};B$.default=gNe});var hce=W(O$=>{"use strict";h();Object.defineProperty(O$,"__esModule",{value:!0});var C$=Qt(),bNe=Ir(),vNe=RA(),wNe={message:"must be equal to constant",params:({schemaCode:t})=>(0,C$._)`{allowedValue: ${t}}`},_Ne={keyword:"const",$data:!0,error:wNe,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:o}=t;n||o&&typeof o=="object"?t.fail$data((0,C$._)`!${(0,bNe.useFunc)(e,vNe.default)}(${r}, ${i})`):t.fail((0,C$._)`${o} !== ${r}`)}};O$.default=_Ne});var pce=W($$=>{"use strict";h();Object.defineProperty($$,"__esModule",{value:!0});var xE=Qt(),xNe=Ir(),ENe=RA(),SNe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,xE._)`{allowedValues: ${t}}`},ANe={keyword:"enum",schemaType:"array",$data:!0,error:SNe,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:o,it:s}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=s.opts.loopEnum,d,u=()=>d??(d=(0,xNe.useFunc)(e,ENe.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,l);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let p=e.const("vSchema",o);c=(0,xE.or)(...i.map((g,b)=>m(p,b)))}t.pass(c);function l(){e.assign(c,!1),e.forOf("v",o,p=>e.if((0,xE._)`${u()}(${r}, ${p})`,()=>e.assign(c,!0).break()))}function m(p,g){let b=i[g];return typeof b=="object"&&b!==null?(0,xE._)`${u()}(${r}, ${p}[${g}])`:(0,xE._)`${r} === ${b}`}}};$$.default=ANe});var mce=W(N$=>{"use strict";h();Object.defineProperty(N$,"__esModule",{value:!0});var PNe=rce(),TNe=nce(),INe=sce(),kNe=ace(),RNe=cce(),DNe=dce(),MNe=uce(),BNe=fce(),CNe=hce(),ONe=pce(),$Ne=[PNe.default,TNe.default,INe.default,kNe.default,RNe.default,DNe.default,MNe.default,BNe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},CNe.default,ONe.default];N$.default=$Ne});var U$=W(EE=>{"use strict";h();Object.defineProperty(EE,"__esModule",{value:!0});EE.validateAdditionalItems=void 0;var rg=Qt(),j$=Ir(),NNe={message:({params:{len:t}})=>(0,rg.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,rg._)`{limit: ${t}}`},jNe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:NNe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,j$.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}yce(t,n)}};function yce(t,e){let{gen:r,schema:n,data:i,keyword:o,it:s}=t;s.items=!0;let a=r.const("len",(0,rg._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,rg._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,j$.alwaysValidSchema)(s,n)){let u=r.var("valid",(0,rg._)`${a} <= ${e.length}`);r.if((0,rg.not)(u),()=>d(u)),t.ok(u)}function d(u){r.forRange("i",e.length,a,c=>{t.subschema({keyword:o,dataProp:c,dataPropType:j$.Type.Num},u),s.allErrors||r.if((0,rg.not)(u),()=>r.break())})}}EE.validateAdditionalItems=yce;EE.default=jNe});var K$=W(SE=>{"use strict";h();Object.defineProperty(SE,"__esModule",{value:!0});SE.validateTuple=void 0;var gce=Qt(),DA=Ir(),UNe=fd(),KNe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return bce(t,"additionalItems",e);r.items=!0,!(0,DA.alwaysValidSchema)(r,e)&&t.ok((0,UNe.validateArray)(t))}};function bce(t,e,r=t.schema){let{gen:n,parentSchema:i,data:o,keyword:s,it:a}=t;c(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=DA.mergeEvaluated.items(n,r.length,a.items));let d=n.name("valid"),u=n.const("len",(0,gce._)`${o}.length`);r.forEach((l,m)=>{(0,DA.alwaysValidSchema)(a,l)||(n.if((0,gce._)`${u} > ${m}`,()=>t.subschema({keyword:s,schemaProp:m,dataProp:m},d)),t.ok(d))});function c(l){let{opts:m,errSchemaPath:p}=a,g=r.length,b=g===l.minItems&&(g===l.maxItems||l[e]===!1);if(m.strictTuples&&!b){let S=`"${s}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${p}"`;(0,DA.checkStrictMode)(a,S,m.strictTuples)}}}SE.validateTuple=bce;SE.default=KNe});var vce=W(q$=>{"use strict";h();Object.defineProperty(q$,"__esModule",{value:!0});var qNe=K$(),LNe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,qNe.validateTuple)(t,"items")};q$.default=LNe});var _ce=W(L$=>{"use strict";h();Object.defineProperty(L$,"__esModule",{value:!0});var wce=Qt(),FNe=Ir(),zNe=fd(),GNe=U$(),WNe={message:({params:{len:t}})=>(0,wce.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,wce._)`{limit: ${t}}`},HNe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:WNe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,FNe.alwaysValidSchema)(n,e)&&(i?(0,GNe.validateAdditionalItems)(t,i):t.ok((0,zNe.validateArray)(t)))}};L$.default=HNe});var xce=W(F$=>{"use strict";h();Object.defineProperty(F$,"__esModule",{value:!0});var pd=Qt(),MA=Ir(),VNe={message:({params:{min:t,max:e}})=>e===void 0?(0,pd.str)`must contain at least ${t} valid item(s)`:(0,pd.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,pd._)`{minContains: ${t}}`:(0,pd._)`{minContains: ${t}, maxContains: ${e}}`},JNe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:VNe,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:o}=t,s,a,{minContains:d,maxContains:u}=n;o.opts.next?(s=d===void 0?1:d,a=u):s=1;let c=e.const("len",(0,pd._)`${i}.length`);if(t.setParams({min:s,max:a}),a===void 0&&s===0){(0,MA.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,MA.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,MA.alwaysValidSchema)(o,r)){let b=(0,pd._)`${c} >= ${s}`;a!==void 0&&(b=(0,pd._)`${b} && ${c} <= ${a}`),t.pass(b);return}o.items=!0;let l=e.name("valid");a===void 0&&s===1?p(l,()=>e.if(l,()=>e.break())):s===0?(e.let(l,!0),a!==void 0&&e.if((0,pd._)`${i}.length > 0`,m)):(e.let(l,!1),m()),t.result(l,()=>t.reset());function m(){let b=e.name("_valid"),S=e.let("count",0);p(b,()=>e.if(b,()=>g(S)))}function p(b,S){e.forRange("i",0,c,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:MA.Type.Num,compositeRule:!0},b),S()})}function g(b){e.code((0,pd._)`${b}++`),a===void 0?e.if((0,pd._)`${b} >= ${s}`,()=>e.assign(l,!0).break()):(e.if((0,pd._)`${b} > ${a}`,()=>e.assign(l,!1).break()),s===1?e.assign(l,!0):e.if((0,pd._)`${b} >= ${s}`,()=>e.assign(l,!0)))}}};F$.default=JNe});var BA=W(Cl=>{"use strict";h();Object.defineProperty(Cl,"__esModule",{value:!0});Cl.validateSchemaDeps=Cl.validatePropertyDeps=Cl.error=void 0;var z$=Qt(),YNe=Ir(),AE=fd();Cl.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,z$.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,z$._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var ZNe={keyword:"dependencies",type:"object",schemaType:"object",error:Cl.error,code(t){let[e,r]=XNe(t);Ece(t,e),Sce(t,r)}};function XNe({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function Ece(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let s in e){let a=e[s];if(a.length===0)continue;let d=(0,AE.propertyInData)(r,n,s,i.opts.ownProperties);t.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(d,()=>{for(let u of a)(0,AE.checkReportMissingProp)(t,u)}):(r.if((0,z$._)`${d} && (${(0,AE.checkMissingProp)(t,a,o)})`),(0,AE.reportMissingProp)(t,o),r.else())}}Cl.validatePropertyDeps=Ece;function Sce(t,e=t.schema){let{gen:r,data:n,keyword:i,it:o}=t,s=r.name("valid");for(let a in e)(0,YNe.alwaysValidSchema)(o,e[a])||(r.if((0,AE.propertyInData)(r,n,a,o.opts.ownProperties),()=>{let d=t.subschema({keyword:i,schemaProp:a},s);t.mergeValidEvaluated(d,s)},()=>r.var(s,!0)),t.ok(s))}Cl.validateSchemaDeps=Sce;Cl.default=ZNe});var Pce=W(G$=>{"use strict";h();Object.defineProperty(G$,"__esModule",{value:!0});var Ace=Qt(),QNe=Ir(),eje={message:"property name must be valid",params:({params:t})=>(0,Ace._)`{propertyName: ${t.propertyName}}`},tje={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:eje,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,QNe.alwaysValidSchema)(i,r))return;let o=e.name("valid");e.forIn("key",n,s=>{t.setParams({propertyName:s}),t.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),e.if((0,Ace.not)(o),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(o)}};G$.default=tje});var H$=W(W$=>{"use strict";h();Object.defineProperty(W$,"__esModule",{value:!0});var CA=fd(),vu=Qt(),rje=ld(),OA=Ir(),nje={message:"must NOT have additional properties",params:({params:t})=>(0,vu._)`{additionalProperty: ${t.additionalProperty}}`},ije={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:nje,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:o,it:s}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:d}=s;if(s.props=!0,d.removeAdditional!=="all"&&(0,OA.alwaysValidSchema)(s,r))return;let u=(0,CA.allSchemaProperties)(n.properties),c=(0,CA.allSchemaProperties)(n.patternProperties);l(),t.ok((0,vu._)`${o} === ${rje.default.errors}`);function l(){e.forIn("key",i,S=>{!u.length&&!c.length?g(S):e.if(m(S),()=>g(S))})}function m(S){let A;if(u.length>8){let I=(0,OA.schemaRefOrVal)(s,n.properties,"properties");A=(0,CA.isOwnProperty)(e,I,S)}else u.length?A=(0,vu.or)(...u.map(I=>(0,vu._)`${S} === ${I}`)):A=vu.nil;return c.length&&(A=(0,vu.or)(A,...c.map(I=>(0,vu._)`${(0,CA.usePattern)(t,I)}.test(${S})`))),(0,vu.not)(A)}function p(S){e.code((0,vu._)`delete ${i}[${S}]`)}function g(S){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){p(S);return}if(r===!1){t.setParams({additionalProperty:S}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,OA.alwaysValidSchema)(s,r)){let A=e.name("valid");d.removeAdditional==="failing"?(b(S,A,!1),e.if((0,vu.not)(A),()=>{t.reset(),p(S)})):(b(S,A),a||e.if((0,vu.not)(A),()=>e.break()))}}function b(S,A,I){let P={keyword:"additionalProperties",dataProp:S,dataPropType:OA.Type.Str};I===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(P,A)}}};W$.default=ije});var kce=W(J$=>{"use strict";h();Object.defineProperty(J$,"__esModule",{value:!0});var oje=fE(),Tce=fd(),V$=Ir(),Ice=H$(),sje={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:o}=t;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Ice.default.code(new oje.KeywordCxt(o,Ice.default,"additionalProperties"));let s=(0,Tce.allSchemaProperties)(r);for(let l of s)o.definedProperties.add(l);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=V$.mergeEvaluated.props(e,(0,V$.toHash)(s),o.props));let a=s.filter(l=>!(0,V$.alwaysValidSchema)(o,r[l]));if(a.length===0)return;let d=e.name("valid");for(let l of a)u(l)?c(l):(e.if((0,Tce.propertyInData)(e,i,l,o.opts.ownProperties)),c(l),o.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(l),t.ok(d);function u(l){return o.opts.useDefaults&&!o.compositeRule&&r[l].default!==void 0}function c(l){t.subschema({keyword:"properties",schemaProp:l,dataProp:l},d)}}};J$.default=sje});var Bce=W(Y$=>{"use strict";h();Object.defineProperty(Y$,"__esModule",{value:!0});var Rce=fd(),$A=Qt(),Dce=Ir(),Mce=Ir(),aje={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:o}=t,{opts:s}=o,a=(0,Rce.allSchemaProperties)(r),d=a.filter(b=>(0,Dce.alwaysValidSchema)(o,r[b]));if(a.length===0||d.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let u=s.strictSchema&&!s.allowMatchingProperties&&i.properties,c=e.name("valid");o.props!==!0&&!(o.props instanceof $A.Name)&&(o.props=(0,Mce.evaluatedPropsToName)(e,o.props));let{props:l}=o;m();function m(){for(let b of a)u&&p(b),o.allErrors?g(b):(e.var(c,!0),g(b),e.if(c))}function p(b){for(let S in u)new RegExp(b).test(S)&&(0,Dce.checkStrictMode)(o,`property ${S} matches pattern ${b} (use allowMatchingProperties)`)}function g(b){e.forIn("key",n,S=>{e.if((0,$A._)`${(0,Rce.usePattern)(t,b)}.test(${S})`,()=>{let A=d.includes(b);A||t.subschema({keyword:"patternProperties",schemaProp:b,dataProp:S,dataPropType:Mce.Type.Str},c),o.opts.unevaluated&&l!==!0?e.assign((0,$A._)`${l}[${S}]`,!0):!A&&!o.allErrors&&e.if((0,$A.not)(c),()=>e.break())})})}}};Y$.default=aje});var Cce=W(Z$=>{"use strict";h();Object.defineProperty(Z$,"__esModule",{value:!0});var cje=Ir(),dje={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,cje.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Z$.default=dje});var Oce=W(X$=>{"use strict";h();Object.defineProperty(X$,"__esModule",{value:!0});var uje=fd(),lje={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:uje.validateUnion,error:{message:"must match a schema in anyOf"}};X$.default=lje});var $ce=W(Q$=>{"use strict";h();Object.defineProperty(Q$,"__esModule",{value:!0});var NA=Qt(),fje=Ir(),hje={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,NA._)`{passingSchemas: ${t.passing}}`},pje={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:hje,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let o=r,s=e.let("valid",!1),a=e.let("passing",null),d=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(s,()=>t.reset(),()=>t.error(!0));function u(){o.forEach((c,l)=>{let m;(0,fje.alwaysValidSchema)(i,c)?e.var(d,!0):m=t.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},d),l>0&&e.if((0,NA._)`${d} && ${s}`).assign(s,!1).assign(a,(0,NA._)`[${a}, ${l}]`).else(),e.if(d,()=>{e.assign(s,!0),e.assign(a,l),m&&t.mergeEvaluated(m,NA.Name)})})}}};Q$.default=pje});var Nce=W(eN=>{"use strict";h();Object.defineProperty(eN,"__esModule",{value:!0});var mje=Ir(),yje={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((o,s)=>{if((0,mje.alwaysValidSchema)(n,o))return;let a=t.subschema({keyword:"allOf",schemaProp:s},i);t.ok(i),t.mergeEvaluated(a)})}};eN.default=yje});var Kce=W(tN=>{"use strict";h();Object.defineProperty(tN,"__esModule",{value:!0});var jA=Qt(),Uce=Ir(),gje={message:({params:t})=>(0,jA.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,jA._)`{failingKeyword: ${t.ifClause}}`},bje={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:gje,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Uce.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=jce(n,"then"),o=jce(n,"else");if(!i&&!o)return;let s=e.let("valid",!0),a=e.name("_valid");if(d(),t.reset(),i&&o){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,u("then",c),u("else",c))}else i?e.if(a,u("then")):e.if((0,jA.not)(a),u("else"));t.pass(s,()=>t.error(!0));function d(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function u(c,l){return()=>{let m=t.subschema({keyword:c},a);e.assign(s,a),t.mergeValidEvaluated(m,s),l?e.assign(l,(0,jA._)`${c}`):t.setParams({ifClause:c})}}}};function jce(t,e){let r=t.schema[e];return r!==void 0&&!(0,Uce.alwaysValidSchema)(t,r)}tN.default=bje});var qce=W(rN=>{"use strict";h();Object.defineProperty(rN,"__esModule",{value:!0});var vje=Ir(),wje={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,vje.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};rN.default=wje});var Lce=W(nN=>{"use strict";h();Object.defineProperty(nN,"__esModule",{value:!0});var _je=U$(),xje=vce(),Eje=K$(),Sje=_ce(),Aje=xce(),Pje=BA(),Tje=Pce(),Ije=H$(),kje=kce(),Rje=Bce(),Dje=Cce(),Mje=Oce(),Bje=$ce(),Cje=Nce(),Oje=Kce(),$je=qce();function Nje(t=!1){let e=[Dje.default,Mje.default,Bje.default,Cje.default,Oje.default,$je.default,Tje.default,Ije.default,Pje.default,kje.default,Rje.default];return t?e.push(xje.default,Sje.default):e.push(_je.default,Eje.default),e.push(Aje.default),e}nN.default=Nje});var oN=W(PE=>{"use strict";h();Object.defineProperty(PE,"__esModule",{value:!0});PE.dynamicAnchor=void 0;var iN=Qt(),jje=ld(),Fce=hE(),Uje=PA(),Kje={keyword:"$dynamicAnchor",schemaType:"string",code:t=>zce(t,t.schema)};function zce(t,e){let{gen:r,it:n}=t;n.schemaEnv.root.dynamicAnchors[e]=!0;let i=(0,iN._)`${jje.default.dynamicAnchors}${(0,iN.getProperty)(e)}`,o=n.errSchemaPath==="#"?n.validateName:qje(t);r.if((0,iN._)`!${i}`,()=>r.assign(i,o))}PE.dynamicAnchor=zce;function qje(t){let{schemaEnv:e,schema:r,self:n}=t.it,{root:i,baseId:o,localRefs:s,meta:a}=e.root,{schemaId:d}=n.opts,u=new Fce.SchemaEnv({schema:r,schemaId:d,root:i,baseId:o,localRefs:s,meta:a});return Fce.compileSchema.call(n,u),(0,Uje.getValidate)(t,u)}PE.default=Kje});var sN=W(TE=>{"use strict";h();Object.defineProperty(TE,"__esModule",{value:!0});TE.dynamicRef=void 0;var Gce=Qt(),Lje=ld(),Wce=PA(),Fje={keyword:"$dynamicRef",schemaType:"string",code:t=>Hce(t,t.schema)};function Hce(t,e){let{gen:r,keyword:n,it:i}=t;if(e[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);let o=e.slice(1);if(i.allErrors)s();else{let d=r.let("valid",!1);s(d),t.ok(d)}function s(d){if(i.schemaEnv.root.dynamicAnchors[o]){let u=r.let("_v",(0,Gce._)`${Lje.default.dynamicAnchors}${(0,Gce.getProperty)(o)}`);r.if(u,a(u,d),a(i.validateName,d))}else a(i.validateName,d)()}function a(d,u){return u?()=>r.block(()=>{(0,Wce.callRef)(t,d),r.let(u,!0)}):()=>(0,Wce.callRef)(t,d)}}TE.dynamicRef=Hce;TE.default=Fje});var Vce=W(aN=>{"use strict";h();Object.defineProperty(aN,"__esModule",{value:!0});var zje=oN(),Gje=Ir(),Wje={keyword:"$recursiveAnchor",schemaType:"boolean",code(t){t.schema?(0,zje.dynamicAnchor)(t,""):(0,Gje.checkStrictMode)(t.it,"$recursiveAnchor: false is ignored")}};aN.default=Wje});var Jce=W(cN=>{"use strict";h();Object.defineProperty(cN,"__esModule",{value:!0});var Hje=sN(),Vje={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,Hje.dynamicRef)(t,t.schema)};cN.default=Vje});var Yce=W(dN=>{"use strict";h();Object.defineProperty(dN,"__esModule",{value:!0});var Jje=oN(),Yje=sN(),Zje=Vce(),Xje=Jce(),Qje=[Jje.default,Yje.default,Zje.default,Xje.default];dN.default=Qje});var Xce=W(uN=>{"use strict";h();Object.defineProperty(uN,"__esModule",{value:!0});var Zce=BA(),eUe={keyword:"dependentRequired",type:"object",schemaType:"object",error:Zce.error,code:t=>(0,Zce.validatePropertyDeps)(t)};uN.default=eUe});var Qce=W(lN=>{"use strict";h();Object.defineProperty(lN,"__esModule",{value:!0});var tUe=BA(),rUe={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,tUe.validateSchemaDeps)(t)};lN.default=rUe});var ede=W(fN=>{"use strict";h();Object.defineProperty(fN,"__esModule",{value:!0});var nUe=Ir(),iUe={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:e,it:r}){e.contains===void 0&&(0,nUe.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};fN.default=iUe});var tde=W(hN=>{"use strict";h();Object.defineProperty(hN,"__esModule",{value:!0});var oUe=Xce(),sUe=Qce(),aUe=ede(),cUe=[oUe.default,sUe.default,aUe.default];hN.default=cUe});var nde=W(pN=>{"use strict";h();Object.defineProperty(pN,"__esModule",{value:!0});var hm=Qt(),rde=Ir(),dUe=ld(),uUe={message:"must NOT have unevaluated properties",params:({params:t})=>(0,hm._)`{unevaluatedProperty: ${t.unevaluatedProperty}}`},lUe={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:uUe,code(t){let{gen:e,schema:r,data:n,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:s,props:a}=o;a instanceof hm.Name?e.if((0,hm._)`${a} !== true`,()=>e.forIn("key",n,l=>e.if(u(a,l),()=>d(l)))):a!==!0&&e.forIn("key",n,l=>a===void 0?d(l):e.if(c(a,l),()=>d(l))),o.props=!0,t.ok((0,hm._)`${i} === ${dUe.default.errors}`);function d(l){if(r===!1){t.setParams({unevaluatedProperty:l}),t.error(),s||e.break();return}if(!(0,rde.alwaysValidSchema)(o,r)){let m=e.name("valid");t.subschema({keyword:"unevaluatedProperties",dataProp:l,dataPropType:rde.Type.Str},m),s||e.if((0,hm.not)(m),()=>e.break())}}function u(l,m){return(0,hm._)`!${l} || !${l}[${m}]`}function c(l,m){let p=[];for(let g in l)l[g]===!0&&p.push((0,hm._)`${m} !== ${g}`);return(0,hm.and)(...p)}}};pN.default=lUe});var ode=W(mN=>{"use strict";h();Object.defineProperty(mN,"__esModule",{value:!0});var ng=Qt(),ide=Ir(),fUe={message:({params:{len:t}})=>(0,ng.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ng._)`{limit: ${t}}`},hUe={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:fUe,code(t){let{gen:e,schema:r,data:n,it:i}=t,o=i.items||0;if(o===!0)return;let s=e.const("len",(0,ng._)`${n}.length`);if(r===!1)t.setParams({len:o}),t.fail((0,ng._)`${s} > ${o}`);else if(typeof r=="object"&&!(0,ide.alwaysValidSchema)(i,r)){let d=e.var("valid",(0,ng._)`${s} <= ${o}`);e.if((0,ng.not)(d),()=>a(d,o)),t.ok(d)}i.items=!0;function a(d,u){e.forRange("i",u,s,c=>{t.subschema({keyword:"unevaluatedItems",dataProp:c,dataPropType:ide.Type.Num},d),i.allErrors||e.if((0,ng.not)(d),()=>e.break())})}}};mN.default=hUe});var sde=W(yN=>{"use strict";h();Object.defineProperty(yN,"__esModule",{value:!0});var pUe=nde(),mUe=ode(),yUe=[pUe.default,mUe.default];yN.default=yUe});var ade=W(gN=>{"use strict";h();Object.defineProperty(gN,"__esModule",{value:!0});var Pi=Qt(),gUe={message:({schemaCode:t})=>(0,Pi.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Pi._)`{format: ${t}}`},bUe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:gUe,code(t,e){let{gen:r,data:n,$data:i,schema:o,schemaCode:s,it:a}=t,{opts:d,errSchemaPath:u,schemaEnv:c,self:l}=a;if(!d.validateFormats)return;i?m():p();function m(){let g=r.scopeValue("formats",{ref:l.formats,code:d.code.formats}),b=r.const("fDef",(0,Pi._)`${g}[${s}]`),S=r.let("fType"),A=r.let("format");r.if((0,Pi._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>r.assign(S,(0,Pi._)`${b}.type || "string"`).assign(A,(0,Pi._)`${b}.validate`),()=>r.assign(S,(0,Pi._)`"string"`).assign(A,b)),t.fail$data((0,Pi.or)(I(),P()));function I(){return d.strictSchema===!1?Pi.nil:(0,Pi._)`${s} && !${A}`}function P(){let $=c.$async?(0,Pi._)`(${b}.async ? await ${A}(${n}) : ${A}(${n}))`:(0,Pi._)`${A}(${n})`,N=(0,Pi._)`(typeof ${A} == "function" ? ${$} : ${A}.test(${n}))`;return(0,Pi._)`${A} && ${A} !== true && ${S} === ${e} && !${N}`}}function p(){let g=l.formats[o];if(!g){I();return}if(g===!0)return;let[b,S,A]=P(g);b===e&&t.pass($());function I(){if(d.strictSchema===!1){l.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function P(N){let L=N instanceof RegExp?(0,Pi.regexpCode)(N):d.code.formats?(0,Pi._)`${d.code.formats}${(0,Pi.getProperty)(o)}`:void 0,F=r.scopeValue("formats",{key:o,ref:N,code:L});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,Pi._)`${F}.validate`]:["string",N,F]}function $(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Pi._)`await ${A}(${n})`}return typeof S=="function"?(0,Pi._)`${A}(${n})`:(0,Pi._)`${A}.test(${n})`}}}};gN.default=bUe});var cde=W(bN=>{"use strict";h();Object.defineProperty(bN,"__esModule",{value:!0});var vUe=ade(),wUe=[vUe.default];bN.default=wUe});var dde=W(jw=>{"use strict";h();Object.defineProperty(jw,"__esModule",{value:!0});jw.contentVocabulary=jw.metadataVocabulary=void 0;jw.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];jw.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var lde=W(vN=>{"use strict";h();Object.defineProperty(vN,"__esModule",{value:!0});var _Ue=tce(),xUe=mce(),EUe=Lce(),SUe=Yce(),AUe=tde(),PUe=sde(),TUe=cde(),ude=dde(),IUe=[SUe.default,_Ue.default,xUe.default,(0,EUe.default)(!0),TUe.default,ude.metadataVocabulary,ude.contentVocabulary,AUe.default,PUe.default];vN.default=IUe});var fde=W(IE=>{"use strict";h();Object.defineProperty(IE,"__esModule",{value:!0});IE.DiscrError=void 0;var kUe;(function(t){t.Tag="tag",t.Mapping="mapping"})(kUe=IE.DiscrError||(IE.DiscrError={}))});var pde=W(_N=>{"use strict";h();Object.defineProperty(_N,"__esModule",{value:!0});var Uw=Qt(),wN=fde(),hde=hE(),RUe=Ir(),DUe={message:({params:{discrError:t,tagName:e}})=>t===wN.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Uw._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},MUe={keyword:"discriminator",type:"object",schemaType:"object",error:DUe,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:o}=t,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let d=e.let("valid",!1),u=e.const("tag",(0,Uw._)`${r}${(0,Uw.getProperty)(a)}`);e.if((0,Uw._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:wN.DiscrError.Tag,tag:u,tagName:a})),t.ok(d);function c(){let p=m();e.if(!1);for(let g in p)e.elseIf((0,Uw._)`${u} === ${g}`),e.assign(d,l(p[g]));e.else(),t.error(!1,{discrError:wN.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function l(p){let g=e.name("valid"),b=t.subschema({keyword:"oneOf",schemaProp:p},g);return t.mergeEvaluated(b,Uw.Name),g}function m(){var p;let g={},b=A(i),S=!0;for(let $=0;$<s.length;$++){let N=s[$];N?.$ref&&!(0,RUe.schemaHasRulesButRef)(N,o.self.RULES)&&(N=hde.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,N?.$ref),N instanceof hde.SchemaEnv&&(N=N.schema));let L=(p=N?.properties)===null||p===void 0?void 0:p[a];if(typeof L!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);S=S&&(b||A(N)),I(L,$)}if(!S)throw new Error(`discriminator: "${a}" must be required`);return g;function A({required:$}){return Array.isArray($)&&$.includes(a)}function I($,N){if($.const)P($.const,N);else if($.enum)for(let L of $.enum)P(L,N);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function P($,N){if(typeof $!="string"||$ in g)throw new Error(`discriminator: "${a}" values must be unique strings`);g[$]=N}}}};_N.default=MUe});var mde=W((Y1t,BUe)=>{BUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/schema",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor:"meta",title:"Core and Validation specifications meta-schema",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],type:["object","boolean"],$comment:"This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",properties:{definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}}}});var yde=W((Z1t,CUe)=>{CUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/applicator",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/applicator":!0},$dynamicAnchor:"meta",title:"Applicator vocabulary meta-schema",type:["object","boolean"],properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}}}});var gde=W((X1t,OUe)=>{OUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/unevaluated",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},$dynamicAnchor:"meta",title:"Unevaluated applicator vocabulary meta-schema",type:["object","boolean"],properties:{unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}}}});var bde=W((Q1t,$Ue)=>{$Ue.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/content",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor:"meta",title:"Content vocabulary meta-schema",type:["object","boolean"],properties:{contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}}}});var vde=W((e2t,NUe)=>{NUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/core",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/core":!0},$dynamicAnchor:"meta",title:"Core vocabulary meta-schema",type:["object","boolean"],properties:{$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},$defs:{anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}}}});var wde=W((t2t,jUe)=>{jUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/format-annotation",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},$dynamicAnchor:"meta",title:"Format vocabulary meta-schema for annotation results",type:["object","boolean"],properties:{format:{type:"string"}}}});var _de=W((r2t,UUe)=>{UUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/meta-data",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},$dynamicAnchor:"meta",title:"Meta-data vocabulary meta-schema",type:["object","boolean"],properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}}}});var xde=W((n2t,KUe)=>{KUe.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/validation",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/validation":!0},$dynamicAnchor:"meta",title:"Validation vocabulary meta-schema",type:["object","boolean"],properties:{type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}}}});var Ede=W(xN=>{"use strict";h();Object.defineProperty(xN,"__esModule",{value:!0});var qUe=mde(),LUe=yde(),FUe=gde(),zUe=bde(),GUe=vde(),WUe=wde(),HUe=_de(),VUe=xde(),JUe=["/properties"];function YUe(t){return[qUe,LUe,FUe,zUe,GUe,e(this,WUe),HUe,e(this,VUe)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function e(r,n){return t?r.$dataMetaSchema(n,JUe):n}}xN.default=YUe});var SN=W((Zn,Sde)=>{"use strict";h();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.MissingRefError=Zn.ValidationError=Zn.CodeGen=Zn.Name=Zn.nil=Zn.stringify=Zn.str=Zn._=Zn.KeywordCxt=void 0;var ZUe=Yae(),XUe=lde(),QUe=pde(),eKe=Ede(),EN="https://json-schema.org/draft/2020-12/schema",UA=class extends ZUe.default{constructor(e={}){super({...e,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),XUe.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(QUe.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();let{$data:e,meta:r}=this.opts;r&&(eKe.default.call(this,e),this.refs["http://json-schema.org/schema"]=EN)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(EN)?EN:void 0)}};Sde.exports=Zn=UA;Object.defineProperty(Zn,"__esModule",{value:!0});Zn.default=UA;var tKe=fE();Object.defineProperty(Zn,"KeywordCxt",{enumerable:!0,get:function(){return tKe.KeywordCxt}});var Kw=Qt();Object.defineProperty(Zn,"_",{enumerable:!0,get:function(){return Kw._}});Object.defineProperty(Zn,"str",{enumerable:!0,get:function(){return Kw.str}});Object.defineProperty(Zn,"stringify",{enumerable:!0,get:function(){return Kw.stringify}});Object.defineProperty(Zn,"nil",{enumerable:!0,get:function(){return Kw.nil}});Object.defineProperty(Zn,"Name",{enumerable:!0,get:function(){return Kw.Name}});Object.defineProperty(Zn,"CodeGen",{enumerable:!0,get:function(){return Kw.CodeGen}});var rKe=vA();Object.defineProperty(Zn,"ValidationError",{enumerable:!0,get:function(){return rKe.default}});var nKe=wA();Object.defineProperty(Zn,"MissingRefError",{enumerable:!0,get:function(){return nKe.default}})});var Mde=W((gEt,Dde)=>{h();var cKe=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,YA=()=>cKe.now(),dKe=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),kN=t=>t===1/0||dKe(t),RN=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:i=!1,noUpdateTTL:o=!1,dispose:s,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!kN(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!kN(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!i,this.noUpdateTTL=!!o,this.noDisposeOnSet=!!a,s!==void 0){if(typeof s!="function")throw new TypeError("dispose must be function if set");this.dispose=s}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let i in this.expirations){this.setTimer(i,i-YA());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return B.default.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let i=this.expirations[n];!i||i.length<=1?delete this.expirations[n]:this.expirations[n]=i.filter(o=>o!==e)}if(r!==1/0){let i=Math.floor(YA()+r);this.expirationMap.set(e,i),this.expirations[i]||(this.expirations[i]=[],this.setTimer(i,r)),this.expirations[i].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:i=this.noUpdateTTL,noDisposeOnSet:o=this.noDisposeOnSet}={}){if(!kN(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){i||this.setTTL(e,n);let s=this.data.get(e);s!==r&&(this.data.set(e,r),o||this.dispose(s,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-YA())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:i=this.checkAgeOnGet}={}){let o=this.data.get(e);if(i&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),o}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let i=this.expirations[r];return i&&(i.length<=1?delete this.expirations[r]:this.expirations[r]=i.filter(o=>o!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let i of r)n.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of n)this.dispose(o,i,"evict")}else{let n=this.size-this.max,i=[];for(let o of r.splice(0,n))i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(YA());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],i=[];delete this.expirations[r];for(let o of n)i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};Dde.exports=RN});var Nde=W($de=>{"use strict";h();$de.supports=function(...e){let r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var wu=W((NEt,jde)=>{"use strict";h();jde.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var BN=W((UEt,Ude)=>{"use strict";h();var MN=null;Ude.exports=function(){return MN===null&&(MN={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),MN}});var $N=W(Kde=>{"use strict";h();var CN=wu(),uKe=new Set(["buffer","view","utf8"]),ON=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!uKe.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new CN(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new CN(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new CN(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Kde.Encoding=ON});var KN=W(XA=>{"use strict";h();var{Buffer:jN}=Un()||{},{Encoding:UN}=$N(),lKe=BN(),DE=class extends UN{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ME({encode:this.encode,decode:e=>this.decode(jN.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ME=class extends UN{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new DE({encode:e=>{let r=this.encode(e);return jN.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},NN=class extends UN{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new DE({encode:e=>jN.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=lKe();return new ME({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};XA.BufferFormat=DE;XA.ViewFormat=ME;XA.UTF8Format=NN});var zde=W(cg=>{"use strict";h();var{Buffer:$s}=Un()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Lde,textDecoder:qde}=BN()(),{BufferFormat:BE,ViewFormat:qN,UTF8Format:Fde}=KN(),QA=t=>t;cg.utf8=new Fde({encode:function(t){return $s.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?qde.decode(t):String(t)},decode:QA,name:"utf8",createViewTranscoder(){return new qN({encode:function(t){return ArrayBuffer.isView(t)?t:Lde.encode(t)},decode:function(t){return qde.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BE({encode:function(t){return $s.isBuffer(t)?t:ArrayBuffer.isView(t)?$s.from(t.buffer,t.byteOffset,t.byteLength):$s.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});cg.json=new Fde({encode:JSON.stringify,decode:JSON.parse,name:"json"});cg.buffer=new BE({encode:function(t){return $s.isBuffer(t)?t:ArrayBuffer.isView(t)?$s.from(t.buffer,t.byteOffset,t.byteLength):$s.from(String(t),"utf8")},decode:QA,name:"buffer",createViewTranscoder(){return new qN({encode:function(t){return ArrayBuffer.isView(t)?t:$s.from(String(t),"utf8")},decode:function(t){return $s.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});cg.view=new qN({encode:function(t){return ArrayBuffer.isView(t)?t:Lde.encode(t)},decode:QA,name:"view",createBufferTranscoder(){return new BE({encode:function(t){return $s.isBuffer(t)?t:ArrayBuffer.isView(t)?$s.from(t.buffer,t.byteOffset,t.byteLength):$s.from(String(t),"utf8")},decode:QA,name:`${this.name}+buffer`})}});cg.hex=new BE({encode:function(t){return $s.isBuffer(t)?t:$s.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});cg.base64=new BE({encode:function(t){return $s.isBuffer(t)?t:$s.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var Hde=W(Wde=>{"use strict";h();var Gde=wu(),tP=zde(),{Encoding:fKe}=$N(),{BufferFormat:hKe,ViewFormat:pKe,UTF8Format:mKe}=KN(),CE=Symbol("formats"),eP=Symbol("encodings"),yKe=new Set(["buffer","view","utf8"]),LN=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>yKe.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[eP]=new Map,this[CE]=new Set(e);for(let r in tP)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[eP].values()))}encoding(e){let r=this[eP].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=wKe[e],!r)throw new Gde(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=gKe(e)}let{name:n,format:i}=r;if(!this[CE].has(i))if(this[CE].has("view"))r=r.createViewTranscoder();else if(this[CE].has("buffer"))r=r.createBufferTranscoder();else if(this[CE].has("utf8"))r=r.createUTF8Transcoder();else throw new Gde(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,r.name,r.commonName])this[eP].set(o,r)}return r}};Wde.Transcoder=LN;function gKe(t){if(t instanceof fKe)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${_Ke++}`;switch(bKe(t)){case"view":return new pKe({...t,name:r});case"utf8":return new mKe({...t,name:r});case"buffer":return new hKe({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function bKe(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var vKe={binary:tP.buffer,"utf-8":tP.utf8},wKe={...tP,...vKe},_Ke=0});var Jde=W((JEt,Vde)=>{h();Vde.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var OE=W(FN=>{"use strict";h();var Yde=Jde();FN.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(o,s){o?i(o):n(s)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};FN.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){Yde(()=>e(null,r))}).catch(function(r){Yde(()=>e(r))})}});var rP=W(zN=>{"use strict";h();zN.getCallback=function(t,e){return typeof t=="function"?t:e};zN.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Am=W(sP=>{"use strict";h();var{fromCallback:GN}=OE(),bc=wu(),{getOptions:WN,getCallback:Zde}=rP(),dg=Symbol("promise"),Lw=Symbol("callback"),$l=Symbol("working"),ug=Symbol("handleOne"),uh=Symbol("handleMany"),HN=Symbol("autoClose"),Em=Symbol("finishWork"),Nl=Symbol("returnMany"),wm=Symbol("closing"),$E=Symbol("handleClose"),nP=Symbol("closed"),NE=Symbol("closeCallbacks"),xm=Symbol("keyEncoding"),lg=Symbol("valueEncoding"),VN=Symbol("abortOnClose"),iP=Symbol("legacy"),JN=Symbol("keys"),YN=Symbol("values"),_m=Symbol("limit"),md=Symbol("count"),oP=Object.freeze({}),xKe=()=>{},Xde=!1,jE=class{constructor(e,r,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[nP]=!1,this[NE]=[],this[$l]=!1,this[wm]=!1,this[HN]=!1,this[Lw]=null,this[ug]=this[ug].bind(this),this[uh]=this[uh].bind(this),this[$E]=this[$E].bind(this),this[xm]=r[xm],this[lg]=r[lg],this[iP]=n,this[_m]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[md]=0,this[VN]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[md]}get limit(){return this[_m]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(o,s,a)=>{o?i(o):this[iP]?s===void 0&&a===void 0?n():n([s,a]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[wm]?this.nextTick(e,new bc("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[$l]?this.nextTick(e,new bc("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[$l]=!0,this[Lw]=e,this[md]>=this[_m]?this.nextTick(this[ug],null):this._next(this[ug])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=Zde(r,n),n=GN(n,dg),r=WN(r,oP),Number.isInteger(e)?(this[wm]?this.nextTick(n,new bc("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[$l]?this.nextTick(n,new bc("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[_m]<1/0&&(e=Math.min(e,this[_m]-this[md])),this[$l]=!0,this[Lw]=n,e<=0?this.nextTick(this[uh],null,[]):this._nextv(e,r,this[uh])),n[dg]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[dg])}_nextv(e,r,n){let i=[],o=(s,a,d)=>{if(s)return n(s);if(this[iP]?a===void 0&&d===void 0:a===void 0)return n(null,i);i.push(this[iP]?[a,d]:a),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,r){return r=Zde(e,r),r=GN(r,dg),e=WN(e,oP),this[wm]?this.nextTick(r,new bc("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[$l]?this.nextTick(r,new bc("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[$l]=!0,this[Lw]=r,this[HN]=!0,this[md]>=this[_m]?this.nextTick(this[uh],null,[]):this._all(e,this[uh])),r[dg]}_all(e,r){let n=this[md],i=[],o=()=>{let a=this[_m]<1/0?Math.min(1e3,this[_m]-n):1e3;a<=0?this.nextTick(r,null,i):this._nextv(a,oP,s)},s=(a,d)=>{a?r(a):d.length===0?r(null,i):(i.push.apply(i,d),n+=d.length,o())};o()}[Em](){let e=this[Lw];return this[VN]&&e===null?xKe:(this[$l]=!1,this[Lw]=null,this[wm]&&this._close(this[$E]),e)}[Nl](e,r,n){this[HN]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=WN(r,oP),!this[wm]){if(this[$l])throw new bc("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[xm]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,r)}}}_seek(e,r){throw new bc("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=GN(e,dg),this[nP]?this.nextTick(e):this[wm]?this[NE].push(e):(this[wm]=!0,this[NE].push(e),this[$l]?this[VN]&&this[Em]()(new bc("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[$E])),e[dg]}_close(e){this.nextTick(e)}[$E](){this[nP]=!0,this.db.detachResource(this);let e=this[NE];this[NE]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[nP]||await this.close()}}},Fw=class extends jE{constructor(e,r){super(e,r,!0),this[JN]=r.keys!==!1,this[YN]=r.values!==!1}[ug](e,r,n){let i=this[Em]();if(e)return i(e);try{r=this[JN]&&r!==void 0?this[xm].decode(r):void 0,n=this[YN]&&n!==void 0?this[lg].decode(n):void 0}catch(o){return i(new Sm("entry",o))}r===void 0&&n===void 0||this[md]++,i(null,r,n)}[uh](e,r){let n=this[Em]();if(e)return this[Nl](n,e);try{for(let i of r){let o=i[0],s=i[1];i[0]=this[JN]&&o!==void 0?this[xm].decode(o):void 0,i[1]=this[YN]&&s!==void 0?this[lg].decode(s):void 0}}catch(i){return this[Nl](n,new Sm("entries",i))}this[md]+=r.length,this[Nl](n,null,r)}end(e){return!Xde&&typeof console<"u"&&(Xde=!0,console.warn(new bc("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},ZN=class extends jE{constructor(e,r){super(e,r,!1)}[ug](e,r){let n=this[Em]();if(e)return n(e);try{r=r!==void 0?this[xm].decode(r):void 0}catch(i){return n(new Sm("key",i))}r!==void 0&&this[md]++,n(null,r)}[uh](e,r){let n=this[Em]();if(e)return this[Nl](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[xm].decode(o):void 0}}catch(i){return this[Nl](n,new Sm("keys",i))}this[md]+=r.length,this[Nl](n,null,r)}},XN=class extends jE{constructor(e,r){super(e,r,!1)}[ug](e,r){let n=this[Em]();if(e)return n(e);try{r=r!==void 0?this[lg].decode(r):void 0}catch(i){return n(new Sm("value",i))}r!==void 0&&this[md]++,n(null,r)}[uh](e,r){let n=this[Em]();if(e)return this[Nl](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[lg].decode(o):void 0}}catch(i){return this[Nl](n,new Sm("values",i))}this[md]+=r.length,this[Nl](n,null,r)}},Sm=class extends bc{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(Fw.prototype,t.split(" ")[0],{get(){throw new bc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new bc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});Fw.keyEncoding=xm;Fw.valueEncoding=lg;sP.AbstractIterator=Fw;sP.AbstractKeyIterator=ZN;sP.AbstractValueIterator=XN});var Qde=W(QN=>{"use strict";h();var{AbstractKeyIterator:EKe,AbstractValueIterator:SKe}=Am(),fg=Symbol("iterator"),UE=Symbol("callback"),zw=Symbol("handleOne"),hg=Symbol("handleMany"),KE=class extends EKe{constructor(e,r){super(e,r),this[fg]=e.iterator({...r,keys:!0,values:!1}),this[zw]=this[zw].bind(this),this[hg]=this[hg].bind(this)}},aP=class extends SKe{constructor(e,r){super(e,r),this[fg]=e.iterator({...r,keys:!1,values:!0}),this[zw]=this[zw].bind(this),this[hg]=this[hg].bind(this)}};for(let t of[KE,aP]){let e=t===KE,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[UE]=n,this[fg].next(this[zw])},t.prototype[zw]=function(n,i,o){let s=this[UE];n?s(n):s(null,e?i:o)},t.prototype._nextv=function(n,i,o){this[UE]=o,this[fg].nextv(n,i,this[hg])},t.prototype._all=function(n,i){this[UE]=i,this[fg].all(n,this[hg])},t.prototype[hg]=function(n,i){let o=this[UE];n?o(n):o(null,i.map(r))},t.prototype._seek=function(n,i){this[fg].seek(n,i)},t.prototype._close=function(n){this[fg].close(n)}}QN.DefaultKeyIterator=KE;QN.DefaultValueIterator=aP});var eue=W(hP=>{"use strict";h();var{AbstractIterator:AKe,AbstractKeyIterator:PKe,AbstractValueIterator:TKe}=Am(),ej=wu(),Oa=Symbol("nut"),lP=Symbol("undefer"),fP=Symbol("factory"),cP=class extends AKe{constructor(e,r){super(e,r),this[Oa]=null,this[fP]=()=>e.iterator(r),this.db.defer(()=>this[lP]())}},dP=class extends PKe{constructor(e,r){super(e,r),this[Oa]=null,this[fP]=()=>e.keys(r),this.db.defer(()=>this[lP]())}},uP=class extends TKe{constructor(e,r){super(e,r),this[Oa]=null,this[fP]=()=>e.values(r),this.db.defer(()=>this[lP]())}};for(let t of[cP,dP,uP])t.prototype[lP]=function(){this.db.status==="open"&&(this[Oa]=this[fP]())},t.prototype._next=function(e){this[Oa]!==null?this[Oa].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ej("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Oa]!==null?this[Oa].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new ej("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Oa]!==null?this[Oa].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new ej("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Oa]!==null?this[Oa]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Oa]!==null?this[Oa].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};hP.DeferredIterator=cP;hP.DeferredKeyIterator=dP;hP.DeferredValueIterator=uP});var rj=W(rue=>{"use strict";h();var{fromCallback:tue}=OE(),pP=wu(),{getCallback:IKe,getOptions:kKe}=rP(),mP=Symbol("promise"),yd=Symbol("status"),Gw=Symbol("operations"),qE=Symbol("finishClose"),Ww=Symbol("closeCallbacks"),tj=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Gw]=[],this[Ww]=[],this[yd]="open",this[qE]=this[qE].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Gw].length}put(e,r,n){if(this[yd]!=="open")throw new pP("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=o.keyEncoding(n&&n.keyEncoding),d=o.valueEncoding(n&&n.valueEncoding),u=a.format;n={...n,keyEncoding:u,valueEncoding:d.format},o!==this.db&&(n.sublevel=null);let c=o.prefixKey(a.encode(e),u),l=d.encode(r);return this._put(c,l,n),this[Gw].push({...s,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[yd]!=="open")throw new pP("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=r&&r.sublevel!=null?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),a=s.format;return r={...r,keyEncoding:a},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(s.encode(e),a),r),this[Gw].push({...o,type:"del",key:e}),this}_del(e,r){}clear(){if(this[yd]!=="open")throw new pP("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Gw]=[],this}_clear(){}write(e,r){return r=IKe(e,r),r=tue(r,mP),e=kKe(e),this[yd]!=="open"?this.nextTick(r,new pP("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[yd]="writing",this._write(e,n=>{this[yd]="closing",this[Ww].push(()=>r(n)),n||this.db.emit("batch",this[Gw]),this._close(this[qE])})),r[mP]}_write(e,r){}close(e){return e=tue(e,mP),this[yd]==="closing"?this[Ww].push(e):this[yd]==="closed"?this.nextTick(e):(this[Ww].push(e),this[yd]!=="writing"&&(this[yd]="closing",this._close(this[qE]))),e[mP]}_close(e){this.nextTick(e)}[qE](){this[yd]="closed",this.db.detachResource(this);let e=this[Ww];this[Ww]=[];for(let r of e)r()}};rue.AbstractChainedBatch=tj});var iue=W(nue=>{"use strict";h();var{AbstractChainedBatch:RKe}=rj(),DKe=wu(),Hw=Symbol("encoded"),nj=class extends RKe{constructor(e){super(e),this[Hw]=[]}_put(e,r,n){this[Hw].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Hw].push({...r,type:"del",key:e})}_clear(){this[Hw]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Hw].length===0?this.nextTick(r):this.db._batch(this[Hw],e,r):this.nextTick(r,new DKe("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};nue.DefaultChainedBatch=nj});var aue=W((l6t,sue)=>{"use strict";h();var oue=wu(),MKe=Object.prototype.hasOwnProperty,BKe=new Set(["lt","lte","gt","gte"]);sue.exports=function(t,e){let r={};for(let n in t)if(MKe.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new oue(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new oue("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});BKe.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var ij=W((h6t,due)=>{h();var cue;due.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(cue||(cue=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var fue=W((m6t,lue)=>{"use strict";h();var uue=ij();lue.exports=function(t,...e){e.length===0?uue(t):uue(()=>t(...e))}});var hue=W(yP=>{"use strict";h();var{AbstractIterator:CKe,AbstractKeyIterator:OKe,AbstractValueIterator:$Ke}=Am(),Vw=Symbol("unfix"),_u=Symbol("iterator"),pg=Symbol("handleOne"),Pm=Symbol("handleMany"),lh=Symbol("callback"),LE=class extends CKe{constructor(e,r,n,i){super(e,r),this[_u]=n,this[Vw]=i,this[pg]=this[pg].bind(this),this[Pm]=this[Pm].bind(this),this[lh]=null}[pg](e,r,n){let i=this[lh];if(e)return i(e);r!==void 0&&(r=this[Vw](r)),i(e,r,n)}[Pm](e,r){let n=this[lh];if(e)return n(e);for(let i of r){let o=i[0];o!==void 0&&(i[0]=this[Vw](o))}n(e,r)}},FE=class extends OKe{constructor(e,r,n,i){super(e,r),this[_u]=n,this[Vw]=i,this[pg]=this[pg].bind(this),this[Pm]=this[Pm].bind(this),this[lh]=null}[pg](e,r){let n=this[lh];if(e)return n(e);r!==void 0&&(r=this[Vw](r)),n(e,r)}[Pm](e,r){let n=this[lh];if(e)return n(e);for(let i=0;i<r.length;i++){let o=r[i];o!==void 0&&(r[i]=this[Vw](o))}n(e,r)}},zE=class extends $Ke{constructor(e,r,n){super(e,r),this[_u]=n}};for(let t of[LE,FE])t.prototype._next=function(e){this[lh]=e,this[_u].next(this[pg])},t.prototype._nextv=function(e,r,n){this[lh]=n,this[_u].nextv(e,r,this[Pm])},t.prototype._all=function(e,r){this[lh]=r,this[_u].all(e,this[Pm])};for(let t of[zE])t.prototype._next=function(e){this[_u].next(e)},t.prototype._nextv=function(e,r,n){this[_u].nextv(e,r,n)},t.prototype._all=function(e,r){this[_u].all(e,r)};for(let t of[LE,FE,zE])t.prototype._seek=function(e,r){this[_u].seek(e,r)},t.prototype._close=function(e){this[_u].close(e)};yP.AbstractSublevelIterator=LE;yP.AbstractSublevelKeyIterator=FE;yP.AbstractSublevelValueIterator=zE});var gue=W((v6t,yue)=>{"use strict";h();var oj=wu(),{Buffer:cj}=Un()||{},{AbstractSublevelIterator:NKe,AbstractSublevelKeyIterator:jKe,AbstractSublevelValueIterator:UKe}=hue(),fh=Symbol("prefix"),pue=Symbol("upperBound"),GE=Symbol("prefixRange"),vc=Symbol("parent"),sj=Symbol("unfix"),mue=new TextEncoder,KKe={separator:"!"};yue.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new oj("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new oj("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?KKe:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:a,...d}=e.defaults(o);i=LKe(i,s);let u=s.charCodeAt(0)+1,c=n[vc]||n;if(!mue.encode(i).every(p=>p>u&&p<127))throw new oj(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(qKe(c,a),d);let l=(n.prefix||"")+s+i+s,m=l.slice(0,-1)+String.fromCharCode(u);this[vc]=c,this[fh]=new gP(l),this[pue]=new gP(m),this[sj]=new dj,this.nextTick=c.nextTick}prefixKey(n,i){if(i==="utf8")return this[fh].utf8+n;if(n.byteLength===0)return this[fh][i];if(i==="view"){let o=this[fh].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[fh].buffer;return cj.concat([o,n],o.byteLength+n.byteLength)}}[GE](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[fh][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[pue][i]}get prefix(){return this[fh].utf8}get db(){return this[vc]}_open(n,i){this[vc].open({passive:!0},i)}_put(n,i,o,s){this[vc].put(n,i,o,s)}_get(n,i,o){this[vc].get(n,i,o)}_getMany(n,i,o){this[vc].getMany(n,i,o)}_del(n,i,o){this[vc].del(n,i,o)}_batch(n,i,o){this[vc].batch(n,i,o)}_clear(n,i){this[GE](n,n.keyEncoding),this[vc].clear(n,i)}_iterator(n){this[GE](n,n.keyEncoding);let i=this[vc].iterator(n),o=this[sj].get(this[fh].utf8.length,n.keyEncoding);return new NKe(this,n,i,o)}_keys(n){this[GE](n,n.keyEncoding);let i=this[vc].keys(n),o=this[sj].get(this[fh].utf8.length,n.keyEncoding);return new jKe(this,n,i,o)}_values(n){this[GE](n,n.keyEncoding);let i=this[vc].values(n);return new UKe(this,n,i)}}return{AbstractSublevel:e}};var qKe=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:aj(t,"utf8"),buffer:aj(t,"buffer"),view:aj(t,"view")}}},aj=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},gP=class{constructor(e){this.utf8=e,this.view=mue.encode(e),this.buffer=cj?cj.from(this.view.buffer,0,this.view.byteLength):{}}},dj=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(i,o){return o.subarray(i)}).bind(null,e):n=(function(i,o){return o.slice(i)}).bind(null,e),this.cache.set(r,n)),n}},LKe=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var pj=W(hj=>{"use strict";h();var{supports:FKe}=Nde(),{Transcoder:zKe}=Hde(),{EventEmitter:GKe}=nc(),{fromCallback:Tm}=OE(),xu=wu(),{AbstractIterator:mg}=Am(),{DefaultKeyIterator:WKe,DefaultValueIterator:HKe}=Qde(),{DeferredIterator:VKe,DeferredKeyIterator:JKe,DeferredValueIterator:YKe}=eue(),{DefaultChainedBatch:bue}=iue(),{getCallback:yg,getOptions:Im}=rP(),bP=aue(),pr=Symbol("promise"),hh=Symbol("landed"),gg=Symbol("resources"),uj=Symbol("closeResources"),WE=Symbol("operations"),HE=Symbol("undefer"),vP=Symbol("deferOpen"),vue=Symbol("options"),kr=Symbol("status"),bg=Symbol("defaultOptions"),Jw=Symbol("transcoder"),wP=Symbol("keyEncoding"),lj=Symbol("valueEncoding"),ZKe=()=>{},VE=class extends GKe{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Im(r);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=r;this[gg]=new Set,this[WE]=[],this[vP]=!0,this[vue]=s,this[kr]="opening",this.supports=FKe(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Jw]=new zKe(XKe(this)),this[wP]=this[Jw].encoding(n||"utf8"),this[lj]=this[Jw].encoding(i||"utf8");for(let a of this[Jw].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[bg]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[wP].commonName,valueEncoding:this[lj].commonName}),key:Object.freeze({keyEncoding:this[wP].commonName})},this.nextTick(()=>{this[vP]&&this.open({passive:!1},ZKe)})}get status(){return this[kr]}keyEncoding(e){return this[Jw].encoding(e??this[wP])}valueEncoding(e){return this[Jw].encoding(e??this[lj])}open(e,r){r=yg(e,r),r=Tm(r,pr),e={...this[vue],...Im(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[kr]==="closing"||this[kr]==="opening"?this.once(hh,i?()=>n(i):n):this[kr]!=="open"?r(new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[kr]==="opening"?this.once(hh,n):this.nextTick(n):this[kr]==="closed"||this[vP]?(this[vP]=!1,this[kr]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[kr]="closed",this[uj](()=>{this.emit(hh),n(i)}),this[HE]();return}this[kr]="open",this[HE](),this.emit(hh),this[kr]==="open"&&this.emit("open"),this[kr]==="open"&&this.emit("ready"),n()})):this[kr]==="open"?this.nextTick(n):this.once(hh,()=>this.open(e,r)),r[pr]}_open(e,r){this.nextTick(r)}close(e){e=Tm(e,pr);let r=n=>{this[kr]==="opening"||this[kr]==="closing"?this.once(hh,n?r(n):r):this[kr]!=="closed"?e(new xu("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[kr]==="open"){this[kr]="closing",this.emit("closing");let n=i=>{this[kr]="open",this[HE](),this.emit(hh),r(i)};this[uj](()=>{this._close(i=>{if(i)return n(i);this[kr]="closed",this[HE](),this.emit(hh),this[kr]==="closed"&&this.emit("closed"),r()})})}else this[kr]==="closed"?this.nextTick(r):this.once(hh,()=>this.close(e));return e[pr]}[uj](e){if(this[gg].size===0)return this.nextTick(e);let r=this[gg].size,n=!0,i=()=>{--r===0&&(n?this.nextTick(e):e())};for(let o of this[gg])o.close(i);n=!1,this[gg].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=yg(r,n),n=Tm(n,pr),r=Im(r,this[bg].entry),this[kr]==="opening")return this.defer(()=>this.get(e,r,n)),n[pr];if(Yw(this,n))return n[pr];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[pr];let o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),a=o.format,d=s.format;return(r.keyEncoding!==a||r.valueEncoding!==d)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:d})),this._get(this.prefixKey(o.encode(e),a),r,(u,c)=>{if(u)return(u.code==="LEVEL_NOT_FOUND"||u.notFound||/NotFound/i.test(u))&&(u.code||(u.code="LEVEL_NOT_FOUND"),u.notFound||(u.notFound=!0),u.status||(u.status=404)),n(u);try{c=s.decode(c)}catch(l){return n(new xu("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:l}))}n(null,c)}),n[pr]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=yg(r,n),n=Tm(n,pr),r=Im(r,this[bg].entry),this[kr]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[pr];if(Yw(this,n))return n[pr];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[pr];if(e.length===0)return this.nextTick(n,null,[]),n[pr];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),s=i.format,a=o.format;(r.keyEncoding!==s||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:s,valueEncoding:a}));let d=new Array(e.length);for(let u=0;u<e.length;u++){let c=e[u],l=this._checkKey(c);if(l)return this.nextTick(n,l),n[pr];d[u]=this.prefixKey(i.encode(c),s)}return this._getMany(d,r,(u,c)=>{if(u)return n(u);try{for(let l=0;l<c.length;l++)c[l]!==void 0&&(c[l]=o.decode(c[l]))}catch(l){return n(new xu(`Could not decode one or more of ${c.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:l}))}n(null,c)}),n[pr]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=yg(n,i),i=Tm(i,pr),n=Im(n,this[bg].entry),this[kr]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[pr];if(Yw(this,i))return i[pr];let o=this._checkKey(e)||this._checkValue(r);if(o)return this.nextTick(i,o),i[pr];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),d=s.format,u=a.format;(n.keyEncoding!==d||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:d,valueEncoding:u}));let c=this.prefixKey(s.encode(e),d),l=a.encode(r);return this._put(c,l,n,m=>{if(m)return i(m);this.emit("put",e,r),i()}),i[pr]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=yg(r,n),n=Tm(n,pr),r=Im(r,this[bg].key),this[kr]==="opening")return this.defer(()=>this.del(e,r,n)),n[pr];if(Yw(this,n))return n[pr];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[pr];let o=this.keyEncoding(r.keyEncoding),s=o.format;return r.keyEncoding!==s&&(r=Object.assign({},r,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[pr]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[kr]==="opening")return new bue(this);if(this[kr]!=="open")throw new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=yg(r,n),n=Tm(n,pr),r=Im(r,this[bg].empty),this[kr]==="opening")return this.defer(()=>this.batch(e,r,n)),n[pr];if(Yw(this,n))return n[pr];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[pr];if(e.length===0)return this.nextTick(n),n[pr];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...a}=r;for(let d=0;d<e.length;d++){if(typeof e[d]!="object"||e[d]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[pr];let u=Object.assign({},e[d]);if(u.type!=="put"&&u.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[pr];let c=this._checkKey(u.key);if(c)return this.nextTick(n,c),n[pr];let l=u.sublevel!=null?u.sublevel:this,m=l.keyEncoding(u.keyEncoding||o),p=m.format;if(u.key=l.prefixKey(m.encode(u.key),p),u.keyEncoding=p,u.type==="put"){let g=this._checkValue(u.value);if(g)return this.nextTick(n,g),n[pr];let b=l.valueEncoding(u.valueEncoding||s);u.value=b.encode(u.value),u.valueEncoding=b.format}l!==this&&(u.sublevel=null),i[d]=u}return this._batch(i,a,d=>{if(d)return n(d);this.emit("batch",e),n()}),n[pr]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,fj.defaults(r))}_sublevel(e,r){return new fj(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=yg(e,r),r=Tm(r,pr),e=Im(e,this[bg].empty),this[kr]==="opening")return this.defer(()=>this.clear(e,r)),r[pr];if(Yw(this,r))return r[pr];let n=e,i=this.keyEncoding(e.keyEncoding);return e=bP(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,o=>{if(o)return r(o);this.emit("clear",n),r()}),r[pr]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=bP(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[mg.keyEncoding]=r,e[mg.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kr]==="opening")return new VKe(this,e);if(this[kr]!=="open")throw new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new mg(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=bP(e,r),e[mg.keyEncoding]=r,e[mg.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kr]==="opening")return new JKe(this,e);if(this[kr]!=="open")throw new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new WKe(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=bP(e,r),e[mg.keyEncoding]=r,e[mg.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kr]==="opening")return new YKe(this,e);if(this[kr]!=="open")throw new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new HKe(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[WE].push(e)}[HE](){if(this[WE].length===0)return;let e=this[WE];this[WE]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[gg].add(e)}detachResource(e){this[gg].delete(e)}_chainedBatch(){return new bue(this)}_checkKey(e){if(e==null)return new xu("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new xu("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};VE.prototype.nextTick=fue();var{AbstractSublevel:fj}=gue()({AbstractLevel:VE});hj.AbstractLevel=VE;hj.AbstractSublevel=fj;var Yw=function(t,e){return t[kr]!=="open"?(t.nextTick(e,new xu("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},XKe=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var mj=W(vg=>{"use strict";h();vg.AbstractLevel=pj().AbstractLevel;vg.AbstractSublevel=pj().AbstractSublevel;vg.AbstractIterator=Am().AbstractIterator;vg.AbstractKeyIterator=Am().AbstractKeyIterator;vg.AbstractValueIterator=Am().AbstractValueIterator;vg.AbstractChainedBatch=rj().AbstractChainedBatch});var _ue=W((A6t,wue)=>{h();wue.exports=eqe;var QKe=ij();function eqe(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,a,d=!0,u;Array.isArray(t)?(n=[],o=i=t.length):(s=Object.keys(t),n={},o=i=s.length);function c(m){function p(){r&&r(m,n),r=null}d?QKe(p):p()}function l(m,p,g){if(n[m]=g,p&&(a=!0),--o===0||p)c(p);else if(!a&&u<i){let b;s?(b=s[u],u+=1,t[b](function(S,A){l(b,S,A)})):(b=u,u+=1,t[b](function(S,A){l(b,S,A)}))}}u=e,o?s?s.some(function(m,p){return t[m](function(g,b){l(m,g,b)}),p===e-1}):t.some(function(m,p){return m(function(g,b){l(p,g,b)}),p===e-1}):c(null),d=!1}});var yj=W((T6t,xue)=>{"use strict";h();xue.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,o):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var gj=W((k6t,Eue)=>{"use strict";h();var tqe=new TextEncoder;Eue.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):tqe.encode(t)}});var Iue=W(Tue=>{"use strict";h();var{AbstractIterator:rqe}=mj(),Sue=yj(),_P=gj(),jl=Symbol("cache"),ph=Symbol("finished"),wc=Symbol("options"),mh=Symbol("currentOptions"),wg=Symbol("position"),bj=Symbol("location"),Zw=Symbol("first"),Aue={},vj=class extends rqe{constructor(e,r,n){super(e,n),this[jl]=[],this[ph]=this.limit===0,this[wc]=n,this[mh]={...n},this[wg]=void 0,this[bj]=r,this[Zw]=!0}_nextv(e,r,n){if(this[Zw]=!1,this[ph])return this.nextTick(n,null,[]);if(this[jl].length>0)return e=Math.min(e,this[jl].length),this.nextTick(n,null,this[jl].splice(0,e));this[wg]!==void 0&&(this[wc].reverse?(this[mh].lt=this[wg],this[mh].lte=void 0):(this[mh].gt=this[wg],this[mh].gte=void 0));let i;try{i=Sue(this[mh])}catch{return this[ph]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[bj]],"readonly"),s=o.objectStore(this[bj]),a=[];if(this[wc].reverse){let d=!this[wc].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[d](i,"prev").onsuccess=u=>{let c=u.target.result;if(c){let{key:l,value:m}=c;this[wg]=l,a.push([this[wc].keys&&l!==void 0?_P(l):void 0,this[wc].values&&m!==void 0?_P(m):void 0]),a.length<e?c.continue():Pue(o)}else this[ph]=!0}}else{let d,u,c=()=>{if(d===void 0||u===void 0)return;let l=Math.max(d.length,u.length);l===0||e===1/0?this[ph]=!0:this[wg]=d[l-1],a.length=l;for(let m=0;m<l;m++){let p=d[m],g=u[m];a[m]=[this[wc].keys&&p!==void 0?_P(p):void 0,this[wc].values&&g!==void 0?_P(g):void 0]}Pue(o)};this[wc].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=l=>{d=l.target.result,c()}:(d=[],this.nextTick(c)),this[wc].values?s.getAll(i,e<1/0?e:void 0).onsuccess=l=>{u=l.target.result,c()}:(u=[],this.nextTick(c))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[jl].length>0){let[r,n]=this[jl].shift();this.nextTick(e,null,r,n)}else if(this[ph])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Zw]&&(this[Zw]=!1,r=1),this._nextv(r,Aue,(n,i)=>{if(n)return e(n);this[jl]=i,this._next(e)})}}_all(e,r){this[Zw]=!1;let n=this[jl].splice(0,this[jl].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,Aue,(o,s)=>{if(o)return r(o);n.length>0&&(s=n.concat(s)),r(null,s)})}_seek(e,r){this[Zw]=!0,this[jl]=[],this[ph]=!1,this[wg]=void 0,this[mh]={...this[wc]};let n;try{n=Sue(this[wc])}catch{this[ph]=!0;return}n!==null&&!n.includes(e)?this[ph]=!0:this[wc].reverse?this[mh].lte=e:this[mh].gte=e}};Tue.Iterator=vj;function Pue(t){typeof t.commit=="function"&&t.commit()}});var Rue=W((B6t,kue)=>{"use strict";h();kue.exports=function(e,r,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([r],"readwrite"),a=s.objectStore(r),d=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let u=a.openKeyCursor?"openKeyCursor":"openCursor",c=i.reverse?"prev":"next";a[u](n,c).onsuccess=function(l){let m=l.target.result;m&&(a.delete(m.key).onsuccess=function(){(i.limit<=0||++d<i.limit)&&m.continue()})}}});var xj=W(Oue=>{"use strict";h();var{AbstractLevel:nqe}=mj(),Due=wu(),iqe=_ue(),{fromCallback:oqe}=OE(),{Iterator:sqe}=Iue(),Mue=gj(),aqe=Rue(),cqe=yj(),Cue="level-js-",JE=Symbol("idb"),wj=Symbol("namePrefix"),yh=Symbol("location"),_j=Symbol("version"),_g=Symbol("store"),YE=Symbol("onComplete"),Bue=Symbol("promise"),xP=class extends nqe{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new Due("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[yh]=e,this[wj]=i??Cue,this[_j]=parseInt(o||1,10),this[JE]=null}get location(){return this[yh]}get namePrefix(){return this[wj]}get version(){return this[_j]}get db(){return this[JE]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[wj]+this[yh],this[_j]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[JE]=n.result,r()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[yh])||o.createObjectStore(this[yh])}}[_g](e){return this[JE].transaction([this[yh]],e).objectStore(this[yh])}[YE](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let i=this[_g]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[YE](o,function(s,a){if(s)return n(s);if(a===void 0)return n(new Due("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,Mue(a))})}_getMany(e,r,n){let i=this[_g]("readonly"),o=e.map(s=>a=>{let d;try{d=i.get(s)}catch(u){return a(u)}d.onsuccess=()=>{let u=d.result;a(null,u===void 0?u:Mue(u))},d.onerror=u=>{u.stopPropagation(),a(d.error)}});iqe(o,16,n)}_del(e,r,n){let i=this[_g]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[YE](o,n)}_put(e,r,n,i){let o=this[_g]("readwrite"),s;try{s=o.put(r,e)}catch(a){return this.nextTick(i,a)}this[YE](s,i)}_iterator(e){return new sqe(this,this[yh],e)}_batch(e,r,n){let i=this[_g]("readwrite"),o=i.transaction,s=0,a;o.onabort=function(){n(a||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function d(){let u=e[s++],c=u.key,l;try{l=u.type==="del"?i.delete(c):i.put(u.value,c)}catch(m){a=m,o.abort();return}s<e.length?l.onsuccess=d:typeof o.commit=="function"&&o.commit()}d()}_clear(e,r){let n,i;try{n=cqe(e)}catch{return this.nextTick(r)}if(e.limit>=0)return aqe(this,this[yh],n,e,r);try{let o=this[_g]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(r,o)}this[YE](i,r)}_close(e){this[JE].close(),this.nextTick(e)}};xP.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=Cue),r=oqe(r,Bue);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[Bue]};Oue.BrowserLevel=xP});var ZE=W($ue=>{h();$ue.Level=xj().BrowserLevel});var ji=W((z6t,jue)=>{"use strict";h();jue.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Ul=W((W6t,Sj)=>{"use strict";h();var uqe=Un(),lqe=Object.getPrototypeOf(async function(){}).constructor,Uue=globalThis.Blob||uqe.Blob,fqe=typeof Uue<"u"?function(e){return e instanceof Uue}:function(e){return!1},Ej=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Sj.exports={AggregateError:Ej,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof lqe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:fqe};Sj.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var aa=W((V6t,Lue)=>{"use strict";h();var{format:hqe,inspect:AP,AggregateError:pqe}=Ul(),mqe=globalThis.AggregateError||pqe,yqe=Symbol("kIsNodeError"),gqe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],bqe=/^([A-Z][a-z0-9]*)+$/,vqe="__node_internal_",PP={};function xg(t,e){if(!t)throw new PP.ERR_INTERNAL_ASSERTION(e)}function Kue(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function wqe(t,e,r){if(typeof e=="function")return xg(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return xg(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:hqe(e,...r)}function is(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(wqe(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[yqe]=!0,PP[t]=n}function que(t){let e=vqe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function _qe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new mqe([e,t],e.message);return r.code=e.code,r}return t||e}var Aj=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new PP.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};is("ERR_ASSERTION","%s",Error);is("ERR_INVALID_ARG_TYPE",(t,e,r)=>{xg(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let d of e)xg(typeof d=="string","All expected entries have to be of type string"),gqe.includes(d)?i.push(d.toLowerCase()):bqe.test(d)?o.push(d):(xg(d!=="object",'The value "object" should be written as "Object"'),s.push(d));if(o.length>0){let d=i.indexOf("object");d!==-1&&(i.splice(i,d,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let d=i.pop();n+=`one of type ${i.join(", ")}, or ${d}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let d=o.pop();n+=`an instance of ${o.join(", ")}, or ${d}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let d=s.pop();n+=`one of ${s.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let d=AP(r,{depth:-1});n+=`. Received ${d}`}}else{let d=AP(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);is("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=AP(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);is("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);is("ERR_MISSING_ARGS",(...t)=>{xg(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);is("ERR_OUT_OF_RANGE",(t,e,r)=>{xg(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Kue(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Kue(n)),n+="n"):n=AP(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);is("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);is("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);is("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);is("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);is("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);is("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);is("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);is("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);is("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);is("ERR_STREAM_WRITE_AFTER_END","write after end",Error);is("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Lue.exports={AbortError:Aj,aggregateTwoErrors:que(_qe),hideStackFrames:que,codes:PP}});var e6=W((Y6t,Zue)=>{"use strict";h();var{ArrayIsArray:Tj,ArrayPrototypeIncludes:Wue,ArrayPrototypeJoin:Hue,ArrayPrototypeMap:xqe,NumberIsInteger:Ij,NumberIsNaN:Eqe,NumberMAX_SAFE_INTEGER:Sqe,NumberMIN_SAFE_INTEGER:Aqe,NumberParseInt:Pqe,ObjectPrototypeHasOwnProperty:Tqe,RegExpPrototypeExec:Vue,String:Iqe,StringPrototypeToUpperCase:kqe,StringPrototypeTrim:Rqe}=ji(),{hideStackFrames:bd,codes:{ERR_SOCKET_BAD_PORT:Dqe,ERR_INVALID_ARG_TYPE:ca,ERR_INVALID_ARG_VALUE:Xw,ERR_OUT_OF_RANGE:Eg,ERR_UNKNOWN_SIGNAL:Fue}}=aa(),{normalizeEncoding:Mqe}=Ul(),{isAsyncFunction:Bqe,isArrayBufferView:Cqe}=Ul().types,zue={};function Oqe(t){return t===(t|0)}function $qe(t){return t===t>>>0}var Nqe=/^[0-7]+$/,jqe="must be a 32-bit unsigned integer or an octal string";function Uqe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Vue(Nqe,t)===null)throw new Xw(e,t,jqe);t=Pqe(t,8)}return Jue(t,e),t}var Kqe=bd((t,e,r=Aqe,n=Sqe)=>{if(typeof t!="number")throw new ca(e,"number",t);if(!Ij(t))throw new Eg(e,"an integer",t);if(t<r||t>n)throw new Eg(e,`>= ${r} && <= ${n}`,t)}),qqe=bd((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ca(e,"number",t);if(!Ij(t))throw new Eg(e,"an integer",t);if(t<r||t>n)throw new Eg(e,`>= ${r} && <= ${n}`,t)}),Jue=bd((t,e,r=!1)=>{if(typeof t!="number")throw new ca(e,"number",t);if(!Ij(t))throw new Eg(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Eg(e,`>= ${n} && <= ${i}`,t)});function kj(t,e){if(typeof t!="string")throw new ca(e,"string",t)}function Lqe(t,e,r=void 0,n){if(typeof t!="number")throw new ca(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Eqe(t))throw new Eg(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Fqe=bd((t,e,r)=>{if(!Wue(r,t)){let i="must be one of: "+Hue(xqe(r,o=>typeof o=="string"?`'${o}'`:Iqe(o)),", ");throw new Xw(e,t,i)}});function Yue(t,e){if(typeof t!="boolean")throw new ca(e,"boolean",t)}function Pj(t,e,r){return t==null||!Tqe(t,e)?r:t[e]}var zqe=bd((t,e,r=null)=>{let n=Pj(r,"allowArray",!1),i=Pj(r,"allowFunction",!1);if(!Pj(r,"nullable",!1)&&t===null||!n&&Tj(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new ca(e,"Object",t)}),Gqe=bd((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ca(e,"a dictionary",t)}),Rj=bd((t,e,r=0)=>{if(!Tj(t))throw new ca(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Xw(e,t,n)}});function Wqe(t,e){Rj(t,e);for(let r=0;r<t.length;r++)kj(t[r],`${e}[${r}]`)}function Hqe(t,e){Rj(t,e);for(let r=0;r<t.length;r++)Yue(t[r],`${e}[${r}]`)}function Vqe(t,e="signal"){if(kj(t,e),zue[t]===void 0)throw zue[kqe(t)]!==void 0?new Fue(t+" (signals must use all capital letters)"):new Fue(t)}var Jqe=bd((t,e="buffer")=>{if(!Cqe(t))throw new ca(e,["Buffer","TypedArray","DataView"],t)});function Yqe(t,e){let r=Mqe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Xw("encoding",e,`is invalid for data of length ${n}`)}function Zqe(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Rqe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Dqe(e,t,r);return t|0}var Xqe=bd((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ca(e,"AbortSignal",t)}),Qqe=bd((t,e)=>{if(typeof t!="function")throw new ca(e,"Function",t)}),eLe=bd((t,e)=>{if(typeof t!="function"||Bqe(t))throw new ca(e,"Function",t)}),tLe=bd((t,e)=>{if(t!==void 0)throw new ca(e,"undefined",t)});function rLe(t,e,r){if(!Wue(r,t))throw new ca(e,`('${Hue(r,"|")}')`,t)}var nLe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Gue(t,e){if(typeof t>"u"||!Vue(nLe,t))throw new Xw(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function iLe(t){if(typeof t=="string")return Gue(t,"hints"),t;if(Tj(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Gue(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Xw("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Zue.exports={isInt32:Oqe,isUint32:$qe,parseFileMode:Uqe,validateArray:Rj,validateStringArray:Wqe,validateBooleanArray:Hqe,validateBoolean:Yue,validateBuffer:Jqe,validateDictionary:Gqe,validateEncoding:Yqe,validateFunction:Qqe,validateInt32:qqe,validateInteger:Kqe,validateNumber:Lqe,validateObject:zqe,validateOneOf:Fqe,validatePlainFunction:eLe,validatePort:Zqe,validateSignalName:Vqe,validateString:kj,validateUint32:Jue,validateUndefined:tLe,validateUnion:rLe,validateAbortSignal:Xqe,validateLinkHeaderValue:iLe}});var ql=W((X6t,hle)=>{"use strict";h();var{Symbol:TP,SymbolAsyncIterator:Xue,SymbolIterator:Que,SymbolFor:ele}=ji(),tle=TP("kDestroyed"),rle=TP("kIsErrored"),Dj=TP("kIsReadable"),nle=TP("kIsDisturbed"),oLe=ele("nodejs.webstream.isClosedPromise"),sLe=ele("nodejs.webstream.controllerErrorFunction");function IP(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function kP(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function aLe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Kl(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function ile(t){return!!(t&&!Kl(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function ole(t){return!!(t&&!Kl(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function sle(t){return!!(t&&!Kl(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function cLe(t){return ile(t)||ole(t)||sle(t)}function dLe(t,e){return t==null?!1:e===!0?typeof t[Xue]=="function":e===!1?typeof t[Que]=="function":typeof t[Xue]=="function"||typeof t[Que]=="function"}function RP(t){if(!Kl(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[tle]||n!=null&&n.destroyed)}function ale(t){if(!kP(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function uLe(t,e){if(!kP(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function lLe(t){if(!IP(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function cle(t,e){if(!IP(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function dle(t){return t&&t[Dj]!=null?t[Dj]:typeof t?.readable!="boolean"?null:RP(t)?!1:IP(t)&&t.readable&&!cle(t)}function ule(t){return typeof t?.writable!="boolean"?null:RP(t)?!1:kP(t)&&t.writable&&!ale(t)}function fLe(t,e){return Kl(t)?RP(t)?!0:!(e?.readable!==!1&&dle(t)||e?.writable!==!1&&ule(t)):null}function hLe(t){var e,r;return Kl(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function pLe(t){var e,r;return Kl(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function mLe(t){if(!Kl(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&lle(t)?t._closed:null}function lle(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function fle(t){return typeof t._sent100=="boolean"&&lle(t)}function yLe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function gLe(t){if(!Kl(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&fle(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function bLe(t){var e;return!!(t&&((e=t[nle])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function vLe(t){var e,r,n,i,o,s,a,d,u,c;return!!(t&&((e=(r=(n=(i=(o=(s=t[rle])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(d=t._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}hle.exports={kDestroyed:tle,isDisturbed:bLe,kIsDisturbed:nle,isErrored:vLe,kIsErrored:rle,isReadable:dle,kIsReadable:Dj,kIsClosedPromise:oLe,kControllerErrorFunction:sLe,isClosed:mLe,isDestroyed:RP,isDuplexNodeStream:aLe,isFinished:fLe,isIterable:dLe,isReadableNodeStream:IP,isReadableStream:ile,isReadableEnded:lLe,isReadableFinished:cle,isReadableErrored:pLe,isNodeStream:Kl,isWebStream:cLe,isWritable:ule,isWritableNodeStream:kP,isWritableStream:ole,isWritableEnded:ale,isWritableFinished:uLe,isWritableErrored:hLe,isServerRequest:yLe,isServerResponse:fle,willEmitClose:gLe,isTransformStream:sle}});var gh=W((eSt,$j)=>{h();var Rm=ls(),{AbortError:xle,codes:wLe}=aa(),{ERR_INVALID_ARG_TYPE:_Le,ERR_STREAM_PREMATURE_CLOSE:ple}=wLe,{kEmptyObject:Bj,once:Cj}=Ul(),{validateAbortSignal:xLe,validateFunction:ELe,validateObject:SLe,validateBoolean:ALe}=e6(),{Promise:PLe,PromisePrototypeThen:TLe}=ji(),{isClosed:ILe,isReadable:mle,isReadableNodeStream:Mj,isReadableStream:kLe,isReadableFinished:yle,isReadableErrored:gle,isWritable:ble,isWritableNodeStream:vle,isWritableStream:RLe,isWritableFinished:wle,isWritableErrored:_le,isNodeStream:DLe,willEmitClose:MLe,kIsClosedPromise:BLe}=ql();function CLe(t){return t.setHeader&&typeof t.abort=="function"}var Oj=()=>{};function Ele(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Bj):e==null?e=Bj:SLe(e,"options"),ELe(r,"callback"),xLe(e.signal,"options.signal"),r=Cj(r),kLe(t)||RLe(t))return OLe(t,e,r);if(!DLe(t))throw new _Le("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:Mj(t),s=(i=e.writable)!==null&&i!==void 0?i:vle(t),a=t._writableState,d=t._readableState,u=()=>{t.writable||m()},c=MLe(t)&&Mj(t)===o&&vle(t)===s,l=wle(t,!1),m=()=>{l=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||o))&&(!o||p)&&r.call(t)},p=yle(t,!1),g=()=>{p=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||s))&&(!s||l)&&r.call(t)},b=N=>{r.call(t,N)},S=ILe(t),A=()=>{S=!0;let N=_le(t)||gle(t);if(N&&typeof N!="boolean")return r.call(t,N);if(o&&!p&&Mj(t,!0)&&!yle(t,!1))return r.call(t,new ple);if(s&&!l&&!wle(t,!1))return r.call(t,new ple);r.call(t)},I=()=>{S=!0;let N=_le(t)||gle(t);if(N&&typeof N!="boolean")return r.call(t,N);r.call(t)},P=()=>{t.req.on("finish",m)};CLe(t)?(t.on("complete",m),c||t.on("abort",A),t.req?P():t.on("request",P)):s&&!a&&(t.on("end",u),t.on("close",u)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",A),t.on("end",g),t.on("finish",m),e.error!==!1&&t.on("error",b),t.on("close",A),S?Rm.nextTick(A):a!=null&&a.errorEmitted||d!=null&&d.errorEmitted?c||Rm.nextTick(I):(!o&&(!c||mle(t))&&(l||ble(t)===!1)||!s&&(!c||ble(t))&&(p||mle(t)===!1)||d&&t.req&&t.aborted)&&Rm.nextTick(I);let $=()=>{r=Oj,t.removeListener("aborted",A),t.removeListener("complete",m),t.removeListener("abort",A),t.removeListener("request",P),t.req&&t.req.removeListener("finish",m),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",m),t.removeListener("end",g),t.removeListener("error",b),t.removeListener("close",A)};if(e.signal&&!S){let N=()=>{let L=r;$(),L.call(t,new xle(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Rm.nextTick(N);else{let L=r;r=Cj((...F)=>{e.signal.removeEventListener("abort",N),L.apply(t,F)}),e.signal.addEventListener("abort",N)}}return $}function OLe(t,e,r){let n=!1,i=Oj;if(e.signal)if(i=()=>{n=!0,r.call(t,new xle(void 0,{cause:e.signal.reason}))},e.signal.aborted)Rm.nextTick(i);else{let s=r;r=Cj((...a)=>{e.signal.removeEventListener("abort",i),s.apply(t,a)}),e.signal.addEventListener("abort",i)}let o=(...s)=>{n||Rm.nextTick(()=>r.apply(t,s))};return TLe(t[BLe].promise,o,o),Oj}function $Le(t,e){var r;let n=!1;return e===null&&(e=Bj),(r=e)!==null&&r!==void 0&&r.cleanup&&(ALe(e.cleanup,"cleanup"),n=e.cleanup),new PLe((i,o)=>{let s=Ele(t,e,a=>{n&&s(),a?o(a):i()})})}$j.exports=Ele;$j.exports.finished=$Le});var Sg=W((rSt,Dle)=>{"use strict";h();var Ll=ls(),{aggregateTwoErrors:NLe,codes:{ERR_MULTIPLE_CALLBACK:jLe},AbortError:ULe}=aa(),{Symbol:Ple}=ji(),{kDestroyed:KLe,isDestroyed:qLe,isFinished:LLe,isServerRequest:FLe}=ql(),Tle=Ple("kDestroy"),Nj=Ple("kConstruct");function Ile(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function zLe(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Ile(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Sle(this,t,e):this.once(Tle,function(o){Sle(this,NLe(o,t),e)}),this)}function Sle(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;Ile(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Ll.nextTick(GLe,t,o):Ll.nextTick(kle,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function GLe(t,e){jj(t,e),kle(t)}function kle(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function jj(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function WLe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Uj(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Ll.nextTick(jj,t,e):jj(t,e))}function HLe(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Nj,e),!(t.listenerCount(Nj)>1)&&Ll.nextTick(VLe,t)}function VLe(t){let e=!1;function r(n){if(e){Uj(t,n??new jLe);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Tle,n):n?Uj(t,n,!0):Ll.nextTick(JLe,t)}try{t._construct(n=>{Ll.nextTick(r,n)})}catch(n){Ll.nextTick(r,n)}}function JLe(t){t.emit(Nj)}function Ale(t){return t?.setHeader&&typeof t.abort=="function"}function Rle(t){t.emit("close")}function YLe(t,e){t.emit("error",e),Ll.nextTick(Rle,t)}function ZLe(t,e){!t||qLe(t)||(!e&&!LLe(t)&&(e=new ULe),FLe(t)?(t.socket=null,t.destroy(e)):Ale(t)?t.abort():Ale(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ll.nextTick(YLe,t,e):Ll.nextTick(Rle,t),t.destroyed||(t[KLe]=!0))}Dle.exports={construct:HLe,destroyer:ZLe,destroy:zLe,undestroy:WLe,errorOrDestroy:Uj}});var BP=W((iSt,Ble)=>{"use strict";h();var{ArrayIsArray:XLe,ObjectSetPrototypeOf:Mle}=ji(),{EventEmitter:DP}=nc();function MP(t){DP.call(this,t)}Mle(MP.prototype,DP.prototype);Mle(MP,DP);MP.prototype.pipe=function(t,e){let r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function d(c){u(),DP.listenerCount(this,"error")===0&&this.emit("error",c)}Kj(r,"error",d),Kj(t,"error",d);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",d),t.removeListener("error",d),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function Kj(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):XLe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Ble.exports={Stream:MP,prependListener:Kj}});var t6=W((sSt,CP)=>{"use strict";h();var{AbortError:Cle,codes:QLe}=aa(),{isNodeStream:Ole,isWebStream:eFe,kControllerErrorFunction:tFe}=ql(),rFe=gh(),{ERR_INVALID_ARG_TYPE:$le}=QLe,nFe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new $le(e,"AbortSignal",t)};CP.exports.addAbortSignal=function(e,r){if(nFe(e,"signal"),!Ole(r)&&!eFe(r))throw new $le("stream",["ReadableStream","WritableStream","Stream"],r);return CP.exports.addAbortSignalNoValidate(e,r)};CP.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Ole(e)?()=>{e.destroy(new Cle(void 0,{cause:t.reason}))}:()=>{e[tFe](new Cle(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),rFe(e,()=>t.removeEventListener("abort",r))),e}});var Ule=W((dSt,jle)=>{"use strict";h();var{StringPrototypeSlice:Nle,SymbolIterator:iFe,TypedArrayPrototypeSet:OP,Uint8Array:oFe}=ji(),{Buffer:qj}=Un(),{inspect:sFe}=Ul();jle.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return qj.alloc(0);let r=qj.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)OP(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[iFe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Nle(o,0,e),this.head=n,n.data=Nle(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=qj.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)OP(r,s,n-e),e-=s.length;else{e===s.length?(OP(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(OP(r,new oFe(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return sFe(this,{...r,depth:0,customInspect:!1})}}});var $P=W((lSt,qle)=>{"use strict";h();var{MathFloor:aFe,NumberIsInteger:cFe}=ji(),{ERR_INVALID_ARG_VALUE:dFe}=aa().codes;function uFe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Kle(t){return t?16:16*1024}function lFe(t,e,r,n){let i=uFe(e,n,r);if(i!=null){if(!cFe(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new dFe(o,i)}return aFe(i)}return Kle(t.objectMode)}qle.exports={getHighWaterMark:lFe,getDefaultHighWaterMark:Kle}});var Lj=W((hSt,Gle)=>{"use strict";h();var Lle=ls(),{PromisePrototypeThen:fFe,SymbolAsyncIterator:Fle,SymbolIterator:zle}=ji(),{Buffer:hFe}=Un(),{ERR_INVALID_ARG_TYPE:pFe,ERR_STREAM_NULL_VALUES:mFe}=aa().codes;function yFe(t,e,r){let n;if(typeof e=="string"||e instanceof hFe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Fle])i=!0,n=e[Fle]();else if(e&&e[zle])i=!1,n=e[zle]();else throw new pFe("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,d())},o._destroy=function(u,c){fFe(a(u),()=>Lle.nextTick(c,u),l=>Lle.nextTick(c,l||u))};async function a(u){let c=u!=null,l=typeof n.throw=="function";if(c&&l){let{value:m,done:p}=await n.throw(u);if(await m,p)return}if(typeof n.return=="function"){let{value:m}=await n.return();await m}}async function d(){for(;;){try{let{value:u,done:c}=i?await n.next():n.next();if(c)o.push(null);else{let l=u&&typeof u.then=="function"?await u:u;if(l===null)throw s=!1,new mFe;if(o.push(l))continue;s=!1}}catch(u){o.destroy(u)}break}}return o}Gle.exports=yFe});var r6=W((mSt,ife)=>{h();var Eu=ls(),{ArrayPrototypeIndexOf:gFe,NumberIsInteger:bFe,NumberIsNaN:vFe,NumberParseInt:wFe,ObjectDefineProperties:Vle,ObjectKeys:_Fe,ObjectSetPrototypeOf:Jle,Promise:xFe,SafeSet:EFe,SymbolAsyncIterator:SFe,Symbol:AFe}=ji();ife.exports=vr;vr.ReadableState=Vj;var{EventEmitter:PFe}=nc(),{Stream:Dm,prependListener:TFe}=BP(),{Buffer:Fj}=Un(),{addAbortSignal:IFe}=t6(),kFe=gh(),Mr=Ul().debuglog("stream",t=>{Mr=t}),RFe=Ule(),e1=Sg(),{getHighWaterMark:DFe,getDefaultHighWaterMark:MFe}=$P(),{aggregateTwoErrors:Wle,codes:{ERR_INVALID_ARG_TYPE:BFe,ERR_METHOD_NOT_IMPLEMENTED:CFe,ERR_OUT_OF_RANGE:OFe,ERR_STREAM_PUSH_AFTER_EOF:$Fe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:NFe}}=aa(),{validateObject:jFe}=e6(),Ag=AFe("kPaused"),{StringDecoder:Yle}=nv(),UFe=Lj();Jle(vr.prototype,Dm.prototype);Jle(vr,Dm);var zj=()=>{},{errorOrDestroy:Qw}=e1;function Vj(t,e,r){typeof r!="boolean"&&(r=e instanceof Fl()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?DFe(this,t,"readableHighWaterMark",r):MFe(!1),this.buffer=new RFe,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ag]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Yle(t.encoding),this.encoding=t.encoding)}function vr(t){if(!(this instanceof vr))return new vr(t);let e=this instanceof Fl();this._readableState=new Vj(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&IFe(t.signal,this)),Dm.call(this,t),e1.construct(this,()=>{this._readableState.needReadable&&NP(this,this._readableState)})}vr.prototype.destroy=e1.destroy;vr.prototype._undestroy=e1.undestroy;vr.prototype._destroy=function(t,e){e(t)};vr.prototype[PFe.captureRejectionSymbol]=function(t){this.destroy(t)};vr.prototype.push=function(t,e){return Zle(this,t,e,!1)};vr.prototype.unshift=function(t,e){return Zle(this,t,e,!0)};function Zle(t,e,r,n){Mr("readableAddChunk",e);let i=t._readableState,o;if(i.objectMode||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Fj.from(e,r).toString(i.encoding):(e=Fj.from(e,r),r=""))):e instanceof Fj?r="":Dm._isUint8Array(e)?(e=Dm._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new BFe("chunk",["string","Buffer","Uint8Array"],e))),o)Qw(t,o);else if(e===null)i.reading=!1,LFe(t,i);else if(i.objectMode||e&&e.length>0)if(n)if(i.endEmitted)Qw(t,new NFe);else{if(i.destroyed||i.errored)return!1;Gj(t,i,e,!0)}else if(i.ended)Qw(t,new $Fe);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Gj(t,i,e,!1):NP(t,i)):Gj(t,i,e,!1)}else n||(i.reading=!1,NP(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Gj(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&jP(t)),NP(t,e)}vr.prototype.isPaused=function(){let t=this._readableState;return t[Ag]===!0||t.flowing===!1};vr.prototype.setEncoding=function(t){let e=new Yle(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var KFe=1073741824;function qFe(t){if(t>KFe)throw new OFe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Hle(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:vFe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}vr.prototype.read=function(t){Mr("read",t),t===void 0?t=NaN:bFe(t)||(t=wFe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=qFe(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Mr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Wj(this):jP(this),null;if(t=Hle(t,e),t===0&&e.ended)return e.length===0&&Wj(this),null;let n=e.needReadable;if(Mr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Mr("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Mr("reading, ended or constructing",n);else if(n){Mr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(o){Qw(this,o)}e.sync=!1,e.reading||(t=Hle(r,e))}let i;return t>0?i=rfe(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Wj(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function LFe(t,e){if(Mr("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?jP(t):(e.needReadable=!1,e.emittedReadable=!0,Xle(t))}}function jP(t){let e=t._readableState;Mr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Mr("emitReadable",e.flowing),e.emittedReadable=!0,Eu.nextTick(Xle,t))}function Xle(t){let e=t._readableState;Mr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,efe(t)}function NP(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Eu.nextTick(FFe,t,e))}function FFe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Mr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}vr.prototype._read=function(t){throw new CFe("_read()")};vr.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new EFe(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Mr("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Eu.stdout&&t!==Eu.stderr?a:S;n.endEmitted?Eu.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(A,I){Mr("onunpipe"),A===r&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,c())}function a(){Mr("onend"),t.end()}let d,u=!1;function c(){Mr("cleanup"),t.removeListener("close",g),t.removeListener("finish",b),d&&t.removeListener("drain",d),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",m),u=!0,d&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&d()}function l(){u||(n.pipes.length===1&&n.pipes[0]===t?(Mr("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Mr("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),d||(d=zFe(r,t),t.on("drain",d))}r.on("data",m);function m(A){Mr("ondata");let I=t.write(A);Mr("dest.write",I),I===!1&&l()}function p(A){if(Mr("onerror",A),S(),t.removeListener("error",p),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?Qw(t,A):t.emit("error",A)}}TFe(t,"error",p);function g(){t.removeListener("finish",b),S()}t.once("close",g);function b(){Mr("onfinish"),t.removeListener("close",g),S()}t.once("finish",b);function S(){Mr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&l():n.flowing||(Mr("pipe resume"),r.resume()),t};function zFe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Mr("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Mr("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}vr.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=gFe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};vr.prototype.on=function(t,e){let r=Dm.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Mr("on readable",n.length,n.reading),n.length?jP(this):n.reading||Eu.nextTick(GFe,this)),r};vr.prototype.addListener=vr.prototype.on;vr.prototype.removeListener=function(t,e){let r=Dm.prototype.removeListener.call(this,t,e);return t==="readable"&&Eu.nextTick(Qle,this),r};vr.prototype.off=vr.prototype.removeListener;vr.prototype.removeAllListeners=function(t){let e=Dm.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Eu.nextTick(Qle,this),e};function Qle(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ag]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function GFe(t){Mr("readable nexttick read 0"),t.read(0)}vr.prototype.resume=function(){let t=this._readableState;return t.flowing||(Mr("resume"),t.flowing=!t.readableListening,WFe(this,t)),t[Ag]=!1,this};function WFe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Eu.nextTick(HFe,t,e))}function HFe(t,e){Mr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),efe(t),e.flowing&&!e.reading&&t.read(0)}vr.prototype.pause=function(){return Mr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Mr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ag]=!0,this};function efe(t){let e=t._readableState;for(Mr("flow",e.flowing);e.flowing&&t.read()!==null;);}vr.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Qw(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=_Fe(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};vr.prototype[SFe]=function(){return tfe(this)};vr.prototype.iterator=function(t){return t!==void 0&&jFe(t,"options"),tfe(this,t)};function tfe(t,e){typeof t.read!="function"&&(t=vr.wrap(t,{objectMode:!0}));let r=VFe(t,e);return r.stream=t,r}async function*VFe(t,e){let r=zj;function n(s){this===t?(r(),r=zj):r=s}t.on("readable",n);let i,o=kFe(t,{writable:!1},s=>{i=s?Wle(i,s):null,r(),r=zj});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new xFe(n)}}}catch(s){throw i=Wle(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?e1.destroyer(t,null):(t.off("readable",n),o())}}Vle(vr.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Vle(Vj.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ag]!==!1},set(t){this[Ag]=!!t}}});vr._fromList=rfe;function rfe(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Wj(t){let e=t._readableState;Mr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Eu.nextTick(JFe,e,t))}function JFe(t,e){if(Mr("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Eu.nextTick(YFe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function YFe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}vr.from=function(t,e){return UFe(vr,t,e)};var Hj;function nfe(){return Hj===void 0&&(Hj={}),Hj}vr.fromWeb=function(t,e){return nfe().newStreamReadableFromReadableStream(t,e)};vr.toWeb=function(t,e){return nfe().newReadableStreamFromStreamReadable(t,e)};vr.wrap=function(t,e){var r,n;return new vr({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){e1.destroyer(t,i),o(i)}}).wrap(t)}});var tU=W((gSt,yfe)=>{h();var Pg=ls(),{ArrayPrototypeSlice:afe,Error:ZFe,FunctionPrototypeSymbolHasInstance:cfe,ObjectDefineProperty:dfe,ObjectDefineProperties:XFe,ObjectSetPrototypeOf:ufe,StringPrototypeToLowerCase:QFe,Symbol:eze,SymbolHasInstance:tze}=ji();yfe.exports=Qn;Qn.WritableState=o6;var{EventEmitter:rze}=nc(),n6=BP().Stream,{Buffer:UP}=Un(),LP=Sg(),{addAbortSignal:nze}=t6(),{getHighWaterMark:ize,getDefaultHighWaterMark:oze}=$P(),{ERR_INVALID_ARG_TYPE:sze,ERR_METHOD_NOT_IMPLEMENTED:aze,ERR_MULTIPLE_CALLBACK:lfe,ERR_STREAM_CANNOT_PIPE:cze,ERR_STREAM_DESTROYED:i6,ERR_STREAM_ALREADY_FINISHED:dze,ERR_STREAM_NULL_VALUES:uze,ERR_STREAM_WRITE_AFTER_END:lze,ERR_UNKNOWN_ENCODING:ffe}=aa().codes,{errorOrDestroy:t1}=LP;ufe(Qn.prototype,n6.prototype);ufe(Qn,n6);function Zj(){}var r1=eze("kOnFinished");function o6(t,e,r){typeof r!="boolean"&&(r=e instanceof Fl()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?ize(this,t,"writableHighWaterMark",r):oze(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=hze.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,qP(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[r1]=[]}function qP(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}o6.prototype.getBuffer=function(){return afe(this.buffered,this.bufferedIndex)};dfe(o6.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Qn(t){let e=this instanceof Fl();if(!e&&!cfe(Qn,this))return new Qn(t);this._writableState=new o6(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&nze(t.signal,this)),n6.call(this,t),LP.construct(this,()=>{let r=this._writableState;r.writing||Qj(this,r),eU(this,r)})}dfe(Qn,tze,{__proto__:null,value:function(t){return cfe(this,t)?!0:this!==Qn?!1:t&&t._writableState instanceof o6}});Qn.prototype.pipe=function(){t1(this,new cze)};function hfe(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!UP.isEncoding(r))throw new ffe(r);typeof n!="function"&&(n=Zj)}if(e===null)throw new uze;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=UP.from(e,r),r="buffer");else if(e instanceof UP)r="buffer";else if(n6._isUint8Array(e))e=n6._uint8ArrayToBuffer(e),r="buffer";else throw new sze("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new lze:i.destroyed&&(o=new i6("write")),o?(Pg.nextTick(n,o),t1(t,o,!0),o):(i.pendingcb++,fze(t,i,e,r,n))}Qn.prototype.write=function(t,e,r){return hfe(this,t,e,r)===!0};Qn.prototype.cork=function(){this._writableState.corked++};Qn.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Qj(this,t))};Qn.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=QFe(e)),!UP.isEncoding(e))throw new ffe(e);return this._writableState.defaultEncoding=e,this};function fze(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Zj&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function ofe(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new i6("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function sfe(t,e,r,n){--e.pendingcb,n(r),Xj(e),t1(t,r)}function hze(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){t1(t,new lfe);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Pg.nextTick(sfe,t,r,e,i):sfe(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Qj(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Pg.nextTick(pze,r.afterWriteTickInfo)):pfe(t,r,1,i))}function pze({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,pfe(t,e,r,n)}function pfe(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Xj(e),eU(t,e)}function Xj(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new i6("write"))}let r=t[r1].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new i6("end"))}qP(t)}function Qj(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?Zj:u=>{for(let c=s;c<r.length;++c)r[c].callback(u)},d=e.allNoop&&s===0?r:afe(r,s);d.allBuffers=e.allBuffers,ofe(t,e,!0,e.length,d,"",a),qP(e)}else{do{let{chunk:a,encoding:d,callback:u}=r[s];r[s++]=null;let c=i?1:a.length;ofe(t,e,!1,c,a,d,u)}while(s<r.length&&!e.writing);s===r.length?qP(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}Qn.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new aze("_write()")};Qn.prototype._writev=null;Qn.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=hfe(this,t,e);o instanceof ZFe&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,eU(this,n,!0),n.ended=!0):n.finished?i=new dze("end"):n.destroyed&&(i=new i6("end"))),typeof r=="function"&&(i||n.finished?Pg.nextTick(r,i):n[r1].push(r)),this};function KP(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function mze(t,e){let r=!1;function n(i){if(r){t1(t,i??lfe());return}if(r=!0,e.pendingcb--,i){let o=e[r1].splice(0);for(let s=0;s<o.length;s++)o[s](i);t1(t,i,e.sync)}else KP(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Pg.nextTick(Yj,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function yze(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,mze(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function eU(t,e,r){KP(e)&&(yze(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Pg.nextTick((n,i)=>{KP(i)?Yj(n,i):i.pendingcb--},t,e)):KP(e)&&(e.pendingcb++,Yj(t,e))))}function Yj(t,e){e.pendingcb--,e.finished=!0;let r=e[r1].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}XFe(Qn.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var gze=LP.destroy;Qn.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[r1].length)&&Pg.nextTick(Xj,r),gze.call(this,t,e),this};Qn.prototype._undestroy=LP.undestroy;Qn.prototype._destroy=function(t,e){e(t)};Qn.prototype[rze.captureRejectionSymbol]=function(t){this.destroy(t)};var Jj;function mfe(){return Jj===void 0&&(Jj={}),Jj}Qn.fromWeb=function(t,e){return mfe().newStreamWritableFromWritableStream(t,e)};Qn.toWeb=function(t){return mfe().newWritableStreamFromStreamWritable(t)}});var Ife=W((vSt,Tfe)=>{h();var rU=ls(),bze=Un(),{isReadable:vze,isWritable:wze,isIterable:gfe,isNodeStream:_ze,isReadableNodeStream:bfe,isWritableNodeStream:vfe,isDuplexNodeStream:xze}=ql(),wfe=gh(),{AbortError:Pfe,codes:{ERR_INVALID_ARG_TYPE:Eze,ERR_INVALID_RETURN_VALUE:_fe}}=aa(),{destroyer:n1}=Sg(),Sze=Fl(),Aze=r6(),{createDeferredPromise:xfe}=Ul(),Efe=Lj(),Sfe=globalThis.Blob||bze.Blob,Pze=typeof Sfe<"u"?function(e){return e instanceof Sfe}:function(e){return!1},Tze=globalThis.AbortController||Lf().AbortController,{FunctionPrototypeCall:Afe}=ji(),Tg=class extends Sze{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Tfe.exports=function t(e,r){if(xze(e))return e;if(bfe(e))return FP({readable:e});if(vfe(e))return FP({writable:e});if(_ze(e))return FP({writable:!1,readable:!1});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=Ize(e);if(gfe(i))return Efe(Tg,i,{objectMode:!0,write:o,final:s,destroy:a});let d=i?.then;if(typeof d=="function"){let u,c=Afe(d,i,l=>{if(l!=null)throw new _fe("nully","body",l)},l=>{n1(u,l)});return u=new Tg({objectMode:!0,readable:!1,write:o,final(l){s(async()=>{try{await c,rU.nextTick(l,null)}catch(m){rU.nextTick(l,m)}})},destroy:a})}throw new _fe("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Pze(e))return t(e.arrayBuffer());if(gfe(e))return Efe(Tg,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?bfe(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?vfe(e?.writable)?e?.writable:t(e.writable):void 0;return FP({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return Afe(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{n1(i,o)}),i=new Tg({objectMode:!0,writable:!1,read(){}})}throw new Eze(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Ize(t){let{promise:e,resolve:r}=xfe(),n=new Tze,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:d,cb:u}=await s;if(rU.nextTick(u),d)return;if(i.aborted)throw new Pfe(void 0,{cause:i.reason});({promise:e,resolve:r}=xfe()),yield a}}(),{signal:i}),write(s,a,d){let u=r;r=null,u({chunk:s,done:!1,cb:d})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function FP(t){let e=t.readable&&typeof t.readable.read!="function"?Aze.wrap(t.readable):t.readable,r=t.writable,n=!!vze(e),i=!!wze(r),o,s,a,d,u;function c(l){let m=d;d=null,m?m(l):l&&u.destroy(l)}return u=new Tg({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(wfe(r,l=>{i=!1,l&&n1(e,l),c(l)}),u._write=function(l,m,p){r.write(l,m)?p():o=p},u._final=function(l){r.end(),s=l},r.on("drain",function(){if(o){let l=o;o=null,l()}}),r.on("finish",function(){if(s){let l=s;s=null,l()}})),n&&(wfe(e,l=>{n=!1,l&&n1(e,l),c(l)}),e.on("readable",function(){if(a){let l=a;a=null,l()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let l=e.read();if(l===null){a=u._read;return}if(!u.push(l))return}}),u._destroy=function(l,m){!l&&d!==null&&(l=new Pfe),a=null,o=null,s=null,d===null?m(l):(d=m,n1(r,l),n1(e,l))},u}});var Fl=W((_St,Dfe)=>{"use strict";h();var{ObjectDefineProperties:kze,ObjectGetOwnPropertyDescriptor:bh,ObjectKeys:Rze,ObjectSetPrototypeOf:kfe}=ji();Dfe.exports=Su;var oU=r6(),vd=tU();kfe(Su.prototype,oU.prototype);kfe(Su,oU);{let t=Rze(vd.prototype);for(let e=0;e<t.length;e++){let r=t[e];Su.prototype[r]||(Su.prototype[r]=vd.prototype[r])}}function Su(t){if(!(this instanceof Su))return new Su(t);oU.call(this,t),vd.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}kze(Su.prototype,{writable:{__proto__:null,...bh(vd.prototype,"writable")},writableHighWaterMark:{__proto__:null,...bh(vd.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...bh(vd.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...bh(vd.prototype,"writableBuffer")},writableLength:{__proto__:null,...bh(vd.prototype,"writableLength")},writableFinished:{__proto__:null,...bh(vd.prototype,"writableFinished")},writableCorked:{__proto__:null,...bh(vd.prototype,"writableCorked")},writableEnded:{__proto__:null,...bh(vd.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...bh(vd.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var nU;function Rfe(){return nU===void 0&&(nU={}),nU}Su.fromWeb=function(t,e){return Rfe().newStreamDuplexFromReadableWritablePair(t,e)};Su.toWeb=function(t){return Rfe().newReadableWritablePairFromDuplex(t)};var iU;Su.from=function(t){return iU||(iU=Ife()),iU(t,"body")}});var cU=W((ESt,Bfe)=>{"use strict";h();var{ObjectSetPrototypeOf:Mfe,Symbol:Dze}=ji();Bfe.exports=vh;var{ERR_METHOD_NOT_IMPLEMENTED:Mze}=aa().codes,aU=Fl(),{getHighWaterMark:Bze}=$P();Mfe(vh.prototype,aU.prototype);Mfe(vh,aU);var s6=Dze("kCallback");function vh(t){if(!(this instanceof vh))return new vh(t);let e=t?Bze(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),aU.call(this,t),this._readableState.sync=!1,this[s6]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Cze)}function sU(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Cze(){this._final!==sU&&sU.call(this)}vh.prototype._final=sU;vh.prototype._transform=function(t,e,r){throw new Mze("_transform()")};vh.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[s6]=r})};vh.prototype._read=function(){if(this[s6]){let t=this[s6];this[s6]=null,t()}}});var uU=W((ASt,Ofe)=>{"use strict";h();var{ObjectSetPrototypeOf:Cfe}=ji();Ofe.exports=i1;var dU=cU();Cfe(i1.prototype,dU.prototype);Cfe(i1,dU);function i1(t){if(!(this instanceof i1))return new i1(t);dU.call(this,t)}i1.prototype._transform=function(t,e,r){r(null,t)}});var HP=W((TSt,Kfe)=>{h();var a6=ls(),{ArrayIsArray:Oze,Promise:$ze,SymbolAsyncIterator:Nze}=ji(),WP=gh(),{once:jze}=Ul(),Uze=Sg(),$fe=Fl(),{aggregateTwoErrors:Kze,codes:{ERR_INVALID_ARG_TYPE:bU,ERR_INVALID_RETURN_VALUE:lU,ERR_MISSING_ARGS:qze,ERR_STREAM_DESTROYED:Lze,ERR_STREAM_PREMATURE_CLOSE:Fze},AbortError:zze}=aa(),{validateFunction:Gze,validateAbortSignal:Wze}=e6(),{isIterable:Ig,isReadable:fU,isReadableNodeStream:GP,isNodeStream:Nfe,isTransformStream:o1,isWebStream:Hze,isReadableStream:hU,isReadableEnded:Vze}=ql(),Jze=globalThis.AbortController||Lf().AbortController,pU,mU;function jfe(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=WP(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,Uze.destroyer(t,o||new Lze("pipe")))},cleanup:i}}function Yze(t){return Gze(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function yU(t){if(Ig(t))return t;if(GP(t))return Zze(t);throw new bU("val",["Readable","Iterable","AsyncIterable"],t)}async function*Zze(t){mU||(mU=r6()),yield*mU.prototype[Nze].call(t)}async function zP(t,e,r,{end:n}){let i,o=null,s=u=>{if(u&&(i=u),o){let c=o;o=null,c()}},a=()=>new $ze((u,c)=>{i?c(i):o=()=>{i?c(i):u()}});e.on("drain",s);let d=WP(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&e.end(),await a(),r()}catch(u){r(i!==u?Kze(i,u):u)}finally{d(),e.off("drain",s)}}async function gU(t,e,r,{end:n}){o1(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function Xze(...t){return Ufe(t,jze(Yze(t)))}function Ufe(t,e,r){if(t.length===1&&Oze(t[0])&&(t=t[0]),t.length<2)throw new qze("streams");let n=new Jze,i=n.signal,o=r?.signal,s=[];Wze(o,"options.signal");function a(){p(new zze)}o?.addEventListener("abort",a);let d,u,c=[],l=0;function m(I){p(I,--l===0)}function p(I,P){if(I&&(!d||d.code==="ERR_STREAM_PREMATURE_CLOSE")&&(d=I),!(!d&&!P)){for(;c.length;)c.shift()(d);o?.removeEventListener("abort",a),n.abort(),P&&(d||s.forEach($=>$()),a6.nextTick(e,d,u))}}let g;for(let I=0;I<t.length;I++){let P=t[I],$=I<t.length-1,N=I>0,L=$||r?.end!==!1,F=I===t.length-1;if(Nfe(P)){let U=function(G){G&&G.name!=="AbortError"&&G.code!=="ERR_STREAM_PREMATURE_CLOSE"&&m(G)};var A=U;if(L){let{destroy:G,cleanup:q}=jfe(P,$,N);c.push(G),fU(P)&&F&&s.push(q)}P.on("error",U),fU(P)&&F&&s.push(()=>{P.removeListener("error",U)})}if(I===0)if(typeof P=="function"){if(g=P({signal:i}),!Ig(g))throw new lU("Iterable, AsyncIterable or Stream","source",g)}else Ig(P)||GP(P)||o1(P)?g=P:g=$fe.from(P);else if(typeof P=="function"){if(o1(g)){var b;g=yU((b=g)===null||b===void 0?void 0:b.readable)}else g=yU(g);if(g=P(g,{signal:i}),$){if(!Ig(g,!0))throw new lU("AsyncIterable",`transform[${I-1}]`,g)}else{var S;pU||(pU=uU());let U=new pU({objectMode:!0}),G=(S=g)===null||S===void 0?void 0:S.then;if(typeof G=="function")l++,G.call(g,E=>{u=E,E!=null&&U.write(E),L&&U.end(),a6.nextTick(m)},E=>{U.destroy(E),a6.nextTick(m,E)});else if(Ig(g,!0))l++,zP(g,U,m,{end:L});else if(hU(g)||o1(g)){let E=g.readable||g;l++,zP(E,U,m,{end:L})}else throw new lU("AsyncIterable or Promise","destination",g);g=U;let{destroy:q,cleanup:T}=jfe(g,!1,!0);c.push(q),F&&s.push(T)}}else if(Nfe(P)){if(GP(g)){l+=2;let U=Qze(g,P,m,{end:L});fU(P)&&F&&s.push(U)}else if(o1(g)||hU(g)){let U=g.readable||g;l++,zP(U,P,m,{end:L})}else if(Ig(g))l++,zP(g,P,m,{end:L});else throw new bU("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=P}else if(Hze(P)){if(GP(g))l++,gU(yU(g),P,m,{end:L});else if(hU(g)||Ig(g))l++,gU(g,P,m,{end:L});else if(o1(g))l++,gU(g.readable,P,m,{end:L});else throw new bU("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=P}else g=$fe.from(P)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&a6.nextTick(a),g}function Qze(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Fze)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;Vze(t)?a6.nextTick(s):t.once("end",s)}else r();return WP(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),WP(e,{readable:!1,writable:!0},r)}Kfe.exports={pipelineImpl:Ufe,pipeline:Xze}});var wU=W((kSt,Wfe)=>{"use strict";h();var{pipeline:eGe}=HP(),VP=Fl(),{destroyer:tGe}=Sg(),{isNodeStream:JP,isReadable:qfe,isWritable:Lfe,isWebStream:vU,isTransformStream:kg,isWritableStream:Ffe,isReadableStream:zfe}=ql(),{AbortError:rGe,codes:{ERR_INVALID_ARG_VALUE:Gfe,ERR_MISSING_ARGS:nGe}}=aa(),iGe=gh();Wfe.exports=function(...e){if(e.length===0)throw new nGe("streams");if(e.length===1)return VP.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=VP.from(e[0])),typeof e[e.length-1]=="function"){let p=e.length-1;e[p]=VP.from(e[p])}for(let p=0;p<e.length;++p)if(!(!JP(e[p])&&!vU(e[p]))){if(p<e.length-1&&!(qfe(e[p])||zfe(e[p])||kg(e[p])))throw new Gfe(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(Lfe(e[p])||Ffe(e[p])||kg(e[p])))throw new Gfe(`streams[${p}]`,r[p],"must be writable")}let n,i,o,s,a;function d(p){let g=s;s=null,g?g(p):p?a.destroy(p):!m&&!l&&a.destroy()}let u=e[0],c=eGe(e,d),l=!!(Lfe(u)||Ffe(u)||kg(u)),m=!!(qfe(c)||zfe(c)||kg(c));if(a=new VP({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(c!=null&&c.writableObjectMode),writable:l,readable:m}),l){if(JP(u))a._write=function(g,b,S){u.write(g,b)?S():n=S},a._final=function(g){u.end(),i=g},u.on("drain",function(){if(n){let g=n;n=null,g()}});else if(vU(u)){let b=(kg(u)?u.writable:u).getWriter();a._write=async function(S,A,I){try{await b.ready,b.write(S).catch(()=>{}),I()}catch(P){I(P)}},a._final=async function(S){try{await b.ready,b.close().catch(()=>{}),i=S}catch(A){S(A)}}}let p=kg(c)?c.readable:c;iGe(p,()=>{if(i){let g=i;i=null,g()}})}if(m){if(JP(c))c.on("readable",function(){if(o){let p=o;o=null,p()}}),c.on("end",function(){a.push(null)}),a._read=function(){for(;;){let p=c.read();if(p===null){o=a._read;return}if(!a.push(p))return}};else if(vU(c)){let g=(kg(c)?c.readable:c).getReader();a._read=async function(){for(;;)try{let{value:b,done:S}=await g.read();if(!a.push(b))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(p,g){!p&&s!==null&&(p=new rGe),o=null,n=null,i=null,s===null?g(p):(s=g,JP(c)&&tGe(c,p))},a}});var ehe=W((DSt,EU)=>{"use strict";h();var Yfe=globalThis.AbortController||Lf().AbortController,{codes:{ERR_INVALID_ARG_VALUE:oGe,ERR_INVALID_ARG_TYPE:c6,ERR_MISSING_ARGS:sGe,ERR_OUT_OF_RANGE:aGe},AbortError:zl}=aa(),{validateAbortSignal:Rg,validateInteger:cGe,validateObject:Dg}=e6(),dGe=ji().Symbol("kWeak"),{finished:uGe}=gh(),lGe=wU(),{addAbortSignalNoValidate:fGe}=t6(),{isWritable:hGe,isNodeStream:pGe}=ql(),{ArrayPrototypePush:mGe,MathFloor:yGe,Number:gGe,NumberIsNaN:bGe,Promise:Hfe,PromiseReject:Vfe,PromisePrototypeThen:vGe,Symbol:Zfe}=ji(),YP=Zfe("kEmpty"),Jfe=Zfe("kEof");function wGe(t,e){if(e!=null&&Dg(e,"options"),e?.signal!=null&&Rg(e.signal,"options.signal"),pGe(t)&&!hGe(t))throw new oGe("stream",t,"must be writable");let r=lGe(this,t);return e!=null&&e.signal&&fGe(e.signal,r),r}function ZP(t,e){if(typeof t!="function")throw new c6("fn",["Function","AsyncFunction"],t);e!=null&&Dg(e,"options"),e?.signal!=null&&Rg(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=yGe(e.concurrency)),cGe(r,"concurrency",1),(async function*(){var i,o;let s=new Yfe,a=this,d=[],u=s.signal,c={signal:u},l=()=>s.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&l(),e==null||(o=e.signal)===null||o===void 0||o.addEventListener("abort",l);let m,p,g=!1;function b(){g=!0}async function S(){try{for await(let P of a){var A;if(g)return;if(u.aborted)throw new zl;try{P=t(P,c)}catch($){P=Vfe($)}P!==YP&&(typeof((A=P)===null||A===void 0?void 0:A.catch)=="function"&&P.catch(b),d.push(P),m&&(m(),m=null),!g&&d.length&&d.length>=r&&await new Hfe($=>{p=$}))}d.push(Jfe)}catch(P){let $=Vfe(P);vGe($,void 0,b),d.push($)}finally{var I;g=!0,m&&(m(),m=null),e==null||(I=e.signal)===null||I===void 0||I.removeEventListener("abort",l)}}S();try{for(;;){for(;d.length>0;){let A=await d[0];if(A===Jfe)return;if(u.aborted)throw new zl;A!==YP&&(yield A),d.shift(),p&&(p(),p=null)}await new Hfe(A=>{m=A})}}finally{s.abort(),g=!0,p&&(p(),p=null)}}).call(this)}function _Ge(t=void 0){return t!=null&&Dg(t,"options"),t?.signal!=null&&Rg(t.signal,"options.signal"),(async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new zl({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function Xfe(t,e=void 0){for await(let r of xU.call(this,t,e))return!0;return!1}async function xGe(t,e=void 0){if(typeof t!="function")throw new c6("fn",["Function","AsyncFunction"],t);return!await Xfe.call(this,async(...r)=>!await t(...r),e)}async function EGe(t,e){for await(let r of xU.call(this,t,e))return r}async function SGe(t,e){if(typeof t!="function")throw new c6("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),YP}for await(let n of ZP.call(this,r,e));}function xU(t,e){if(typeof t!="function")throw new c6("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:YP}return ZP.call(this,r,e)}var _U=class extends sGe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function AGe(t,e,r){var n;if(typeof t!="function")throw new c6("reducer",["Function","AsyncFunction"],t);r!=null&&Dg(r,"options"),r?.signal!=null&&Rg(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new zl(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await uGe(this.destroy(u)),u}let o=new Yfe,s=o.signal;if(r!=null&&r.signal){let u={once:!0,[dGe]:this};r.signal.addEventListener("abort",()=>o.abort(),u)}let a=!1;try{for await(let u of this){var d;if(a=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new zl;i?e=await t(e,u,{signal:s}):(e=u,i=!0)}if(!a&&!i)throw new _U}finally{o.abort()}return e}async function PGe(t){t!=null&&Dg(t,"options"),t?.signal!=null&&Rg(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new zl(void 0,{cause:t.signal.reason});mGe(e,n)}return e}function TGe(t,e){let r=ZP.call(this,t,e);return(async function*(){for await(let i of r)yield*i}).call(this)}function Qfe(t){if(t=gGe(t),bGe(t))return 0;if(t<0)throw new aGe("number",">= 0",t);return t}function IGe(t,e=void 0){return e!=null&&Dg(e,"options"),e?.signal!=null&&Rg(e.signal,"options.signal"),t=Qfe(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zl;t--<=0&&(yield o)}}).call(this)}function kGe(t,e=void 0){return e!=null&&Dg(e,"options"),e?.signal!=null&&Rg(e.signal,"options.signal"),t=Qfe(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zl;if(t-- >0)yield o;else return}}).call(this)}EU.exports.streamReturningOperators={asIndexedPairs:_Ge,drop:IGe,filter:xU,flatMap:TGe,map:ZP,take:kGe,compose:wGe};EU.exports.promiseReturningOperators={every:xGe,forEach:SGe,reduce:AGe,toArray:PGe,some:Xfe,find:EGe}});var SU=W((BSt,the)=>{"use strict";h();var{ArrayPrototypePop:RGe,Promise:DGe}=ji(),{isIterable:MGe,isNodeStream:BGe,isWebStream:CGe}=ql(),{pipelineImpl:OGe}=HP(),{finished:$Ge}=gh();AU();function NGe(...t){return new DGe((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!BGe(o)&&!MGe(o)&&!CGe(o)){let s=RGe(t);n=s.signal,i=s.end}OGe(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}the.exports={finished:$Ge,pipeline:NGe}});var AU=W((OSt,uhe)=>{h();var{Buffer:jGe}=Un(),{ObjectDefineProperty:wh,ObjectKeys:ihe,ReflectApply:ohe}=ji(),{promisify:{custom:she}}=Ul(),{streamReturningOperators:rhe,promiseReturningOperators:nhe}=ehe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:ahe}}=aa(),UGe=wU(),{pipeline:che}=HP(),{destroyer:KGe}=Sg(),dhe=gh(),PU=SU(),TU=ql(),Ti=uhe.exports=BP().Stream;Ti.isDisturbed=TU.isDisturbed;Ti.isErrored=TU.isErrored;Ti.isReadable=TU.isReadable;Ti.Readable=r6();for(let t of ihe(rhe)){let r=function(...n){if(new.target)throw ahe();return Ti.Readable.from(ohe(e,this,n))};IU=r;let e=rhe[t];wh(r,"name",{__proto__:null,value:e.name}),wh(r,"length",{__proto__:null,value:e.length}),wh(Ti.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var IU;for(let t of ihe(nhe)){let r=function(...i){if(new.target)throw ahe();return ohe(e,this,i)};IU=r;let e=nhe[t];wh(r,"name",{__proto__:null,value:e.name}),wh(r,"length",{__proto__:null,value:e.length}),wh(Ti.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var IU;Ti.Writable=tU();Ti.Duplex=Fl();Ti.Transform=cU();Ti.PassThrough=uU();Ti.pipeline=che;var{addAbortSignal:qGe}=t6();Ti.addAbortSignal=qGe;Ti.finished=dhe;Ti.destroy=KGe;Ti.compose=UGe;wh(Ti,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return PU}});wh(che,she,{__proto__:null,enumerable:!0,get(){return PU.pipeline}});wh(dhe,she,{__proto__:null,enumerable:!0,get(){return PU.finished}});Ti.Stream=Ti;Ti._isUint8Array=function(e){return e instanceof Uint8Array};Ti._uint8ArrayToBuffer=function(e){return jGe.from(e.buffer,e.byteOffset,e.byteLength)}});var kU=W((NSt,Ii)=>{"use strict";h();var eo=AU(),LGe=SU(),FGe=eo.Readable.destroy;Ii.exports=eo.Readable;Ii.exports._uint8ArrayToBuffer=eo._uint8ArrayToBuffer;Ii.exports._isUint8Array=eo._isUint8Array;Ii.exports.isDisturbed=eo.isDisturbed;Ii.exports.isErrored=eo.isErrored;Ii.exports.isReadable=eo.isReadable;Ii.exports.Readable=eo.Readable;Ii.exports.Writable=eo.Writable;Ii.exports.Duplex=eo.Duplex;Ii.exports.Transform=eo.Transform;Ii.exports.PassThrough=eo.PassThrough;Ii.exports.addAbortSignal=eo.addAbortSignal;Ii.exports.finished=eo.finished;Ii.exports.destroy=eo.destroy;Ii.exports.destroy=FGe;Ii.exports.pipeline=eo.pipeline;Ii.exports.compose=eo.compose;Object.defineProperty(eo,"promises",{configurable:!0,enumerable:!0,get(){return LGe}});Ii.exports.Stream=eo.Stream;Ii.exports.default=Ii.exports});var _pe=W((dPt,wpe)=>{"use strict";h();wpe.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,o,s)=>`${i}${s===0?"":","}${t(o===void 0||typeof o=="symbol"?null:o)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;let o=n.length===0?"":",";return`${n}${o}${t(i)}:${t(e[i])}`},"")}}`}});var qg=W((QTt,Ipe)=>{h();var x1=1e3,E1=x1*60,S1=E1*60,Kg=S1*24,jHe=Kg*7,UHe=Kg*365.25;Ipe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return KHe(t);if(r==="number"&&isFinite(t))return e.long?LHe(t):qHe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function KHe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*UHe;case"weeks":case"week":case"w":return r*jHe;case"days":case"day":case"d":return r*Kg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*S1;case"minutes":case"minute":case"mins":case"min":case"m":return r*E1;case"seconds":case"second":case"secs":case"sec":case"s":return r*x1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function qHe(t){var e=Math.abs(t);return e>=Kg?Math.round(t/Kg)+"d":e>=S1?Math.round(t/S1)+"h":e>=E1?Math.round(t/E1)+"m":e>=x1?Math.round(t/x1)+"s":t+"ms"}function LHe(t){var e=Math.abs(t);return e>=Kg?RT(t,e,Kg,"day"):e>=S1?RT(t,e,S1,"hour"):e>=E1?RT(t,e,E1,"minute"):e>=x1?RT(t,e,x1,"second"):t+" ms"}function RT(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var yK=W(kpe=>{h();kpe.Level=xj().BrowserLevel});var dye=W((C9t,IK)=>{"use strict";h();var YVe=Object.prototype.hasOwnProperty,ha="~";function U6(){}Object.create&&(U6.prototype=Object.create(null),new U6().__proto__||(ha=!1));function ZVe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function cye(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new ZVe(r,n||t,i),s=ha?ha+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function YT(t,e){--t._eventsCount===0?t._events=new U6:delete t._events[e]}function Ns(){this._events=new U6,this._eventsCount=0}Ns.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)YVe.call(r,n)&&e.push(ha?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Ns.prototype.listeners=function(e){var r=ha?ha+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Ns.prototype.listenerCount=function(e){var r=ha?ha+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Ns.prototype.emit=function(e,r,n,i,o,s){var a=ha?ha+e:e;if(!this._events[a])return!1;var d=this._events[a],u=arguments.length,c,l;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,n),!0;case 4:return d.fn.call(d.context,r,n,i),!0;case 5:return d.fn.call(d.context,r,n,i,o),!0;case 6:return d.fn.call(d.context,r,n,i,o,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var m=d.length,p;for(l=0;l<m;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,r);break;case 3:d[l].fn.call(d[l].context,r,n);break;case 4:d[l].fn.call(d[l].context,r,n,i);break;default:if(!c)for(p=1,c=new Array(u-1);p<u;p++)c[p-1]=arguments[p];d[l].fn.apply(d[l].context,c)}}return!0};Ns.prototype.on=function(e,r,n){return cye(this,e,r,n,!1)};Ns.prototype.once=function(e,r,n){return cye(this,e,r,n,!0)};Ns.prototype.removeListener=function(e,r,n,i){var o=ha?ha+e:e;if(!this._events[o])return this;if(!r)return YT(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&YT(this,o);else{for(var a=0,d=[],u=s.length;a<u;a++)(s[a].fn!==r||i&&!s[a].once||n&&s[a].context!==n)&&d.push(s[a]);d.length?this._events[o]=d.length===1?d[0]:d:YT(this,o)}return this};Ns.prototype.removeAllListeners=function(e){var r;return e?(r=ha?ha+e:e,this._events[r]&&YT(this,r)):(this._events=new U6,this._eventsCount=0),this};Ns.prototype.off=Ns.prototype.removeListener;Ns.prototype.addListener=Ns.prototype.on;Ns.prefixed=ha;Ns.EventEmitter=Ns;typeof IK<"u"&&(IK.exports=Ns)});var Xye=W(AI=>{"use strict";h();Object.defineProperty(AI,"__esModule",{value:!0});AI.ReadableWebToNodeStream=void 0;var DJe=K3(),ZK=class extends DJe.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();let e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}};AI.ReadableWebToNodeStream=ZK});h();h();h();h();h();h();var RF=Ut(iL(),1);h();h();h();h();function Gge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,d=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var b=0,S=0,A=0,I=g.length;A!==I&&g[A]===0;)A++,b++;for(var P=(I-A)*c+1>>>0,$=new Uint8Array(P);A!==I;){for(var N=g[A],L=0,F=P-1;(N!==0||L<S)&&F!==-1;F--,L++)N+=256*$[F]>>>0,$[F]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");S=L,A++}for(var U=P-S;U!==P&&$[U]===0;)U++;for(var G=d.repeat(b);U<P;++U)G+=t.charAt($[U]);return G}function m(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var b=0;if(g[b]!==" "){for(var S=0,A=0;g[b]===d;)S++,b++;for(var I=(g.length-b)*u+1>>>0,P=new Uint8Array(I);g[b];){var $=r[g.charCodeAt(b)];if($===255)return;for(var N=0,L=I-1;($!==0||N<A)&&L!==-1;L--,N++)$+=a*P[L]>>>0,P[L]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");A=N,b++}if(g[b]!==" "){for(var F=I-A;F!==I&&P[F]===0;)F++;for(var U=new Uint8Array(S+(I-F)),G=S;F!==I;)U[G++]=P[F++];return U}}}function p(g){var b=m(g);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:m,decode:p}}var Wge=Gge,Hge=Wge,oL=Hge;h();var ZYe=new Uint8Array(0);var sL=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Bd=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};h();var sk=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ak=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cL(this,e)}},ck=class{constructor(e){this.decoders=e}or(e){return cL(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},cL=(t,e)=>new ck({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),dk=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new sk(e,r,n),this.decoder=new ak(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},dL=({name:t,prefix:e,encode:r,decode:n})=>new dk(t,e,r,n),uk=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=oL(r,e);return dL({prefix:t,name:e,encode:n,decode:o=>Bd(i(o))})},Vge=(t,e,r,n)=>{let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,d=0,u=0;for(let c=0;c<o;++c){let l=i[t[c]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|l,a+=r,a>=8&&(a-=8,s[u++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return s},Jge=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},qs=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>dL({prefix:e,name:t,encode(i){return Jge(i,n,r)},decode(i){return Vge(i,n,r,t)}});var sZe=qs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aZe=qs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ls=qs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cZe=qs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lk=new TextEncoder,Yge=new TextDecoder,Ye=class t{static base64UrlToBytes(e){return Ls.baseDecode(e)}static base64UrlToObject(e){let r=Ls.baseDecode(e);return t.bytesToObject(r)}static bytesToBase64Url(e){return Ls.baseEncode(e)}static bytesToString(e){return Yge.decode(e)}static bytesToObject(e){let r=t.bytesToString(e);return JSON.parse(r)}static objectToBytes(e){let r=JSON.stringify(e);return lk.encode(r)}static stringToBase64Url(e){let r=lk.encode(e);return Ls.baseEncode(r)}static stringToBytes(e){return lk.encode(e)}};h();h();h();h();var Bo=2n**255n-19n,hb=2n**252n+27742317777372353535851937790883648493n,fk=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,hk=0x6666666666666666666666666666666666666666666666666666666666666658n,mS={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:Bo,n:hb,h:8,Gx:fk,Gy:hk},Fs=(t="")=>{throw new Error(t)},pL=t=>typeof t=="string",bS=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Fs("Uint8Array expected"):t,pb=t=>new Uint8Array(t),mb=(t,e)=>bS(pL(t)?mk(t):pb(t),e),pt=(t,e=Bo)=>{let r=t%e;return r>=0n?r:e+r},uL=t=>t instanceof Lu?t:Fs("Point expected"),lL,Lu=class t{constructor(e,r,n,i){this.ex=e,this.ey=r,this.ez=n,this.et=i}static fromAffine(e){return new t(e.x,e.y,1n,pt(e.x*e.y))}static fromHex(e,r=!0){let{d:n}=mS;e=mb(e,32);let i=e.slice();i[31]=e[31]&-129;let o=yk(i);o===0n||(r&&!(0n<o&&o<Bo)&&Fs("bad y coord 1"),!r&&!(0n<o&&o<2n**256n)&&Fs("bad y coord 2"));let s=pt(o*o),a=pt(s-1n),d=pt(n*s+1n),{isValid:u,value:c}=Xge(a,d);u||Fs("bad y coordinate 3");let l=(c&1n)===1n;return(e[31]&128)!==0!==l&&(c=pt(-c)),new t(c,o,1n,pt(c*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:r,ey:n,ez:i}=this,{ex:o,ey:s,ez:a}=uL(e),d=pt(r*a),u=pt(o*i),c=pt(n*a),l=pt(s*i);return d===u&&c===l}is0(){return this.equals(yS)}negate(){return new t(pt(-this.ex),this.ey,this.ez,pt(-this.et))}double(){let{ex:e,ey:r,ez:n}=this,{a:i}=mS,o=pt(e*e),s=pt(r*r),a=pt(2n*pt(n*n)),d=pt(i*o),u=e+r,c=pt(pt(u*u)-o-s),l=d+s,m=l-a,p=d-s,g=pt(c*m),b=pt(l*p),S=pt(c*p),A=pt(m*l);return new t(g,b,A,S)}add(e){let{ex:r,ey:n,ez:i,et:o}=this,{ex:s,ey:a,ez:d,et:u}=uL(e),{a:c,d:l}=mS,m=pt(r*s),p=pt(n*a),g=pt(o*l*u),b=pt(i*d),S=pt((r+n)*(s+a)-m-p),A=pt(b-g),I=pt(b+g),P=pt(p-c*m),$=pt(S*A),N=pt(I*P),L=pt(S*P),F=pt(A*I);return new t($,N,F,L)}mul(e,r=!0){if(e===0n)return r===!0?Fs("cannot multiply by 0"):yS;if(typeof e=="bigint"&&0n<e&&e<hb||Fs("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals(Kh))return nbe(e).p;let n=yS,i=Kh;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(mS.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(hb/2n,!1).double();return hb%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};let i=gL(n);return pt(n*i)!==1n&&Fs("invalid inverse"),{x:pt(e*i),y:pt(r*i)}}toRawBytes(){let{x:e,y:r}=this.toAffine(),n=yL(r);return n[31]|=e&1n?128:0,n}toHex(){return pk(this.toRawBytes())}};Lu.BASE=new Lu(fk,hk,1n,pt(fk*hk));Lu.ZERO=new Lu(0n,1n,1n,0n);var{BASE:Kh,ZERO:yS}=Lu,mL=(t,e)=>t.toString(16).padStart(e,"0"),pk=t=>Array.from(t).map(e=>mL(e,2)).join(""),mk=t=>{let e=t.length;(!pL(t)||e%2)&&Fs("hex invalid 1");let r=pb(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&Fs("hex invalid 2"),r[n]=s}return r},yL=t=>mk(mL(t,32*2)).reverse(),yk=t=>BigInt("0x"+pk(pb(bS(t)).reverse())),i2=(...t)=>{let e=pb(t.reduce((n,i)=>n+bS(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},gL=(t,e=Bo)=>{(t===0n||e<=0n)&&Fs("no inverse n="+t+" mod="+e);let r=pt(t,e),n=e,i=0n,o=1n,s=1n,a=0n;for(;r!==0n;){let d=n/r,u=n%r,c=i-s*d,l=o-a*d;n=r,r=u,i=s,o=a,s=c,a=l}return n===1n?pt(i,e):Fs("no inverse")},qu=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=Bo;return r},Zge=t=>{let r=t*t%Bo*t%Bo,n=qu(r,2n)*r%Bo,i=qu(n,1n)*t%Bo,o=qu(i,5n)*i%Bo,s=qu(o,10n)*o%Bo,a=qu(s,20n)*s%Bo,d=qu(a,40n)*a%Bo,u=qu(d,80n)*d%Bo,c=qu(u,80n)*d%Bo,l=qu(c,10n)*o%Bo;return{pow_p_5_8:qu(l,2n)*t%Bo,b2:r}},fL=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Xge=(t,e)=>{let r=pt(e*e*e),n=pt(r*r*e),i=Zge(t*n).pow_p_5_8,o=pt(t*r*i),s=pt(e*o*o),a=o,d=pt(o*fL),u=s===t,c=s===pt(-t),l=s===pt(-t*fL);return u&&(o=a),(c||l)&&(o=d),(pt(o)&1n)===1n&&(o=pt(-o)),{isValid:u||c,value:o}},gS=t=>pt(yk(t),hb),n2,gk=(...t)=>vS.sha512Async(...t),bL=(...t)=>typeof n2=="function"?n2(...t):Fs("etc.sha512Sync not set"),vL=t=>{let e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;let r=t.slice(32,64),n=gS(e),i=Kh.mul(n),o=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:o}},bk=t=>gk(mb(t,32)).then(vL),Qge=t=>vL(bL(mb(t,32))),vk=t=>bk(t).then(e=>e.pointBytes);function wL(t,e){return t?gk(e.hashable).then(e.finish):e.finish(bL(e.hashable))}var ebe=(t,e,r)=>{let{pointBytes:n,scalar:i}=t,o=gS(e),s=Kh.mul(o).toRawBytes();return{hashable:i2(s,n,r),finish:u=>{let c=pt(o+gS(u)*i,hb);return bS(i2(s,yL(c)),64)}}},_L=async(t,e)=>{let r=mb(t),n=await bk(e),i=await gk(n.prefix,r);return wL(!0,ebe(n,i,r))};var tbe=(t,e,r)=>{e=mb(e),t=mb(t,64);let n=Lu.fromHex(r,!1),i=Lu.fromHex(t.slice(0,32),!1),o=yk(t.slice(32,64)),s=Kh.mul(o,!1);return{hashable:i2(i.toRawBytes(),n.toRawBytes(),e),finish:u=>{let c=gS(u);return i.add(n.mul(c,!1)).add(s.negate()).clearCofactor().is0()}}},xL=async(t,e,r)=>wL(!0,tbe(t,e,r));var hL=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,vS={bytesToHex:pk,hexToBytes:mk,concatBytes:i2,mod:pt,invert:gL,randomBytes:t=>{let e=hL();return e||Fs("crypto.getRandomValues must be defined"),e.getRandomValues(pb(t))},sha512Async:async(...t)=>{let e=hL();e||Fs("crypto.subtle or etc.sha512Async must be defined");let r=i2(...t);return pb(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(vS,{sha512Sync:{configurable:!1,get(){return n2},set(t){n2||(n2=t)}}});var wk={getExtendedPublicKeyAsync:bk,getExtendedPublicKey:Qge,randomPrivateKey:()=>vS.randomBytes(32),precompute(t=8,e=Kh){return e.multiply(3n),e}},uy=8,rbe=()=>{let t=[],e=256/uy+1,r=Kh,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**(uy-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},nbe=t=>{let e=lL||(lL=rbe()),r=(c,l)=>{let m=l.negate();return c?m:l},n=yS,i=Kh,o=1+256/uy,s=2**(uy-1),a=BigInt(2**uy-1),d=2**uy,u=BigInt(uy);for(let c=0;c<o;c++){let l=c*s,m=Number(t&a);t>>=u,m>s&&(m-=d,t+=1n);let p=l,g=l+Math.abs(m)-1,b=c%2!==0,S=m<0;m===0?i=i.add(r(b,e[p])):n=n.add(r(S,e[g]))}return{p:n,f:i}};h();var oe=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DwnError"}},ne;(function(t){t.AuthenticateJwsMissing="AuthenticateJwsMissing",t.AuthenticateDescriptorCidMismatch="AuthenticateDescriptorCidMismatch",t.AuthenticationMoreThanOneSignatureNotSupported="AuthenticationMoreThanOneSignatureNotSupported",t.AuthorizationAuthorNotOwner="AuthorizationAuthorNotOwner",t.AuthorizationNotGrantedToAuthor="AuthorizationNotGrantedToAuthor",t.ComputeCidCodecNotSupported="ComputeCidCodecNotSupported",t.ComputeCidMultihashNotSupported="ComputeCidMultihashNotSupported",t.DidMethodNotSupported="DidMethodNotSupported",t.DidNotString="DidNotString",t.DidNotValid="DidNotValid",t.DidResolutionFailed="DidResolutionFailed",t.Ed25519InvalidJwk="Ed25519InvalidJwk",t.EventEmitterStreamNotOpenError="EventEmitterStreamNotOpenError",t.EventsSubscribeEventStreamUnimplemented="EventsSubscribeEventStreamUnimplemented",t.GeneralJwsVerifierGetPublicKeyNotFound="GeneralJwsVerifierGetPublicKeyNotFound",t.GeneralJwsVerifierInvalidSignature="GeneralJwsVerifierInvalidSignature",t.GrantAuthorizationGrantExpired="GrantAuthorizationGrantExpired",t.GrantAuthorizationGrantMissing="GrantAuthorizationGrantMissing",t.GrantAuthorizationGrantRevoked="GrantAuthorizationGrantRevoked",t.GrantAuthorizationInterfaceMismatch="GrantAuthorizationInterfaceMismatch",t.GrantAuthorizationMethodMismatch="GrantAuthorizationMethodMismatch",t.GrantAuthorizationNotGrantedForTenant="GrantAuthorizationNotGrantedForTenant",t.GrantAuthorizationNotGrantedToAuthor="GrantAuthorizationNotGrantedToAuthor",t.GrantAuthorizationGrantNotYetActive="GrantAuthorizationGrantNotYetActive",t.HdKeyDerivationPathInvalid="HdKeyDerivationPathInvalid",t.JwsVerifySignatureUnsupportedCrv="JwsVerifySignatureUnsupportedCrv",t.IndexInvalidCursorValueType="IndexInvalidCursorValueType",t.IndexInvalidCursorSortProperty="IndexInvalidCursorSortProperty",t.IndexInvalidSortPropertyInMemory="IndexInvalidSortPropertyInMemory",t.IndexMissingIndexableProperty="IndexMissingIndexableProperty",t.JwsDecodePlainObjectPayloadInvalid="JwsDecodePlainObjectPayloadInvalid",t.MessageGetInvalidCid="MessageGetInvalidCid",t.ParseCidCodecNotSupported="ParseCidCodecNotSupported",t.ParseCidMultihashNotSupported="ParseCidMultihashNotSupported",t.PermissionsProtocolValidateSchemaUnexpectedRecord="PermissionsProtocolValidateSchemaUnexpectedRecord",t.PermissionsProtocolValidateScopeContextIdProhibitedProperties="PermissionsProtocolValidateScopeContextIdProhibitedProperties",t.PermissionsProtocolValidateScopeSchemaProhibitedProperties="PermissionsProtocolValidateScopeSchemaProhibitedProperties",t.PrivateKeySignerUnableToDeduceAlgorithm="PrivateKeySignerUnableToDeduceAlgorithm",t.PrivateKeySignerUnableToDeduceKeyId="PrivateKeySignerUnableToDeduceKeyId",t.PrivateKeySignerUnsupportedCurve="PrivateKeySignerUnsupportedCurve",t.ProtocolAuthorizationActionNotAllowed="ProtocolAuthorizationActionNotAllowed",t.ProtocolAuthorizationActionRulesNotFound="ProtocolAuthorizationActionRulesNotFound",t.ProtocolAuthorizationIncorrectDataFormat="ProtocolAuthorizationIncorrectDataFormat",t.ProtocolAuthorizationIncorrectContextId="ProtocolAuthorizationIncorrectContextId",t.ProtocolAuthorizationIncorrectProtocolPath="ProtocolAuthorizationIncorrectProtocolPath",t.ProtocolAuthorizationDuplicateRoleRecipient="ProtocolAuthorizationDuplicateRoleRecipient",t.ProtocolAuthorizationInvalidSchema="ProtocolAuthorizationInvalidSchema",t.ProtocolAuthorizationInvalidType="ProtocolAuthorizationInvalidType",t.ProtocolAuthorizationMatchingRoleRecordNotFound="ProtocolAuthorizationMatchingRoleRecordNotFound",t.ProtocolAuthorizationMaxSizeInvalid="ProtocolAuthorizationMaxSizeInvalid",t.ProtocolAuthorizationMinSizeInvalid="ProtocolAuthorizationMinSizeInvalid",t.ProtocolAuthorizationMissingContextId="ProtocolAuthorizationMissingContextId",t.ProtocolAuthorizationMissingRuleSet="ProtocolAuthorizationMissingRuleSet",t.ProtocolAuthorizationParentlessIncorrectProtocolPath="ProtocolAuthorizationParentlessIncorrectProtocolPath",t.ProtocolAuthorizationNotARole="ProtocolAuthorizationNotARole",t.ProtocolAuthorizationParentNotFoundConstructingRecordChain="ProtocolAuthorizationParentNotFoundConstructingRecordChain",t.ProtocolAuthorizationProtocolNotFound="ProtocolAuthorizationProtocolNotFound",t.ProtocolAuthorizationQueryWithoutRole="ProtocolAuthorizationQueryWithoutRole",t.ProtocolAuthorizationRoleMissingRecipient="ProtocolAuthorizationRoleMissingRecipient",t.ProtocolAuthorizationTagsInvalidSchema="ProtocolAuthorizationTagsInvalidSchema",t.ProtocolsConfigureDuplicateActorInRuleSet="ProtocolsConfigureDuplicateActorInRuleSet",t.ProtocolsConfigureDuplicateRoleInRuleSet="ProtocolsConfigureDuplicateRoleInRuleSet",t.ProtocolsConfigureInvalidSize="ProtocolsConfigureInvalidSize",t.ProtocolsConfigureInvalidActionMissingOf="ProtocolsConfigureInvalidActionMissingOf",t.ProtocolsConfigureInvalidActionOfNotAllowed="ProtocolsConfigureInvalidActionOfNotAllowed",t.ProtocolsConfigureInvalidActionDeleteWithoutCreate="ProtocolsConfigureInvalidActionDeleteWithoutCreate",t.ProtocolsConfigureInvalidActionUpdateWithoutCreate="ProtocolsConfigureInvalidActionUpdateWithoutCreate",t.ProtocolsConfigureInvalidRecipientOfAction="ProtocolsConfigureInvalidRecipientOfAction",t.ProtocolsConfigureInvalidRuleSetRecordType="ProtocolsConfigureInvalidRuleSetRecordType",t.ProtocolsConfigureInvalidTagSchema="ProtocolsConfigureInvalidTagSchema",t.ProtocolsConfigureQueryNotAllowed="ProtocolsConfigureQueryNotAllowed",t.ProtocolsConfigureRecordNestingDepthExceeded="ProtocolsConfigureRecordNestingDepthExceeded",t.ProtocolsConfigureRoleDoesNotExistAtGivenPath="ProtocolsConfigureRoleDoesNotExistAtGivenPath",t.ProtocolsConfigureUnauthorized="ProtocolsConfigureUnauthorized",t.ProtocolsQueryUnauthorized="ProtocolsQueryUnauthorized",t.RecordsAuthorDelegatedGrantAndIdExistenceMismatch="RecordsAuthorDelegatedGrantAndIdExistenceMismatch",t.RecordsAuthorDelegatedGrantCidMismatch="RecordsAuthorDelegatedGrantCidMismatch",t.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",t.RecordsAuthorDelegatedGrantNotADelegatedGrant="RecordsAuthorDelegatedGrantNotADelegatedGrant",t.RecordsDecryptNoMatchingKeyEncryptedFound="RecordsDecryptNoMatchingKeyEncryptedFound",t.RecordsDeleteAuthorizationFailed="RecordsDeleteAuthorizationFailed",t.RecordsQueryCreateFilterPublishedSortInvalid="RecordsQueryCreateFilterPublishedSortInvalid",t.RecordsQueryParseFilterPublishedSortInvalid="RecordsQueryParseFilterPublishedSortInvalid",t.RecordsGrantAuthorizationConditionPublicationProhibited="RecordsGrantAuthorizationConditionPublicationProhibited",t.RecordsGrantAuthorizationConditionPublicationRequired="RecordsGrantAuthorizationConditionPublicationRequired",t.RecordsGrantAuthorizationDeleteProtocolScopeMismatch="RecordsGrantAuthorizationDeleteProtocolScopeMismatch",t.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch="RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",t.RecordsGrantAuthorizationScopeContextIdMismatch="RecordsGrantAuthorizationScopeContextIdMismatch",t.RecordsGrantAuthorizationScopeMissingProtocol="RecordsGrantAuthorizationScopeMissingProtocol",t.RecordsGrantAuthorizationScopeNotRecords="RecordsGrantAuthorizationScopeNotRecords",t.RecordsGrantAuthorizationScopeProtocolMismatch="RecordsGrantAuthorizationScopeProtocolMismatch",t.RecordsGrantAuthorizationScopeProtocolPathMismatch="RecordsGrantAuthorizationScopeProtocolPathMismatch",t.RecordsGrantAuthorizationScopeSchema="RecordsGrantAuthorizationScopeSchema",t.RecordsDerivePrivateKeyUnSupportedCurve="RecordsDerivePrivateKeyUnSupportedCurve",t.RecordsInvalidAncestorKeyDerivationSegment="RecordsInvalidAncestorKeyDerivationSegment",t.RecordsOwnerDelegatedGrantAndIdExistenceMismatch="RecordsOwnerDelegatedGrantAndIdExistenceMismatch",t.RecordsOwnerDelegatedGrantCidMismatch="RecordsOwnerDelegatedGrantCidMismatch",t.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",t.RecordsOwnerDelegatedGrantNotADelegatedGrant="RecordsOwnerDelegatedGrantNotADelegatedGrant",t.RecordsProtocolContextDerivationSchemeMissingContextId="RecordsProtocolContextDerivationSchemeMissingContextId",t.RecordsProtocolPathDerivationSchemeMissingProtocol="RecordsProtocolPathDerivationSchemeMissingProtocol",t.RecordsQueryFilterMissingRequiredProperties="RecordsQueryFilterMissingRequiredProperties",t.RecordsReadReturnedMultiple="RecordsReadReturnedMultiple",t.RecordsReadAuthorizationFailed="RecordsReadAuthorizationFailed",t.RecordsSubscribeEventStreamUnimplemented="RecordsSubscribeEventStreamUnimplemented",t.RecordsSubscribeFilterMissingRequiredProperties="RecordsSubscribeFilterMissingRequiredProperties",t.RecordsSchemasDerivationSchemeMissingSchema="RecordsSchemasDerivationSchemeMissingSchema",t.RecordsWriteAttestationIntegrityMoreThanOneSignature="RecordsWriteAttestationIntegrityMoreThanOneSignature",t.RecordsWriteAttestationIntegrityDescriptorCidMismatch="RecordsWriteAttestationIntegrityDescriptorCidMismatch",t.RecordsWriteAttestationIntegrityInvalidPayloadProperty="RecordsWriteAttestationIntegrityInvalidPayloadProperty",t.RecordsWriteAuthorizationFailed="RecordsWriteAuthorizationFailed",t.RecordsWriteCreateMissingSigner="RecordsWriteCreateMissingSigner",t.RecordsWriteCreateDataAndDataCidMutuallyExclusive="RecordsWriteCreateDataAndDataCidMutuallyExclusive",t.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive="RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive",t.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive="RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive",t.RecordsWriteDataCidMismatch="RecordsWriteDataCidMismatch",t.RecordsWriteDataSizeMismatch="RecordsWriteDataSizeMismatch",t.RecordsWriteGetEntryIdUndefinedAuthor="RecordsWriteGetEntryIdUndefinedAuthor",t.RecordsWriteGetInitialWriteNotFound="RecordsWriteGetInitialWriteNotFound",t.RecordsWriteImmutablePropertyChanged="RecordsWriteImmutablePropertyChanged",t.RecordsWriteMissingSigner="RecordsWriteMissingSigner",t.RecordsWriteMissingDataInPrevious="RecordsWriteMissingDataInPrevious",t.RecordsWriteMissingEncodedDataInPrevious="RecordsWriteMissingEncodedDataInPrevious",t.RecordsWriteMissingDataStream="RecordsWriteMissingDataStream",t.RecordsWriteMissingProtocol="RecordsWriteMissingProtocol",t.RecordsWriteMissingSchema="RecordsWriteMissingSchema",t.RecordsWriteOwnerAndTenantMismatch="RecordsWriteOwnerAndTenantMismatch",t.RecordsWriteSignAsOwnerDelegateUnknownAuthor="RecordsWriteSignAsOwnerDelegateUnknownAuthor",t.RecordsWriteSignAsOwnerUnknownAuthor="RecordsWriteSignAsOwnerUnknownAuthor",t.RecordsWriteValidateIntegrityAttestationMismatch="RecordsWriteValidateIntegrityAttestationMismatch",t.RecordsWriteValidateIntegrityContextIdMismatch="RecordsWriteValidateIntegrityContextIdMismatch",t.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload="RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",t.RecordsWriteValidateIntegrityDateCreatedMismatch="RecordsWriteValidateIntegrityDateCreatedMismatch",t.RecordsWriteValidateIntegrityEncryptionCidMismatch="RecordsWriteValidateIntegrityEncryptionCidMismatch",t.RecordsWriteValidateIntegrityRecordIdUnauthorized="RecordsWriteValidateIntegrityRecordIdUnauthorized",t.SchemaValidatorAdditionalPropertyNotAllowed="SchemaValidatorAdditionalPropertyNotAllowed",t.SchemaValidatorFailure="SchemaValidatorFailure",t.SchemaValidatorSchemaNotFound="SchemaValidatorSchemaNotFound",t.SchemaValidatorUnevaluatedPropertyNotAllowed="SchemaValidatorUnevaluatedPropertyNotAllowed",t.Secp256k1KeyNotValid="Secp256k1KeyNotValid",t.Secp256r1KeyNotValid="Secp256r1KeyNotValid",t.TimestampInvalid="TimestampInvalid",t.UrlProtocolNotNormalized="UrlProtocolNotNormalized",t.UrlProtocolNotNormalizable="UrlProtocolNotNormalizable",t.UrlSchemaNotNormalized="UrlSchemaNotNormalized",t.UrlSchemaNotNormalizable="UrlSchemaNotNormalizable"})(ne||(ne={}));var wS=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})};function SL(t){if(t.kty!=="OKP"||t.crv!=="Ed25519")throw new oe(ne.Ed25519InvalidJwk,"invalid jwk. kty MUST be OKP. crv MUST be Ed25519")}function AL(t){return{alg:"EdDSA",kty:"OKP",crv:"Ed25519",x:Ye.bytesToBase64Url(t)}}var _k={sign:(t,e)=>wS(void 0,void 0,void 0,function*(){SL(e);let r=Ye.base64UrlToBytes(e.d);return _L(t,r)}),verify:(t,e,r)=>wS(void 0,void 0,void 0,function*(){SL(r);let n=Ye.base64UrlToBytes(r.x);return xL(e,t,n)}),generateKeyPair:()=>wS(void 0,void 0,void 0,function*(){let t=wk.randomPrivateKey(),e=yield vk(t),r=Ye.bytesToBase64Url(t),n=AL(e),i=Object.assign(Object.assign({},n),{d:r});return{publicJwk:n,privateJwk:i}}),publicKeyToJwk:t=>wS(void 0,void 0,void 0,function*(){return AL(t)})};h();h();var Sk=2n**256n,qh=Sk-0x1000003d1n,Ki=Sk-0x14551231950b75fc4402da1732fc9bebfn,DL=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,ML=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,BL={p:qh,n:Ki,a:0n,b:7n,Gx:DL,Gy:ML},fs=32,PL=t=>We(We(t*t)*t+BL.b),cn=(t="")=>{throw new Error(t)},SS=t=>typeof t=="bigint",CL=t=>typeof t=="string",xk=t=>SS(t)&&0n<t&&t<qh,a2=t=>SS(t)&&0n<t&&t<Ki,OL=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?cn("Uint8Array expected"):t,Wa=t=>new Uint8Array(t),of=(t,e)=>OL(CL(t)?d2(t):Wa(t),e),We=(t,e=qh)=>{let r=t%e;return r>=0n?r:e+r},TL=t=>t instanceof hs?t:cn("Point expected"),IL,hs=class t{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new t(e.x,e.y,1n)}static fromHex(e){e=of(e);let r,n=e[0],i=e.subarray(1),o=xS(i,0,fs),s=e.length;if(s===33&&[2,3].includes(n)){xk(o)||cn("Point hex invalid: x not FE");let a=ibe(PL(o)),d=(a&1n)===1n;(n&1)===1!==d&&(a=We(-a)),r=new t(o,a,1n)}return s===65&&n===4&&(r=new t(o,xS(i,fs,2*fs),1n)),r?r.ok():cn("Point is not on curve")}static fromPrivateKey(e){return nf.mul(ES(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:a}=TL(e),d=We(r*a),u=We(o*i),c=We(n*a),l=We(s*i);return d===u&&c===l}negate(){return new t(this.px,We(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:a}=TL(e),{a:d,b:u}=BL,c=0n,l=0n,m=0n,p=We(u*3n),g=We(r*o),b=We(n*s),S=We(i*a),A=We(r+n),I=We(o+s);A=We(A*I),I=We(g+b),A=We(A-I),I=We(r+i);let P=We(o+a);return I=We(I*P),P=We(g+S),I=We(I-P),P=We(n+i),c=We(s+a),P=We(P*c),c=We(b+S),P=We(P-c),m=We(d*I),c=We(p*S),m=We(c+m),c=We(b-m),m=We(b+m),l=We(c*m),b=We(g+g),b=We(b+g),S=We(d*S),I=We(p*I),b=We(b+S),S=We(g-S),S=We(d*S),I=We(I+S),g=We(b*I),l=We(l+g),g=We(P*I),c=We(A*c),c=We(c-g),g=We(A*b),m=We(P*m),m=We(m+g),new t(c,l,m)}mul(e,r=!0){if(!r&&e===0n)return _S;if(a2(e)||cn("invalid scalar"),this.equals(nf))return dbe(e).p;let n=_S,i=nf;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(_S))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let i=l2(n);return We(n*i)!==1n&&cn("invalid inverse"),{x:We(e*i),y:We(r*i)}}assertValidity(){let{x:e,y:r}=this.aff();return(!xk(e)||!xk(r))&&cn("Point invalid: x or y"),We(r*r)===PL(e)?this:cn("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+o2(r)+(e?"":o2(n))}toRawBytes(e=!0){return d2(this.toHex(e))}};hs.BASE=new hs(DL,ML,1n);hs.ZERO=new hs(0n,1n,0n);var{BASE:nf,ZERO:_S}=hs,$L=(t,e)=>t.toString(16).padStart(e,"0"),Ak=t=>Array.from(t).map(e=>$L(e,2)).join(""),d2=t=>{let e=t.length;(!CL(t)||e%2)&&cn("hex invalid 1");let r=Wa(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&cn("hex invalid 2"),r[n]=s}return r},u2=t=>BigInt("0x"+(Ak(t)||"0")),xS=(t,e,r)=>u2(t.slice(e,r)),AS=t=>SS(t)&&t>=0n&&t<Sk?d2($L(t,2*fs)):cn("bigint expected"),o2=t=>Ak(AS(t)),Ek=(...t)=>{let e=Wa(t.reduce((n,i)=>n+OL(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},l2=(t,e=qh)=>{(t===0n||e<=0n)&&cn("no inverse n="+t+" mod="+e);let r=We(t,e),n=e,i=0n,o=1n,s=1n,a=0n;for(;r!==0n;){let d=n/r,u=n%r,c=i-s*d,l=o-a*d;n=r,r=u,i=s,o=a,s=c,a=l}return n===1n?We(i,e):cn("no inverse")},ibe=t=>{let e=1n;for(let r=t,n=(qh+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%qh),r=r*r%qh;return We(e*e)===t?e:cn("sqrt invalid")},ES=t=>(SS(t)||(t=u2(of(t,fs))),a2(t)?t:cn("private key out of range")),Pk=t=>t>Ki>>1n;function f2(t,e=!0){return hs.fromPrivateKey(t).toRawBytes(e)}var c2=class t{constructor(e,r,n){this.r=e,this.s=r,this.recovery=n,this.assertValidity()}static fromCompact(e){return e=of(e,64),new t(xS(e,0,fs),xS(e,fs,2*fs))}assertValidity(){return a2(this.r)&&a2(this.s)?this:cn()}addRecoveryBit(e){return new t(this.r,this.s,e)}hasHighS(){return Pk(this.s)}recoverPublicKey(e){let{r,s:n,recovery:i}=this;[0,1,2,3].includes(i)||cn("recovery id invalid");let o=Tk(of(e,32)),s=i===2||i===3?r+Ki:r;s>=qh&&cn("q.x invalid");let a=i&1?"03":"02",d=hs.fromHex(a+o2(s)),u=l2(s,Ki),c=We(-o*u,Ki),l=We(n*u,Ki);return nf.mulAddQUns(d,c,l)}toCompactRawBytes(){return d2(this.toCompactHex())}toCompactHex(){return o2(this.r)+o2(this.s)}},NL=t=>{let e=t.length*8-256,r=u2(t);return e>0?r>>BigInt(e):r},Tk=t=>We(NL(t),Ki),kL=t=>AS(t),RL=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,s2,jL={lowS:!0},obe={lowS:!0};function sbe(t,e,r=jL){["der","recovered","canonical"].some(l=>l in r)&&cn("sign() legacy options not supported");let{lowS:n}=r;n==null&&(n=!0);let i=Tk(of(t)),o=kL(i),s=ES(e),a=[kL(s),o],d=r.extraEntropy;if(d){d===!0&&(d=Lh.randomBytes(fs));let l=of(d);l.length!==fs&&cn(),a.push(l)}let u=i,c=l=>{let m=NL(l);if(!a2(m))return;let p=l2(m,Ki),g=nf.mul(m).aff(),b=We(g.x,Ki);if(b===0n)return;let S=We(p*We(u+We(s*b,Ki),Ki),Ki);if(S===0n)return;let A=S,I=(g.x===b?0:2)|Number(g.y&1n);return n&&Pk(S)&&(A=We(-S,Ki),I^=1),new c2(b,A,I)};return{seed:Ek(...a),k2sig:c}}function abe(t){let e=Wa(fs),r=Wa(fs),n=0,i=()=>{e.fill(1),r.fill(0),n=0},o="drbg: tried 1000 values";if(t){let s=(...u)=>Lh.hmacSha256Async(r,e,...u),a=async(u=Wa())=>{r=await s(Wa([0]),u),e=await s(),u.length!==0&&(r=await s(Wa([1]),u),e=await s())},d=async()=>(n++>=1e3&&cn(o),e=await s(),e);return async(u,c)=>{i(),await a(u);let l;for(;!(l=c(await d()));)await a();return i(),l}}else{let s=(...u)=>{let c=s2;return c||cn("etc.hmacSha256Sync not set"),c(r,e,...u)},a=(u=Wa())=>{r=s(Wa([0]),u),e=s(),u.length!==0&&(r=s(Wa([1]),u),e=s())},d=()=>(n++>=1e3&&cn(o),e=s(),e);return(u,c)=>{i(),a(u);let l;for(;!(l=c(d()));)a();return i(),l}}}async function Ik(t,e,r=jL){let{seed:n,k2sig:i}=sbe(t,e,r);return abe(!0)(n,i)}function UL(t,e,r,n=obe){let{lowS:i}=n;i==null&&(i=!0),"strict"in n&&cn("verify() legacy options not supported");let o,s,a,d=t&&typeof t=="object"&&"r"in t;!d&&of(t).length!==2*fs&&cn("signature must be 64 bytes");try{o=d?new c2(t.r,t.s).assertValidity():c2.fromCompact(t),s=Tk(of(e,fs)),a=r instanceof hs?r.ok():hs.fromHex(r)}catch{return!1}if(!o)return!1;let{r:u,s:c}=o;if(i&&Pk(c))return!1;let l;try{let p=l2(c,Ki),g=We(s*p,Ki),b=We(u*p,Ki);l=nf.mulAddQUns(a,g,b).aff()}catch{return!1}return l?We(l.x,Ki)===u:!1}function KL(t){t=of(t);let e=fs+8;(t.length<e||t.length>1024)&&cn("expected proper params");let r=We(u2(t),Ki-1n)+1n;return AS(r)}var Lh={hexToBytes:d2,bytesToHex:Ak,concatBytes:Ek,bytesToNumberBE:u2,numberToBytesBE:AS,mod:We,invert:l2,hmacSha256Async:async(t,...e)=>{let r=RL();if(!r)return cn("etc.hmacSha256Async not set");let n=r.subtle,i=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Wa(await n.sign("HMAC",i,Ek(...e)))},hmacSha256Sync:s2,hashToPrivateKey:KL,randomBytes:t=>{let e=RL();return e||cn("crypto.getRandomValues must be defined"),e.getRandomValues(Wa(t))}},PS={normPrivateKeyToScalar:ES,isValidPrivateKey:t=>{try{return!!ES(t)}catch{return!1}},randomPrivateKey:()=>KL(Lh.randomBytes(fs+8)),precompute(t=8,e=nf){return e.multiply(3n),e}};Object.defineProperties(Lh,{hmacSha256Sync:{configurable:!1,get(){return s2},set(t){s2||(s2=t)}}});var ly=8,cbe=()=>{let t=[],e=256/ly+1,r=nf,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**(ly-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},dbe=t=>{let e=IL||(IL=cbe()),r=(c,l)=>{let m=l.negate();return c?m:l},n=_S,i=nf,o=1+256/ly,s=2**(ly-1),a=BigInt(2**ly-1),d=2**ly,u=BigInt(ly);for(let c=0;c<o;c++){let l=c*s,m=Number(t&a);t>>=u,m>s&&(m-=d,t+=1n);let p=l,g=l+Math.abs(m)-1,b=c%2!==0,S=m<0;m===0?i=i.add(r(b,e[p])):n=n.add(r(S,e[g]))}return{p:n,f:i}};h();h();h();var sf={};qr(sf,{decode:()=>yb,encodeTo:()=>fy,encodingLength:()=>hy});h();h();var ube=FL,qL=128,lbe=127,fbe=~lbe,hbe=Math.pow(2,31);function FL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hbe;)e[r++]=t&255|qL,t/=128;for(;t&fbe;)e[r++]=t&255|qL,t>>>=7;return e[r]=t|0,FL.bytes=r-n+1,e}var pbe=Rk,mbe=128,LL=127;function Rk(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Rk.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&LL)<<i:(s&LL)*Math.pow(2,i),i+=7}while(s>=mbe);return Rk.bytes=o-n,r}var ybe=Math.pow(2,7),gbe=Math.pow(2,14),bbe=Math.pow(2,21),vbe=Math.pow(2,28),wbe=Math.pow(2,35),_be=Math.pow(2,42),xbe=Math.pow(2,49),Ebe=Math.pow(2,56),Sbe=Math.pow(2,63),Abe=function(t){return t<ybe?1:t<gbe?2:t<bbe?3:t<vbe?4:t<wbe?5:t<_be?6:t<xbe?7:t<Ebe?8:t<Sbe?9:10},Pbe={encode:ube,decode:pbe,encodingLength:Abe},Tbe=Pbe,h2=Tbe;var yb=(t,e=0)=>[h2.decode(t,e),h2.decode.bytes],fy=(t,e,r=0)=>(h2.encode(t,e,r),e),hy=t=>h2.encodingLength(t);var py=(t,e)=>{let r=e.byteLength,n=hy(t),i=n+hy(r),o=new Uint8Array(i+r);return fy(t,o,0),fy(r,o,n),o.set(e,i),new gb(t,r,e,o)},TS=t=>{let e=Bd(t),[r,n]=yb(e),[i,o]=yb(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new gb(r,i,s,e)},zL=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&sL(t.bytes,r.bytes)}},gb=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Mk=({name:t,code:e,encode:r})=>new Dk(t,e,r),Dk=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?py(this.code,r):r.then(n=>py(this.code,n))}else throw Error("Unknown type, must be binary type")}};var GL=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),ps=Mk({name:"sha2-256",code:18,encode:GL("SHA-256")}),RZe=Mk({name:"sha2-512",code:19,encode:GL("SHA-512")});var Fh=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},kbe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Bi=class t{static validateKey(e){if(e.kty!=="EC"||e.crv!=="secp256k1")throw new oe(ne.Secp256k1KeyNotValid,"Invalid SECP256K1 JWK: `kty` MUST be `EC`. `crv` MUST be `secp256k1`")}static publicKeyToJwk(e){return Fh(this,void 0,void 0,function*(){let r;e.byteLength===33?r=hs.fromHex(e).toRawBytes(!1):r=e;let n=Ye.bytesToBase64Url(r.subarray(1,33)),i=Ye.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256K",kty:"EC",crv:"secp256k1",x:n,y:i}})}static privateKeyToJwk(e){return Fh(this,void 0,void 0,function*(){let r=yield t.getPublicKey(e),n=yield t.publicKeyToJwk(r);return n.d=Ye.bytesToBase64Url(e),n})}static publicJwkToBytes(e){let r=Ye.base64UrlToBytes(e.x),n=Ye.base64UrlToBytes(e.y);return hs.fromAffine({x:Lh.bytesToNumberBE(r),y:Lh.bytesToNumberBE(n)}).toRawBytes(!0)}static privateJwkToBytes(e){return Ye.base64UrlToBytes(e.d)}static sign(e,r){return Fh(this,void 0,void 0,function*(){t.validateKey(r);let n=yield ps.encode(e),i=t.privateJwkToBytes(r);return(yield Ik(n,i)).toCompactRawBytes()})}static verify(e,r,n){return Fh(this,void 0,void 0,function*(){t.validateKey(n);let i=t.publicJwkToBytes(n),o=yield ps.encode(e);return UL(r,o,i)})}static generateKeyPair(){return Fh(this,void 0,void 0,function*(){let e=PS.randomPrivateKey(),r=f2(e,!1),n=Ye.bytesToBase64Url(e),i=yield t.publicKeyToJwk(r),o=Object.assign(Object.assign({},i),{d:n});return{publicJwk:i,privateJwk:o}})}static generateKeyPairRaw(){return Fh(this,void 0,void 0,function*(){let e=PS.randomPrivateKey();return{publicKey:f2(e,!0),privateKey:e}})}static getPublicKey(e){return Fh(this,void 0,void 0,function*(){return f2(e,!0)})}static getPublicJwk(e){return Fh(this,void 0,void 0,function*(){let{d:r}=e;return kbe(e,["d"])})}};h();h();h();h();h();function zh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Rbe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function af(t,...e){if(!Rbe(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function IS(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zh(t.outputLen),zh(t.blockLen)}function bb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WL(t,e){af(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}h();h();var vb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Bk(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var df=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Cd=(t,e)=>t<<32-e|t>>>e,Dbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Dbe)throw new Error("Non little-endian hardware is not supported");var Mbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ck(t){if(!Bk(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Mbe[t[r]];return e}var cf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function HL(t){if(t>=cf._0&&t<=cf._9)return t-cf._0;if(t>=cf._A&&t<=cf._F)return t-(cf._A-10);if(t>=cf._a&&t<=cf._f)return t-(cf._a-10)}function VL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=HL(t.charCodeAt(o)),a=HL(t.charCodeAt(o+1));if(s===void 0||a===void 0){let d=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+a}return n}var Bbe=async()=>{};async function JL(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await Bbe(),n+=o)}}function m2(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Gh(t){if(typeof t=="string"&&(t=m2(t)),!Bk(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function my(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!Bk(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var wb=class{clone(){return this._cloneInto()}},Cbe={}.toString;function YL(t,e){if(e!==void 0&&Cbe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function _b(t){let e=n=>t().update(Gh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function uf(t=32){if(vb&&typeof vb.getRandomValues=="function")return vb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}var kS=class extends wb{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,IS(e);let n=Gh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return bb(this),this.iHash.update(e),this}digestInto(e){bb(this),af(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Wh=(t,e,r)=>new kS(t,e).update(r).digest();Wh.create=(t,e)=>new kS(t,e);h();h();var DS={};qr(DS,{bitGet:()=>qbe,bitLen:()=>Kbe,bitMask:()=>y2,bitSet:()=>Lbe,bytesToHex:()=>ff,bytesToNumberBE:()=>hf,bytesToNumberLE:()=>$d,concatBytes:()=>mf,createHmacDrbg:()=>Nk,ensureBytes:()=>Rn,equalBytes:()=>jbe,hexToBytes:()=>yy,hexToNumber:()=>$k,isBytes:()=>Od,numberToBytesBE:()=>ga,numberToBytesLE:()=>pf,numberToHexUnpadded:()=>eF,numberToVarBytesBE:()=>Nbe,utf8ToBytes:()=>Ube,validateObject:()=>Oc});h();var QL=BigInt(0),RS=BigInt(1),Obe=BigInt(2);function Od(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var $be=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ff(t){if(!Od(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=$be[t[r]];return e}function eF(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function $k(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var lf={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ZL(t){if(t>=lf._0&&t<=lf._9)return t-lf._0;if(t>=lf._A&&t<=lf._F)return t-(lf._A-10);if(t>=lf._a&&t<=lf._f)return t-(lf._a-10)}function yy(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=ZL(t.charCodeAt(o)),a=ZL(t.charCodeAt(o+1));if(s===void 0||a===void 0){let d=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+a}return n}function hf(t){return $k(ff(t))}function $d(t){if(!Od(t))throw new Error("Uint8Array expected");return $k(ff(Uint8Array.from(t).reverse()))}function ga(t,e){return yy(t.toString(16).padStart(e*2,"0"))}function pf(t,e){return ga(t,e).reverse()}function Nbe(t){return yy(eF(t))}function Rn(t,e,r){let n;if(typeof e=="string")try{n=yy(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Od(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function mf(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!Od(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function jbe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Ube(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Kbe(t){let e;for(e=0;t>QL;t>>=RS,e+=1);return e}function qbe(t,e){return t>>BigInt(e)&RS}var Lbe=(t,e,r)=>t|(r?RS:QL)<<BigInt(e),y2=t=>(Obe<<BigInt(t-1))-RS,Ok=t=>new Uint8Array(t),XL=t=>Uint8Array.from(t);function Nk(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ok(t),i=Ok(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),d=(l=Ok())=>{i=a(XL([0]),l),n=a(),l.length!==0&&(i=a(XL([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,m=[];for(;l<e;){n=a();let p=n.slice();m.push(p),l+=n.length}return mf(...m)};return(l,m)=>{s(),d(l);let p;for(;!(p=m(u()));)d();return s(),p}}var Fbe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Od(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Oc(t,e,r={}){let n=(i,o,s)=>{let a=Fbe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let d=t[i];if(!(s&&d===void 0)&&!a(d,t))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var qi=BigInt(0),On=BigInt(1),gy=BigInt(2),zbe=BigInt(3),jk=BigInt(4),tF=BigInt(5),rF=BigInt(8),Gbe=BigInt(9),Wbe=BigInt(16);function Zr(t,e){let r=t%e;return r>=qi?r:e+r}function Uk(t,e,r){if(r<=qi||e<qi)throw new Error("Expected power/modulo > 0");if(r===On)return qi;let n=On;for(;e>qi;)e&On&&(n=n*t%r),t=t*t%r,e>>=On;return n}function Dn(t,e,r){let n=t;for(;e-- >qi;)n*=n,n%=r;return n}function MS(t,e){if(t===qi||e<=qi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Zr(t,e),n=e,i=qi,o=On,s=On,a=qi;for(;r!==qi;){let u=n/r,c=n%r,l=i-s*u,m=o-a*u;n=r,r=c,i=s,o=a,s=l,a=m}if(n!==On)throw new Error("invert: does not exist");return Zr(i,e)}function Hbe(t){let e=(t-On)/gy,r,n,i;for(r=t-On,n=0;r%gy===qi;r/=gy,n++);for(i=gy;i<t&&Uk(i,e,t)!==t-On;i++);if(n===1){let s=(t+On)/jk;return function(d,u){let c=d.pow(u,s);if(!d.eql(d.sqr(c),u))throw new Error("Cannot find square root");return c}}let o=(r+On)/gy;return function(a,d){if(a.pow(d,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,c=a.pow(a.mul(a.ONE,i),r),l=a.pow(d,o),m=a.pow(d,r);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let p=1;for(let b=a.sqr(m);p<u&&!a.eql(b,a.ONE);p++)b=a.sqr(b);let g=a.pow(c,On<<BigInt(u-p-1));c=a.sqr(g),l=a.mul(l,g),m=a.mul(m,c),u=p}return l}}function Vbe(t){if(t%jk===zbe){let e=(t+On)/jk;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%rF===tF){let e=(t-tF)/rF;return function(n,i){let o=n.mul(i,gy),s=n.pow(o,e),a=n.mul(i,s),d=n.mul(n.mul(a,gy),s),u=n.mul(a,n.sub(d,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return t%Wbe,Hbe(t)}var nF=(t,e)=>(Zr(t,e)&On)===On,Jbe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kk(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Jbe.reduce((n,i)=>(n[i]="function",n),e);return Oc(t,r)}function Ybe(t,e,r){if(r<qi)throw new Error("Expected power > 0");if(r===qi)return t.ONE;if(r===On)return e;let n=t.ONE,i=e;for(;r>qi;)r&On&&(n=t.mul(n,i)),i=t.sqr(i),r>>=On;return n}function Zbe(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function qk(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function xb(t,e,r=!1,n={}){if(t<=qi)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=qk(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Vbe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:y2(i),ZERO:qi,ONE:On,create:d=>Zr(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return qi<=d&&d<t},is0:d=>d===qi,isOdd:d=>(d&On)===On,neg:d=>Zr(-d,t),eql:(d,u)=>d===u,sqr:d=>Zr(d*d,t),add:(d,u)=>Zr(d+u,t),sub:(d,u)=>Zr(d-u,t),mul:(d,u)=>Zr(d*u,t),pow:(d,u)=>Ybe(a,d,u),div:(d,u)=>Zr(d*MS(u,t),t),sqrN:d=>d*d,addN:(d,u)=>d+u,subN:(d,u)=>d-u,mulN:(d,u)=>d*u,inv:d=>MS(d,t),sqrt:n.sqrt||(d=>s(a,d)),invertBatch:d=>Zbe(a,d),cmov:(d,u,c)=>c?u:d,toBytes:d=>r?pf(d,o):ga(d,o),fromBytes:d=>{if(d.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${d.length}`);return r?$d(d):hf(d)}});return Object.freeze(a)}function iF(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function oF(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Lk(t){let e=oF(t);return e+Math.ceil(e/2)}function sF(t,e,r=!1){let n=t.length,i=oF(e),o=Lk(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?hf(t):$d(t),a=Zr(s,e-On)+On;return r?pf(a,i):ga(a,i)}h();var Qbe=BigInt(0),Fk=BigInt(1);function BS(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>Qbe;)o&Fk&&(s=s.add(a)),a=a.double(),o>>=Fk;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),d=[],u=i,c=u;for(let l=0;l<s;l++){c=u,d.push(c);for(let m=1;m<a;m++)c=c.add(u),d.push(c);u=c.double()}return d},wNAF(i,o,s){let{windows:a,windowSize:d}=n(i),u=t.ZERO,c=t.BASE,l=BigInt(2**i-1),m=2**i,p=BigInt(i);for(let g=0;g<a;g++){let b=g*d,S=Number(s&l);s>>=p,S>d&&(S-=m,s+=Fk);let A=b,I=b+Math.abs(S)-1,P=g%2!==0,$=S<0;S===0?c=c.add(r(P,o[A])):u=u.add(r($,o[I]))}return{p:u,f:c}},wNAFCached(i,o,s,a){let d=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,d),d!==1&&o.set(i,a(u))),this.wNAF(d,u,s)}}}function g2(t){return Kk(t.Fp),Oc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qk(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function eve(t){let e=g2(t);Oc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:tve,hexToBytes:rve}=DS,by={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=by;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:tve(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=by,r=typeof t=="string"?rve(t):t;if(!Od(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=by._parseInt(r.subarray(2)),{d:s,l:a}=by._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let c=u.toString(16);return c.length&1?`0${c}`:c},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),d=r(s);return`30${r(s+o+4)}02${d}${i}02${a}${n}`}},yf=BigInt(0),$c=BigInt(1),oXe=BigInt(2),aF=BigInt(3),sXe=BigInt(4);function nve(t){let e=eve(t),{Fp:r}=e,n=e.toBytes||((g,b,S)=>{let A=b.toAffine();return mf(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),i=e.fromBytes||(g=>{let b=g.subarray(1),S=r.fromBytes(b.subarray(0,r.BYTES)),A=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:S,y:A}});function o(g){let{a:b,b:S}=e,A=r.sqr(g),I=r.mul(A,g);return r.add(r.add(I,r.mul(g,b)),S)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(g){return typeof g=="bigint"&&yf<g&&g<e.n}function a(g){if(!s(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(g){let{allowedPrivateKeyLengths:b,nByteLength:S,wrapPrivateKey:A,n:I}=e;if(b&&typeof g!="bigint"){if(Od(g)&&(g=ff(g)),typeof g!="string"||!b.includes(g.length))throw new Error("Invalid key");g=g.padStart(S*2,"0")}let P;try{P=typeof g=="bigint"?g:hf(Rn("private key",g,S))}catch{throw new Error(`private key must be ${S} bytes, hex or bigint, not ${typeof g}`)}return A&&(P=Zr(P,I)),a(P),P}let u=new Map;function c(g){if(!(g instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(b,S,A){if(this.px=b,this.py=S,this.pz=A,b==null||!r.isValid(b))throw new Error("x required");if(S==null||!r.isValid(S))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required")}static fromAffine(b){let{x:S,y:A}=b||{};if(!b||!r.isValid(S)||!r.isValid(A))throw new Error("invalid affine point");if(b instanceof l)throw new Error("projective point not allowed");let I=P=>r.eql(P,r.ZERO);return I(S)&&I(A)?l.ZERO:new l(S,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){let S=r.invertBatch(b.map(A=>A.pz));return b.map((A,I)=>A.toAffine(S[I])).map(l.fromAffine)}static fromHex(b){let S=l.fromAffine(i(Rn("pointHex",b)));return S.assertValidity(),S}static fromPrivateKey(b){return l.BASE.multiply(d(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:b,y:S}=this.toAffine();if(!r.isValid(b)||!r.isValid(S))throw new Error("bad point: x or y not FE");let A=r.sqr(S),I=o(b);if(!r.eql(A,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){c(b);let{px:S,py:A,pz:I}=this,{px:P,py:$,pz:N}=b,L=r.eql(r.mul(S,N),r.mul(P,I)),F=r.eql(r.mul(A,N),r.mul($,I));return L&&F}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:b,b:S}=e,A=r.mul(S,aF),{px:I,py:P,pz:$}=this,N=r.ZERO,L=r.ZERO,F=r.ZERO,U=r.mul(I,I),G=r.mul(P,P),q=r.mul($,$),T=r.mul(I,P);return T=r.add(T,T),F=r.mul(I,$),F=r.add(F,F),N=r.mul(b,F),L=r.mul(A,q),L=r.add(N,L),N=r.sub(G,L),L=r.add(G,L),L=r.mul(N,L),N=r.mul(T,N),F=r.mul(A,F),q=r.mul(b,q),T=r.sub(U,q),T=r.mul(b,T),T=r.add(T,F),F=r.add(U,U),U=r.add(F,U),U=r.add(U,q),U=r.mul(U,T),L=r.add(L,U),q=r.mul(P,$),q=r.add(q,q),U=r.mul(q,T),N=r.sub(N,U),F=r.mul(q,G),F=r.add(F,F),F=r.add(F,F),new l(N,L,F)}add(b){c(b);let{px:S,py:A,pz:I}=this,{px:P,py:$,pz:N}=b,L=r.ZERO,F=r.ZERO,U=r.ZERO,G=e.a,q=r.mul(e.b,aF),T=r.mul(S,P),E=r.mul(A,$),k=r.mul(I,N),f=r.add(S,A),y=r.add(P,$);f=r.mul(f,y),y=r.add(T,E),f=r.sub(f,y),y=r.add(S,I);let w=r.add(P,N);return y=r.mul(y,w),w=r.add(T,k),y=r.sub(y,w),w=r.add(A,I),L=r.add($,N),w=r.mul(w,L),L=r.add(E,k),w=r.sub(w,L),U=r.mul(G,y),L=r.mul(q,k),U=r.add(L,U),L=r.sub(E,U),U=r.add(E,U),F=r.mul(L,U),E=r.add(T,T),E=r.add(E,T),k=r.mul(G,k),y=r.mul(q,y),E=r.add(E,k),k=r.sub(T,k),k=r.mul(G,k),y=r.add(y,k),T=r.mul(E,y),F=r.add(F,T),T=r.mul(w,y),L=r.mul(f,L),L=r.sub(L,T),T=r.mul(f,E),U=r.mul(w,U),U=r.add(U,T),new l(L,F,U)}subtract(b){return this.add(b.negate())}is0(){return this.equals(l.ZERO)}wNAF(b){return p.wNAFCached(this,u,b,S=>{let A=r.invertBatch(S.map(I=>I.pz));return S.map((I,P)=>I.toAffine(A[P])).map(l.fromAffine)})}multiplyUnsafe(b){let S=l.ZERO;if(b===yf)return S;if(a(b),b===$c)return this;let{endo:A}=e;if(!A)return p.unsafeLadder(this,b);let{k1neg:I,k1:P,k2neg:$,k2:N}=A.splitScalar(b),L=S,F=S,U=this;for(;P>yf||N>yf;)P&$c&&(L=L.add(U)),N&$c&&(F=F.add(U)),U=U.double(),P>>=$c,N>>=$c;return I&&(L=L.negate()),$&&(F=F.negate()),F=new l(r.mul(F.px,A.beta),F.py,F.pz),L.add(F)}multiply(b){a(b);let S=b,A,I,{endo:P}=e;if(P){let{k1neg:$,k1:N,k2neg:L,k2:F}=P.splitScalar(S),{p:U,f:G}=this.wNAF(N),{p:q,f:T}=this.wNAF(F);U=p.constTimeNegate($,U),q=p.constTimeNegate(L,q),q=new l(r.mul(q.px,P.beta),q.py,q.pz),A=U.add(q),I=G.add(T)}else{let{p:$,f:N}=this.wNAF(S);A=$,I=N}return l.normalizeZ([A,I])[0]}multiplyAndAddUnsafe(b,S,A){let I=l.BASE,P=(N,L)=>L===yf||L===$c||!N.equals(I)?N.multiplyUnsafe(L):N.multiply(L),$=P(this,S).add(P(b,A));return $.is0()?void 0:$}toAffine(b){let{px:S,py:A,pz:I}=this,P=this.is0();b==null&&(b=P?r.ONE:r.inv(I));let $=r.mul(S,b),N=r.mul(A,b),L=r.mul(I,b);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:$,y:N}}isTorsionFree(){let{h:b,isTorsionFree:S}=e;if(b===$c)return!0;if(S)return S(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:b,clearCofactor:S}=e;return b===$c?this:S?S(l,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),n(l,this,b)}toHex(b=!0){return ff(this.toRawBytes(b))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let m=e.nBitLength,p=BS(l,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:s}}function ive(t){let e=g2(t);return Oc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function cF(t){let e=ive(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(y){return yf<y&&y<r.ORDER}function a(y){return Zr(y,n)}function d(y){return MS(y,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:m}=nve({...e,toBytes(y,w,_){let x=w.toAffine(),v=r.toBytes(x.x),D=mf;return _?D(Uint8Array.from([w.hasEvenY()?2:3]),v):D(Uint8Array.from([4]),v,r.toBytes(x.y))},fromBytes(y){let w=y.length,_=y[0],x=y.subarray(1);if(w===i&&(_===2||_===3)){let v=hf(x);if(!s(v))throw new Error("Point is not on curve");let D=l(v),K=r.sqrt(D),M=(K&$c)===$c;return(_&1)===1!==M&&(K=r.neg(K)),{x:v,y:K}}else if(w===o&&_===4){let v=r.fromBytes(x.subarray(0,r.BYTES)),D=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:v,y:D}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),p=y=>ff(ga(y,e.nByteLength));function g(y){let w=n>>$c;return y>w}function b(y){return g(y)?a(-y):y}let S=(y,w,_)=>hf(y.slice(w,_));class A{constructor(w,_,x){this.r=w,this.s=_,this.recovery=x,this.assertValidity()}static fromCompact(w){let _=e.nByteLength;return w=Rn("compactSignature",w,_*2),new A(S(w,0,_),S(w,_,2*_))}static fromDER(w){let{r:_,s:x}=by.toSig(Rn("DER",w));return new A(_,x)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new A(this.r,this.s,w)}recoverPublicKey(w){let{r:_,s:x,recovery:v}=this,D=F(Rn("msgHash",w));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");let K=v===2||v===3?_+e.n:_;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let M=v&1?"03":"02",j=u.fromHex(M+p(K)),J=d(K),Z=a(-D*J),V=a(x*J),H=u.BASE.multiplyAndAddUnsafe(j,Z,V);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return yy(this.toDERHex())}toDERHex(){return by.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return yy(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let I={isValidPrivateKey(y){try{return c(y),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let y=Lk(e.n);return sF(e.randomBytes(y),e.n)},precompute(y=8,w=u.BASE){return w._setWindowSize(y),w.multiply(BigInt(3)),w}};function P(y,w=!0){return u.fromPrivateKey(y).toRawBytes(w)}function $(y){let w=Od(y),_=typeof y=="string",x=(w||_)&&y.length;return w?x===i||x===o:_?x===2*i||x===2*o:y instanceof u}function N(y,w,_=!0){if($(y))throw new Error("first arg must be private key");if(!$(w))throw new Error("second arg must be public key");return u.fromHex(w).multiply(c(y)).toRawBytes(_)}let L=e.bits2int||function(y){let w=hf(y),_=y.length*8-e.nBitLength;return _>0?w>>BigInt(_):w},F=e.bits2int_modN||function(y){return a(L(y))},U=y2(e.nBitLength);function G(y){if(typeof y!="bigint")throw new Error("bigint expected");if(!(yf<=y&&y<U))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ga(y,e.nByteLength)}function q(y,w,_=T){if(["recovered","canonical"].some(ee=>ee in _))throw new Error("sign() legacy options not supported");let{hash:x,randomBytes:v}=e,{lowS:D,prehash:K,extraEntropy:M}=_;D==null&&(D=!0),y=Rn("msgHash",y),K&&(y=Rn("prehashed msgHash",x(y)));let j=F(y),J=c(w),Z=[G(J),G(j)];if(M!=null){let ee=M===!0?v(r.BYTES):M;Z.push(Rn("extraEntropy",ee))}let V=mf(...Z),H=j;function X(ee){let ue=L(ee);if(!m(ue))return;let ae=d(ue),ce=u.BASE.multiply(ue).toAffine(),pe=a(ce.x);if(pe===yf)return;let Ee=a(ae*a(H+pe*J));if(Ee===yf)return;let Ue=(ce.x===pe?0:2)|Number(ce.y&$c),le=Ee;return D&&g(Ee)&&(le=b(Ee),Ue^=1),new A(pe,le,Ue)}return{seed:V,k2sig:X}}let T={lowS:e.lowS,prehash:!1},E={lowS:e.lowS,prehash:!1};function k(y,w,_=T){let{seed:x,k2sig:v}=q(y,w,_),D=e;return Nk(D.hash.outputLen,D.nByteLength,D.hmac)(x,v)}u.BASE._setWindowSize(8);function f(y,w,_,x=E){let v=y;if(w=Rn("msgHash",w),_=Rn("publicKey",_),"strict"in x)throw new Error("options.strict was renamed to lowS");let{lowS:D,prehash:K}=x,M,j;try{if(typeof v=="string"||Od(v))try{M=A.fromDER(v)}catch(ce){if(!(ce instanceof by.Err))throw ce;M=A.fromCompact(v)}else if(typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint"){let{r:ce,s:pe}=v;M=new A(ce,pe)}else throw new Error("PARSE");j=u.fromHex(_)}catch(ce){if(ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(D&&M.hasHighS())return!1;K&&(w=e.hash(w));let{r:J,s:Z}=M,V=F(w),H=d(Z),X=a(V*H),ee=a(J*H),ue=u.BASE.multiplyAndAddUnsafe(j,X,ee)?.toAffine();return ue?a(ue.x)===J:!1}return{CURVE:e,getPublicKey:P,getSharedSecret:N,sign:k,verify:f,ProjectivePoint:u,Signature:A,utils:I}}function ove(t){return{hash:t,hmac:(e,...r)=>Wh(t,e,my(...r)),randomBytes:uf}}function CS(t,e){let r=n=>cF({...t,...ove(n)});return Object.freeze({...r(e),create:r})}h();h();function sve(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),d=n?4:0,u=n?0:4;t.setUint32(e+d,s,n),t.setUint32(e+u,a,n)}var Hh=class extends wb{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=df(this.buffer)}update(e){bb(this);let{view:r,buffer:n,blockLen:i}=this;e=Gh(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let d=df(e);for(;i<=o-s;s+=i)this.process(d,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bb(this),WL(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;sve(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=df(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=d/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,c[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var ave=(t,e,r)=>t&e^~t&r,cve=(t,e,r)=>t&e^t&r^e&r,dve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vh=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jh=new Uint32Array(64),zk=class extends Hh{constructor(){super(64,32,8,!1),this.A=Vh[0]|0,this.B=Vh[1]|0,this.C=Vh[2]|0,this.D=Vh[3]|0,this.E=Vh[4]|0,this.F=Vh[5]|0,this.G=Vh[6]|0,this.H=Vh[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:d}=this;return[e,r,n,i,o,s,a,d]}set(e,r,n,i,o,s,a,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=d|0}process(e,r){for(let l=0;l<16;l++,r+=4)Jh[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let m=Jh[l-15],p=Jh[l-2],g=Cd(m,7)^Cd(m,18)^m>>>3,b=Cd(p,17)^Cd(p,19)^p>>>10;Jh[l]=b+Jh[l-7]+g+Jh[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:d,G:u,H:c}=this;for(let l=0;l<64;l++){let m=Cd(a,6)^Cd(a,11)^Cd(a,25),p=c+m+ave(a,d,u)+dve[l]+Jh[l]|0,b=(Cd(n,2)^Cd(n,13)^Cd(n,22))+cve(n,i,o)|0;c=u,u=d,d=a,a=s+p|0,s=o,o=i,i=n,n=p+b|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,d=d+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,i,o,s,a,d,u,c)}roundClean(){Jh.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ms=_b(()=>new zk);var dF=xb(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),uve=dF.create(BigInt("-3")),lve=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),gf=CS({a:uve,b:lve,Fp:dF,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ms),zs=gf;h();h();h();h();h();function Eb(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function OS(t=0){return globalThis.Buffer?.allocUnsafe!=null?Eb(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}h();h();h();h();var Jk={};qr(Jk,{base10:()=>gve});h();h();h();function fve(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,d=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var b=0,S=0,A=0,I=g.length;A!==I&&g[A]===0;)A++,b++;for(var P=(I-A)*c+1>>>0,$=new Uint8Array(P);A!==I;){for(var N=g[A],L=0,F=P-1;(N!==0||L<S)&&F!==-1;F--,L++)N+=256*$[F]>>>0,$[F]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");S=L,A++}for(var U=P-S;U!==P&&$[U]===0;)U++;for(var G=d.repeat(b);U<P;++U)G+=t.charAt($[U]);return G}function m(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var b=0;if(g[b]!==" "){for(var S=0,A=0;g[b]===d;)S++,b++;for(var I=(g.length-b)*u+1>>>0,P=new Uint8Array(I);g[b];){var $=r[g.charCodeAt(b)];if($===255)return;for(var N=0,L=I-1;($!==0||N<A)&&L!==-1;L--,N++)$+=a*P[L]>>>0,P[L]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");A=N,b++}if(g[b]!==" "){for(var F=I-A;F!==I&&P[F]===0;)F++;for(var U=new Uint8Array(S+(I-F)),G=S;F!==I;)U[G++]=P[F++];return U}}}function p(g){var b=m(g);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:m,decode:p}}var hve=fve,pve=hve,uF=pve;h();var LXe=new Uint8Array(0);var lF=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},bf=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var fF=t=>new TextEncoder().encode(t),hF=t=>new TextDecoder().decode(t);h();var Gk=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wk=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mF(this,e)}},Hk=class{constructor(e){this.decoders=e}or(e){return mF(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},mF=(t,e)=>new Hk({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Vk=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Gk(e,r,n),this.decoder=new Wk(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Sb=({name:t,prefix:e,encode:r,decode:n})=>new Vk(t,e,r,n),Yh=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=uF(r,e);return Sb({prefix:t,name:e,encode:n,decode:o=>bf(i(o))})},mve=(t,e,r,n)=>{let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,d=0,u=0;for(let c=0;c<o;++c){let l=i[t[c]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|l,a+=r,a>=8&&(a-=8,s[u++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return s},yve=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},ni=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Sb({prefix:e,name:t,encode(i){return yve(i,n,r)},decode(i){return mve(i,n,r,t)}});var gve=Yh({prefix:"9",name:"base10",alphabet:"0123456789"});var Yk={};qr(Yk,{base16:()=>bve,base16upper:()=>vve});h();var bve=ni({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vve=ni({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zk={};qr(Zk,{base2:()=>wve});h();var wve=ni({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Xk={};qr(Xk,{base256emoji:()=>Ave});h();var yF=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_ve=yF.reduce((t,e,r)=>(t[r]=e,t),[]),xve=yF.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Eve(t){return t.reduce((e,r)=>(e+=_ve[r],e),"")}function Sve(t){let e=[];for(let r of t){let n=xve[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Ave=Sb({prefix:"\u{1F680}",name:"base256emoji",encode:Eve,decode:Sve});var Qk={};qr(Qk,{base32:()=>Ab,base32hex:()=>kve,base32hexpad:()=>Dve,base32hexpadupper:()=>Mve,base32hexupper:()=>Rve,base32pad:()=>Tve,base32padupper:()=>Ive,base32upper:()=>Pve,base32z:()=>Bve});h();var Ab=ni({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pve=ni({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Tve=ni({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ive=ni({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kve=ni({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rve=ni({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Dve=ni({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mve=ni({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bve=ni({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eR={};qr(eR,{base36:()=>Cve,base36upper:()=>Ove});h();var Cve=Yh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ove=Yh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tR={};qr(tR,{base58btc:()=>Fu,base58flickr:()=>$ve});h();var Fu=Yh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$ve=Yh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rR={};qr(rR,{base64:()=>Nve,base64pad:()=>jve,base64url:()=>Pb,base64urlpad:()=>Uve});h();var Nve=ni({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jve=ni({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pb=ni({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Uve=ni({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var nR={};qr(nR,{base8:()=>Kve});h();var Kve=ni({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iR={};qr(iR,{identity:()=>qve});h();var qve=Sb({prefix:"\0",name:"identity",encode:t=>hF(t),decode:t=>fF(t)});h();var gQe=new TextEncoder,bQe=new TextDecoder;h();var sR={};qr(sR,{identity:()=>uwe});h();h();h();h();var zve=vF,gF=128,Gve=127,Wve=~Gve,Hve=Math.pow(2,31);function vF(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Hve;)e[r++]=t&255|gF,t/=128;for(;t&Wve;)e[r++]=t&255|gF,t>>>=7;return e[r]=t|0,vF.bytes=r-n+1,e}var Vve=oR,Jve=128,bF=127;function oR(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw oR.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&bF)<<i:(s&bF)*Math.pow(2,i),i+=7}while(s>=Jve);return oR.bytes=o-n,r}var Yve=Math.pow(2,7),Zve=Math.pow(2,14),Xve=Math.pow(2,21),Qve=Math.pow(2,28),ewe=Math.pow(2,35),twe=Math.pow(2,42),rwe=Math.pow(2,49),nwe=Math.pow(2,56),iwe=Math.pow(2,63),owe=function(t){return t<Yve?1:t<Zve?2:t<Xve?3:t<Qve?4:t<ewe?5:t<twe?6:t<rwe?7:t<nwe?8:t<iwe?9:10},swe={encode:zve,decode:Vve,encodingLength:owe},awe=swe,b2=awe;var v2=(t,e=0)=>[b2.decode(t,e),b2.decode.bytes],Tb=(t,e,r=0)=>(b2.encode(t,e,r),e),Ib=t=>b2.encodingLength(t);var vy=(t,e)=>{let r=e.byteLength,n=Ib(t),i=n+Ib(r),o=new Uint8Array(i+r);return Tb(t,o,0),Tb(r,o,n),o.set(e,i),new kb(t,r,e,o)},NS=t=>{let e=bf(t),[r,n]=v2(e),[i,o]=v2(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new kb(r,i,s,e)},wF=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&lF(t.bytes,r.bytes)}},kb=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var _F=0,cwe="identity",xF=bf,dwe=t=>vy(_F,xF(t)),uwe={code:_F,name:cwe,encode:xF,digest:dwe};var dR={};qr(dR,{sha256:()=>_2,sha512:()=>lwe});h();h();var cR=({name:t,code:e,encode:r})=>new aR(t,e,r),aR=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?vy(this.code,r):r.then(n=>vy(this.code,n))}else throw Error("Unknown type, must be binary type")}};var SF=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_2=cR({name:"sha2-256",code:18,encode:SF("SHA-256")}),lwe=cR({name:"sha2-512",code:19,encode:SF("SHA-512")});h();h();h();var AF=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return hwe(r,uR(t),e||Fu.encoder);default:return pwe(r,uR(t),e||Ab.encoder)}};var PF=new WeakMap,uR=t=>{let e=PF.get(t);if(e==null){let r=new Map;return PF.set(t,r),r}return e},wy=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==x2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==mwe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=vy(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&wF(e.multihash,n.multihash)}toString(e){return AF(this,e)}toJSON(){return{"/":AF(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||TF(n,i,o.bytes))}else if(r[ywe]===!0){let{version:n,multihash:i,code:o}=r,s=NS(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==x2)throw new Error(`Version 0 CID must use dag-pb (code: ${x2}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=TF(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,x2,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=bf(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new kb(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,m]=v2(e.subarray(r));return r+=m,l},i=n(),o=x2;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),d=n(),u=r+d,c=u-s;return{version:i,codec:o,multihashCode:a,digestSize:d,multihashSize:c,size:u}}static parse(e,r){let[n,i]=fwe(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return uR(o).set(n,e),o}},fwe=(t,e)=>{switch(t[0]){case"Q":{let r=e||Fu;return[Fu.prefix,r.decode(`${Fu.prefix}${t}`)]}case Fu.prefix:{let r=e||Fu;return[Fu.prefix,r.decode(t)]}case Ab.prefix:{let r=e||Ab;return[Ab.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},hwe=(t,e,r)=>{let{prefix:n}=r;if(n!==Fu.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},pwe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},x2=112,mwe=18,TF=(t,e,r)=>{let n=Ib(t),i=n+Ib(e),o=new Uint8Array(i+r.byteLength);return Tb(t,o,0),Tb(e,o,n),o.set(r,i),o},ywe=Symbol.for("@ipld/js-cid/CID");h();var lR={...iR,...Zk,...nR,...Jk,...Yk,...Qk,...eR,...tR,...rR,...Xk},HQe={...dR,...sR};function kF(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var IF=kF("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),fR=kF("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=OS(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),gwe={utf8:IF,"utf-8":IF,hex:lR.base16,latin1:fR,ascii:fR,binary:fR,...lR},jS=gwe;function E2(t,e="utf8"){let r=jS[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Eb(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}h();function hR(t,e="utf8"){let r=jS[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}h();var US=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},bwe={toString:hR,fromString:E2},Zh=class t{static validateKey(e){if(e.kty!=="EC"||e.crv!=="P-256")throw new oe(ne.Secp256r1KeyNotValid,"Invalid SECP256R1 JWK: `kty` MUST be `EC`. `crv` MUST be `P-256`")}static publicKeyToJwk(e){return US(this,void 0,void 0,function*(){let r;e.byteLength===33?r=gf.ProjectivePoint.fromHex(e).toRawBytes(!1):r=e;let n=Ye.bytesToBase64Url(r.subarray(1,33)),i=Ye.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256",kty:"EC",crv:"P-256",x:n,y:i}})}static privateJwkToBytes(e){return Ye.base64UrlToBytes(e.d)}static sign(e,r){return US(this,void 0,void 0,function*(){t.validateKey(r);let n=yield ps.encode(e),i=t.privateJwkToBytes(r);return Promise.resolve(gf.sign(n,i).toCompactRawBytes())})}static verify(e,r,n){return US(this,void 0,void 0,function*(){t.validateKey(n);let i;r.length===64?i=gf.Signature.fromCompact(r):i=gf.Signature.fromDER(r);let o=yield ps.encode(e),s=gf.ProjectivePoint.fromAffine({x:t.bytesToBigInt(Ye.base64UrlToBytes(n.x)),y:t.bytesToBigInt(Ye.base64UrlToBytes(n.y))}).toRawBytes(!1);return gf.verify(i,o,s)})}static generateKeyPair(){return US(this,void 0,void 0,function*(){let e=gf.utils.randomPrivateKey(),r=zs.getPublicKey(e,!1),n=Ye.bytesToBase64Url(e),i=yield t.publicKeyToJwk(r),o=Object.assign(Object.assign({},i),{d:n});return{publicJwk:i,privateJwk:o}})}static bytesToBigInt(e){return BigInt("0x"+bwe.toString(e,"base16"))}};var Rb={Ed25519:_k,secp256k1:{sign:Bi.sign,verify:Bi.verify,generateKeyPair:Bi.generateKeyPair,publicKeyToJwk:Bi.publicKeyToJwk},"P-256":{sign:Zh.sign,verify:Zh.verify,generateKeyPair:Zh.generateKeyPair,publicKeyToJwk:Zh.publicKeyToJwk}};var vwe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Db=class{constructor(e){var r,n;if(e.keyId===void 0&&e.privateJwk.kid===void 0)throw new oe(ne.PrivateKeySignerUnableToDeduceKeyId,"Unable to deduce the key ID");if(e.algorithm===void 0&&e.privateJwk.alg===void 0)throw new oe(ne.PrivateKeySignerUnableToDeduceAlgorithm,"Unable to deduce the signature algorithm");if(this.keyId=(r=e.keyId)!==null&&r!==void 0?r:e.privateJwk.kid,this.algorithm=(n=e.algorithm)!==null&&n!==void 0?n:e.privateJwk.alg,this.privateJwk=e.privateJwk,this.signatureAlgorithm=Rb[e.privateJwk.crv],!this.signatureAlgorithm)throw new oe(ne.PrivateKeySignerUnsupportedCurve,`Unsupported crv ${e.privateJwk.crv}, crv must be one of ${Object.keys(Rb)}`)}sign(e){return vwe(this,void 0,void 0,function*(){return yield this.signatureAlgorithm.sign(e,this.privateJwk)})}};var wwe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Qr=class t{static getKid(e){let{kid:r}=Ye.base64UrlToObject(e.protected);return r}static getSignerDid(e){let r=t.getKid(e);return t.extractDid(r)}static verifySignature(e,r,n){return wwe(this,void 0,void 0,function*(){let i=Rb[n.crv];if(!i)throw new oe(ne.JwsVerifySignatureUnsupportedCrv,`unsupported crv. crv must be one of ${Object.keys(Rb)}`);let o=Ye.stringToBytes(`${r.protected}.${e}`),s=Ye.base64UrlToBytes(r.signature);return yield i.verify(o,s,n)})}static decodePlainObjectPayload(e){let r;try{r=Ye.base64UrlToObject(e.payload)}catch{throw new oe(ne.JwsDecodePlainObjectPayloadInvalid,"payload is not a JSON object")}if(!(0,RF.default)(r))throw new oe(ne.JwsDecodePlainObjectPayloadInvalid,"signed payload must be a plain object");return r}static extractDid(e){let[r]=e.split("#");return r}static createSigners(e){return e.map(n=>t.createSigner(n))}static createSigner(e){let r=e.keyPair.privateJwk,n=e.keyId;return new Db({privateJwk:r,keyId:n})}};h();h();var S2=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,MF=new Set,pR=typeof B.default=="object"&&B.default?B.default:{},BF=(t,e,r,n)=>{typeof pR.emitWarning=="function"?pR.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},KS=globalThis.AbortController,DF=globalThis.AbortSignal;if(typeof KS>"u"){DF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},KS=class{constructor(){e()}signal=new DF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=pR.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,BF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var _we=t=>!MF.has(t),Jet=Symbol("type"),Xh=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),CF=t=>Xh(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Mb:null:null,Mb=class extends Array{constructor(e){super(e),this.fill(0)}},mR=class t{heap;length;static#c=!1;static create(e){let r=CF(e);if(!r)return[];t.#c=!0;let n=new t(e,r);return t.#c=!1,n}constructor(e,r){if(!t.#c)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},qS=class t{#c;#l;#b;#p;#k;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#m;#i;#r;#e;#d;#f;#a;#o;#y;#s;#x;#E;#g;#v;#A;#u;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#g,sizes:e.#x,keyMap:e.#i,keyList:e.#r,valList:e.#e,next:e.#d,prev:e.#f,get head(){return e.#a},get tail(){return e.#o},free:e.#y,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,n,i,o)=>e.#M(r,n,i,o),moveToTail:r=>e.#I(r),indexes:r=>e.#w(r),rindexes:r=>e.#_(r),isStale:r=>e.#h(r)}}get max(){return this.#c}get maxSize(){return this.#l}get calculatedSize(){return this.#m}get size(){return this.#n}get fetchMethod(){return this.#k}get dispose(){return this.#b}get disposeAfter(){return this.#p}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:d,dispose:u,disposeAfter:c,noDisposeOnSet:l,noUpdateTTL:m,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:b,fetchMethod:S,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:I,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:$,ignoreFetchAbort:N}=e;if(r!==0&&!Xh(r))throw new TypeError("max option must be a nonnegative integer");let L=r?CF(r):Array;if(!L)throw new Error("invalid max value: "+r);if(this.#c=r,this.#l=p,this.maxEntrySize=g||this.#l,this.sizeCalculation=b,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#k=S,this.#A=!!S,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#d=new L(r),this.#f=new L(r),this.#a=0,this.#o=0,this.#y=mR.create(r),this.#n=0,this.#m=0,typeof u=="function"&&(this.#b=u),typeof c=="function"?(this.#p=c,this.#s=[]):(this.#p=void 0,this.#s=void 0),this.#v=!!this.#b,this.#u=!!this.#p,this.noDisposeOnSet=!!l,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!P,this.allowStaleOnFetchAbort=!!$,this.ignoreFetchAbort=!!N,this.maxEntrySize!==0){if(this.#l!==0&&!Xh(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!Xh(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!d,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Xh(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Xh(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#B()}if(this.#c===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#c&&!this.#l){let F="LRU_CACHE_UNBOUNDED";_we(F)&&(MF.add(F),BF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",F,t))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#B(){let e=new Mb(this.#c),r=new Mb(this.#c);this.#g=e,this.#E=r,this.#C=(o,s,a=S2.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let d=setTimeout(()=>{this.#h(o)&&this.delete(this.#r[o])},s+1);d.unref&&d.unref()}},this.#P=o=>{r[o]=e[o]!==0?S2.now():0},this.#S=(o,s)=>{if(e[s]){let a=e[s],d=r[s];o.ttl=a,o.start=d,o.now=n||i();let u=o.now-d;o.remainingTTL=a-u}};let n=0,i=()=>{let o=S2.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#i.get(o);if(s===void 0)return 0;let a=e[s],d=r[s];if(a===0||d===0)return 1/0;let u=(n||i())-d;return a-u},this.#h=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#P=()=>{};#S=()=>{};#C=()=>{};#h=()=>!1;#j(){let e=new Mb(this.#c);this.#m=0,this.#x=e,this.#T=r=>{this.#m-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#t(n))return 0;if(!Xh(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Xh(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#R=(r,n,i)=>{if(e[r]=n,this.#l){let o=this.#l-e[r];for(;this.#m>o;)this.#D(!0)}this.#m+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#m)}}#T=e=>{};#R=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#$(r)||((e||!this.#h(r))&&(yield r),r===this.#a));)r=this.#f[r]}*#_({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#$(r)||((e||!this.#h(r))&&(yield r),r===this.#o));)r=this.#d[r]}#$(e){return e!==void 0&&this.#i.get(this.#r[e])===e}*entries(){for(let e of this.#w())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#_())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#w()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#_()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#w())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#_())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#w()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(e,r=this){for(let n of this.#w()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}rforEach(e,r=this){for(let n of this.#_()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let r of this.#_({allowStale:!0}))this.#h(r)&&(this.delete(this.#r[r]),e=!0);return e}dump(){let e=[];for(let r of this.#w({allowStale:!0})){let n=this.#r[r],i=this.#e[r],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#g&&this.#E){s.ttl=this.#g[r];let a=S2.now()-this.#E[r];s.start=Math.floor(Date.now()-a)}this.#x&&(s.size=this.#x[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=S2.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:d}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,c=this.#O(e,r,n.size||0,a);if(this.maxEntrySize&&c>this.maxEntrySize)return d&&(d.set="miss",d.maxEntrySizeExceeded=!0),this.delete(e),this;let l=this.#n===0?void 0:this.#i.get(e);if(l===void 0)l=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#c?this.#D(!1):this.#n,this.#r[l]=e,this.#e[l]=r,this.#i.set(e,l),this.#d[this.#o]=l,this.#f[l]=this.#o,this.#o=l,this.#n++,this.#R(l,c,d),d&&(d.set="add"),u=!1;else{this.#I(l);let m=this.#e[l];if(r!==m){if(this.#A&&this.#t(m)?m.__abortController.abort(new Error("replaced")):s||(this.#v&&this.#b?.(m,e,"set"),this.#u&&this.#s?.push([m,e,"set"])),this.#T(l),this.#R(l,c,d),this.#e[l]=r,d){d.set="replace";let p=m&&this.#t(m)?m.__staleWhileFetching:m;p!==void 0&&(d.oldValue=p)}}else d&&(d.set="update")}if(i!==0&&!this.#g&&this.#B(),this.#g&&(u||this.#C(l,i,o),d&&this.#S(d,l)),!s&&this.#u&&this.#s){let m=this.#s,p;for(;p=m?.shift();)this.#p?.(...p)}return this}pop(){try{for(;this.#n;){let e=this.#e[this.#a];if(this.#D(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#p?.(...r)}}}#D(e){let r=this.#a,n=this.#r[r],i=this.#e[r];return this.#A&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#u)&&(this.#v&&this.#b?.(i,n,"evict"),this.#u&&this.#s?.push([i,n,"evict"])),this.#T(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#y.push(r)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#d[r],this.#i.delete(n),this.#n--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#i.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#h(o))i&&(i.has="stale",this.#S(i,o));else return n&&this.#P(o),i&&(i.has="hit",this.#S(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(e);if(i!==void 0&&(n||!this.#h(i))){let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}}#M(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#t(o))return o;let s=new KS,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let d={signal:s.signal,options:n,context:i},u=(b,S=!1)=>{let{aborted:A}=s.signal,I=n.ignoreFetchAbort&&b!==void 0;if(n.status&&(A&&!S?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,I&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!I&&!S)return l(s.signal.reason);let P=p;return this.#e[r]===p&&(b===void 0?P.__staleWhileFetching?this.#e[r]=P.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,b,d.options))),b},c=b=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=b),l(b)),l=b=>{let{aborted:S}=s.signal,A=S&&n.allowStaleOnFetchAbort,I=A||n.allowStaleOnFetchRejection,P=I||n.noDeleteOnFetchRejection,$=p;if(this.#e[r]===p&&(!P||$.__staleWhileFetching===void 0?this.delete(e):A||(this.#e[r]=$.__staleWhileFetching)),I)return n.status&&$.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),$.__staleWhileFetching;if($.__returned===$)throw b},m=(b,S)=>{let A=this.#k?.(e,o,d);A&&A instanceof Promise&&A.then(I=>b(I),S),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(b(),n.allowStaleOnFetchAbort&&(b=I=>u(I,!0)))})};n.status&&(n.status.fetchDispatched=!0);let p=new Promise(m).then(u,c),g=Object.assign(p,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,g,{...d.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=g,g}#t(e){if(!this.#A)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof KS}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:d=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:b,forceRefresh:S=!1,status:A,signal:I}=r;if(!this.#A)return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:A});let P={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:d,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:A,signal:I},$=this.#i.get(e);if($===void 0){A&&(A.fetch="miss");let N=this.#M(e,$,P,b);return N.__returned=N}else{let N=this.#e[$];if(this.#t(N)){let q=n&&N.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",q&&(A.returnedStale=!0)),q?N.__staleWhileFetching:N.__returned=N}let L=this.#h($);if(!S&&!L)return A&&(A.fetch="hit"),this.#I($),i&&this.#P($),A&&this.#S(A,$),N;let F=this.#M(e,$,P,b),G=F.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=L?"stale":"refresh",G&&L&&(A.returnedStale=!0)),G?F.__staleWhileFetching:F.__returned=F}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#i.get(e);if(a!==void 0){let d=this.#e[a],u=this.#t(d);return s&&this.#S(s,a),this.#h(a)?(s&&(s.get="stale"),u?(s&&n&&d.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?d.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?d:void 0)):(s&&(s.get="hit"),u?d.__staleWhileFetching:(this.#I(a),i&&this.#P(a),d))}else s&&(s.get="miss")}#N(e,r){this.#f[r]=e,this.#d[e]=r}#I(e){e!==this.#o&&(e===this.#a?this.#a=this.#d[e]:this.#N(this.#f[e],this.#d[e]),this.#N(this.#o,e),this.#o=e)}delete(e){let r=!1;if(this.#n!==0){let n=this.#i.get(e);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else{this.#T(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#v||this.#u)&&(this.#v&&this.#b?.(i,e,"delete"),this.#u&&this.#s?.push([i,e,"delete"])),this.#i.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o?this.#o=this.#f[n]:n===this.#a?this.#a=this.#d[n]:(this.#d[this.#f[n]]=this.#d[n],this.#f[this.#d[n]]=this.#f[n]),this.#n--,this.#y.push(n)}}if(this.#u&&this.#s?.length){let n=this.#s,i;for(;i=n?.shift();)this.#p?.(...i)}return r}clear(){for(let e of this.#_({allowStale:!0})){let r=this.#e[e];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#v&&this.#b?.(r,n,"delete"),this.#u&&this.#s?.push([r,n,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#g&&this.#E&&(this.#g.fill(0),this.#E.fill(0)),this.#x&&this.#x.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#m=0,this.#n=0,this.#u&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#p?.(...r)}}};var OF=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},LS=class{constructor(e){this.timeToLiveInSeconds=e,this.cache=new qS({max:1e5,ttl:e*1e3})}set(e,r){return OF(this,void 0,void 0,function*(){try{this.cache.set(e,r)}catch{}})}get(e){return OF(this,void 0,void 0,function*(){return this.cache.get(e)})}};h();var vR={};qr(vR,{Authorization:()=>xwe,AuthorizationDelegatedGrant:()=>Ewe,AuthorizationOwner:()=>Pwe,Definitions:()=>Nwe,EventsFilter:()=>Bwe,EventsGet:()=>Cwe,EventsQuery:()=>Owe,EventsSubscribe:()=>$we,GeneralJwk:()=>jwe,GeneralJws:()=>Uwe,GenericSignaturePayload:()=>o1e,JwkVerificationMethod:()=>Kwe,MessagesGet:()=>Lwe,NumberRangeFilter:()=>Fwe,PaginationCursor:()=>zwe,PermissionGrantData:()=>Gwe,PermissionRequestData:()=>Wwe,PermissionRevocationData:()=>Hwe,PermissionsDefinitions:()=>Vwe,PermissionsScopes:()=>Jwe,ProtocolDefinition:()=>Ywe,ProtocolRuleSet:()=>Qwe,ProtocolsConfigure:()=>e1e,ProtocolsQuery:()=>t1e,PublicJwk:()=>i1e,RecordsDelete:()=>Twe,RecordsFilter:()=>n1e,RecordsQuery:()=>Iwe,RecordsRead:()=>r1e,RecordsSubscribe:()=>kwe,RecordsWrite:()=>Rwe,RecordsWriteDataEncoded:()=>Dwe,RecordsWriteSignaturePayload:()=>s1e,RecordsWriteUnidentified:()=>Mwe,StringRangeFilter:()=>a1e});h();var xwe=jn;var Ey=new RegExp("^[A-Za-z0-9_-]+$","u");function tn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=tn.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m=a;for(let p in t)if(!(p==="payload"||p==="signatures")){return tn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a){if(t.payload!==void 0){let p=t.payload,g=a;if(a===a)if(typeof p=="string"){if(!Ey.test(p))return tn.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return tn.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=g===a}else var u=!0;if(u)if(t.signatures!==void 0){let p=t.signatures,g=a;if(a===g)if(Array.isArray(p)){if(p.length<1)return tn.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var c=!0;let S=p.length;for(let A=0;A<S;A++){let I=p[A],P=a;if(a===P)if(I&&typeof I=="object"&&!Array.isArray(I)){if(I.protected!==void 0){let N=I.protected,L=a;if(a===a)if(typeof N=="string"){if(!Ey.test(N))return tn.errors=[{instancePath:e+"/signatures/"+A+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return tn.errors=[{instancePath:e+"/signatures/"+A+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=L===a}else var l=!0;if(l)if(I.signature!==void 0){let N=I.signature,L=a;if(a===a)if(typeof N=="string"){if(!Ey.test(N))return tn.errors=[{instancePath:e+"/signatures/"+A+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return tn.errors=[{instancePath:e+"/signatures/"+A+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=L===a}else var l=!0}else return tn.errors=[{instancePath:e+"/signatures/"+A,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=P===a;if(!c)break}}}else return tn.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=g===a}else var u=!0}}else return tn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return tn.errors=s,a===0}tn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function jn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=jn.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u=a;for(let c in t)if(c!=="signature"){return jn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}u===a&&t.signature!==void 0&&(tn(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?tn.errors:s.concat(tn.errors),a=s.length))}else return jn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return jn.errors=s,a===0}jn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Ewe=co;var Qh={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-write-unidentified.json",type:"object",required:["descriptor"],properties:{recordId:{type:"string"},contextId:{type:"string",pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},tags:{type:"object",minProperties:1,maxProperties:10,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"array",minItems:1,maxItems:10,items:{type:"string"}},{type:"array",minItems:1,maxItems:10,items:{type:"number"}}]}},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}},$comment:"rule defining `protocol` and `contextId` relationship",anyOf:[{properties:{descriptor:{type:"object",required:["protocol","protocolPath"]}},required:["contextId"]},{allOf:[{not:{required:["contextId"]}},{properties:{descriptor:{type:"object",not:{required:["protocol"]}}}},{properties:{descriptor:{type:"object",not:{required:["protocolPath"]}}}}]}]};var Swe=new RegExp("^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$","u"),Sy=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u"),Awe=new RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u"),Nn=new RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u");var Bb={validate:Nc};function Gu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Gu.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c=a;for(let l in t)if(!(l==="signature"||l==="authorDelegatedGrant"||l==="ownerSignature"||l==="ownerDelegatedGrant")){return Gu.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===a){let l;if(t.ownerSignature!==void 0&&t.signature===void 0&&(l="signature"))return Gu.errors=[{instancePath:e,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:l,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(t.signature!==void 0){let m=a;tn(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?tn.errors:s.concat(tn.errors),a=s.length);var u=m===a}else var u=!0;if(u){if(t.authorDelegatedGrant!==void 0){let m=a;Bb.validate(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?Bb.validate.errors:s.concat(Bb.validate.errors),a=s.length);var u=m===a}else var u=!0;if(u){if(t.ownerSignature!==void 0){let m=a;tn(t.ownerSignature,{instancePath:e+"/ownerSignature",parentData:t,parentDataProperty:"ownerSignature",rootData:i,dynamicAnchors:o})||(s=s===null?tn.errors:s.concat(tn.errors),a=s.length);var u=m===a}else var u=!0;if(u)if(t.ownerDelegatedGrant!==void 0){let m=a;Bb.validate(t.ownerDelegatedGrant,{instancePath:e+"/ownerDelegatedGrant",parentData:t,parentDataProperty:"ownerDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?Bb.validate.errors:s.concat(Bb.validate.errors),a=s.length);var u=m===a}else var u=!0}}}}else return Gu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Gu.errors=s,a===0}Gu.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var JF={$id:"https://identity.foundation/dwn/json-schemas/general-jwk.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",required:["kty"],properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}},oneOf:[{properties:{kty:{const:"EC"},crv:{type:"string"},x:{type:"string"},y:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"OKP"},crv:{type:"string"},x:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"RSA"},n:{type:"string"},e:{type:"string"},d:{type:"string"},p:{type:"string"},q:{type:"string"},dp:{type:"string"},dq:{type:"string"},qi:{type:"string"},oth:{type:"object"}},required:["n","e"]},{properties:{kty:{const:"oct"},k:{type:"string"}},required:["k"]}]};function en(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=en.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);let u=a,c=a,l=!1,m=null,p=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let f;if(t.crv===void 0&&(f="crv")||t.x===void 0&&(f="x")){let y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};s===null?s=[y]:s.push(y),a++}else{if(t.kty!==void 0){let y=a;if(t.kty!=="EC"){let w={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var g=y===a}else var g=!0;if(g){if(t.crv!==void 0){let y=a;if(typeof t.crv!="string"){let _={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var g=y===a}else var g=!0;if(g){if(t.x!==void 0){let y=a;if(typeof t.x!="string"){let _={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var g=y===a}else var g=!0;if(g){if(t.y!==void 0){let y=a;if(typeof t.y!="string"){let _={instancePath:e+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var g=y===a}else var g=!0;if(g)if(t.d!==void 0){let y=a;if(typeof t.d!="string"){let _={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var g=y===a}else var g=!0}}}}}var I=p===a;if(I){l=!0,m=0;var b={};b.kty=!0,b.crv=!0,b.x=!0,b.y=!0,b.d=!0}let S=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let f;if(t.crv===void 0&&(f="crv")||t.x===void 0&&(f="x")){let y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};s===null?s=[y]:s.push(y),a++}else{if(t.kty!==void 0){let y=a;if(t.kty!=="OKP"){let w={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var A=y===a}else var A=!0;if(A){if(t.crv!==void 0){let y=a;if(typeof t.crv!="string"){let _={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var A=y===a}else var A=!0;if(A){if(t.x!==void 0){let y=a;if(typeof t.x!="string"){let _={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var A=y===a}else var A=!0;if(A)if(t.d!==void 0){let y=a;if(typeof t.d!="string"){let _={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var A=y===a}else var A=!0}}}}var I=S===a;if(I&&l)l=!1,m=[m,1];else{I&&(l=!0,m=1,b!==!0&&(b=b||{},b.kty=!0,b.crv=!0,b.x=!0,b.d=!0));let f=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let w;if(t.n===void 0&&(w="n")||t.e===void 0&&(w="e")){let _={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};s===null?s=[_]:s.push(_),a++}else{if(t.kty!==void 0){let _=a;if(t.kty!=="RSA"){let x={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};s===null?s=[x]:s.push(x),a++}var P=_===a}else var P=!0;if(P){if(t.n!==void 0){let _=a;if(typeof t.n!="string"){let v={instancePath:e+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.e!==void 0){let _=a;if(typeof t.e!="string"){let v={instancePath:e+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.d!==void 0){let _=a;if(typeof t.d!="string"){let v={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.p!==void 0){let _=a;if(typeof t.p!="string"){let v={instancePath:e+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.q!==void 0){let _=a;if(typeof t.q!="string"){let v={instancePath:e+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.dp!==void 0){let _=a;if(typeof t.dp!="string"){let v={instancePath:e+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.dq!==void 0){let _=a;if(typeof t.dq!="string"){let v={instancePath:e+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P){if(t.qi!==void 0){let _=a;if(typeof t.qi!="string"){let v={instancePath:e+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[v]:s.push(v),a++}var P=_===a}else var P=!0;if(P)if(t.oth!==void 0){let _=t.oth,x=a;if(!(_&&typeof _=="object"&&!Array.isArray(_))){let D={instancePath:e+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[D]:s.push(D),a++}var P=x===a}else var P=!0}}}}}}}}}}var I=f===a;if(I&&l)l=!1,m=[m,2];else{I&&(l=!0,m=2,b!==!0&&(b=b||{},b.kty=!0,b.n=!0,b.e=!0,b.d=!0,b.p=!0,b.q=!0,b.dp=!0,b.dq=!0,b.qi=!0,b.oth=!0));let w=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let x;if(t.k===void 0&&(x="k")){let v={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"};s===null?s=[v]:s.push(v),a++}else{if(t.kty!==void 0){let v=a;if(t.kty!=="oct"){let D={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};s===null?s=[D]:s.push(D),a++}var $=v===a}else var $=!0;if($)if(t.k!==void 0){let v=a;if(typeof t.k!="string"){let K={instancePath:e+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[K]:s.push(K),a++}var $=v===a}else var $=!0}}var I=w===a;I&&l?(l=!1,m=[m,3]):I&&(l=!0,m=3,b!==!0&&(b=b||{},b.kty=!0,b.k=!0))}}if(l)a=c,s!==null&&(c?s.length=c:s=null);else{let f={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:m},message:"must match exactly one schema in oneOf"};return s===null?s=[f]:s.push(f),a++,en.errors=s,!1}if(a===u)if(t&&typeof t=="object"&&!Array.isArray(t)){let f;if(t.kty===void 0&&(f="kty"))return en.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"}],!1;if(b!==!0&&(b=b||{},b.alg=!0,b.kid=!0,b.kty=!0,b.crv=!0,b.use=!0,b.key_ops=!0,b.x5u=!0,b.x5c=!0,b.x5t=!0,b["x5t#S256"]=!0),t.alg!==void 0){let y=a;if(typeof t.alg!="string")return en.errors=[{instancePath:e+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.kid!==void 0){let y=a;if(typeof t.kid!="string")return en.errors=[{instancePath:e+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.kty!==void 0){let y=t.kty,w=a;if(!(y==="EC"||y==="RSA"||y==="oct"||y==="OKP"))return en.errors=[{instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:JF.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var N=w===a}else var N=!0;if(N){if(t.crv!==void 0){let y=a;if(typeof t.crv!="string")return en.errors=[{instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.use!==void 0){let y=a;if(typeof t.use!="string")return en.errors=[{instancePath:e+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.key_ops!==void 0){let y=a;if(typeof t.key_ops!="string")return en.errors=[{instancePath:e+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.x5u!==void 0){let y=a;if(typeof t.x5u!="string")return en.errors=[{instancePath:e+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.x5c!==void 0){let y=a;if(typeof t.x5c!="string")return en.errors=[{instancePath:e+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N){if(t.x5t!==void 0){let y=a;if(typeof t.x5t!="string")return en.errors=[{instancePath:e+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0;if(N)if(t["x5t#S256"]!==void 0){let y=a;if(typeof t["x5t#S256"]!="string")return en.errors=[{instancePath:e+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===a}else var N=!0}}}}}}}}}else return en.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=u===a;if(L){let f=a,y=a,w=a,_=!1,x=a,v=a,D=!1,K=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.d===void 0&&(le="d")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var F=K===a;if(D=D||F,D)a=v,s!==null&&(v?s.length=v:s=null);else{let le={};s===null?s=[le]:s.push(le),a++}if(a===x)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="EC"){let le={};s===null?s=[le]:s.push(le),a++}}else{let le={};s===null?s=[le]:s.push(le),a++}var E=x===a;if(_=_||E,E){var U={};U.kty=!0}let M=a,j=a,J=!1,Z=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.d===void 0&&(le="d")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var G=Z===a;if(J=J||G,J)a=j,s!==null&&(j?s.length=j:s=null);else{let le={};s===null?s=[le]:s.push(le),a++}if(a===M)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="OKP"){let le={};s===null?s=[le]:s.push(le),a++}}else{let le={};s===null?s=[le]:s.push(le),a++}var E=M===a;_=_||E,E&&U!==!0&&(U=U||{},U.kty=!0);let V=a,H=a,X=!1,ee=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.d===void 0&&(le="d")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=ee===a;X=X||q;let ue=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.p===void 0&&(le="p")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=ue===a;X=X||q;let ae=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.q===void 0&&(le="q")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=ae===a;X=X||q;let ce=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.dp===void 0&&(le="dp")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=ce===a;X=X||q;let pe=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.dq===void 0&&(le="dq")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=pe===a;X=X||q;let Ee=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.qi===void 0&&(le="qi")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=Ee===a;X=X||q;let Ue=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let le;if(t.oth===void 0&&(le="oth")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var q=Ue===a;if(X=X||q,X)a=H,s!==null&&(H?s.length=H:s=null);else{let le={};s===null?s=[le]:s.push(le),a++}if(a===V)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0){let le=a;if(t.kty!=="RSA"){let ge={};s===null?s=[ge]:s.push(ge),a++}var T=le===a}else var T=!0;if(T)if(t.oth!==void 0){let le=t.oth,ge=a;if(!(le&&typeof le=="object"&&!Array.isArray(le))){let Ce={};s===null?s=[Ce]:s.push(Ce),a++}var T=ge===a}else var T=!0}else{let le={};s===null?s=[le]:s.push(le),a++}var E=V===a;if(_=_||E,E&&U!==!0&&(U=U||{},U.kty=!0,U.d=!0,U.p=!0,U.q=!0,U.dp=!0,U.dq=!0,U.qi=!0,U.oth=!0),_)a=w,s!==null&&(w?s.length=w:s=null);else{let le={};s===null?s=[le]:s.push(le),a++}var k=y===a;if(k)return en.errors=[{instancePath:e,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=f,s!==null&&(f?s.length=f:s=null)}return en.errors=s,d.props=b,a===0}en.evaluated={dynamicProps:!0,dynamicItems:!1};var bR=Object.prototype.hasOwnProperty;function Le(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Le.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);let u=a,c=!1,l=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.contextId===void 0&&(M="contextId")){let j={instancePath:e,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:M},message:"must have required property '"+M+"'"};s===null?s=[j]:s.push(j),a++}else if(t.descriptor!==void 0){let j=t.descriptor;if(a===a)if(j&&typeof j=="object"&&!Array.isArray(j)){let Z;if(j.protocol===void 0&&(Z="protocol")||j.protocolPath===void 0&&(Z="protocolPath")){let V={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:Z},message:"must have required property '"+Z+"'"};s===null?s=[V]:s.push(V),a++}}else{let Z={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[Z]:s.push(Z),a++}}}var N=l===a;if(c=c||N,N){var m={};m.descriptor=!0}let p=a,g=a,b=a,S=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.contextId===void 0&&(M="contextId")){let j={};s===null?s=[j]:s.push(j),a++}}var A=S===a;if(A){let M={instancePath:e,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[M]:s.push(M),a++}else a=b,s!==null&&(b?s.length=b:s=null);var I=g===a;if(I){let M=a;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let J=t.descriptor;if(!(J&&typeof J=="object"&&!Array.isArray(J))){let H={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[H]:s.push(H),a++}let Z=a,V=a;if(J&&typeof J=="object"&&!Array.isArray(J)){let H;if(J.protocol===void 0&&(H="protocol")){let X={};s===null?s=[X]:s.push(X),a++}}var P=V===a;if(P){let H={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[H]:s.push(H),a++}else a=Z,s!==null&&(Z?s.length=Z:s=null)}var I=M===a;if(I){let J=a;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let V=t.descriptor;if(!(V&&typeof V=="object"&&!Array.isArray(V))){let ee={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[ee]:s.push(ee),a++}let H=a,X=a;if(V&&typeof V=="object"&&!Array.isArray(V)){let ee;if(V.protocolPath===void 0&&(ee="protocolPath")){let ue={};s===null?s=[ue]:s.push(ue),a++}}var $=X===a;if($){let ee={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[ee]:s.push(ee),a++}else a=H,s!==null&&(H?s.length=H:s=null)}var I=J===a}}var N=p===a;if(c=c||N,N&&m!==!0&&(m=m||{},m.descriptor=!0),c)a=u,s!==null&&(u?s.length=u:s=null);else{let M={instancePath:e,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[M]:s.push(M),a++,Le.errors=s,!1}if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.descriptor===void 0&&(M="descriptor"))return Le.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:M},message:"must have required property '"+M+"'"}],!1;if(m!==!0&&(m=m||{},m.recordId=!0,m.contextId=!0,m.attestation=!0,m.authorization=!0,m.encryption=!0,m.descriptor=!0),t.recordId!==void 0){let j=a;if(typeof t.recordId!="string")return Le.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=j===a}else var L=!0;if(L){if(t.contextId!==void 0){let j=t.contextId,J=a;if(a===J)if(typeof j=="string"){if(!Swe.test(j))return Le.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},message:'must match pattern "^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"'}],!1}else return Le.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=J===a}else var L=!0;if(L){if(t.attestation!==void 0){let j=a;tn(t.attestation,{instancePath:e+"/attestation",parentData:t,parentDataProperty:"attestation",rootData:i,dynamicAnchors:o})||(s=s===null?tn.errors:s.concat(tn.errors),a=s.length);var L=j===a}else var L=!0;if(L){if(t.authorization!==void 0){let j=a;Gu(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Gu.errors:s.concat(Gu.errors),a=s.length);var L=j===a}else var L=!0;if(L){if(t.encryption!==void 0){let j=t.encryption,J=a;if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){let V;if(j.algorithm===void 0&&(V="algorithm")||j.initializationVector===void 0&&(V="initializationVector")||j.keyEncryption===void 0&&(V="keyEncryption"))return Le.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"}],!1;{let H=a;for(let X in j)if(!(X==="algorithm"||X==="initializationVector"||X==="keyEncryption")){return Le.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"}],!1;break}if(H===a){if(j.algorithm!==void 0){let X=j.algorithm,ee=a;if(typeof X!="string")return Le.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(X!=="A256CTR")return Le.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:Qh.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var F=ee===a}else var F=!0;if(F){if(j.initializationVector!==void 0){let X=j.initializationVector,ee=a;if(a===a)if(typeof X=="string"){if(!Ey.test(X))return Le.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Le.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var F=ee===a}else var F=!0;if(F)if(j.keyEncryption!==void 0){let X=j.keyEncryption,ee=a;if(a===ee)if(Array.isArray(X)){if(X.length<1)return Le.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var U=!0;let ae=X.length;for(let ce=0;ce<ae;ce++){let pe=X[ce],Ee=a;if(a===Ee)if(pe&&typeof pe=="object"&&!Array.isArray(pe)){let le;if(pe.rootKeyId===void 0&&(le="rootKeyId")||pe.derivationScheme===void 0&&(le="derivationScheme")||pe.algorithm===void 0&&(le="algorithm")||pe.encryptedKey===void 0&&(le="encryptedKey")||pe.initializationVector===void 0&&(le="initializationVector")||pe.ephemeralPublicKey===void 0&&(le="ephemeralPublicKey")||pe.messageAuthenticationCode===void 0&&(le="messageAuthenticationCode"))return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:le},message:"must have required property '"+le+"'"}],!1;{let ge=a;for(let ve in pe)if(!(ve==="rootKeyId"||ve==="derivationScheme"||ve==="derivedPublicKey"||ve==="algorithm"||ve==="encryptedKey"||ve==="initializationVector"||ve==="ephemeralPublicKey"||ve==="messageAuthenticationCode")){return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ve},message:"must NOT have additional properties"}],!1;break}if(ge===a){if(pe.rootKeyId!==void 0){let ve=a;if(typeof pe.rootKeyId!="string")return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=ve===a}else var G=!0;if(G){if(pe.derivationScheme!==void 0){let ve=pe.derivationScheme,Ce=a;if(typeof ve!="string")return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(ve==="dataFormats"||ve==="protocolContext"||ve==="protocolPath"||ve==="schemas"))return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:Qh.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;var G=Ce===a}else var G=!0;if(G){if(pe.derivedPublicKey!==void 0){let ve=a;en(pe.derivedPublicKey,{instancePath:e+"/encryption/keyEncryption/"+ce+"/derivedPublicKey",parentData:pe,parentDataProperty:"derivedPublicKey",rootData:i,dynamicAnchors:o})||(s=s===null?en.errors:s.concat(en.errors),a=s.length);var G=ve===a}else var G=!0;if(G){if(pe.algorithm!==void 0){let ve=pe.algorithm,Ce=a;if(typeof ve!="string")return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(ve!=="ECIES-ES256K")return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:Qh.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var G=Ce===a}else var G=!0;if(G){if(pe.encryptedKey!==void 0){let ve=pe.encryptedKey,Ce=a;if(a===a)if(typeof ve=="string"){if(!Ey.test(ve))return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=Ce===a}else var G=!0;if(G){if(pe.initializationVector!==void 0){let ve=pe.initializationVector,Ce=a;if(a===a)if(typeof ve=="string"){if(!Ey.test(ve))return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=Ce===a}else var G=!0;if(G){if(pe.ephemeralPublicKey!==void 0){let ve=a;en(pe.ephemeralPublicKey,{instancePath:e+"/encryption/keyEncryption/"+ce+"/ephemeralPublicKey",parentData:pe,parentDataProperty:"ephemeralPublicKey",rootData:i,dynamicAnchors:o})||(s=s===null?en.errors:s.concat(en.errors),a=s.length);var G=ve===a}else var G=!0;if(G)if(pe.messageAuthenticationCode!==void 0){let ve=pe.messageAuthenticationCode,Ce=a;if(a===a)if(typeof ve=="string"){if(!Ey.test(ve))return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=Ce===a}else var G=!0}}}}}}}}}else return Le.errors=[{instancePath:e+"/encryption/keyEncryption/"+ce,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=Ee===a;if(!U)break}}}else return Le.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var F=ee===a}else var F=!0}}}}else return Le.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=J===a}else var L=!0;if(L)if(t.descriptor!==void 0){let j=t.descriptor,J=a,Z=a,V=!1,H=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let le;if(j.published===void 0&&(le="published")||j.datePublished===void 0&&(le="datePublished")){let ge={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:le},message:"must have required property '"+le+"'"};s===null?s=[ge]:s.push(ge),a++}else if(j.published!==void 0){let ge=j.published;if(typeof ge!="boolean"){let ve={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[ve]:s.push(ve),a++}if(ge!==!0){let ve={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:Qh.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[ve]:s.push(ve),a++}}}var y=H===a;if(V=V||y,y){var q={};q.published=!0}let X=a,ee=a,ue=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let le;if(j.datePublished===void 0&&(le="datePublished")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var T=ue===a;if(T){let le={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[le]:s.push(le),a++}else a=ee,s!==null&&(ee?s.length=ee:s=null);if(a===X&&j&&typeof j=="object"&&!Array.isArray(j)&&j.published!==void 0){let le=j.published;if(typeof le!="boolean"){let ge={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[ge]:s.push(ge),a++}if(le!==!1){let ge={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:Qh.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[ge]:s.push(ge),a++}}var y=X===a;V=V||y,y&&q!==!0&&(q=q||{},q.published=!0);let ae=a,ce=a,pe=a,Ee=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let le;if(j.published===void 0&&(le="published")){let ge={};s===null?s=[ge]:s.push(ge),a++}}var E=Ee===a;if(E){let le={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[le]:s.push(le),a++}else a=pe,s!==null&&(pe?s.length=pe:s=null);var k=ce===a;if(k){let le=a,ge=a,ve=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let Ie;if(j.datePublished===void 0&&(Ie="datePublished")){let je={};s===null?s=[je]:s.push(je),a++}}var f=ve===a;if(f){let Ie={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Ie]:s.push(Ie),a++}else a=ge,s!==null&&(ge?s.length=ge:s=null);var k=le===a}var y=ae===a;if(V=V||y,V)a=Z,s!==null&&(Z?s.length=Z:s=null);else{let le={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[le]:s.push(le),a++,Le.errors=s,!1}if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){let le;if(j.interface===void 0&&(le="interface")||j.method===void 0&&(le="method")||j.dataCid===void 0&&(le="dataCid")||j.dataSize===void 0&&(le="dataSize")||j.dateCreated===void 0&&(le="dateCreated")||j.messageTimestamp===void 0&&(le="messageTimestamp")||j.dataFormat===void 0&&(le="dataFormat"))return Le.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:le},message:"must have required property '"+le+"'"}],!1;{let ge=a;for(let ve in j)if(!bR.call(Qh.properties.descriptor.properties,ve)){return Le.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ve},message:"must NOT have additional properties"}],!1;break}if(ge===a){let ve;if(j.parentId!==void 0&&j.protocol===void 0&&(ve="protocol"))return Le.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:ve,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(j.interface!==void 0){let Ce=j.interface,Ie=a;if(typeof Ce!="string")return Le.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ce!=="Records")return Le.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:Qh.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.method!==void 0){let Ce=j.method,Ie=a;if(typeof Ce!="string")return Le.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ce!=="Write")return Le.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:Qh.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.recipient!==void 0){let Ce=j.recipient,Ie=a;if(a===a)if(typeof Ce=="string"){if(!Sy.test(Ce))return Le.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Le.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.protocol!==void 0){let Ce=a;if(typeof j.protocol!="string")return Le.errors=[{instancePath:e+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ce===a}else var w=!0;if(w){if(j.protocolPath!==void 0){let Ce=j.protocolPath,Ie=a;if(a===Ie)if(typeof Ce=="string"){if(!Awe.test(Ce))return Le.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}else return Le.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.schema!==void 0){let Ce=a;if(typeof j.schema!="string")return Le.errors=[{instancePath:e+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ce===a}else var w=!0;if(w){if(j.tags!==void 0){let Ce=j.tags,Ie=a;if(a===Ie)if(Ce&&typeof Ce=="object"&&!Array.isArray(Ce)){if(Object.keys(Ce).length>10)return Le.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/maxProperties",keyword:"maxProperties",params:{limit:10},message:"must NOT have more than 10 properties"}],!1;if(Object.keys(Ce).length<1)return Le.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(let gt in Ce){let Pe=Ce[gt],De=a,It=a,we=!1,Se=null,Kr=a;if(typeof Pe!="string"){let He={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[He]:s.push(He),a++}var _=Kr===a;_&&(we=!0,Se=0);let Fe=a;if(!(typeof Pe=="number"&&isFinite(Pe))){let He={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[He]:s.push(He),a++}var _=Fe===a;if(_&&we)we=!1,Se=[Se,1];else{_&&(we=!0,Se=1);let He=a;if(typeof Pe!="boolean"){let ft={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[ft]:s.push(ft),a++}var _=He===a;if(_&&we)we=!1,Se=[Se,2];else{_&&(we=!0,Se=2);let ft=a;if(a===ft)if(Array.isArray(Pe))if(Pe.length>10){let yi={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};s===null?s=[yi]:s.push(yi),a++}else if(Pe.length<1){let yi={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[yi]:s.push(yi),a++}else{var x=!0;let yi=Pe.length;for(let At=0;At<yi;At++){let Ze=a;if(typeof Pe[At]!="string"){let Pt={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+At,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Pt]:s.push(Pt),a++}var x=Ze===a;if(!x)break}}else{let yi={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[yi]:s.push(yi),a++}var _=ft===a;if(_&&we)we=!1,Se=[Se,3];else{if(_){we=!0,Se=3;var v=!0}let yi=a;if(a===yi)if(Array.isArray(Pe))if(Pe.length>10){let Ze={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};s===null?s=[Ze]:s.push(Ze),a++}else if(Pe.length<1){let Ze={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[Ze]:s.push(Ze),a++}else{var D=!0;let Ze=Pe.length;for(let Mc=0;Mc<Ze;Mc++){let Pt=Pe[Mc],$t=a;if(!(typeof Pt=="number"&&isFinite(Pt))){let Bt={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Mc,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/items/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Bt]:s.push(Bt),a++}var D=$t===a;if(!D)break}}else{let Ze={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[Ze]:s.push(Ze),a++}var _=yi===a;_&&we?(we=!1,Se=[Se,4]):_&&(we=!0,Se=4,v!==!0&&(v=!0))}}}if(we)a=It,s!==null&&(It?s.length=It:s=null);else{let He={instancePath:e+"/descriptor/tags/"+gt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:Se},message:"must match exactly one schema in oneOf"};return s===null?s=[He]:s.push(He),a++,Le.errors=s,!1}var K=De===a;if(!K)break}}else return Le.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.parentId!==void 0){let Ce=a;if(typeof j.parentId!="string")return Le.errors=[{instancePath:e+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ce===a}else var w=!0;if(w){if(j.dataCid!==void 0){let Ce=a;if(typeof j.dataCid!="string")return Le.errors=[{instancePath:e+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ce===a}else var w=!0;if(w){if(j.dataSize!==void 0){let Ce=j.dataSize,Ie=a;if(!(typeof Ce=="number"&&isFinite(Ce)))return Le.errors=[{instancePath:e+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.dateCreated!==void 0){let Ce=j.dateCreated,Ie=a;if(a===a)if(typeof Ce=="string"){if(!Nn.test(Ce))return Le.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Le.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.messageTimestamp!==void 0){let Ce=j.messageTimestamp,Ie=a;if(a===a)if(typeof Ce=="string"){if(!Nn.test(Ce))return Le.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Le.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ie===a}else var w=!0;if(w){if(j.published!==void 0){let Ce=a;if(typeof j.published!="boolean")return Le.errors=[{instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var w=Ce===a}else var w=!0;if(w){if(j.datePublished!==void 0){let Ce=j.datePublished,Ie=a;if(a===a)if(typeof Ce=="string"){if(!Nn.test(Ce))return Le.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Le.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ie===a}else var w=!0;if(w)if(j.dataFormat!==void 0){let Ce=a;if(typeof j.dataFormat!="string")return Le.errors=[{instancePath:e+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Ce===a}else var w=!0}}}}}}}}}}}}}}}}else return Le.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=J===a}else var L=!0}}}}}else return Le.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Le.errors=s,d.props=m,a===0}Le.evaluated={dynamicProps:!0,dynamicItems:!1};function Nc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Nc.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),!Le(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:o}))s=s===null?Le.errors:s.concat(Le.errors),a=s.length;else var u=Le.evaluated.props;if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.recordId===void 0&&(l="recordId")||t.authorization===void 0&&(l="authorization")||t.encodedData===void 0&&(l="encodedData"))return Nc.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;if(u!==!0&&(u=u||{},u.encodedData=!0),t.encodedData!==void 0){let m=a;if(typeof t.encodedData!="string")return Nc.errors=[{instancePath:e+"/encodedData",schemaPath:"#/properties/encodedData/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===a}else var c=!0;if(c&&u!==!0){for(let m in t)if(!u||!u[m]){return Nc.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:m},message:"must NOT have unevaluated properties"}],!1;break}}}else return Nc.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Nc.errors=s,a===0}Nc.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function co(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=co.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c=a;for(let l in t)if(!(l==="signature"||l==="authorDelegatedGrant")){return co.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===a){if(t.signature!==void 0){let l=a;tn(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?tn.errors:s.concat(tn.errors),a=s.length);var u=l===a}else var u=!0;if(u)if(t.authorDelegatedGrant!==void 0){let l=a;Nc(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?Nc.errors:s.concat(Nc.errors),a=s.length);var u=l===a}else var u=!0}}else return co.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return co.errors=s,a===0}co.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Pwe=Gu,Twe=ao,$F={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-delete.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId","prune"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},recordId:{type:"string"},prune:{type:"boolean"}}}}};function ao(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=ao.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.authorization===void 0&&(l="authorization")||t.descriptor===void 0&&(l="descriptor"))return ao.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;{let m=a;for(let p in t)if(!(p==="authorization"||p==="descriptor")){return ao.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a){if(t.authorization!==void 0){let p=a;co(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?co.errors:s.concat(co.errors),a=s.length);var u=p===a}else var u=!0;if(u)if(t.descriptor!==void 0){let p=t.descriptor,g=a;if(a===g)if(p&&typeof p=="object"&&!Array.isArray(p)){let S;if(p.interface===void 0&&(S="interface")||p.method===void 0&&(S="method")||p.messageTimestamp===void 0&&(S="messageTimestamp")||p.recordId===void 0&&(S="recordId")||p.prune===void 0&&(S="prune"))return ao.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let A=a;for(let I in p)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="recordId"||I==="prune")){return ao.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(A===a){if(p.interface!==void 0){let I=p.interface,P=a;if(typeof I!="string")return ao.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Records")return ao.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:$F.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.method!==void 0){let I=p.method,P=a;if(typeof I!="string")return ao.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Delete")return ao.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:$F.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.messageTimestamp!==void 0){let I=p.messageTimestamp,P=a;if(a===a)if(typeof I=="string"){if(!Nn.test(I))return ao.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ao.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c){if(p.recordId!==void 0){let I=a;if(typeof p.recordId!="string")return ao.errors=[{instancePath:e+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=I===a}else var c=!0;if(c)if(p.prune!==void 0){let I=a;if(typeof p.prune!="boolean")return ao.errors=[{instancePath:e+"/descriptor/prune",schemaPath:"#/properties/descriptor/properties/prune/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var c=I===a}else var c=!0}}}}}}else return ao.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=g===a}else var u=!0}}}else return ao.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ao.errors=s,a===0}ao.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Iwe=dn,yR={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},zS={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json",type:"object",minProperties:1,additionalProperties:!1,required:["messageCid","value"],properties:{messageCid:{type:"string"},value:{type:["string","number"]}}},NF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-filter.json",type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},contextId:{type:"string"},schema:{type:"string"},tags:{type:"object",minProperties:1,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"object",minProperties:1,additionalProperties:!1,properties:{startsWith:{type:"string"}}},{$ref:"https://identity.foundation/dwn/json-schemas/string-range-filter.json"},{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"}]}},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function Je(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Je.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Je.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let M=a;for(let j in t)if(!bR.call(NF.properties,j)){return Je.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:j},message:"must NOT have additional properties"}],!1;break}if(M===a){if(t.datePublished!==void 0){let j=a,J=a,Z=!1,V=null,H=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let ae;if(t.published===void 0&&(ae="published")){let ce={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:ae},message:"must have required property '"+ae+"'"};s===null?s=[ce]:s.push(ce),a++}else if(t.published!==void 0&&t.published!==!0){let ce={instancePath:e+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:NF.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[ce]:s.push(ce),a++}}var l=H===a;if(l){Z=!0,V=0;var u={};u.published=!0}let X=a,ee=a,ue=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let ae;if(t.published===void 0&&(ae="published")){let ce={};s===null?s=[ce]:s.push(ce),a++}}var c=ue===a;if(c){let ae={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[ae]:s.push(ae),a++}else a=ee,s!==null&&(ee?s.length=ee:s=null);var l=X===a;if(l&&Z?(Z=!1,V=[V,1]):l&&(Z=!0,V=1),Z)a=J,s!==null&&(J?s.length=J:s=null);else{let ae={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:V},message:"must match exactly one schema in oneOf"};return s===null?s=[ae]:s.push(ae),a++,Je.errors=s,!1}var m=j===a}else var m=!0;if(m){if(t.protocol!==void 0){let j=a;if(typeof t.protocol!="string")return Je.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.protocolPath!==void 0){let j=a;if(typeof t.protocolPath!="string")return Je.errors=[{instancePath:e+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.author!==void 0){let j=t.author,J=a;if(a===a)if(typeof j=="string"){if(!Sy.test(j))return Je.errors=[{instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Je.errors=[{instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=J===a}else var p=!0;if(p){if(t.attester!==void 0){let j=t.attester,J=a;if(a===a)if(typeof j=="string"){if(!Sy.test(j))return Je.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Je.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=J===a}else var p=!0;if(p){if(t.recipient!==void 0){let j=t.recipient,J=a;if(a===a)if(typeof j=="string"){if(!Sy.test(j))return Je.errors=[{instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Je.errors=[{instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=J===a}else var p=!0;if(p){if(t.contextId!==void 0){let j=a;if(typeof t.contextId!="string")return Je.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.schema!==void 0){let j=a;if(typeof t.schema!="string")return Je.errors=[{instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.tags!==void 0){let j=t.tags,J=a;if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){if(Object.keys(j).length<1)return Je.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(let V in j){let H=j[V],X=a,ee=a,ue=!1,ae=null,ce=a;if(typeof H!="string"){let Ee={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ee]:s.push(Ee),a++}var g=ce===a;g&&(ue=!0,ae=0);let pe=a;if(!(typeof H=="number"&&isFinite(H))){let Ee={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Ee]:s.push(Ee),a++}var g=pe===a;if(g&&ue)ue=!1,ae=[ae,1];else{g&&(ue=!0,ae=1);let Ee=a;if(typeof H!="boolean"){let le={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[le]:s.push(le),a++}var g=Ee===a;if(g&&ue)ue=!1,ae=[ae,2];else{g&&(ue=!0,ae=2);let le=a;if(a===le)if(H&&typeof H=="object"&&!Array.isArray(H))if(Object.keys(H).length<1){let ve={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[ve]:s.push(ve),a++}else{let ve=a;for(let Ce in H)if(Ce!=="startsWith"){let Ie={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ce},message:"must NOT have additional properties"};s===null?s=[Ie]:s.push(Ie),a++;break}if(ve===a&&H.startsWith!==void 0&&typeof H.startsWith!="string"){let Ce={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/startsWith",schemaPath:"#/properties/tags/additionalProperties/oneOf/3/properties/startsWith/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ce]:s.push(Ce),a++}}else{let ve={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[ve]:s.push(ve),a++}var g=le===a;if(g&&ue)ue=!1,ae=[ae,3];else{if(g){ue=!0,ae=3;var b=!0}let ve=a;if(a===a)if(H&&typeof H=="object"&&!Array.isArray(H))if(Object.keys(H).length<1){let je={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[je]:s.push(je),a++}else{let je=a;for(let gt in H)if(!(gt==="gt"||gt==="gte"||gt==="lt"||gt==="lte")){let Pe={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:gt},message:"must NOT have additional properties"};s===null?s=[Pe]:s.push(Pe),a++;break}if(je===a){if(H.gt!==void 0){let gt=a,Pe=a,De=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let It;if(H.gte===void 0&&(It="gte")){let we={};s===null?s=[we]:s.push(we),a++}}var S=De===a;if(S){let It={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[It]:s.push(It),a++}else a=Pe,s!==null&&(Pe?s.length=Pe:s=null);var A=gt===a}else var A=!0;if(A){if(H.gte!==void 0){let gt=a,Pe=a,De=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let we;if(H.gt===void 0&&(we="gt")){let Se={};s===null?s=[Se]:s.push(Se),a++}}var I=De===a;if(I){let we={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[we]:s.push(we),a++}else a=Pe,s!==null&&(Pe?s.length=Pe:s=null);var A=gt===a}else var A=!0;if(A){if(H.lt!==void 0){let gt=a,Pe=a,De=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let we;if(H.lte===void 0&&(we="lte")){let Se={};s===null?s=[Se]:s.push(Se),a++}}var P=De===a;if(P){let we={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[we]:s.push(we),a++}else a=Pe,s!==null&&(Pe?s.length=Pe:s=null);var A=gt===a}else var A=!0;if(A){if(H.lte!==void 0){let gt=a,Pe=a,De=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let we;if(H.lt===void 0&&(we="lt")){let Se={};s===null?s=[Se]:s.push(Se),a++}}var $=De===a;if($){let we={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[we]:s.push(we),a++}else a=Pe,s!==null&&(Pe?s.length=Pe:s=null);var A=gt===a}else var A=!0;if(A){if(H.gt!==void 0){let gt=a;if(typeof H.gt!="string"){let Pe={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Pe]:s.push(Pe),a++}var N=gt===a}else var N=!0;if(N){if(H.gte!==void 0){let gt=a;if(typeof H.gte!="string"){let De={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[De]:s.push(De),a++}var N=gt===a}else var N=!0;if(N){if(H.lt!==void 0){let gt=a;if(typeof H.lt!="string"){let De={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[De]:s.push(De),a++}var N=gt===a}else var N=!0;if(N)if(H.lte!==void 0){let gt=a;if(typeof H.lte!="string"){let De={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[De]:s.push(De),a++}var N=gt===a}else var N=!0}}}}}}}}else{let je={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[je]:s.push(je),a++}var g=ve===a;if(g&&ue)ue=!1,ae=[ae,4];else{g&&(ue=!0,ae=4,b!==!0&&(b=!0));let je=a;if(a===a)if(H&&typeof H=="object"&&!Array.isArray(H))if(Object.keys(H).length<1){let De={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[De]:s.push(De),a++}else{let De=a;for(let It in H)if(!(It==="gt"||It==="gte"||It==="lt"||It==="lte")){let we={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:It},message:"must NOT have additional properties"};s===null?s=[we]:s.push(we),a++;break}if(De===a){if(H.gt!==void 0){let It=a,we=a,Se=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let Kr;if(H.gte===void 0&&(Kr="gte")){let Fe={};s===null?s=[Fe]:s.push(Fe),a++}}var L=Se===a;if(L){let Kr={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Kr]:s.push(Kr),a++}else a=we,s!==null&&(we?s.length=we:s=null);var F=It===a}else var F=!0;if(F){if(H.gte!==void 0){let It=a,we=a,Se=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let Fe;if(H.gt===void 0&&(Fe="gt")){let He={};s===null?s=[He]:s.push(He),a++}}var U=Se===a;if(U){let Fe={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Fe]:s.push(Fe),a++}else a=we,s!==null&&(we?s.length=we:s=null);var F=It===a}else var F=!0;if(F){if(H.lt!==void 0){let It=a,we=a,Se=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let Fe;if(H.lte===void 0&&(Fe="lte")){let He={};s===null?s=[He]:s.push(He),a++}}var G=Se===a;if(G){let Fe={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Fe]:s.push(Fe),a++}else a=we,s!==null&&(we?s.length=we:s=null);var F=It===a}else var F=!0;if(F){if(H.lte!==void 0){let It=a,we=a,Se=a;if(H&&typeof H=="object"&&!Array.isArray(H)){let Fe;if(H.lt===void 0&&(Fe="lt")){let He={};s===null?s=[He]:s.push(He),a++}}var q=Se===a;if(q){let Fe={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Fe]:s.push(Fe),a++}else a=we,s!==null&&(we?s.length=we:s=null);var F=It===a}else var F=!0;if(F){if(H.gt!==void 0){let It=H.gt,we=a;if(!(typeof It=="number"&&isFinite(It))){let Se={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Se]:s.push(Se),a++}var T=we===a}else var T=!0;if(T){if(H.gte!==void 0){let It=H.gte,we=a;if(!(typeof It=="number"&&isFinite(It))){let Kr={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Kr]:s.push(Kr),a++}var T=we===a}else var T=!0;if(T){if(H.lt!==void 0){let It=H.lt,we=a;if(!(typeof It=="number"&&isFinite(It))){let Kr={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Kr]:s.push(Kr),a++}var T=we===a}else var T=!0;if(T)if(H.lte!==void 0){let It=H.lte,we=a;if(!(typeof It=="number"&&isFinite(It))){let Kr={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Kr]:s.push(Kr),a++}var T=we===a}else var T=!0}}}}}}}}else{let De={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[De]:s.push(De),a++}var g=je===a;g&&ue?(ue=!1,ae=[ae,5]):g&&(ue=!0,ae=5,b!==!0&&(b=!0))}}}}if(ue)a=ee,s!==null&&(ee?s.length=ee:s=null);else{let Ee={instancePath:e+"/tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:ae},message:"must match exactly one schema in oneOf"};return s===null?s=[Ee]:s.push(Ee),a++,Je.errors=s,!1}var E=X===a;if(!E)break}}else return Je.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=J===a}else var p=!0;if(p){if(t.recordId!==void 0){let j=a;if(typeof t.recordId!="string")return Je.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.parentId!==void 0){let j=a;if(typeof t.parentId!="string")return Je.errors=[{instancePath:e+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.published!==void 0){let j=a;if(typeof t.published!="boolean")return Je.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var p=j===a}else var p=!0;if(p){if(t.dataFormat!==void 0){let j=a;if(typeof t.dataFormat!="string")return Je.errors=[{instancePath:e+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.dataSize!==void 0){let j=t.dataSize,J=a;if(a===a)if(j&&typeof j=="object"&&!Array.isArray(j)){if(Object.keys(j).length<1)return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let H=a;for(let X in j)if(!(X==="gt"||X==="gte"||X==="lt"||X==="lte")){return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"}],!1;break}if(H===a){if(j.gt!==void 0){let X=a,ee=a,ue=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let ae;if(j.gte===void 0&&(ae="gte")){let ce={};s===null?s=[ce]:s.push(ce),a++}}var k=ue===a;if(k)return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=ee,s!==null&&(ee?s.length=ee:s=null);var f=X===a}else var f=!0;if(f){if(j.gte!==void 0){let X=a,ee=a,ue=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let ce;if(j.gt===void 0&&(ce="gt")){let pe={};s===null?s=[pe]:s.push(pe),a++}}var y=ue===a;if(y)return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=ee,s!==null&&(ee?s.length=ee:s=null);var f=X===a}else var f=!0;if(f){if(j.lt!==void 0){let X=a,ee=a,ue=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let ce;if(j.lte===void 0&&(ce="lte")){let pe={};s===null?s=[pe]:s.push(pe),a++}}var w=ue===a;if(w)return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=ee,s!==null&&(ee?s.length=ee:s=null);var f=X===a}else var f=!0;if(f){if(j.lte!==void 0){let X=a,ee=a,ue=a;if(j&&typeof j=="object"&&!Array.isArray(j)){let ce;if(j.lt===void 0&&(ce="lt")){let pe={};s===null?s=[pe]:s.push(pe),a++}}var _=ue===a;if(_)return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=ee,s!==null&&(ee?s.length=ee:s=null);var f=X===a}else var f=!0;if(f){if(j.gt!==void 0){let X=j.gt,ee=a;if(!(typeof X=="number"&&isFinite(X)))return Je.errors=[{instancePath:e+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var x=ee===a}else var x=!0;if(x){if(j.gte!==void 0){let X=j.gte,ee=a;if(!(typeof X=="number"&&isFinite(X)))return Je.errors=[{instancePath:e+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var x=ee===a}else var x=!0;if(x){if(j.lt!==void 0){let X=j.lt,ee=a;if(!(typeof X=="number"&&isFinite(X)))return Je.errors=[{instancePath:e+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var x=ee===a}else var x=!0;if(x)if(j.lte!==void 0){let X=j.lte,ee=a;if(!(typeof X=="number"&&isFinite(X)))return Je.errors=[{instancePath:e+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var x=ee===a}else var x=!0}}}}}}}}}else return Je.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=J===a}else var p=!0;if(p){if(t.dataCid!==void 0){let j=a;if(typeof t.dataCid!="string")return Je.errors=[{instancePath:e+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=j===a}else var p=!0;if(p){if(t.dateCreated!==void 0){let j=t.dateCreated,J=a;if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){if(Object.keys(j).length<1)return Je.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let V=a;for(let H in j)if(!(H==="from"||H==="to")){return Je.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:H},message:"must NOT have additional properties"}],!1;break}if(V===a){if(j.from!==void 0){let H=j.from,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=X===a}else var v=!0;if(v)if(j.to!==void 0){let H=j.to,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=X===a}else var v=!0}}}else return Je.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=J===a}else var p=!0;if(p){if(t.datePublished!==void 0){let j=t.datePublished,J=a;if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){if(Object.keys(j).length<1)return Je.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let V=a;for(let H in j)if(!(H==="from"||H==="to")){return Je.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:H},message:"must NOT have additional properties"}],!1;break}if(V===a){if(j.from!==void 0){let H=j.from,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var D=X===a}else var D=!0;if(D)if(j.to!==void 0){let H=j.to,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var D=X===a}else var D=!0}}}else return Je.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=J===a}else var p=!0;if(p)if(t.dateUpdated!==void 0){let j=t.dateUpdated,J=a;if(a===J)if(j&&typeof j=="object"&&!Array.isArray(j)){if(Object.keys(j).length<1)return Je.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let V=a;for(let H in j)if(!(H==="from"||H==="to")){return Je.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:H},message:"must NOT have additional properties"}],!1;break}if(V===a){if(j.from!==void 0){let H=j.from,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var K=X===a}else var K=!0;if(K)if(j.to!==void 0){let H=j.to,X=a;if(a===a)if(typeof H=="string"){if(!Nn.test(H))return Je.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Je.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var K=X===a}else var K=!0}}}else return Je.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=J===a}else var p=!0}}}}}}}}}}}}}}}}}}}else return Je.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Je.errors=s,a===0}Je.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function dn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=dn.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.descriptor===void 0&&(p="descriptor"))return dn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let g=a;for(let b in t)if(!(b==="authorization"||b==="descriptor")){return dn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;break}if(g===a){if(t.authorization!==void 0){let b=a;co(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?co.errors:s.concat(co.errors),a=s.length);var u=b===a}else var u=!0;if(u)if(t.descriptor!==void 0){let b=t.descriptor,S=a;if(a===S)if(b&&typeof b=="object"&&!Array.isArray(b)){let I;if(b.interface===void 0&&(I="interface")||b.method===void 0&&(I="method")||b.messageTimestamp===void 0&&(I="messageTimestamp")||b.filter===void 0&&(I="filter"))return dn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:I},message:"must have required property '"+I+"'"}],!1;{let P=a;for(let $ in b)if(!($==="interface"||$==="method"||$==="messageTimestamp"||$==="filter"||$==="pagination"||$==="dateSort")){return dn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;break}if(P===a){if(b.interface!==void 0){let $=b.interface,N=a;if(typeof $!="string")return dn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($!=="Records")return dn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:yR.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=N===a}else var c=!0;if(c){if(b.method!==void 0){let $=b.method,N=a;if(typeof $!="string")return dn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($!=="Query")return dn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:yR.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=N===a}else var c=!0;if(c){if(b.messageTimestamp!==void 0){let $=b.messageTimestamp,N=a;if(a===a)if(typeof $=="string"){if(!Nn.test($))return dn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return dn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=N===a}else var c=!0;if(c){if(b.filter!==void 0){let $=a;Je(b.filter,{instancePath:e+"/descriptor/filter",parentData:b,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?Je.errors:s.concat(Je.errors),a=s.length);var c=$===a}else var c=!0;if(c){if(b.pagination!==void 0){let $=b.pagination,N=a;if(a===N)if($&&typeof $=="object"&&!Array.isArray($)){let F=a;for(let U in $)if(!(U==="limit"||U==="cursor")){return dn.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:U},message:"must NOT have additional properties"}],!1;break}if(F===a){if($.limit!==void 0){let U=$.limit,G=a;if(a===G)if(typeof U=="number"&&isFinite(U)){if(U<1||isNaN(U))return dn.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}else return dn.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var l=G===a}else var l=!0;if(l)if($.cursor!==void 0){let U=$.cursor,G=a;if(a===a)if(U&&typeof U=="object"&&!Array.isArray(U)){if(Object.keys(U).length<1)return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let E;if(U.messageCid===void 0&&(E="messageCid")||U.value===void 0&&(E="value"))return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:E},message:"must have required property '"+E+"'"}],!1;{let k=a;for(let f in U)if(!(f==="messageCid"||f==="value")){return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;break}if(k===a){if(U.messageCid!==void 0){let f=a;if(typeof U.messageCid!="string")return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=f===a}else var m=!0;if(m)if(U.value!==void 0){let f=U.value,y=a;if(typeof f!="string"&&!(typeof f=="number"&&isFinite(f)))return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:zS.properties.value.type},message:"must be string,number"}],!1;var m=y===a}else var m=!0}}}}else return dn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=G===a}else var l=!0}}else return dn.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=N===a}else var c=!0;if(c)if(b.dateSort!==void 0){let $=b.dateSort,N=a;if(typeof $!="string")return dn.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!($==="createdAscending"||$==="createdDescending"||$==="publishedAscending"||$==="publishedDescending"))return dn.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:yR.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;var c=N===a}else var c=!0}}}}}}}else return dn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=S===a}else var u=!0}}}else return dn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return dn.errors=s,a===0}dn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var kwe=ys,jF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function ys(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=ys.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.descriptor===void 0&&(l="descriptor"))return ys.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;{let m=a;for(let p in t)if(!(p==="authorization"||p==="descriptor")){return ys.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a){if(t.authorization!==void 0){let p=a;co(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?co.errors:s.concat(co.errors),a=s.length);var u=p===a}else var u=!0;if(u)if(t.descriptor!==void 0){let p=t.descriptor,g=a;if(a===g)if(p&&typeof p=="object"&&!Array.isArray(p)){let S;if(p.interface===void 0&&(S="interface")||p.method===void 0&&(S="method")||p.messageTimestamp===void 0&&(S="messageTimestamp")||p.filter===void 0&&(S="filter"))return ys.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let A=a;for(let I in p)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="filter")){return ys.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(A===a){if(p.interface!==void 0){let I=p.interface,P=a;if(typeof I!="string")return ys.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Records")return ys.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:jF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.method!==void 0){let I=p.method,P=a;if(typeof I!="string")return ys.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Subscribe")return ys.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:jF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.messageTimestamp!==void 0){let I=p.messageTimestamp,P=a;if(a===a)if(typeof I=="string"){if(!Nn.test(I))return ys.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ys.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c)if(p.filter!==void 0){let I=a;Je(p.filter,{instancePath:e+"/descriptor/filter",parentData:p,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?Je.errors:s.concat(Je.errors),a=s.length);var c=I===a}else var c=!0}}}}}else return ys.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=g===a}else var u=!0}}}else return ys.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ys.errors=s,a===0}ys.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Rwe=_y;function _y(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=_y.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),!Le(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:o}))s=s===null?Le.errors:s.concat(Le.errors),a=s.length;else var u=Le.evaluated.props;if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.recordId===void 0&&(c="recordId")||t.authorization===void 0&&(c="authorization"))return _y.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(u!==!0){for(let l in t)if(!u||!u[l]){return _y.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:l},message:"must NOT have unevaluated properties"}],!1;break}}}else return _y.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return _y.errors=s,a===0}_y.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Dwe=Nc,Mwe=Le,Bwe=ut,FS={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-filter.json",type:"object",additionalProperties:!1,minProperties:1,properties:{interface:{enum:["Permissions","Protocols","Records"],type:"string"},method:{enum:["Configure","Delete","Grant","Revoke","Write"],type:"string"},protocol:{type:"string"},protocolPath:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},contextId:{type:"string"},schema:{type:"string"},recordId:{type:"string"},parentId:{type:"string"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function ut(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=ut.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return ut.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let F=a;for(let U in t)if(!bR.call(FS.properties,U)){return ut.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:U},message:"must NOT have additional properties"}],!1;break}if(F===a){if(t.datePublished!==void 0){let U=a,G=a,q=!1,T=null,E=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let w;if(t.published===void 0&&(w="published")){let _={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};s===null?s=[_]:s.push(_),a++}else if(t.published!==void 0&&t.published!==!0){let _={instancePath:e+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:FS.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[_]:s.push(_),a++}}var l=E===a;if(l){q=!0,T=0;var u={};u.published=!0}let k=a,f=a,y=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let w;if(t.published===void 0&&(w="published")){let _={};s===null?s=[_]:s.push(_),a++}}var c=y===a;if(c){let w={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[w]:s.push(w),a++}else a=f,s!==null&&(f?s.length=f:s=null);var l=k===a;if(l&&q?(q=!1,T=[T,1]):l&&(q=!0,T=1),q)a=G,s!==null&&(G?s.length=G:s=null);else{let w={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return s===null?s=[w]:s.push(w),a++,ut.errors=s,!1}var m=U===a}else var m=!0;if(m){if(t.interface!==void 0){let U=t.interface,G=a;if(typeof U!="string")return ut.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(U==="Permissions"||U==="Protocols"||U==="Records"))return ut.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/enum",keyword:"enum",params:{allowedValues:FS.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=G===a}else var p=!0;if(p){if(t.method!==void 0){let U=t.method,G=a;if(typeof U!="string")return ut.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(U==="Configure"||U==="Delete"||U==="Grant"||U==="Revoke"||U==="Write"))return ut.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:FS.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=G===a}else var p=!0;if(p){if(t.protocol!==void 0){let U=a;if(typeof t.protocol!="string")return ut.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.protocolPath!==void 0){let U=a;if(typeof t.protocolPath!="string")return ut.errors=[{instancePath:e+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.recipient!==void 0){let U=t.recipient,G=a;if(a===a)if(typeof U=="string"){if(!Sy.test(U))return ut.errors=[{instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return ut.errors=[{instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=G===a}else var p=!0;if(p){if(t.contextId!==void 0){let U=a;if(typeof t.contextId!="string")return ut.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.schema!==void 0){let U=a;if(typeof t.schema!="string")return ut.errors=[{instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.recordId!==void 0){let U=a;if(typeof t.recordId!="string")return ut.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.parentId!==void 0){let U=a;if(typeof t.parentId!="string")return ut.errors=[{instancePath:e+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.dataFormat!==void 0){let U=a;if(typeof t.dataFormat!="string")return ut.errors=[{instancePath:e+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=U===a}else var p=!0;if(p){if(t.dataSize!==void 0){let U=t.dataSize,G=a;if(a===a)if(U&&typeof U=="object"&&!Array.isArray(U)){if(Object.keys(U).length<1)return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let E=a;for(let k in U)if(!(k==="gt"||k==="gte"||k==="lt"||k==="lte")){return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(E===a){if(U.gt!==void 0){let k=a,f=a,y=a;if(U&&typeof U=="object"&&!Array.isArray(U)){let w;if(U.gte===void 0&&(w="gte")){let _={};s===null?s=[_]:s.push(_),a++}}var g=y===a;if(g)return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=f,s!==null&&(f?s.length=f:s=null);var b=k===a}else var b=!0;if(b){if(U.gte!==void 0){let k=a,f=a,y=a;if(U&&typeof U=="object"&&!Array.isArray(U)){let _;if(U.gt===void 0&&(_="gt")){let x={};s===null?s=[x]:s.push(x),a++}}var S=y===a;if(S)return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=f,s!==null&&(f?s.length=f:s=null);var b=k===a}else var b=!0;if(b){if(U.lt!==void 0){let k=a,f=a,y=a;if(U&&typeof U=="object"&&!Array.isArray(U)){let _;if(U.lte===void 0&&(_="lte")){let x={};s===null?s=[x]:s.push(x),a++}}var A=y===a;if(A)return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=f,s!==null&&(f?s.length=f:s=null);var b=k===a}else var b=!0;if(b){if(U.lte!==void 0){let k=a,f=a,y=a;if(U&&typeof U=="object"&&!Array.isArray(U)){let _;if(U.lt===void 0&&(_="lt")){let x={};s===null?s=[x]:s.push(x),a++}}var I=y===a;if(I)return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=f,s!==null&&(f?s.length=f:s=null);var b=k===a}else var b=!0;if(b){if(U.gt!==void 0){let k=U.gt,f=a;if(!(typeof k=="number"&&isFinite(k)))return ut.errors=[{instancePath:e+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=f===a}else var P=!0;if(P){if(U.gte!==void 0){let k=U.gte,f=a;if(!(typeof k=="number"&&isFinite(k)))return ut.errors=[{instancePath:e+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=f===a}else var P=!0;if(P){if(U.lt!==void 0){let k=U.lt,f=a;if(!(typeof k=="number"&&isFinite(k)))return ut.errors=[{instancePath:e+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=f===a}else var P=!0;if(P)if(U.lte!==void 0){let k=U.lte,f=a;if(!(typeof k=="number"&&isFinite(k)))return ut.errors=[{instancePath:e+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=f===a}else var P=!0}}}}}}}}}else return ut.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=G===a}else var p=!0;if(p){if(t.dateCreated!==void 0){let U=t.dateCreated,G=a;if(a===G)if(U&&typeof U=="object"&&!Array.isArray(U)){if(Object.keys(U).length<1)return ut.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let T=a;for(let E in U)if(!(E==="from"||E==="to")){return ut.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;break}if(T===a){if(U.from!==void 0){let E=U.from,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=k===a}else var $=!0;if($)if(U.to!==void 0){let E=U.to,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=k===a}else var $=!0}}}else return ut.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=G===a}else var p=!0;if(p){if(t.datePublished!==void 0){let U=t.datePublished,G=a;if(a===G)if(U&&typeof U=="object"&&!Array.isArray(U)){if(Object.keys(U).length<1)return ut.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let T=a;for(let E in U)if(!(E==="from"||E==="to")){return ut.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;break}if(T===a){if(U.from!==void 0){let E=U.from,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=k===a}else var N=!0;if(N)if(U.to!==void 0){let E=U.to,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=k===a}else var N=!0}}}else return ut.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=G===a}else var p=!0;if(p)if(t.dateUpdated!==void 0){let U=t.dateUpdated,G=a;if(a===G)if(U&&typeof U=="object"&&!Array.isArray(U)){if(Object.keys(U).length<1)return ut.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let T=a;for(let E in U)if(!(E==="from"||E==="to")){return ut.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;break}if(T===a){if(U.from!==void 0){let E=U.from,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=k===a}else var L=!0;if(L)if(U.to!==void 0){let E=U.to,k=a;if(a===a)if(typeof E=="string"){if(!Nn.test(E))return ut.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ut.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=k===a}else var L=!0}}}else return ut.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=G===a}else var p=!0}}}}}}}}}}}}}}}}else return ut.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ut.errors=s,a===0}ut.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Cwe=wi,UF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-get.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{type:"string"},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function wi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=wi.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m;if(t.authorization===void 0&&(m="authorization")||t.descriptor===void 0&&(m="descriptor"))return wi.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"}],!1;{let p=a;for(let g in t)if(!(g==="authorization"||g==="descriptor")){return wi.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;break}if(p===a){if(t.authorization!==void 0){let g=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=g===a}else var u=!0;if(u)if(t.descriptor!==void 0){let g=t.descriptor,b=a;if(a===b)if(g&&typeof g=="object"&&!Array.isArray(g)){let A;if(g.interface===void 0&&(A="interface")||g.method===void 0&&(A="method")||g.messageTimestamp===void 0&&(A="messageTimestamp"))return wi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let I=a;for(let P in g)if(!(P==="interface"||P==="method"||P==="messageTimestamp"||P==="cursor")){return wi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(I===a){if(g.interface!==void 0){let P=g.interface,$=a;if(typeof P!="string")return wi.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Events")return wi.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:UF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.method!==void 0){let P=g.method,$=a;if(typeof P!="string")return wi.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Get")return wi.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:UF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.messageTimestamp!==void 0){let P=a;if(typeof g.messageTimestamp!="string")return wi.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c)if(g.cursor!==void 0){let P=g.cursor,$=a;if(a===a)if(P&&typeof P=="object"&&!Array.isArray(P)){if(Object.keys(P).length<1)return wi.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let F;if(P.messageCid===void 0&&(F="messageCid")||P.value===void 0&&(F="value"))return wi.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"}],!1;{let U=a;for(let G in P)if(!(G==="messageCid"||G==="value")){return wi.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:G},message:"must NOT have additional properties"}],!1;break}if(U===a){if(P.messageCid!==void 0){let G=a;if(typeof P.messageCid!="string")return wi.errors=[{instancePath:e+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=G===a}else var l=!0;if(l)if(P.value!==void 0){let G=P.value,q=a;if(typeof G!="string"&&!(typeof G=="number"&&isFinite(G)))return wi.errors=[{instancePath:e+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:zS.properties.value.type},message:"must be string,number"}],!1;var l=q===a}else var l=!0}}}}else return wi.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=$===a}else var c=!0}}}}}else return wi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=b===a}else var u=!0}}}else return wi.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return wi.errors=s,a===0}wi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Owe=$n,KF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-query.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filters:{type:"array",minItems:1,items:{$ref:"https://identity.foundation/dwn/json-schemas/events-filter.json"}},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function $n(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=$n.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.authorization===void 0&&(p="authorization")||t.descriptor===void 0&&(p="descriptor"))return $n.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let g=a;for(let b in t)if(!(b==="authorization"||b==="descriptor")){return $n.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;break}if(g===a){if(t.authorization!==void 0){let b=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=b===a}else var u=!0;if(u)if(t.descriptor!==void 0){let b=t.descriptor,S=a;if(a===S)if(b&&typeof b=="object"&&!Array.isArray(b)){let I;if(b.interface===void 0&&(I="interface")||b.method===void 0&&(I="method")||b.messageTimestamp===void 0&&(I="messageTimestamp")||b.filters===void 0&&(I="filters"))return $n.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:I},message:"must have required property '"+I+"'"}],!1;{let P=a;for(let $ in b)if(!($==="interface"||$==="method"||$==="messageTimestamp"||$==="filters"||$==="cursor")){return $n.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;break}if(P===a){if(b.interface!==void 0){let $=b.interface,N=a;if(typeof $!="string")return $n.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($!=="Events")return $n.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:KF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=N===a}else var c=!0;if(c){if(b.method!==void 0){let $=b.method,N=a;if(typeof $!="string")return $n.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($!=="Query")return $n.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:KF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=N===a}else var c=!0;if(c){if(b.messageTimestamp!==void 0){let $=b.messageTimestamp,N=a;if(a===a)if(typeof $=="string"){if(!Nn.test($))return $n.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return $n.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=N===a}else var c=!0;if(c){if(b.filters!==void 0){let $=b.filters,N=a;if(a===N)if(Array.isArray($)){if($.length<1)return $n.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var l=!0;let F=$.length;for(let U=0;U<F;U++){let G=a;ut($[U],{instancePath:e+"/descriptor/filters/"+U,parentData:$,parentDataProperty:U,rootData:i,dynamicAnchors:o})||(s=s===null?ut.errors:s.concat(ut.errors),a=s.length);var l=G===a;if(!l)break}}}else return $n.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=N===a}else var c=!0;if(c)if(b.cursor!==void 0){let $=b.cursor,N=a;if(a===a)if($&&typeof $=="object"&&!Array.isArray($)){if(Object.keys($).length<1)return $n.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let U;if($.messageCid===void 0&&(U="messageCid")||$.value===void 0&&(U="value"))return $n.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:U},message:"must have required property '"+U+"'"}],!1;{let G=a;for(let q in $)if(!(q==="messageCid"||q==="value")){return $n.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"}],!1;break}if(G===a){if($.messageCid!==void 0){let q=a;if(typeof $.messageCid!="string")return $n.errors=[{instancePath:e+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=q===a}else var m=!0;if(m)if($.value!==void 0){let q=$.value,T=a;if(typeof q!="string"&&!(typeof q=="number"&&isFinite(q)))return $n.errors=[{instancePath:e+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:zS.properties.value.type},message:"must be string,number"}],!1;var m=T===a}else var m=!0}}}}else return $n.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=N===a}else var c=!0}}}}}}else return $n.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=S===a}else var u=!0}}}else return $n.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $n.errors=s,a===0}$n.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var $we=gs,qF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor","authorization"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{type:"string"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/events-filter.json"}}}}}};function gs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=gs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m;if(t.descriptor===void 0&&(m="descriptor")||t.authorization===void 0&&(m="authorization"))return gs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"}],!1;{let p=a;for(let g in t)if(!(g==="authorization"||g==="descriptor")){return gs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;break}if(p===a){if(t.authorization!==void 0){let g=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=g===a}else var u=!0;if(u)if(t.descriptor!==void 0){let g=t.descriptor,b=a;if(a===b)if(g&&typeof g=="object"&&!Array.isArray(g)){let A;if(g.interface===void 0&&(A="interface")||g.method===void 0&&(A="method")||g.messageTimestamp===void 0&&(A="messageTimestamp")||g.filters===void 0&&(A="filters"))return gs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let I=a;for(let P in g)if(!(P==="interface"||P==="method"||P==="messageTimestamp"||P==="filters")){return gs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(I===a){if(g.interface!==void 0){let P=g.interface,$=a;if(typeof P!="string")return gs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Events")return gs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:qF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.method!==void 0){let P=g.method,$=a;if(typeof P!="string")return gs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Subscribe")return gs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:qF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.messageTimestamp!==void 0){let P=a;if(typeof g.messageTimestamp!="string")return gs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c)if(g.filters!==void 0){let P=g.filters,$=a;if(a===$)if(Array.isArray(P)){var l=!0;let L=P.length;for(let F=0;F<L;F++){let U=a;ut(P[F],{instancePath:e+"/descriptor/filters/"+F,parentData:P,parentDataProperty:F,rootData:i,dynamicAnchors:o})||(s=s===null?ut.errors:s.concat(ut.errors),a=s.length);var l=U===a;if(!l)break}}else return gs.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=$===a}else var c=!0}}}}}else return gs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=b===a}else var u=!0}}}else return gs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return gs.errors=s,a===0}gs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Nwe=A2;function A2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=A2.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(A2.errors=s,a===0):(A2.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}A2.evaluated={dynamicProps:!1,dynamicItems:!1};var jwe=Co;function Co(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Co.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);let u=a,c=!1,l=null,m=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let N;if(t.crv===void 0&&(N="crv")||t.x===void 0&&(N="x")){let L={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};s===null?s=[L]:s.push(L),a++}else{if(t.kty!==void 0){let L=a;if(t.kty!=="EC"){let F={instancePath:e+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};s===null?s=[F]:s.push(F),a++}var p=L===a}else var p=!0;if(p){if(t.crv!==void 0){let L=a;if(typeof t.crv!="string"){let U={instancePath:e+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var p=L===a}else var p=!0;if(p){if(t.x!==void 0){let L=a;if(typeof t.x!="string"){let U={instancePath:e+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var p=L===a}else var p=!0;if(p){if(t.y!==void 0){let L=a;if(typeof t.y!="string"){let U={instancePath:e+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var p=L===a}else var p=!0;if(p)if(t.d!==void 0){let L=a;if(typeof t.d!="string"){let U={instancePath:e+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var p=L===a}else var p=!0}}}}}var A=m===a;if(A){c=!0,l=0;var g={};g.kty=!0,g.crv=!0,g.x=!0,g.y=!0,g.d=!0}let b=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let N;if(t.crv===void 0&&(N="crv")||t.x===void 0&&(N="x")){let L={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};s===null?s=[L]:s.push(L),a++}else{if(t.kty!==void 0){let L=a;if(t.kty!=="OKP"){let F={instancePath:e+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};s===null?s=[F]:s.push(F),a++}var S=L===a}else var S=!0;if(S){if(t.crv!==void 0){let L=a;if(typeof t.crv!="string"){let U={instancePath:e+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var S=L===a}else var S=!0;if(S){if(t.x!==void 0){let L=a;if(typeof t.x!="string"){let U={instancePath:e+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var S=L===a}else var S=!0;if(S)if(t.d!==void 0){let L=a;if(typeof t.d!="string"){let U={instancePath:e+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),a++}var S=L===a}else var S=!0}}}}var A=b===a;if(A&&c)c=!1,l=[l,1];else{A&&(c=!0,l=1,g!==!0&&(g=g||{},g.kty=!0,g.crv=!0,g.x=!0,g.d=!0));let N=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let F;if(t.n===void 0&&(F="n")||t.e===void 0&&(F="e")){let U={instancePath:e,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"};s===null?s=[U]:s.push(U),a++}else{if(t.kty!==void 0){let U=a;if(t.kty!=="RSA"){let G={instancePath:e+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};s===null?s=[G]:s.push(G),a++}var I=U===a}else var I=!0;if(I){if(t.n!==void 0){let U=a;if(typeof t.n!="string"){let q={instancePath:e+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.e!==void 0){let U=a;if(typeof t.e!="string"){let q={instancePath:e+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.d!==void 0){let U=a;if(typeof t.d!="string"){let q={instancePath:e+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.p!==void 0){let U=a;if(typeof t.p!="string"){let q={instancePath:e+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.q!==void 0){let U=a;if(typeof t.q!="string"){let q={instancePath:e+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.dp!==void 0){let U=a;if(typeof t.dp!="string"){let q={instancePath:e+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.dq!==void 0){let U=a;if(typeof t.dq!="string"){let q={instancePath:e+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I){if(t.qi!==void 0){let U=a;if(typeof t.qi!="string"){let q={instancePath:e+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[q]:s.push(q),a++}var I=U===a}else var I=!0;if(I)if(t.oth!==void 0){let U=t.oth,G=a;if(!(U&&typeof U=="object"&&!Array.isArray(U))){let T={instancePath:e+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0}}}}}}}}}}var A=N===a;if(A&&c)c=!1,l=[l,2];else{A&&(c=!0,l=2,g!==!0&&(g=g||{},g.kty=!0,g.n=!0,g.e=!0,g.d=!0,g.p=!0,g.q=!0,g.dp=!0,g.dq=!0,g.qi=!0,g.oth=!0));let F=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let G;if(t.k===void 0&&(G="k")){let q={instancePath:e,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:G},message:"must have required property '"+G+"'"};s===null?s=[q]:s.push(q),a++}else{if(t.kty!==void 0){let q=a;if(t.kty!=="oct"){let T={instancePath:e+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};s===null?s=[T]:s.push(T),a++}var P=q===a}else var P=!0;if(P)if(t.k!==void 0){let q=a;if(typeof t.k!="string"){let E={instancePath:e+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var P=q===a}else var P=!0}}var A=F===a;A&&c?(c=!1,l=[l,3]):A&&(c=!0,l=3,g!==!0&&(g=g||{},g.kty=!0,g.k=!0))}}if(c)a=u,s!==null&&(u?s.length=u:s=null);else{let N={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return s===null?s=[N]:s.push(N),a++,Co.errors=s,!1}if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let N;if(t.kty===void 0&&(N="kty"))return Co.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"}],!1;if(g!==!0&&(g=g||{},g.alg=!0,g.kid=!0,g.kty=!0,g.crv=!0,g.use=!0,g.key_ops=!0,g.x5u=!0,g.x5c=!0,g.x5t=!0,g["x5t#S256"]=!0),t.alg!==void 0){let L=a;if(typeof t.alg!="string")return Co.errors=[{instancePath:e+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.kid!==void 0){let L=a;if(typeof t.kid!="string")return Co.errors=[{instancePath:e+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.kty!==void 0){let L=t.kty,F=a;if(!(L==="EC"||L==="RSA"||L==="oct"||L==="OKP"))return Co.errors=[{instancePath:e+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:JF.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var $=F===a}else var $=!0;if($){if(t.crv!==void 0){let L=a;if(typeof t.crv!="string")return Co.errors=[{instancePath:e+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.use!==void 0){let L=a;if(typeof t.use!="string")return Co.errors=[{instancePath:e+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.key_ops!==void 0){let L=a;if(typeof t.key_ops!="string")return Co.errors=[{instancePath:e+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.x5u!==void 0){let L=a;if(typeof t.x5u!="string")return Co.errors=[{instancePath:e+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.x5c!==void 0){let L=a;if(typeof t.x5c!="string")return Co.errors=[{instancePath:e+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($){if(t.x5t!==void 0){let L=a;if(typeof t.x5t!="string")return Co.errors=[{instancePath:e+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0;if($)if(t["x5t#S256"]!==void 0){let L=a;if(typeof t["x5t#S256"]!="string")return Co.errors=[{instancePath:e+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=L===a}else var $=!0}}}}}}}}}else return Co.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Co.errors=s,d.props=g,a===0}Co.evaluated={dynamicProps:!0,dynamicItems:!1};var Uwe=tn,Kwe=Nd,qwe={$id:"https://identity.foundation/dwn/json-schemas/jwk-verification-method.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,required:["id","type","controller","publicKeyJwk"],properties:{id:{type:"string"},type:{enum:["JsonWebKey","JsonWebKey2020"]},controller:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}};function Nd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Nd.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.id===void 0&&(c="id")||t.type===void 0&&(c="type")||t.controller===void 0&&(c="controller")||t.publicKeyJwk===void 0&&(c="publicKeyJwk"))return Nd.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="id"||m==="type"||m==="controller"||m==="publicKeyJwk")){return Nd.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.id!==void 0){let m=a;if(typeof t.id!="string")return Nd.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.type!==void 0){let m=t.type,p=a;if(!(m==="JsonWebKey"||m==="JsonWebKey2020"))return Nd.errors=[{instancePath:e+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:qwe.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var u=p===a}else var u=!0;if(u){if(t.controller!==void 0){let m=t.controller,p=a;if(a===a)if(typeof m=="string"){if(!Sy.test(m))return Nd.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Nd.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=p===a}else var u=!0;if(u)if(t.publicKeyJwk!==void 0){let m=a;en(t.publicKeyJwk,{instancePath:e+"/publicKeyJwk",parentData:t,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:o})||(s=s===null?en.errors:s.concat(en.errors),a=s.length);var u=m===a}else var u=!0}}}}}else return Nd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Nd.errors=s,a===0}Nd.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Lwe=Li,LF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-get.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageCids:{type:"array",items:{type:"string"},minItems:1}}}}};function Li(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Li.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m;if(t.authorization===void 0&&(m="authorization")||t.descriptor===void 0&&(m="descriptor"))return Li.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"}],!1;{let p=a;for(let g in t)if(!(g==="authorization"||g==="descriptor")){return Li.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;break}if(p===a){if(t.authorization!==void 0){let g=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=g===a}else var u=!0;if(u)if(t.descriptor!==void 0){let g=t.descriptor,b=a;if(a===b)if(g&&typeof g=="object"&&!Array.isArray(g)){let A;if(g.interface===void 0&&(A="interface")||g.method===void 0&&(A="method")||g.messageTimestamp===void 0&&(A="messageTimestamp"))return Li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let I=a;for(let P in g)if(!(P==="interface"||P==="method"||P==="messageTimestamp"||P==="messageCids")){return Li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(I===a){if(g.interface!==void 0){let P=g.interface,$=a;if(typeof P!="string")return Li.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Messages")return Li.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:LF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.method!==void 0){let P=g.method,$=a;if(typeof P!="string")return Li.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Get")return Li.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:LF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.messageTimestamp!==void 0){let P=g.messageTimestamp,$=a;if(a===a)if(typeof P=="string"){if(!Nn.test(P))return Li.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Li.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=$===a}else var c=!0;if(c)if(g.messageCids!==void 0){let P=g.messageCids,$=a;if(a===$)if(Array.isArray(P)){if(P.length<1)return Li.errors=[{instancePath:e+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var l=!0;let L=P.length;for(let F=0;F<L;F++){let U=a;if(typeof P[F]!="string")return Li.errors=[{instancePath:e+"/descriptor/messageCids/"+F,schemaPath:"#/properties/descriptor/properties/messageCids/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=U===a;if(!l)break}}}else return Li.errors=[{instancePath:e+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=$===a}else var c=!0}}}}}else return Li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=b===a}else var u=!0}}}else return Li.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Li.errors=s,a===0}Li.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Fwe=Gs;function Gs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Gs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Gs.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let b=a;for(let S in t)if(!(S==="gt"||S==="gte"||S==="lt"||S==="lte")){return Gs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.gt!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let P;if(t.gte===void 0&&(P="gte")){let $={};s===null?s=[$]:s.push($),a++}}var u=I===a;if(u)return Gs.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.gte!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.gt===void 0&&($="gt")){let N={};s===null?s=[N]:s.push(N),a++}}var l=I===a;if(l)return Gs.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.lt!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.lte===void 0&&($="lte")){let N={};s===null?s=[N]:s.push(N),a++}}var m=I===a;if(m)return Gs.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.lte!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.lt===void 0&&($="lt")){let N={};s===null?s=[N]:s.push(N),a++}}var p=I===a;if(p)return Gs.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.gt!==void 0){let S=t.gt,A=a;if(!(typeof S=="number"&&isFinite(S)))return Gs.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var g=A===a}else var g=!0;if(g){if(t.gte!==void 0){let S=t.gte,A=a;if(!(typeof S=="number"&&isFinite(S)))return Gs.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var g=A===a}else var g=!0;if(g){if(t.lt!==void 0){let S=t.lt,A=a;if(!(typeof S=="number"&&isFinite(S)))return Gs.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var g=A===a}else var g=!0;if(g)if(t.lte!==void 0){let S=t.lte,A=a;if(!(typeof S=="number"&&isFinite(S)))return Gs.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var g=A===a}else var g=!0}}}}}}}}}else return Gs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Gs.errors=s,a===0}Gs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var zwe=zu;function zu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=zu.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return zu.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let c;if(t.messageCid===void 0&&(c="messageCid")||t.value===void 0&&(c="value"))return zu.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="messageCid"||m==="value")){return zu.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.messageCid!==void 0){let m=a;if(typeof t.messageCid!="string")return zu.errors=[{instancePath:e+"/messageCid",schemaPath:"#/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u)if(t.value!==void 0){let m=t.value,p=a;if(typeof m!="string"&&!(typeof m=="number"&&isFinite(m)))return zu.errors=[{instancePath:e+"/value",schemaPath:"#/properties/value/type",keyword:"type",params:{type:zS.properties.value.type},message:"must be string,number"}],!1;var u=p===a}else var u=!0}}}}else return zu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return zu.errors=s,a===0}zu.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Gwe=bs;var YF={type:"object",additionalProperties:!1,properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function Ay(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Ay.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);let u=a,c=!1,l=null,m=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.interface!==void 0){let U=a;if(t.interface!=="Protocols"){let G={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};s===null?s=[G]:s.push(G),a++}var g=U===a}else var g=!0;if(g)if(t.method!==void 0){let U=a;if(t.method!=="Query"){let q={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[q]:s.push(q),a++}var g=U===a}else var g=!0}else{let U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[U]:s.push(U),a++}var P=m===a;if(P){c=!0,l=0;var b={};b.interface=!0,b.method=!0}let S=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let U;if(t.interface===void 0&&(U="interface")||t.method===void 0&&(U="method")){let G={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:U},message:"must have required property '"+U+"'"};s===null?s=[G]:s.push(G),a++}else{if(t.interface!==void 0){let G=a;if(t.interface!=="Records"){let q={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[q]:s.push(q),a++}var I=G===a}else var I=!0;if(I){if(t.method!==void 0){let G=a;if(t.method!=="Read"){let T={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.schema!==void 0){let G=a;if(typeof t.schema!="string"){let T={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.protocol!==void 0){let G=a;if(typeof t.protocol!="string"){let T={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.contextId!==void 0){let G=a;if(typeof t.contextId!="string"){let T={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I)if(t.protocolPath!==void 0){let G=a;if(typeof t.protocolPath!="string"){let T={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0}}}}}}else{let U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[U]:s.push(U),a++}var P=S===a;if(P&&c)c=!1,l=[l,1];else{P&&(c=!0,l=1,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.schema=!0,b.protocol=!0,b.contextId=!0,b.protocolPath=!0));let U=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let T;if(t.interface===void 0&&(T="interface")||t.method===void 0&&(T="method")){let E={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"};s===null?s=[E]:s.push(E),a++}else{if(t.interface!==void 0){let E=a;if(t.interface!=="Records"){let k={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[k]:s.push(k),a++}var $=E===a}else var $=!0;if($){if(t.method!==void 0){let E=a;if(t.method!=="Delete"){let f={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0;if($){if(t.protocol!==void 0){let E=a;if(typeof t.protocol!="string"){let f={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0;if($)if(t.schema!==void 0){let E=a;if(typeof t.schema!="string"){let f={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0}}}}else{let T={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[T]:s.push(T),a++}var P=U===a;if(P&&c)c=!1,l=[l,2];else{P&&(c=!0,l=2,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0,b.schema=!0));let T=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let f;if(t.interface===void 0&&(f="interface")||t.method===void 0&&(f="method")){let y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};s===null?s=[y]:s.push(y),a++}else{if(t.interface!==void 0){let y=a;if(t.interface!=="Records"){let w={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var N=y===a}else var N=!0;if(N){if(t.method!==void 0){let y=a;if(t.method!=="Write"){let _={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.schema!==void 0){let y=a;if(typeof t.schema!="string"){let _={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let _={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.contextId!==void 0){let y=a;if(typeof t.contextId!="string"){let _={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N)if(t.protocolPath!==void 0){let y=a;if(typeof t.protocolPath!="string"){let _={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0}}}}}}else{let f={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),a++}var P=T===a;if(P&&c)c=!1,l=[l,3];else{P&&(c=!0,l=3,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.schema=!0,b.protocol=!0,b.contextId=!0,b.protocolPath=!0));let f=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let _;if(t.interface===void 0&&(_="interface")||t.method===void 0&&(_="method")){let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:_},message:"must have required property '"+_+"'"};s===null?s=[x]:s.push(x),a++}else{if(t.interface!==void 0){let x=a;if(t.interface!=="Records"){let v={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[v]:s.push(v),a++}var L=x===a}else var L=!0;if(L){if(t.method!==void 0){let x=a;if(t.method!=="Query"){let D={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[D]:s.push(D),a++}var L=x===a}else var L=!0;if(L)if(t.protocol!==void 0){let x=a;if(typeof t.protocol!="string"){let D={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[D]:s.push(D),a++}var L=x===a}else var L=!0}}}else{let _={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[_]:s.push(_),a++}var P=f===a;if(P&&c)c=!1,l=[l,4];else{P&&(c=!0,l=4,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0));let _=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.interface===void 0&&(D="interface")||t.method===void 0&&(D="method")){let K={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};s===null?s=[K]:s.push(K),a++}else{if(t.interface!==void 0){let K=a;if(t.interface!=="Records"){let M={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[M]:s.push(M),a++}var F=K===a}else var F=!0;if(F){if(t.method!==void 0){let K=a;if(t.method!=="Subscribe"){let j={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[j]:s.push(j),a++}var F=K===a}else var F=!0;if(F)if(t.protocol!==void 0){let K=a;if(typeof t.protocol!="string"){let j={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[j]:s.push(j),a++}var F=K===a}else var F=!0}}}else{let D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[D]:s.push(D),a++}var P=_===a;P&&c?(c=!1,l=[l,5]):P&&(c=!0,l=5,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0))}}}}if(c)a=u,s!==null&&(u?s.length=u:s=null);else{let U={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return s===null?s=[U]:s.push(U),a++,Ay.errors=s,!1}return Ay.errors=s,d.props=b,a===0}Ay.evaluated={dynamicProps:!0,dynamicItems:!1};function bs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=bs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.dateExpires===void 0&&(c="dateExpires")||t.scope===void 0&&(c="scope"))return bs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="description"||m==="dateExpires"||m==="requestId"||m==="delegated"||m==="scope"||m==="conditions")){return bs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.description!==void 0){let m=a;if(typeof t.description!="string")return bs.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.dateExpires!==void 0){let m=t.dateExpires,p=a;if(a===a)if(typeof m=="string"){if(!Nn.test(m))return bs.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return bs.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=p===a}else var u=!0;if(u){if(t.requestId!==void 0){let m=a;if(typeof t.requestId!="string")return bs.errors=[{instancePath:e+"/requestId",schemaPath:"#/properties/requestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.delegated!==void 0){let m=a;if(typeof t.delegated!="boolean")return bs.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var u=m===a}else var u=!0;if(u){if(t.scope!==void 0){let m=a;Ay(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:o})||(s=s===null?Ay.errors:s.concat(Ay.errors),a=s.length);var u=m===a}else var u=!0;if(u)if(t.conditions!==void 0){let m=t.conditions,p=a;if(a===a)if(m&&typeof m=="object"&&!Array.isArray(m)){let S=a;for(let A in m)if(A!=="publication"){return bs.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(S===a&&m.publication!==void 0){let A=m.publication;if(typeof A!="string")return bs.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(A==="Required"||A==="Prohibited"))return bs.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:YF.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return bs.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=p===a}else var u=!0}}}}}}}else return bs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return bs.errors=s,a===0}bs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Wwe=Ha;function Py(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Py.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);let u=a,c=!1,l=null,m=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.interface!==void 0){let U=a;if(t.interface!=="Protocols"){let G={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};s===null?s=[G]:s.push(G),a++}var g=U===a}else var g=!0;if(g)if(t.method!==void 0){let U=a;if(t.method!=="Query"){let q={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[q]:s.push(q),a++}var g=U===a}else var g=!0}else{let U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[U]:s.push(U),a++}var P=m===a;if(P){c=!0,l=0;var b={};b.interface=!0,b.method=!0}let S=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let U;if(t.interface===void 0&&(U="interface")||t.method===void 0&&(U="method")){let G={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:U},message:"must have required property '"+U+"'"};s===null?s=[G]:s.push(G),a++}else{if(t.interface!==void 0){let G=a;if(t.interface!=="Records"){let q={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[q]:s.push(q),a++}var I=G===a}else var I=!0;if(I){if(t.method!==void 0){let G=a;if(t.method!=="Read"){let T={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.schema!==void 0){let G=a;if(typeof t.schema!="string"){let T={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.protocol!==void 0){let G=a;if(typeof t.protocol!="string"){let T={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I){if(t.contextId!==void 0){let G=a;if(typeof t.contextId!="string"){let T={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0;if(I)if(t.protocolPath!==void 0){let G=a;if(typeof t.protocolPath!="string"){let T={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[T]:s.push(T),a++}var I=G===a}else var I=!0}}}}}}else{let U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[U]:s.push(U),a++}var P=S===a;if(P&&c)c=!1,l=[l,1];else{P&&(c=!0,l=1,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.schema=!0,b.protocol=!0,b.contextId=!0,b.protocolPath=!0));let U=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let T;if(t.interface===void 0&&(T="interface")||t.method===void 0&&(T="method")){let E={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"};s===null?s=[E]:s.push(E),a++}else{if(t.interface!==void 0){let E=a;if(t.interface!=="Records"){let k={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[k]:s.push(k),a++}var $=E===a}else var $=!0;if($){if(t.method!==void 0){let E=a;if(t.method!=="Delete"){let f={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0;if($){if(t.protocol!==void 0){let E=a;if(typeof t.protocol!="string"){let f={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0;if($)if(t.schema!==void 0){let E=a;if(typeof t.schema!="string"){let f={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var $=E===a}else var $=!0}}}}else{let T={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[T]:s.push(T),a++}var P=U===a;if(P&&c)c=!1,l=[l,2];else{P&&(c=!0,l=2,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0,b.schema=!0));let T=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let f;if(t.interface===void 0&&(f="interface")||t.method===void 0&&(f="method")){let y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};s===null?s=[y]:s.push(y),a++}else{if(t.interface!==void 0){let y=a;if(t.interface!=="Records"){let w={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var N=y===a}else var N=!0;if(N){if(t.method!==void 0){let y=a;if(t.method!=="Write"){let _={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.schema!==void 0){let y=a;if(typeof t.schema!="string"){let _={instancePath:e+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let _={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N){if(t.contextId!==void 0){let y=a;if(typeof t.contextId!="string"){let _={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0;if(N)if(t.protocolPath!==void 0){let y=a;if(typeof t.protocolPath!="string"){let _={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[_]:s.push(_),a++}var N=y===a}else var N=!0}}}}}}else{let f={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),a++}var P=T===a;if(P&&c)c=!1,l=[l,3];else{P&&(c=!0,l=3,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.schema=!0,b.protocol=!0,b.contextId=!0,b.protocolPath=!0));let f=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let _;if(t.interface===void 0&&(_="interface")||t.method===void 0&&(_="method")){let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:_},message:"must have required property '"+_+"'"};s===null?s=[x]:s.push(x),a++}else{if(t.interface!==void 0){let x=a;if(t.interface!=="Records"){let v={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[v]:s.push(v),a++}var L=x===a}else var L=!0;if(L){if(t.method!==void 0){let x=a;if(t.method!=="Query"){let D={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[D]:s.push(D),a++}var L=x===a}else var L=!0;if(L)if(t.protocol!==void 0){let x=a;if(typeof t.protocol!="string"){let D={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[D]:s.push(D),a++}var L=x===a}else var L=!0}}}else{let _={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[_]:s.push(_),a++}var P=f===a;if(P&&c)c=!1,l=[l,4];else{P&&(c=!0,l=4,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0));let _=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.interface===void 0&&(D="interface")||t.method===void 0&&(D="method")){let K={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};s===null?s=[K]:s.push(K),a++}else{if(t.interface!==void 0){let K=a;if(t.interface!=="Records"){let M={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[M]:s.push(M),a++}var F=K===a}else var F=!0;if(F){if(t.method!==void 0){let K=a;if(t.method!=="Subscribe"){let j={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[j]:s.push(j),a++}var F=K===a}else var F=!0;if(F)if(t.protocol!==void 0){let K=a;if(typeof t.protocol!="string"){let j={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[j]:s.push(j),a++}var F=K===a}else var F=!0}}}else{let D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[D]:s.push(D),a++}var P=_===a;P&&c?(c=!1,l=[l,5]):P&&(c=!0,l=5,b!==!0&&(b=b||{},b.interface=!0,b.method=!0,b.protocol=!0))}}}}if(c)a=u,s!==null&&(u?s.length=u:s=null);else{let U={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return s===null?s=[U]:s.push(U),a++,Py.errors=s,!1}return Py.errors=s,d.props=b,a===0}Py.evaluated={dynamicProps:!0,dynamicItems:!1};function Ha(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Ha.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.delegated===void 0&&(c="delegated")||t.scope===void 0&&(c="scope"))return Ha.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="description"||m==="delegated"||m==="scope"||m==="conditions")){return Ha.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.description!==void 0){let m=a;if(typeof t.description!="string")return Ha.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.delegated!==void 0){let m=a;if(typeof t.delegated!="boolean")return Ha.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var u=m===a}else var u=!0;if(u){if(t.scope!==void 0){let m=a;Py(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:o})||(s=s===null?Py.errors:s.concat(Py.errors),a=s.length);var u=m===a}else var u=!0;if(u)if(t.conditions!==void 0){let m=t.conditions,p=a;if(a===a)if(m&&typeof m=="object"&&!Array.isArray(m)){let S=a;for(let A in m)if(A!=="publication"){return Ha.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(S===a&&m.publication!==void 0){let A=m.publication;if(typeof A!="string")return Ha.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(A==="Required"||A==="Prohibited"))return Ha.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:YF.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return Ha.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=p===a}else var u=!0}}}}}else return Ha.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ha.errors=s,a===0}Ha.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Hwe=xy;function xy(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=xy.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u=a;for(let c in t)if(c!=="description"){return xy.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}if(u===a&&t.description!==void 0&&typeof t.description!="string")return xy.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return xy.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return xy.errors=s,a===0}xy.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Vwe=P2;function P2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=P2.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(P2.errors=s,a===0):(P2.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}P2.evaluated={dynamicProps:!1,dynamicItems:!1};var Jwe=T2;function T2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=T2.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(T2.errors=s,a===0):(T2.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}T2.evaluated={dynamicProps:!1,dynamicItems:!1};var Ywe=Ci;var FF=new RegExp(".*","u"),Cb={$id:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}},required:["rootKeyId","publicKeyJwk"]},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-prune","co-update","create","delete","prune","read","update"]}}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a role record type",type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-update","create","delete","query","subscribe","read","update"]}}}}]}},$role:{$comment:"When `true`, this turns a record into `role` that may be used within a context/sub-context",type:"boolean"},$size:{type:"object",additionalProperties:!1,properties:{min:{type:"number",minimum:0},max:{type:"number",minimum:0}}},$tags:{type:"object",minProperties:1,properties:{$requiredTags:{type:"array",items:{type:"string"}},$allowUndefinedTags:{type:"boolean"}},patternProperties:{"^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$":{type:"object",additionalProperties:!1,properties:{type:{enum:["string","number","integer","boolean","array"]},items:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}},contains:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$":{}}}}}},patternProperties:{"^[^$].*$":{$ref:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json"}}},zF=new RegExp("^[^$].*$","u"),Zwe=new RegExp("^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$","u"),Xwe=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$","u"),GF=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$","u"),gR={validate:Pr};function Pr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Pr.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let E=a;for(let k in t)if(!(k==="$encryption"||k==="$actions"||k==="$role"||k==="$size"||k==="$tags"||zF.test(k))){return Pr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(E===a){if(t.$encryption!==void 0){let k=t.$encryption,f=a;if(a===f)if(k&&typeof k=="object"&&!Array.isArray(k)){let y;if(k.rootKeyId===void 0&&(y="rootKeyId")||k.publicKeyJwk===void 0&&(y="publicKeyJwk"))return Pr.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{let w=a;for(let _ in k)if(!(_==="rootKeyId"||_==="publicKeyJwk")){return Pr.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_},message:"must NOT have additional properties"}],!1;break}if(w===a){if(k.rootKeyId!==void 0){let _=a;if(typeof k.rootKeyId!="string")return Pr.errors=[{instancePath:e+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=_===a}else var u=!0;if(u)if(k.publicKeyJwk!==void 0){let _=a;en(k.publicKeyJwk,{instancePath:e+"/$encryption/publicKeyJwk",parentData:k,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:o})||(s=s===null?en.errors:s.concat(en.errors),a=s.length);var u=_===a}else var u=!0}}}else return Pr.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=f===a}else var c=!0;if(c){if(t.$actions!==void 0){let k=t.$actions,f=a;if(a===f)if(Array.isArray(k)){if(k.length<1)return Pr.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var l=!0;let w=k.length;for(let _=0;_<w;_++){let x=k[_],v=a;if(!(x&&typeof x=="object"&&!Array.isArray(x)))return Pr.errors=[{instancePath:e+"/$actions/"+_,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;let D=a,K=!1,M=null,j=a;if(x&&typeof x=="object"&&!Array.isArray(x)){let V;if(x.who===void 0&&(V="who")||x.can===void 0&&(V="can")){let H={instancePath:e+"/$actions/"+_,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[H]:s.push(H),a++}else{let H=a;for(let X in x)if(!(X==="who"||X==="of"||X==="can")){let ee={instancePath:e+"/$actions/"+_,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"};s===null?s=[ee]:s.push(ee),a++;break}if(H===a){if(x.who!==void 0){let X=x.who,ee=a;if(typeof X!="string"){let ue={instancePath:e+"/$actions/"+_+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ue]:s.push(ue),a++}if(!(X==="anyone"||X==="author"||X==="recipient")){let ue={instancePath:e+"/$actions/"+_+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:Cb.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};s===null?s=[ue]:s.push(ue),a++}var m=ee===a}else var m=!0;if(m){if(x.of!==void 0){let X=a;if(typeof x.of!="string"){let ue={instancePath:e+"/$actions/"+_+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ue]:s.push(ue),a++}var m=X===a}else var m=!0;if(m)if(x.can!==void 0){let X=x.can,ee=a;if(a===ee)if(Array.isArray(X))if(X.length<1){let ae={instancePath:e+"/$actions/"+_+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[ae]:s.push(ae),a++}else{var p=!0;let ae=X.length;for(let ce=0;ce<ae;ce++){let pe=X[ce],Ee=a;if(typeof pe!="string"){let le={instancePath:e+"/$actions/"+_+"/can/"+ce,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[le]:s.push(le),a++}if(!(pe==="co-delete"||pe==="co-prune"||pe==="co-update"||pe==="create"||pe==="delete"||pe==="prune"||pe==="read"||pe==="update")){let le={instancePath:e+"/$actions/"+_+"/can/"+ce,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/enum",keyword:"enum",params:{allowedValues:Cb.properties.$actions.items.oneOf[0].properties.can.items.enum},message:"must be equal to one of the allowed values"};s===null?s=[le]:s.push(le),a++}var p=Ee===a;if(!p)break}}else{let ae={instancePath:e+"/$actions/"+_+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[ae]:s.push(ae),a++}var m=ee===a}else var m=!0}}}}var A=j===a;if(A){K=!0,M=0;var g=!0}let J=a;if(x&&typeof x=="object"&&!Array.isArray(x)){let V;if(x.role===void 0&&(V="role")||x.can===void 0&&(V="can")){let H={instancePath:e+"/$actions/"+_,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[H]:s.push(H),a++}else{if(x.role!==void 0){let H=a;if(typeof x.role!="string"){let X={instancePath:e+"/$actions/"+_+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[X]:s.push(X),a++}var b=H===a}else var b=!0;if(b)if(x.can!==void 0){let H=x.can,X=a;if(a===X)if(Array.isArray(H))if(H.length<1){let ue={instancePath:e+"/$actions/"+_+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[ue]:s.push(ue),a++}else{var S=!0;let ue=H.length;for(let ae=0;ae<ue;ae++){let ce=H[ae],pe=a;if(typeof ce!="string"){let Ue={instancePath:e+"/$actions/"+_+"/can/"+ae,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ue]:s.push(Ue),a++}if(!(ce==="co-delete"||ce==="co-update"||ce==="create"||ce==="delete"||ce==="query"||ce==="subscribe"||ce==="read"||ce==="update")){let Ue={instancePath:e+"/$actions/"+_+"/can/"+ae,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/enum",keyword:"enum",params:{allowedValues:Cb.properties.$actions.items.oneOf[1].properties.can.items.enum},message:"must be equal to one of the allowed values"};s===null?s=[Ue]:s.push(Ue),a++}var S=pe===a;if(!S)break}}else{let ue={instancePath:e+"/$actions/"+_+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[ue]:s.push(ue),a++}var b=X===a}else var b=!0}}var A=J===a;if(A&&K?(K=!1,M=[M,1]):A&&(K=!0,M=1,g!==!0&&(g=g||{},g.role=!0,g.can=!0)),K)a=D,s!==null&&(D?s.length=D:s=null);else{let V={instancePath:e+"/$actions/"+_,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:M},message:"must match exactly one schema in oneOf"};return s===null?s=[V]:s.push(V),a++,Pr.errors=s,!1}var l=v===a;if(!l)break}}}else return Pr.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=f===a}else var c=!0;if(c){if(t.$role!==void 0){let k=a;if(typeof t.$role!="boolean")return Pr.errors=[{instancePath:e+"/$role",schemaPath:"#/properties/%24role/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var c=k===a}else var c=!0;if(c){if(t.$size!==void 0){let k=t.$size,f=a;if(a===f)if(k&&typeof k=="object"&&!Array.isArray(k)){let w=a;for(let _ in k)if(!(_==="min"||_==="max")){return Pr.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_},message:"must NOT have additional properties"}],!1;break}if(w===a){if(k.min!==void 0){let _=k.min,x=a;if(a===x)if(typeof _=="number"&&isFinite(_)){if(_<0||isNaN(_))return Pr.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Pr.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var I=x===a}else var I=!0;if(I)if(k.max!==void 0){let _=k.max,x=a;if(a===x)if(typeof _=="number"&&isFinite(_)){if(_<0||isNaN(_))return Pr.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Pr.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var I=x===a}else var I=!0}}else return Pr.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=f===a}else var c=!0;if(c){if(t.$tags!==void 0){let k=t.$tags,f=a;if(a===f)if(k&&typeof k=="object"&&!Array.isArray(k)){if(Object.keys(k).length<1)return Pr.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;if(k.$requiredTags!==void 0){let w=k.$requiredTags,_=a;if(a===_)if(Array.isArray(w)){var P=!0;let x=w.length;for(let v=0;v<x;v++){let D=a;if(typeof w[v]!="string")return Pr.errors=[{instancePath:e+"/$tags/$requiredTags/"+v,schemaPath:"#/properties/%24tags/properties/%24requiredTags/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var P=D===a;if(!P)break}}else return Pr.errors=[{instancePath:e+"/$tags/$requiredTags",schemaPath:"#/properties/%24tags/properties/%24requiredTags/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var $=_===a}else var $=!0;if($){if(k.$allowUndefinedTags!==void 0){let w=a;if(typeof k.$allowUndefinedTags!="boolean")return Pr.errors=[{instancePath:e+"/$tags/$allowUndefinedTags",schemaPath:"#/properties/%24tags/properties/%24allowUndefinedTags/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var $=w===a}else var $=!0;if($){var N={};N.$requiredTags=!0,N.$allowUndefinedTags=!0;for(let w in k)if(Zwe.test(w)){let _=k[w];if(a===a)if(_&&typeof _=="object"&&!Array.isArray(_)){let v=a;for(let D in _)if(!(D==="type"||D==="items"||D==="contains"||Xwe.test(D))){return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:D},message:"must NOT have additional properties"}],!1;break}if(v===a){if(_.type!==void 0){let D=_.type,K=a;if(!(D==="string"||D==="number"||D==="integer"||D==="boolean"||D==="array"))return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/type/enum",keyword:"enum",params:{allowedValues:Cb.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var L=K===a}else var L=!0;if(L){if(_.items!==void 0){let D=_.items,K=a;if(a===K)if(D&&typeof D=="object"&&!Array.isArray(D)){if(D.type!==void 0){let j=D.type,J=a;if(!(j==="string"||j==="number"||j==="integer"))return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1")+"/items/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/properties/type/enum",keyword:"enum",params:{allowedValues:Cb.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var F=J===a}else var F=!0;if(F){var U={};U.type=!0;for(let j in D)GF.test(j)&&(U[j]=!0)}}else return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1")+"/items",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=K===a}else var L=!0;if(L)if(_.contains!==void 0){let D=_.contains,K=a;if(a===K)if(D&&typeof D=="object"&&!Array.isArray(D)){if(D.type!==void 0){let j=D.type,J=a;if(!(j==="string"||j==="number"||j==="integer"))return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/properties/type/enum",keyword:"enum",params:{allowedValues:Cb.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.contains.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var G=J===a}else var G=!0;if(G){var q={};q.type=!0;for(let j in D)GF.test(j)&&(q[j]=!0)}}else return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=K===a}else var L=!0}}}else return Pr.errors=[{instancePath:e+"/$tags/"+w.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;N[w]=!0}}}}else return Pr.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=f===a}else var c=!0;if(c){var T=!0;for(let k in t)if(zF.test(k)){let f=a;gR.validate(t[k],{instancePath:e+"/"+k.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:t,parentDataProperty:k,rootData:i,dynamicAnchors:o})||(s=s===null?gR.validate.errors:s.concat(gR.validate.errors),a=s.length);var T=f===a;if(!T)break}}}}}}}}else return Pr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Pr.errors=s,a===0}Pr.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Ci(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Ci.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let g;if(t.protocol===void 0&&(g="protocol")||t.published===void 0&&(g="published")||t.types===void 0&&(g="types")||t.structure===void 0&&(g="structure"))return Ci.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{let b=a;for(let S in t)if(!(S==="protocol"||S==="published"||S==="types"||S==="structure")){return Ci.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.protocol!==void 0){let S=a;if(typeof t.protocol!="string")return Ci.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=S===a}else var u=!0;if(u){if(t.published!==void 0){let S=a;if(typeof t.published!="boolean")return Ci.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var u=S===a}else var u=!0;if(u){if(t.types!==void 0){let S=t.types,A=a;if(a===A)if(S&&typeof S=="object"&&!Array.isArray(S)){var c={};for(let P in S)if(FF.test(P)){let $=S[P];if(a===a)if($&&typeof $=="object"&&!Array.isArray($)){let L=a;for(let F in $)if(!(F==="schema"||F==="dataFormats")){return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"}],!1;break}if(L===a){if($.schema!==void 0){let F=a;if(typeof $.schema!="string")return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=F===a}else var l=!0;if(l)if($.dataFormats!==void 0){let F=$.dataFormats,U=a;if(a===U)if(Array.isArray(F)){if(F.length<1)return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var m=!0;let q=F.length;for(let T=0;T<q;T++){let E=a;if(typeof F[T]!="string")return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+T,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=E===a;if(!m)break}}}else return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var l=U===a}else var l=!0}}else return Ci.errors=[{instancePath:e+"/types/"+P.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;c[P]=!0}}else return Ci.errors=[{instancePath:e+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=A===a}else var u=!0;if(u)if(t.structure!==void 0){let S=t.structure,A=a;if(a===A)if(S&&typeof S=="object"&&!Array.isArray(S)){var p={};for(let P in S)FF.test(P)&&(Pr(S[P],{instancePath:e+"/structure/"+P.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:S,parentDataProperty:P,rootData:i,dynamicAnchors:o})||(s=s===null?Pr.errors:s.concat(Pr.errors),a=s.length),p[P]=!0)}else return Ci.errors=[{instancePath:e+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=A===a}else var u=!0}}}}}else return Ci.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ci.errors=s,a===0}Ci.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Qwe=Pr,e1e=vs,WF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-configure.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}};function vs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=vs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.authorization===void 0&&(l="authorization")||t.descriptor===void 0&&(l="descriptor"))return vs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;{let m=a;for(let p in t)if(!(p==="authorization"||p==="descriptor")){return vs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a){if(t.authorization!==void 0){let p=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=p===a}else var u=!0;if(u)if(t.descriptor!==void 0){let p=t.descriptor,g=a;if(a===g)if(p&&typeof p=="object"&&!Array.isArray(p)){let S;if(p.interface===void 0&&(S="interface")||p.method===void 0&&(S="method")||p.messageTimestamp===void 0&&(S="messageTimestamp")||p.definition===void 0&&(S="definition"))return vs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let A=a;for(let I in p)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="definition")){return vs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(A===a){if(p.interface!==void 0){let I=p.interface,P=a;if(typeof I!="string")return vs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Protocols")return vs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:WF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.method!==void 0){let I=p.method,P=a;if(typeof I!="string")return vs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Configure")return vs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:WF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.messageTimestamp!==void 0){let I=p.messageTimestamp,P=a;if(a===a)if(typeof I=="string"){if(!Nn.test(I))return vs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return vs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c)if(p.definition!==void 0){let I=a;Ci(p.definition,{instancePath:e+"/descriptor/definition",parentData:p,parentDataProperty:"definition",rootData:i,dynamicAnchors:o})||(s=s===null?Ci.errors:s.concat(Ci.errors),a=s.length);var c=I===a}else var c=!0}}}}}else return vs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=g===a}else var u=!0}}}else return vs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return vs.errors=s,a===0}vs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var t1e=ii,HF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}}}}}};function ii(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=ii.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m;if(t.descriptor===void 0&&(m="descriptor"))return ii.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"}],!1;{let p=a;for(let g in t)if(!(g==="authorization"||g==="descriptor")){return ii.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;break}if(p===a){if(t.authorization!==void 0){let g=a;jn(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?jn.errors:s.concat(jn.errors),a=s.length);var u=g===a}else var u=!0;if(u)if(t.descriptor!==void 0){let g=t.descriptor,b=a;if(a===b)if(g&&typeof g=="object"&&!Array.isArray(g)){let A;if(g.interface===void 0&&(A="interface")||g.method===void 0&&(A="method")||g.messageTimestamp===void 0&&(A="messageTimestamp"))return ii.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let I=a;for(let P in g)if(!(P==="interface"||P==="method"||P==="messageTimestamp"||P==="filter")){return ii.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(I===a){if(g.interface!==void 0){let P=g.interface,$=a;if(typeof P!="string")return ii.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Protocols")return ii.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:HF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.method!==void 0){let P=g.method,$=a;if(typeof P!="string")return ii.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(P!=="Query")return ii.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:HF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=$===a}else var c=!0;if(c){if(g.messageTimestamp!==void 0){let P=g.messageTimestamp,$=a;if(a===a)if(typeof P=="string"){if(!Nn.test(P))return ii.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ii.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=$===a}else var c=!0;if(c)if(g.filter!==void 0){let P=g.filter,$=a;if(a===$)if(P&&typeof P=="object"&&!Array.isArray(P)){if(Object.keys(P).length<1)return ii.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let L=a;for(let F in P)if(!(F==="protocol"||F==="recipient")){return ii.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"}],!1;break}if(L===a){if(P.protocol!==void 0){let F=a;if(typeof P.protocol!="string")return ii.errors=[{instancePath:e+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=F===a}else var l=!0;if(l)if(P.recipient!==void 0){let F=P.recipient,U=a;if(a===a)if(typeof F=="string"){if(!Sy.test(F))return ii.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return ii.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=U===a}else var l=!0}}}else return ii.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=$===a}else var c=!0}}}}}else return ii.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=b===a}else var u=!0}}}else return ii.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ii.errors=s,a===0}ii.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var r1e=ws,VF={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-read.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function ws(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=ws.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.descriptor===void 0&&(l="descriptor"))return ws.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;{let m=a;for(let p in t)if(!(p==="authorization"||p==="descriptor")){return ws.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a){if(t.authorization!==void 0){let p=a;co(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?co.errors:s.concat(co.errors),a=s.length);var u=p===a}else var u=!0;if(u)if(t.descriptor!==void 0){let p=t.descriptor,g=a;if(a===g)if(p&&typeof p=="object"&&!Array.isArray(p)){let S;if(p.interface===void 0&&(S="interface")||p.method===void 0&&(S="method")||p.messageTimestamp===void 0&&(S="messageTimestamp")||p.filter===void 0&&(S="filter"))return ws.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let A=a;for(let I in p)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="filter")){return ws.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(A===a){if(p.interface!==void 0){let I=p.interface,P=a;if(typeof I!="string")return ws.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Records")return ws.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:VF.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.method!==void 0){let I=p.method,P=a;if(typeof I!="string")return ws.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Read")return ws.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:VF.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=P===a}else var c=!0;if(c){if(p.messageTimestamp!==void 0){let I=p.messageTimestamp,P=a;if(a===a)if(typeof I=="string"){if(!Nn.test(I))return ws.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ws.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=P===a}else var c=!0;if(c)if(p.filter!==void 0){let I=a;Je(p.filter,{instancePath:e+"/descriptor/filter",parentData:p,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?Je.errors:s.concat(Je.errors),a=s.length);var c=I===a}else var c=!0}}}}}else return ws.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=g===a}else var u=!0}}}else return ws.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ws.errors=s,a===0}ws.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var n1e=Je,i1e=en,o1e=jd;function jd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=jd.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.descriptorCid===void 0&&(c="descriptorCid"))return jd.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="descriptorCid"||m==="delegatedGrantId"||m==="permissionGrantId"||m==="protocolRole")){return jd.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.descriptorCid!==void 0){let m=a;if(typeof t.descriptorCid!="string")return jd.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.delegatedGrantId!==void 0){let m=a;if(typeof t.delegatedGrantId!="string")return jd.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.permissionGrantId!==void 0){let m=a;if(typeof t.permissionGrantId!="string")return jd.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u)if(t.protocolRole!==void 0){let m=a;if(typeof t.protocolRole!="string")return jd.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0}}}}}else return jd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return jd.errors=s,a===0}jd.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var s1e=Ws;function Ws(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Ws.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.descriptorCid===void 0&&(c="descriptorCid")||t.recordId===void 0&&(c="recordId"))return Ws.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=a;for(let m in t)if(!(m==="descriptorCid"||m==="recordId"||m==="contextId"||m==="attestationCid"||m==="encryptionCid"||m==="delegatedGrantId"||m==="permissionGrantId"||m==="protocolRole")){return Ws.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.descriptorCid!==void 0){let m=a;if(typeof t.descriptorCid!="string")return Ws.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.recordId!==void 0){let m=a;if(typeof t.recordId!="string")return Ws.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.contextId!==void 0){let m=a;if(typeof t.contextId!="string")return Ws.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.attestationCid!==void 0){let m=a;if(typeof t.attestationCid!="string")return Ws.errors=[{instancePath:e+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.encryptionCid!==void 0){let m=a;if(typeof t.encryptionCid!="string")return Ws.errors=[{instancePath:e+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.delegatedGrantId!==void 0){let m=a;if(typeof t.delegatedGrantId!="string")return Ws.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u){if(t.permissionGrantId!==void 0){let m=a;if(typeof t.permissionGrantId!="string")return Ws.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0;if(u)if(t.protocolRole!==void 0){let m=a;if(typeof t.protocolRole!="string")return Ws.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=m===a}else var u=!0}}}}}}}}}else return Ws.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ws.errors=s,a===0}Ws.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var a1e=Hs;function Hs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,d=Hs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Hs.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let b=a;for(let S in t)if(!(S==="gt"||S==="gte"||S==="lt"||S==="lte")){return Hs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.gt!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let P;if(t.gte===void 0&&(P="gte")){let $={};s===null?s=[$]:s.push($),a++}}var u=I===a;if(u)return Hs.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.gte!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.gt===void 0&&($="gt")){let N={};s===null?s=[N]:s.push(N),a++}}var l=I===a;if(l)return Hs.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.lt!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.lte===void 0&&($="lte")){let N={};s===null?s=[N]:s.push(N),a++}}var m=I===a;if(m)return Hs.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.lte!==void 0){let S=a,A=a,I=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.lt===void 0&&($="lt")){let N={};s===null?s=[N]:s.push(N),a++}}var p=I===a;if(p)return Hs.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=A,s!==null&&(A?s.length=A:s=null);var c=S===a}else var c=!0;if(c){if(t.gt!==void 0){let S=a;if(typeof t.gt!="string")return Hs.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=S===a}else var g=!0;if(g){if(t.gte!==void 0){let S=a;if(typeof t.gte!="string")return Hs.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=S===a}else var g=!0;if(g){if(t.lt!==void 0){let S=a;if(typeof t.lt!="string")return Hs.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=S===a}else var g=!0;if(g)if(t.lte!==void 0){let S=a;if(typeof t.lte!="string")return Hs.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=S===a}else var g=!0}}}}}}}}}else return Hs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Hs.errors=s,a===0}Hs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function vf(t,e){let r=vR[t];if(!r)throw new oe(ne.SchemaValidatorSchemaNotFound,`schema for ${t} not found.`);if(r(e),!r.errors)return;let[n]=r.errors,{instancePath:i,message:o,keyword:s}=n;if(i||(i=t),s==="additionalProperties"){let a=n.params.additionalProperty;throw new oe(ne.SchemaValidatorAdditionalPropertyNotAllowed,`${o}: ${i}: ${a}`)}if(s==="unevaluatedProperties"){let a=n.params.unevaluatedProperty;throw new oe(ne.SchemaValidatorUnevaluatedPropertyNotAllowed,`${o}: ${i}: ${a}`)}throw new oe(ne.SchemaValidatorFailure,`${i}: ${o}`)}var wR=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Ty=class t{constructor(e){this.cache=e||new LS(600)}static get singleton(){return t._singleton===void 0&&(t._singleton=new t),t._singleton}static verifySignatures(e,r){return wR(this,void 0,void 0,function*(){return yield t.singleton.verifySignatures(e,r)})}verifySignatures(e,r){return wR(this,void 0,void 0,function*(){let n=[];for(let i of e.signatures){let o,s=Qr.getKid(i),a=`${i.protected}.${e.payload}.${i.signature}`,d=yield this.cache.get(a);if(d===void 0){let c=yield t.getPublicKey(s,r);o=yield Qr.verifySignature(e.payload,i,c),yield this.cache.set(a,o)}else o=d;let u=Qr.extractDid(s);if(o)n.push(u);else throw new oe(ne.GeneralJwsVerifierInvalidSignature,`Signature verification failed for ${u}`)}return{signers:n}})}static getPublicKey(e,r){return wR(this,void 0,void 0,function*(){let n=Qr.extractDid(e),{didDocument:i}=yield r.resolve(n),{verificationMethod:o=[]}=i||{},s;for(let d of o)if(e.endsWith(d.id)){s=d;break}if(!s)throw new oe(ne.GeneralJwsVerifierGetPublicKeyNotFound,"public key needed to verify signature not found in DID Document");vf("JwkVerificationMethod",s);let{publicKeyJwk:a}=s;return a})}};h();h();var ky={};qr(ky,{code:()=>C2,decode:()=>G1e,encode:()=>z1e,name:()=>F1e});h();h();h();h();var c1e=["string","number","bigint","symbol"],d1e=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ZF(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(c1e.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(u1e(t))return"Buffer";let r=l1e(t);return r||"Object"}function u1e(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function l1e(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(d1e.includes(e))return e}h();var he=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};he.uint=new he(0,"uint",!0);he.negint=new he(1,"negint",!0);he.bytes=new he(2,"bytes",!0);he.string=new he(3,"string",!0);he.array=new he(4,"array",!1);he.map=new he(5,"map",!1);he.tag=new he(6,"tag",!1);he.float=new he(7,"float",!0);he.false=new he(7,"false",!0);he.true=new he(7,"true",!0);he.null=new he(7,"null",!0);he.undefined=new he(7,"undefined",!0);he.break=new he(7,"break",!0);var ze=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};h();h();var Ob=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",f1e=new TextDecoder,h1e=new TextEncoder;function GS(t){return Ob&&globalThis.Buffer.isBuffer(t)}function _R(t){return t instanceof Uint8Array?GS(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var tz=Ob?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):QF(t,e,r):(t,e,r)=>r-e>64?f1e.decode(t.subarray(e,r)):QF(t,e,r),rz=Ob?t=>t.length>64?globalThis.Buffer.from(t):XF(t):t=>t.length>64?h1e.encode(t):XF(t),Wu=t=>Uint8Array.from(t),$b=Ob?(t,e,r)=>GS(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),nz=Ob?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),_R(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},iz=Ob?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function oz(t,e){if(GS(t)&&GS(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function XF(t,e=1/0){let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function QF(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,d,u,c;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(c=(i&31)<<6|a&63,c>127&&(o=c));break;case 3:a=t[e+1],d=t[e+2],(a&192)===128&&(d&192)===128&&(c=(i&15)<<12|(a&63)<<6|d&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:a=t[e+1],d=t[e+2],u=t[e+3],(a&192)===128&&(d&192)===128&&(u&192)===128&&(c=(i&15)<<18|(a&63)<<12|(d&63)<<6|u&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return p1e(n)}var ez=4096;function p1e(t){let e=t.length;if(e<=ez)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ez));return r}var m1e=256,I2=class{constructor(e=m1e){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=iz(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=$b(n,0,this.cursor)}else r=nz(this.chunks,this.cursor);return e&&this.reset(),r}};h();var Kt="CBOR decode error:",xR="CBOR encode error:",k2=[];k2[23]=1;k2[24]=2;k2[25]=3;k2[26]=5;k2[27]=9;function wf(t,e,r){if(t.length-e<r)throw new Error(`${Kt} not enough data for type`)}h();h();var uo=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Va(t,e,r){wf(t,e,1);let n=t[e];if(r.strict===!0&&n<uo[0])throw new Error(`${Kt} integer encoded in more bytes than necessary (strict decode)`);return n}function Ja(t,e,r){wf(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<uo[1])throw new Error(`${Kt} integer encoded in more bytes than necessary (strict decode)`);return n}function Ya(t,e,r){wf(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<uo[2])throw new Error(`${Kt} integer encoded in more bytes than necessary (strict decode)`);return n}function Za(t,e,r){wf(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<uo[3])throw new Error(`${Kt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${Kt} integers outside of the safe integer range are not supported`)}function sz(t,e,r,n){return new ze(he.uint,Va(t,e+1,n),2)}function az(t,e,r,n){return new ze(he.uint,Ja(t,e+1,n),3)}function cz(t,e,r,n){return new ze(he.uint,Ya(t,e+1,n),5)}function dz(t,e,r,n){return new ze(he.uint,Za(t,e+1,n),9)}function jc(t,e){return Oo(t,0,e.value)}function Oo(t,e,r){if(r<uo[0]){let n=Number(r);t.push([e|n])}else if(r<uo[1]){let n=Number(r);t.push([e|24,n])}else if(r<uo[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<uo[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<uo[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${Kt} encountered BigInt larger than allowable range`)}}jc.encodedSize=function(e){return Oo.encodedSize(e.value)};Oo.encodedSize=function(e){return e<uo[0]?1:e<uo[1]?2:e<uo[2]?3:e<uo[3]?5:9};jc.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};h();function uz(t,e,r,n){return new ze(he.negint,-1-Va(t,e+1,n),2)}function lz(t,e,r,n){return new ze(he.negint,-1-Ja(t,e+1,n),3)}function fz(t,e,r,n){return new ze(he.negint,-1-Ya(t,e+1,n),5)}var ER=BigInt(-1),hz=BigInt(1);function pz(t,e,r,n){let i=Za(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new ze(he.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${Kt} integers outside of the safe integer range are not supported`);return new ze(he.negint,ER-BigInt(i),9)}function WS(t,e){let r=e.value,n=typeof r=="bigint"?r*ER-hz:r*-1-1;Oo(t,e.type.majorEncoded,n)}WS.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*ER-hz:r*-1-1;return n<uo[0]?1:n<uo[1]?2:n<uo[2]?3:n<uo[3]?5:9};WS.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};h();function R2(t,e,r,n){wf(t,e,r+n);let i=$b(t,e+r,e+r+n);return new ze(he.bytes,i,r+n)}function mz(t,e,r,n){return R2(t,e,1,r)}function yz(t,e,r,n){return R2(t,e,2,Va(t,e+1,n))}function gz(t,e,r,n){return R2(t,e,3,Ja(t,e+1,n))}function bz(t,e,r,n){return R2(t,e,5,Ya(t,e+1,n))}function vz(t,e,r,n){let i=Za(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Kt} 64-bit integer bytes lengths not supported`);return R2(t,e,9,i)}function HS(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===he.string?rz(t.value):t.value),t.encodedBytes}function Nb(t,e){let r=HS(e);Oo(t,e.type.majorEncoded,r.length),t.push(r)}Nb.encodedSize=function(e){let r=HS(e);return Oo.encodedSize(r.length)+r.length};Nb.compareTokens=function(e,r){return g1e(HS(e),HS(r))};function g1e(t,e){return t.length<e.length?-1:t.length>e.length?1:oz(t,e)}h();function D2(t,e,r,n,i){let o=r+n;wf(t,e,o);let s=new ze(he.string,tz(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=$b(t,e+r,e+o)),s}function wz(t,e,r,n){return D2(t,e,1,r,n)}function _z(t,e,r,n){return D2(t,e,2,Va(t,e+1,n),n)}function xz(t,e,r,n){return D2(t,e,3,Ja(t,e+1,n),n)}function Ez(t,e,r,n){return D2(t,e,5,Ya(t,e+1,n),n)}function Sz(t,e,r,n){let i=Za(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Kt} 64-bit integer string lengths not supported`);return D2(t,e,9,i,n)}var Az=Nb;h();function jb(t,e,r,n){return new ze(he.array,n,r)}function Pz(t,e,r,n){return jb(t,e,1,r)}function Tz(t,e,r,n){return jb(t,e,2,Va(t,e+1,n))}function Iz(t,e,r,n){return jb(t,e,3,Ja(t,e+1,n))}function kz(t,e,r,n){return jb(t,e,5,Ya(t,e+1,n))}function Rz(t,e,r,n){let i=Za(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Kt} 64-bit integer array lengths not supported`);return jb(t,e,9,i)}function Dz(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Kt} indefinite length items not allowed`);return jb(t,e,1,1/0)}function VS(t,e){Oo(t,he.array.majorEncoded,e.value)}VS.compareTokens=jc.compareTokens;VS.encodedSize=function(e){return Oo.encodedSize(e.value)};h();function Ub(t,e,r,n){return new ze(he.map,n,r)}function Mz(t,e,r,n){return Ub(t,e,1,r)}function Bz(t,e,r,n){return Ub(t,e,2,Va(t,e+1,n))}function Cz(t,e,r,n){return Ub(t,e,3,Ja(t,e+1,n))}function Oz(t,e,r,n){return Ub(t,e,5,Ya(t,e+1,n))}function $z(t,e,r,n){let i=Za(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Kt} 64-bit integer map lengths not supported`);return Ub(t,e,9,i)}function Nz(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Kt} indefinite length items not allowed`);return Ub(t,e,1,1/0)}function JS(t,e){Oo(t,he.map.majorEncoded,e.value)}JS.compareTokens=jc.compareTokens;JS.encodedSize=function(e){return Oo.encodedSize(e.value)};h();function jz(t,e,r,n){return new ze(he.tag,r,1)}function Uz(t,e,r,n){return new ze(he.tag,Va(t,e+1,n),2)}function Kz(t,e,r,n){return new ze(he.tag,Ja(t,e+1,n),3)}function qz(t,e,r,n){return new ze(he.tag,Ya(t,e+1,n),5)}function Lz(t,e,r,n){return new ze(he.tag,Za(t,e+1,n),9)}function YS(t,e){Oo(t,he.tag.majorEncoded,e.value)}YS.compareTokens=jc.compareTokens;YS.encodedSize=function(e){return Oo.encodedSize(e.value)};h();var E1e=20,S1e=21,A1e=22,P1e=23;function Fz(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Kt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new ze(he.null,null,1):new ze(he.undefined,void 0,1)}function zz(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Kt} indefinite length items not allowed`);return new ze(he.break,void 0,1)}function SR(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Kt} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Kt} Infinity values are not supported`)}return new ze(he.float,t,e)}function Gz(t,e,r,n){return SR(AR(t,e+1),3,n)}function Wz(t,e,r,n){return SR(PR(t,e+1),5,n)}function Hz(t,e,r,n){return SR(Zz(t,e+1),9,n)}function ZS(t,e,r){let n=e.value;if(n===!1)t.push([he.float.majorEncoded|E1e]);else if(n===!0)t.push([he.float.majorEncoded|S1e]);else if(n===null)t.push([he.float.majorEncoded|A1e]);else if(n===void 0)t.push([he.float.majorEncoded|P1e]);else{let i,o=!1;(!r||r.float64!==!0)&&(Jz(n),i=AR(Ud,1),n===i||Number.isNaN(n)?(Ud[0]=249,t.push(Ud.slice(0,3)),o=!0):(Yz(n),i=PR(Ud,1),n===i&&(Ud[0]=250,t.push(Ud.slice(0,5)),o=!0))),o||(T1e(n),i=Zz(Ud,1),Ud[0]=251,t.push(Ud.slice(0,9)))}}ZS.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Jz(n);let i=AR(Ud,1);if(n===i||Number.isNaN(n))return 3;if(Yz(n),i=PR(Ud,1),n===i)return 5}return 9};var Vz=new ArrayBuffer(9),Uc=new DataView(Vz,1),Ud=new Uint8Array(Vz,0);function Jz(t){if(t===1/0)Uc.setUint16(0,31744,!1);else if(t===-1/0)Uc.setUint16(0,64512,!1);else if(Number.isNaN(t))Uc.setUint16(0,32256,!1);else{Uc.setFloat32(0,t);let e=Uc.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Uc.setUint16(0,31744,!1);else if(r===0)Uc.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?Uc.setUint16(0,0):i<-14?Uc.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Uc.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function AR(t,e){if(t.length-e<2)throw new Error(`${Kt} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Yz(t){Uc.setFloat32(0,t,!1)}function PR(t,e){if(t.length-e<4)throw new Error(`${Kt} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function T1e(t){Uc.setFloat64(0,t,!1)}function Zz(t,e){if(t.length-e<8)throw new Error(`${Kt} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}ZS.compareTokens=jc.compareTokens;function Hr(t,e,r){throw new Error(`${Kt} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function XS(t){return()=>{throw new Error(`${Kt} ${t}`)}}var Me=[];for(let t=0;t<=23;t++)Me[t]=Hr;Me[24]=sz;Me[25]=az;Me[26]=cz;Me[27]=dz;Me[28]=Hr;Me[29]=Hr;Me[30]=Hr;Me[31]=Hr;for(let t=32;t<=55;t++)Me[t]=Hr;Me[56]=uz;Me[57]=lz;Me[58]=fz;Me[59]=pz;Me[60]=Hr;Me[61]=Hr;Me[62]=Hr;Me[63]=Hr;for(let t=64;t<=87;t++)Me[t]=mz;Me[88]=yz;Me[89]=gz;Me[90]=bz;Me[91]=vz;Me[92]=Hr;Me[93]=Hr;Me[94]=Hr;Me[95]=XS("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)Me[t]=wz;Me[120]=_z;Me[121]=xz;Me[122]=Ez;Me[123]=Sz;Me[124]=Hr;Me[125]=Hr;Me[126]=Hr;Me[127]=XS("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)Me[t]=Pz;Me[152]=Tz;Me[153]=Iz;Me[154]=kz;Me[155]=Rz;Me[156]=Hr;Me[157]=Hr;Me[158]=Hr;Me[159]=Dz;for(let t=160;t<=183;t++)Me[t]=Mz;Me[184]=Bz;Me[185]=Cz;Me[186]=Oz;Me[187]=$z;Me[188]=Hr;Me[189]=Hr;Me[190]=Hr;Me[191]=Nz;for(let t=192;t<=215;t++)Me[t]=jz;Me[216]=Uz;Me[217]=Kz;Me[218]=qz;Me[219]=Lz;Me[220]=Hr;Me[221]=Hr;Me[222]=Hr;Me[223]=Hr;for(let t=224;t<=243;t++)Me[t]=XS("simple values are not supported");Me[244]=Hr;Me[245]=Hr;Me[246]=Hr;Me[247]=Fz;Me[248]=XS("simple values are not supported");Me[249]=Gz;Me[250]=Wz;Me[251]=Hz;Me[252]=Hr;Me[253]=Hr;Me[254]=Hr;Me[255]=zz;var Kd=[];for(let t=0;t<24;t++)Kd[t]=new ze(he.uint,t,1);for(let t=-1;t>=-24;t--)Kd[31-t]=new ze(he.negint,t,1);Kd[64]=new ze(he.bytes,new Uint8Array(0),1);Kd[96]=new ze(he.string,"",1);Kd[128]=new ze(he.array,0,1);Kd[160]=new ze(he.map,0,1);Kd[244]=new ze(he.false,!1,1);Kd[245]=new ze(he.true,!0,1);Kd[246]=new ze(he.null,null,1);function Xz(t){switch(t.type){case he.false:return Wu([244]);case he.true:return Wu([245]);case he.null:return Wu([246]);case he.bytes:return t.value.length?void 0:Wu([64]);case he.string:return t.value===""?Wu([96]):void 0;case he.array:return t.value===0?Wu([128]):void 0;case he.map:return t.value===0?Wu([160]):void 0;case he.uint:return t.value<24?Wu([Number(t.value)]):void 0;case he.negint:if(t.value>=-24)return Wu([31-Number(t.value)])}}var k1e={float64:!1,mapSorter:M1e,quickEncodeToken:Xz};function R1e(){let t=[];return t[he.uint.major]=jc,t[he.negint.major]=WS,t[he.bytes.major]=Nb,t[he.string.major]=Az,t[he.array.major]=VS,t[he.map.major]=JS,t[he.tag.major]=YS,t[he.float.major]=ZS,t}var Qz=R1e(),TR=new I2,e3=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${xR} object contains circular references`);return new t(r,e)}},ep={null:new ze(he.null,null),undefined:new ze(he.undefined,void 0),true:new ze(he.true,!0),false:new ze(he.false,!1),emptyArray:new ze(he.array,0),emptyMap:new ze(he.map,0)},tp={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new ze(he.float,t):t>=0?new ze(he.uint,t):new ze(he.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new ze(he.uint,t):new ze(he.negint,t)},Uint8Array(t,e,r,n){return new ze(he.bytes,t)},string(t,e,r,n){return new ze(he.string,t)},boolean(t,e,r,n){return t?ep.true:ep.false},null(t,e,r,n){return ep.null},undefined(t,e,r,n){return ep.undefined},ArrayBuffer(t,e,r,n){return new ze(he.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new ze(he.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[ep.emptyArray,new ze(he.break)]:ep.emptyArray;n=e3.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=QS(s,r,n);return r.addBreakTokens?[new ze(he.array,t.length),i,new ze(he.break)]:[new ze(he.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[ep.emptyMap,new ze(he.break)]:ep.emptyMap;n=e3.createCheck(n,t);let a=[],d=0;for(let u of o)a[d++]=[QS(u,r,n),QS(i?t.get(u):t[u],r,n)];return D1e(a,r),r.addBreakTokens?[new ze(he.map,s),a,new ze(he.break)]:[new ze(he.map,s),a]}};tp.Map=tp.Object;tp.Buffer=tp.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))tp[`${t}Array`]=tp.DataView;function QS(t,e={},r){let n=ZF(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||tp[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=tp[n];if(!o)throw new Error(`${xR} unsupported type: ${n}`);return o(t,n,e,r)}function D1e(t,e){e.mapSorter&&t.sort(e.mapSorter)}function M1e(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=Qz[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function eG(t,e,r,n){if(Array.isArray(e))for(let i of e)eG(t,i,r,n);else r[e.type.major](t,e,n)}function B1e(t,e,r){let n=QS(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,r),a=new I2(s);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return _R(a.chunks[0])}}return TR.reset(),eG(TR,n,e,r),TR.toBytes(!0)}function IR(t,e){return e=Object.assign({},k1e,e),B1e(t,Qz,e)}h();var C1e={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},kR=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Kd[e];if(r===void 0){let n=Me[e];if(!n)throw new Error(`${Kt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this.pos,i,this.options)}return this.pos+=r.encodedLength,r}},M2=Symbol.for("DONE"),t3=Symbol.for("BREAK");function O1e(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=B2(e,r);if(o===t3){if(t.value===1/0)break;throw new Error(`${Kt} got unexpected break to lengthed array`)}if(o===M2)throw new Error(`${Kt} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function $1e(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=B2(e,r);if(a===t3){if(t.value===1/0)break;throw new Error(`${Kt} got unexpected break to lengthed map`)}if(a===M2)throw new Error(`${Kt} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Kt} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${Kt} found repeat map key "${a}"`);let d=B2(e,r);if(d===M2)throw new Error(`${Kt} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,d):i[a]=d}return n?o:i}function B2(t,e){if(t.done())return M2;let r=t.next();if(r.type===he.break)return t3;if(r.type.terminal)return r.value;if(r.type===he.array)return O1e(r,t,e);if(r.type===he.map)return $1e(r,t,e);if(r.type===he.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=B2(t,e);return e.tags[r.value](n)}throw new Error(`${Kt} tag not supported (${r.value})`)}throw new Error("unsupported")}function RR(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Kt} data to decode must be a Uint8Array`);e=Object.assign({},C1e,e);let r=e.tokenizer||new kR(t,e),n=B2(r,e);if(n===M2)throw new Error(`${Kt} did not find any content to decode`);if(n===t3)throw new Error(`${Kt} got unexpected break`);if(!r.done())throw new Error(`${Kt} too many terminals, data makes no sense`);return n}var tG=42;function j1e(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=wy.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new ze(he.tag,tG),new ze(he.bytes,r)]}function U1e(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function K1e(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var q1e={float64:!0,typeEncoders:{Object:j1e,undefined:U1e,number:K1e}};function L1e(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return wy.decode(t.subarray(1))}var rG={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};rG.tags[tG]=L1e;var F1e="dag-cbor",C2=113,z1e=t=>IR(t,q1e),G1e=t=>RR(t,rG);h();h();h();h();var ba=uk({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Irt=uk({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});h();var O2=qs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mrt=qs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Brt=qs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Crt=qs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ort=qs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$rt=qs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nrt=qs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),jrt=qs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DR=qs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});h();var nG=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return H1e(r,MR(t),e||ba.encoder);default:return V1e(r,MR(t),e||O2.encoder)}};var iG=new WeakMap,MR=t=>{let e=iG.get(t);if(e==null){let r=new Map;return iG.set(t,r),r}return e},Or=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==J1e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=py(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&zL(e.multihash,n.multihash)}toString(e){return nG(this,e)}toJSON(){return{"/":nG(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||oG(n,i,o.bytes))}else if(r[Y1e]===!0){let{version:n,multihash:i,code:o}=r,s=TS(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==$2)throw new Error(`Version 0 CID must use dag-pb (code: ${$2}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=oG(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,$2,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=Bd(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new gb(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,m]=yb(e.subarray(r));return r+=m,l},i=n(),o=$2;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),d=n(),u=r+d,c=u-s;return{version:i,codec:o,multihashCode:a,digestSize:d,multihashSize:c,size:u}}static parse(e,r){let[n,i]=W1e(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return MR(o).set(n,e),o}},W1e=(t,e)=>{switch(t[0]){case"Q":{let r=e||ba;return[ba.prefix,r.decode(`${ba.prefix}${t}`)]}case ba.prefix:{let r=e||ba;return[ba.prefix,r.decode(t)]}case O2.prefix:{let r=e||O2;return[O2.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},H1e=(t,e,r)=>{let{prefix:n}=r;if(n!==ba.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},V1e=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},$2=112,J1e=18,oG=(t,e,r)=>{let n=hy(t),i=n+hy(e),o=new Uint8Array(i+r.byteLength);return fy(t,o,0),fy(e,o,n),o.set(r,i),o},Y1e=Symbol.for("@ipld/js-cid/CID");h();var rp=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},r3=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},lo=function(t){return this instanceof lo?(this.v=t,this):new lo(t)},n3=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(p){return new Promise(function(g,b){o.push([m,p,g,b])>1||a(m,p)})})}function a(m,p){try{d(n[m](p))}catch(g){l(o[0][3],g)}}function d(m){m.value instanceof lo?Promise.resolve(m.value.v).then(u,c):l(o[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function l(m,p){m(p),o.shift(),o.length&&a(o[0][0],o[0][1])}},N2=class{open(){return rp(this,void 0,void 0,function*(){})}close(){return rp(this,void 0,void 0,function*(){})}put(e,r,n){return rp(this,void 0,void 0,function*(){return e})}get(e,r){return rp(this,void 0,void 0,function*(){return new Uint8Array})}has(e,r){return rp(this,void 0,void 0,function*(){return!1})}delete(e,r){return rp(this,void 0,void 0,function*(){})}isEmpty(e){return rp(this,void 0,void 0,function*(){return!0})}putMany(e,r){return n3(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=r3(e),c;c=yield lo(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield lo(this.put(l.cid,l.block,r)),yield yield lo(l.cid)}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield lo(s.call(u)))}finally{if(o)throw o.error}}})}getMany(e,r){return n3(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=r3(e),c;c=yield lo(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield yield lo({cid:l,block:yield lo(this.get(l,r))})}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield lo(s.call(u)))}finally{if(o)throw o.error}}})}getAll(e){return n3(this,arguments,function*(){var n,i,o,s;let a=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);try{for(var d=!0,u=r3(a),c;c=yield lo(u.next()),n=c.done,!n;d=!0){s=c.value,d=!1;let[l,m]=s;yield yield lo({cid:Or.decode(l),block:m})}}catch(l){i={error:l}}finally{try{!d&&!n&&(o=u.return)&&(yield lo(o.call(u)))}finally{if(i)throw i.error}}})}deleteMany(e,r){return n3(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=r3(e),c;c=yield lo(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield lo(this.delete(l,r)),yield yield lo(l)}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield lo(s.call(u)))}finally{if(o)throw o.error}}})}clear(){return rp(this,void 0,void 0,function*(){})}};h();var sxe=Ut(Xa(),1);h();h();h();function X1e(t){return t[Symbol.asyncIterator]!=null}function Q1e(t,e=1){return e=Number(e),X1e(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}var j2=Q1e;async function*U2(t,e=1){for await(let r of j2(t,e)){let n=r.map(async i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}h();h();h();h();function np(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _f(t=0){return globalThis.Buffer?.alloc!=null?np(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function Qa(t=0){return globalThis.Buffer?.allocUnsafe!=null?np(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}h();function K2(t,e){if(globalThis.Buffer!=null)return np(globalThis.Buffer.concat(t,e));e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=Qa(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return np(r)}h();function cG(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var uG=Symbol.for("@achingbrain/uint8arraylist");function dG(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function i3(t){return!!t?.[uG]}var Kb=class t{bufs;length;[uG]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(i3(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(i3(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=dG(this.bufs,e);return r.buf[r.index]}set(e,r){let n=dG(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(i3(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return K2(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:K2(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),o=new t;return o.length=i,o.bufs=[...n],o}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,d=a+s.byteLength;if(i=d,e>=d)continue;let u=e>=a&&e<d,c=r>a&&r<=d;if(u&&c){if(e===a&&r===d){n.push(s);break}let l=e-a;n.push(s.subarray(l,l+(r-e)));break}if(u){if(e===0){n.push(s);continue}n.push(s.subarray(e-a));continue}if(c){if(r===d){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!i3(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let l=0;l<o;l++)s[l]=-1;for(let l=0;l<i;l++)s[n[l]]=l;let a=s,d=this.byteLength-n.byteLength,u=n.byteLength-1,c;for(let l=r;l<=d;l+=c){c=0;for(let m=u;m>=0;m--){let p=this.get(l+m);if(n[m]!==p){c=Math.max(1,m-a[p]);break}}if(c===0)return l}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=Qa(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=_f(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=_f(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=_f(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=Qa(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=_f(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=_f(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=_f(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=_f(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=_f(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof t)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!cG(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new t;return n.bufs=e,r==null&&(r=e.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}};var e2e=262144,lG=(t={})=>{let e=t.chunkSize??e2e;return async function*(n){let i=new Kb,o=0,s=!1;for await(let a of n)for(i.append(a),o+=a.length;o>=e;)if(yield i.slice(0,e),s=!0,e===i.length)i=new Kb,o=0;else{let d=new Kb;d.append(i.sublist(e)),i=d,o-=e}(!s||o>0)&&(yield i.subarray(0,o))}};h();var Dy={};qr(Dy,{code:()=>W2,createLink:()=>MG,createNode:()=>DG,decode:()=>xf,encode:()=>tc,name:()=>Z2e,prepare:()=>ec,validate:()=>WR});h();h();var KR={};qr(KR,{base32:()=>Fb,base32hex:()=>f2e,base32hexpad:()=>p2e,base32hexpadupper:()=>m2e,base32hexupper:()=>h2e,base32pad:()=>u2e,base32padupper:()=>l2e,base32upper:()=>d2e,base32z:()=>y2e});h();h();var qb={};qr(qb,{coerce:()=>Hu,empty:()=>fG,equals:()=>BR,fromHex:()=>r2e,fromString:()=>CR,isBinary:()=>n2e,toHex:()=>t2e,toString:()=>OR});h();var fG=new Uint8Array(0);function t2e(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function r2e(t){let e=t.match(/../g);return e!=null?new Uint8Array(e.map(r=>parseInt(r,16))):fG}function BR(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Hu(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function n2e(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}function CR(t){return new TextEncoder().encode(t)}function OR(t){return new TextDecoder().decode(t)}h();function i2e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,d=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var b=0,S=0,A=0,I=g.length;A!==I&&g[A]===0;)A++,b++;for(var P=(I-A)*c+1>>>0,$=new Uint8Array(P);A!==I;){for(var N=g[A],L=0,F=P-1;(N!==0||L<S)&&F!==-1;F--,L++)N+=256*$[F]>>>0,$[F]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");S=L,A++}for(var U=P-S;U!==P&&$[U]===0;)U++;for(var G=d.repeat(b);U<P;++U)G+=t.charAt($[U]);return G}function m(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var b=0;if(g[b]!==" "){for(var S=0,A=0;g[b]===d;)S++,b++;for(var I=(g.length-b)*u+1>>>0,P=new Uint8Array(I);g[b];){var $=r[g.charCodeAt(b)];if($===255)return;for(var N=0,L=I-1;($!==0||N<A)&&L!==-1;L--,N++)$+=a*P[L]>>>0,P[L]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");A=N,b++}if(g[b]!==" "){for(var F=I-A;F!==I&&P[F]===0;)F++;for(var U=new Uint8Array(S+(I-F)),G=S;F!==I;)U[G++]=P[F++];return U}}}function p(g){var b=m(g);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:m,decode:p}}var o2e=i2e,s2e=o2e,hG=s2e;var $R=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},NR=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pG(this,e)}},jR=class{decoders;constructor(e){this.decoders=e}or(e){return pG(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function pG(t,e){return new jR({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var UR=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new $R(e,r,n),this.decoder=new NR(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Lb({name:t,prefix:e,encode:r,decode:n}){return new UR(t,e,r,n)}function ip({name:t,prefix:e,alphabet:r}){let{encode:n,decode:i}=hG(r,t);return Lb({prefix:e,name:t,encode:n,decode:o=>Hu(i(o))})}function a2e(t,e,r,n){let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,d=0,u=0;for(let c=0;c<o;++c){let l=i[t[c]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|l,a+=r,a>=8&&(a-=8,s[u++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return s}function c2e(t,e,r){let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o}function oi({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Lb({prefix:e,name:t,encode(i){return c2e(i,n,r)},decode(i){return a2e(i,n,r,t)}})}var Fb=oi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d2e=oi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u2e=oi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l2e=oi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f2e=oi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h2e=oi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p2e=oi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m2e=oi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y2e=oi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qR={};qr(qR,{base58btc:()=>Vu,base58flickr:()=>g2e});h();var Vu=ip({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g2e=ip({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});h();h();h();var b2e=gG,mG=128,v2e=127,w2e=~v2e,_2e=Math.pow(2,31);function gG(t,e,r){e=e||[],r=r||0;for(var n=r;t>=_2e;)e[r++]=t&255|mG,t/=128;for(;t&w2e;)e[r++]=t&255|mG,t>>>=7;return e[r]=t|0,gG.bytes=r-n+1,e}var x2e=LR,E2e=128,yG=127;function LR(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw LR.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&yG)<<i:(s&yG)*Math.pow(2,i),i+=7}while(s>=E2e);return LR.bytes=o-n,r}var S2e=Math.pow(2,7),A2e=Math.pow(2,14),P2e=Math.pow(2,21),T2e=Math.pow(2,28),I2e=Math.pow(2,35),k2e=Math.pow(2,42),R2e=Math.pow(2,49),D2e=Math.pow(2,56),M2e=Math.pow(2,63),B2e=function(t){return t<S2e?1:t<A2e?2:t<P2e?3:t<T2e?4:t<I2e?5:t<k2e?6:t<R2e?7:t<D2e?8:t<M2e?9:10},C2e={encode:b2e,decode:x2e,encodingLength:B2e},O2e=C2e,q2=O2e;function L2(t,e=0){return[q2.decode(t,e),q2.decode.bytes]}function zb(t,e,r=0){return q2.encode(t,e,r),e}function Gb(t){return q2.encodingLength(t)}function Ry(t,e){let r=e.byteLength,n=Gb(t),i=n+Gb(r),o=new Uint8Array(i+r);return zb(t,o,0),zb(r,o,n),o.set(e,i),new Wb(t,r,e,o)}function bG(t){let e=Hu(t),[r,n]=L2(e),[i,o]=L2(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Wb(r,i,s,e)}function vG(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&BR(t.bytes,r.bytes)}}var Wb=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};h();function wG(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return N2e(r,FR(t),e??Vu.encoder);default:return j2e(r,FR(t),e??Fb.encoder)}}var _G=new WeakMap;function FR(t){let e=_G.get(t);if(e==null){let r=new Map;return _G.set(t,r),r}return e}var va=class t{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==z2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==U2e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ry(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&vG(e.multihash,n.multihash)}toString(e){return wG(this,e)}toJSON(){return{"/":wG(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s??xG(n,i,o.bytes))}else if(r[K2e]===!0){let{version:n,multihash:i,code:o}=r,s=bG(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==z2)throw new Error(`Version 0 CID must use dag-pb (code: ${z2}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=xG(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,z2,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=Hu(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Wb(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,m]=L2(e.subarray(r));return r+=m,l},i=n(),o=z2;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),d=n(),u=r+d,c=u-s;return{version:i,codec:o,multihashCode:a,digestSize:d,multihashSize:c,size:u}}static parse(e,r){let[n,i]=$2e(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return FR(o).set(n,e),o}};function $2e(t,e){switch(t[0]){case"Q":{let r=e??Vu;return[Vu.prefix,r.decode(`${Vu.prefix}${t}`)]}case Vu.prefix:{let r=e??Vu;return[Vu.prefix,r.decode(t)]}case Fb.prefix:{let r=e??Fb;return[Fb.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function N2e(t,e,r){let{prefix:n}=r;if(n!==Vu.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i}function j2e(t,e,r){let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i}var z2=112,U2e=18;function xG(t,e,r){let n=Gb(t),i=n+Gb(e),o=new Uint8Array(i+r.byteLength);return zb(t,o,0),zb(e,o,n),o.set(r,i),o}var K2e=Symbol.for("@ipld/js-cid/CID");h();var q2e=new TextDecoder;function zR(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function s3(t,e){let r;[r,e]=zR(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function EG(t,e){let r;return[r,e]=zR(t,e),[r&7,r>>3,e]}function L2e(t){let e={},r=t.length,n=0;for(;n<r;){let i,o;if([i,o,n]=EG(t,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=s3(t,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=s3(t,n),e.Name=q2e.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=zR(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function SG(t){let e=t.length,r=0,n,i=!1,o;for(;r<e;){let a,d;if([a,d,r]=EG(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(d===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=s3(t,r),n&&(i=!0)}else if(d===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=s3(t,r),n.push(L2e(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${d}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}h();var PG=new TextEncoder,AG=2**32,F2e=2**31;function z2e(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=G2(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=PG.encode(t.Name);r-=n.length,e.set(n,r),r=G2(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=G2(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function TG(t){let e=W2e(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=G2(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){let o=z2e(t.Links[i],r.subarray(0,n));n-=o,n=G2(r,n,o)-1,r[n]=18}return r}function G2e(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+Hb(r)}if(typeof t.Name=="string"){let r=PG.encode(t.Name).length;e+=1+r+Hb(r)}return typeof t.Tsize=="number"&&(e+=1+Hb(t.Tsize)),e}function W2e(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+Hb(r)}if(t.Links)for(let r of t.Links){let n=G2e(r);e+=1+n+Hb(n)}return e}function G2(t,e,r){e-=Hb(r);let n=e;for(;r>=F2e;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function Hb(t){return t%2===0&&t++,Math.floor((H2e(t)+6)/7)}function H2e(t){let e=0;return t>=AG&&(t=Math.floor(t/AG),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+V2e[t]}var V2e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];h();var J2e=["Data","Links"],Y2e=["Hash","Name","Tsize"],GR=new TextEncoder;function kG(t,e){if(t===e)return 0;let r=t.Name?GR.encode(t.Name):[],n=e.Name?GR.encode(e.Name):[],i=r.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(r[s]!==n[s]){i=r[s],o=n[s];break}return i<o?-1:o<i?1:0}function IG(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function RG(t){if(typeof t.asCID=="object"){let r=va.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=va.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=va.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=va.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function ec(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=GR.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(RG),e.Links.sort(kG);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function WR(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!IG(t,J2e))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!IG(r,Y2e))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&kG(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function DG(t,e=[]){return ec({Data:t,Links:e})}function MG(t,e,r){return RG({Hash:r,Name:t,Tsize:e})}function BG(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}var Z2e="dag-pb",W2=112;function tc(t){WR(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),TG(e)}function xf(t){let e=BG(t),r=SG(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{let o={};try{o.Hash=va.decode(i.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(o.Name=i.Name),i.Tsize!==void 0&&(o.Tsize=i.Tsize),o})),n}h();var b9=Ut(Xa(),1);h();h();h();h();h();var X2e=Math.pow(2,7),Q2e=Math.pow(2,14),e_e=Math.pow(2,21),CG=Math.pow(2,28),OG=Math.pow(2,35),$G=Math.pow(2,42),NG=Math.pow(2,49),Vs=128,op=127;function H2(t){if(t<X2e)return 1;if(t<Q2e)return 2;if(t<e_e)return 3;if(t<CG)return 4;if(t<OG)return 5;if(t<$G)return 6;if(t<NG)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function jG(t,e,r=0){switch(H2(t)){case 8:e[r++]=t&255|Vs,t/=128;case 7:e[r++]=t&255|Vs,t/=128;case 6:e[r++]=t&255|Vs,t/=128;case 5:e[r++]=t&255|Vs,t/=128;case 4:e[r++]=t&255|Vs,t>>>=7;case 3:e[r++]=t&255|Vs,t>>>=7;case 2:e[r++]=t&255|Vs,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function UG(t,e){let r=t[e],n=0;if(n+=r&op,r<Vs||(r=t[e+1],n+=(r&op)<<7,r<Vs)||(r=t[e+2],n+=(r&op)<<14,r<Vs)||(r=t[e+3],n+=(r&op)<<21,r<Vs)||(r=t[e+4],n+=(r&op)*CG,r<Vs)||(r=t[e+5],n+=(r&op)*OG,r<Vs)||(r=t[e+6],n+=(r&op)*$G,r<Vs)||(r=t[e+7],n+=(r&op)*NG,r<Vs))return n;throw new RangeError("Could not decode varint")}h();var HR=new Float32Array([-0]),sp=new Uint8Array(HR.buffer);function KG(t,e,r){HR[0]=t,e[r]=sp[0],e[r+1]=sp[1],e[r+2]=sp[2],e[r+3]=sp[3]}function qG(t,e){return sp[0]=t[e],sp[1]=t[e+1],sp[2]=t[e+2],sp[3]=t[e+3],HR[0]}var VR=new Float64Array([-0]),_s=new Uint8Array(VR.buffer);function LG(t,e,r){VR[0]=t,e[r]=_s[0],e[r+1]=_s[1],e[r+2]=_s[2],e[r+3]=_s[3],e[r+4]=_s[4],e[r+5]=_s[5],e[r+6]=_s[6],e[r+7]=_s[7]}function FG(t,e){return _s[0]=t[e],_s[1]=t[e+1],_s[2]=t[e+2],_s[3]=t[e+3],_s[4]=t[e+4],_s[5]=t[e+5],_s[6]=t[e+6],_s[7]=t[e+7],VR[0]}h();var t_e=BigInt(Number.MAX_SAFE_INTEGER),r_e=BigInt(Number.MIN_SAFE_INTEGER),rc=class t{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return My;if(e<t_e&&e>r_e)return this.fromNumber(Number(e));let r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>zG&&(i=0n,++n>zG&&(n=0n))),new t(Number(i),Number(n))}static fromNumber(e){if(e===0)return My;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new t(n,i)}static from(e){return typeof e=="number"?t.fromNumber(e):typeof e=="bigint"?t.fromBigInt(e):typeof e=="string"?t.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new t(e.low>>>0,e.high>>>0):My}},My=new rc(0,0);My.toBigInt=function(){return 0n};My.zzEncode=My.zzDecode=function(){return this};My.length=function(){return 1};var zG=4294967296n;h();function GG(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function WG(t,e,r){if(r-e<1)return"";let i,o=[],s=0,a;for(;e<r;)a=t[e++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function JR(t,e,r){let n=r,i,o;for(let s=0;s<t.length;++s)i=t.charCodeAt(s),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((o=t.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function qd(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function a3(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}var YR=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,qd(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw qd(this,4);return a3(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw qd(this,4);return a3(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw qd(this,4);let e=qG(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw qd(this,4);let e=FG(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw qd(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let e=this.bytes();return WG(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw qd(this,e);this.pos+=e}else do if(this.pos>=this.len)throw qd(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new rc(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw qd(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw qd(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw qd(this,8);let e=a3(this.buf,this.pos+=4),r=a3(this.buf,this.pos+=4);return new rc(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=UG(this.buf,this.pos);return this.pos+=H2(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function ZR(t){return new YR(t instanceof Uint8Array?t:t.subarray())}function V2(t,e,r){let n=ZR(t);return e.decode(n,void 0,r)}h();h();h();h();h();var XR={};qr(XR,{base10:()=>n_e});h();var n_e=ip({prefix:"9",name:"base10",alphabet:"0123456789"});var QR={};qr(QR,{base16:()=>i_e,base16upper:()=>o_e});h();var i_e=oi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o_e=oi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var e9={};qr(e9,{base2:()=>s_e});h();var s_e=oi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var t9={};qr(t9,{base256emoji:()=>l_e});h();var VG=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),a_e=VG.reduce((t,e,r)=>(t[r]=e,t),[]),c_e=VG.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function d_e(t){return t.reduce((e,r)=>(e+=a_e[r],e),"")}function u_e(t){let e=[];for(let r of t){let n=c_e[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var l_e=Lb({prefix:"\u{1F680}",name:"base256emoji",encode:d_e,decode:u_e});var r9={};qr(r9,{base36:()=>f_e,base36upper:()=>h_e});h();var f_e=ip({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),h_e=ip({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var n9={};qr(n9,{base64:()=>p_e,base64pad:()=>m_e,base64url:()=>y_e,base64urlpad:()=>g_e});h();var p_e=oi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),m_e=oi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),y_e=oi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),g_e=oi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var i9={};qr(i9,{base8:()=>b_e});h();var b_e=oi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var o9={};qr(o9,{identity:()=>v_e});h();var v_e=Lb({prefix:"\0",name:"identity",encode:t=>OR(t),decode:t=>CR(t)});h();var Wit=new TextEncoder,Hit=new TextDecoder;h();var s9={};qr(s9,{identity:()=>S_e});h();var JG=0,x_e="identity",YG=Hu;function E_e(t){return Ry(JG,YG(t))}var S_e={code:JG,name:x_e,encode:YG,digest:E_e};var c9={};qr(c9,{sha256:()=>A_e,sha512:()=>P_e});h();h();function By({name:t,code:e,encode:r}){return new a9(t,e,r)}var a9=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Ry(this.code,r):r.then(n=>Ry(this.code,n))}else throw Error("Unknown type, must be binary type")}};function XG(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}var A_e=By({name:"sha2-256",code:18,encode:XG("SHA-256")}),P_e=By({name:"sha2-512",code:19,encode:XG("SHA-512")});h();h();h();h();h();h();var d9={...o9,...e9,...i9,...XR,...QR,...KR,...r9,...qR,...n9,...t9},got={...c9,...s9};function eW(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var QG=eW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),u9=eW("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Qa(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),T_e={utf8:QG,"utf-8":QG,hex:d9.base16,latin1:u9,ascii:u9,binary:u9,...d9},tW=T_e;function c3(t,e="utf8"){let r=tW[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?np(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}h();function l9(t){let e=t??8192,r=e>>>1,n,i=e;return function(s){if(s<1||s>r)return Qa(s);i+s>e&&(n=Qa(e),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var Cy=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function f9(){}var p9=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},I_e=l9();function k_e(t){return globalThis.Buffer!=null?Qa(t):I_e(t)}var Y2=class{len;head;tail;states;constructor(){this.len=0,this.head=new Cy(f9,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Cy(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new m9((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(d3,10,rc.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let r=rc.fromBigInt(e);return this._push(d3,r.length(),r)}uint64Number(e){return this._push(jG,H2(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let r=rc.fromBigInt(e).zzEncode();return this._push(d3,r.length(),r)}sint64Number(e){let r=rc.fromNumber(e).zzEncode();return this._push(d3,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(h9,1,e?1:0)}fixed32(e){return this._push(J2,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let r=rc.fromBigInt(e);return this._push(J2,4,r.lo)._push(J2,4,r.hi)}fixed64Number(e){let r=rc.fromNumber(e);return this._push(J2,4,r.lo)._push(J2,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(KG,4,e)}double(e){return this._push(LG,8,e)}bytes(e){let r=e.length>>>0;return r===0?this._push(h9,1,0):this.uint32(r)._push(D_e,r,e)}string(e){let r=GG(e);return r!==0?this.uint32(r)._push(JR,r,e):this._push(h9,1,0)}fork(){return this.states=new p9(this),this.head=this.tail=new Cy(f9,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Cy(f9,0,0),this.len=0),this}ldelim(){let e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next,r=k_e(this.len),n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function h9(t,e,r){e[r]=t&255}function R_e(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}var m9=class extends Cy{next;constructor(e,r){super(R_e,e,r),this.next=void 0}};function d3(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function J2(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function D_e(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(Y2.prototype.bytes=function(t){let e=t.length>>>0;return this.uint32(e),e>0&&this._push(M_e,e,t),this},Y2.prototype.string=function(t){let e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(B_e,e,t),this});function M_e(t,e,r){e.set(t,r)}function B_e(t,e,r){t.length<40?JR(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(c3(t),r)}function y9(){return new Y2}function Z2(t,e){let r=y9();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}h();h();var Vb;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Vb||(Vb={}));function u3(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function g9(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return u3("enum",Vb.VARINT,r,n)}h();function X2(t,e){return u3("message",Vb.LENGTH_DELIMITED,t,e)}var Ld;(function(t){let e;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(e=t.DataType||(t.DataType={}));let r;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(r||(r={})),function(i){i.codec=()=>g9(r)}(e=t.DataType||(t.DataType={}));let n;t.codec=()=>(n==null&&(n=X2((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),t.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let a of i.blocksizes)o.uint32(32),o.uint64(a);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),l3.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let d=i.uint32();switch(d>>>3){case 1:s.Type=t.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=l3.codec().decode(i,i.uint32());break;default:i.skipType(d&7);break}}return s})),n),t.encode=i=>Z2(i,t.codec()),t.decode=i=>V2(i,t.codec())})(Ld||(Ld={}));var l3;(function(t){let e;t.codec=()=>(e==null&&(e=X2((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Z2(r,t.codec()),t.decode=r=>V2(r,t.codec())})(l3||(l3={}));var rW;(function(t){let e;t.codec=()=>(e==null&&(e=X2((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Z2(r,t.codec()),t.decode=r=>V2(r,t.codec())})(rW||(rW={}));var nW={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},C_e=["directory","hamt-sharded-directory"],iW=parseInt("0644",8),oW=parseInt("0755",8),fo=class t{static unmarshal(e){let r=Ld.decode(e),n=new t({type:nW[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){let{type:r,data:n,blockSizes:i,hashType:o,fanout:s,mtime:a,mode:d}=e;if(r!=null&&!Object.values(nW).includes(r))throw(0,b9.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=d,this.mtime=a}set mode(e){e==null?this._mode=this.isDirectory()?oW:iW:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return C_e.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Ld.DataType.Raw;break;case"directory":e=Ld.DataType.Directory;break;case"file":e=Ld.DataType.File;break;case"metadata":e=Ld.DataType.Metadata;break;case"symlink":e=Ld.DataType.Symlink;break;case"hamt-sharded-directory":e=Ld.DataType.HAMTShard;break;default:throw(0,b9.default)(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===iW&&!this.isDirectory()&&(n=void 0),n===oW&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Ld.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var Jb={};qr(Jb,{code:()=>ap,decode:()=>N_e,encode:()=>$_e,name:()=>O_e});h();var O_e="raw",ap=85,$_e=t=>Bd(t),N_e=t=>Bd(t);h();var si=class extends Event{constructor(e,r){super(e),this.detail=r}};h();var Fd=async(t,e,r)=>{r.codec==null&&(r.codec=Dy);let n=await ps.digest(t),i=Or.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function sW(t){return async function*(r,n){let i=0n;for await(let o of r.content)yield async()=>{let s,a={codec:Dy,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(a.codec=Jb,a.cidVersion=1):(s=new fo({type:t.leafType,data:o}),o=tc({Data:s.marshal(),Links:[]}));let d=await Fd(o,n,a);return i+=BigInt(o.byteLength),t.onProgress?.(new si("unixfs:importer:progress:file:write",{bytesWritten:i,cid:d,path:r.path})),{cid:d,unixfs:s,size:BigInt(o.length),block:o}}}}h();var v9=Ut(Xa(),1);h();var aW=async(t,e,r)=>{let n=new fo({type:"directory",mtime:t.mtime,mode:t.mode}),i=tc(ec({Data:n.marshal()})),o=await Fd(i,e,r),s=t.path;return{cid:o,path:s,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};h();async function*j_e(t,e,r){let n=-1,i;for await(let o of U2(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...o,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...o,block:void 0}}i!=null&&(yield i)}function cW(t){return t.single===!0}var U_e=(t,e,r)=>async function(i){if(i.length===1&&cW(i[0])&&r.reduceSingleLeafToSelf){let c=i[0],l=c.block;return cW(c)&&(t.mtime!==void 0||t.mode!==void 0)&&(c.unixfs=new fo({type:"file",mtime:t.mtime,mode:t.mode,data:c.block}),l={Data:c.unixfs.marshal(),Links:[]},c.block=tc(ec(l)),c.cid=await Fd(c.block,e,{...r,cidVersion:r.cidVersion}),c.size=BigInt(c.block.length)),r.onProgress?.(new si("unixfs:importer:progress:file:layout",{cid:c.cid,path:c.originalPath})),{cid:c.cid,path:t.path,unixfs:c.unixfs,size:c.size,originalPath:c.originalPath}}let o=new fo({type:"file",mtime:t.mtime,mode:t.mode}),s=i.filter(c=>c.cid.code===ap&&c.size>0||c.unixfs!=null&&c.unixfs.data==null&&c.unixfs.fileSize()>0n?!0:!!c.unixfs?.data?.length).map(c=>c.cid.code===ap?(o.addBlockSize(c.size),{Name:"",Tsize:Number(c.size),Hash:c.cid}):(c.unixfs==null||c.unixfs.data==null?o.addBlockSize(c.unixfs?.fileSize()??0n):o.addBlockSize(BigInt(c.unixfs.data.length)),{Name:"",Tsize:Number(c.size),Hash:c.cid})),a={Data:o.marshal(),Links:s},d=tc(ec(a)),u=await Fd(d,e,r);return r.onProgress?.(new si("unixfs:importer:progress:file:layout",{cid:u,path:t.originalPath})),{cid:u,path:t.path,unixfs:o,size:BigInt(d.length+a.Links.reduce((c,l)=>c+(l.Tsize??0),0)),originalPath:t.originalPath,block:d}},dW=async(t,e,r)=>r.layout(j_e(t,e,r),U_e(t,e,r));function K_e(t){return Symbol.iterator in t}function q_e(t){return Symbol.asyncIterator in t}function L_e(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(K_e(t))return async function*(){yield*t}();if(q_e(t))return t}catch{throw(0,v9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,v9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function uW(t){return async function*(r,n){for await(let i of r){let o;if(i.path!=null&&(o=i.path,i.path=i.path.split("/").filter(s=>s!=null&&s!==".").join("/")),F_e(i)){let s={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let a=0n;for await(let d of t.chunker(t.chunkValidator(L_e(i.content)))){let u=BigInt(d.byteLength);a+=u,t.onProgress?.(new si("unixfs:importer:progress:file:read",{bytesRead:a,chunkSize:u,path:i.path})),yield d}}(),originalPath:o};yield async()=>dW(s,n,t)}else if(i.path!=null){let s={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:o};yield async()=>aW(s,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function F_e(t){return t.content!=null}h();var w9=Ut(Xa(),1);var lW=()=>async function*(e){for await(let r of e){if(r.length===void 0)throw(0,w9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof r=="string"||r instanceof String)yield E2(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw(0,w9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}};h();h();var z_e=174;function _9(t){let e=t?.maxChildrenPerNode??z_e;return async function r(n,i){let o=[];for await(let s of j2(n,e))o.push(await i(s));return o.length>1?r(o,i):o[0]}}h();h();h();h();h();h();var Ju=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},Q2=Or.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),e_=Or.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var Oy=class extends Ju{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(let[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(let[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?e_.bytes.byteLength:Q2.bytes.byteLength));return this.nodeSize}async*flush(e){let r=[];for(let[d,u]of this._children.entries()){let c=u;if(u instanceof Ju)for await(let l of u.flush(e))c=l,yield l;c.size!=null&&c.cid!=null&&r.push({Name:d,Tsize:Number(c.size),Hash:c.cid})}let n=new fo({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},o=tc(ec(i)),s=await Fd(o,e,this.options),a=o.length+i.Links.reduce((d,u)=>d+(u.Tsize==null?0:u.Tsize),0);this.cid=s,this.size=a,yield{cid:s,unixfs:n,path:this.path,size:BigInt(a)}}};h();h();h();var h3=Ut(pW(),1);function G_e(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var xat=By({name:"murmur3-32",code:35,encode:t=>G_e(h3.default.x86.hash32(t))}),p3=By({name:"murmur3-128",code:34,encode:t=>qb.fromHex(h3.default.x64.hash128(t))}),Eat=By({name:"murmur3-x64-64",code:34,encode:t=>qb.fromHex(h3.default.x64.hash128(t)).subarray(0,8)});h();h();var bW=Ut(gW(),1);var Yu=class t{_options;_popCount;_parent;_posAtParent;_children;key;constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new bW.default,this.key=null}async put(e,r){let n=await this._findNewBucketAndPos(e);n.bucket._putAt(n,e,r)}async get(e){let r=await this._findChild(e);if(r!=null)return r.value}async del(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof t?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof t?yield*r.eachLeafSeries():yield r}serialize(e,r){let n=[];return r(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof t?i.push(o.serialize(e,r)):i.push(e(o,s))),i),n))}async asyncTransform(e,r){return vW(this,e,r)}toJSON(){return this.serialize(Y_e,Z_e)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof t)&&n!=null&&n.key===e)return n}async _findPlace(e){let r=this._options.hash(typeof e=="string"?c3(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof t?i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){let n=new t(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);let i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(J_e);if(e!=null&&!(e instanceof t)){let r=e.hash;r.untake(this._options.bits);let n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function J_e(t){return!!t}function Y_e(t,e){return t.key}function Z_e(t){return t}async function vW(t,e,r){let n=[];for(let i of t._children.compactArray())if(i instanceof Yu)await vW(i,e,r);else{let o=await e(i);n.push({bitField:t._children.bitField(),children:o})}return r(n)}h();h();var X_e=[255,254,252,248,240,224,192,128],Q_e=[1,3,7,15,31,63,127,255],m3=class{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,r),a=exe(i,o-s,s);n=(n<<s)+a,r-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function exe(t,e,r){let n=txe(e,r);return(t&n)>>>e}function txe(t,e){return X_e[t]&Q_e[Math.min(e+t-1,7)]}function wW(t){function e(r){return r instanceof y3?r:new y3(r,t)}return e}var y3=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),r),s=i.take(o);n=(n<<o)+s,r-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?K2([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new m3(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function g3(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:t.bits??8,hash:wW(t.hashFn)};return new Yu(e)}async function rxe(t){return(await p3.encode(t)).slice(0,8).reverse()}var _W=BigInt(34),x9=class extends Ju{_bucket;constructor(e,r){super(e,r),this._bucket=g3({hashFn:rxe,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=SW(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let r of EW(this._bucket,e,this,this.options))yield{...r,path:this.path}}},xW=x9;async function*EW(t,e,r,n){let i=t._children,o=[],s=0n;for(let p=0;p<i.length;p++){let g=i.get(p);if(g==null)continue;let b=p.toString(16).toUpperCase().padStart(2,"0");if(g instanceof Yu){let S;for await(let A of EW(g,e,null,n))S=A;if(S==null)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:b,Tsize:Number(S.size),Hash:S.cid}),s+=S.size}else if(nxe(g.value)){let S=g.value,A;for await(let P of S.flush(e))A=P,yield A;if(A==null)throw new Error("Did not flush dir");let I=b+g.key;o.push({Name:I,Tsize:Number(A.size),Hash:A.cid}),s+=A.size}else{let S=g.value;if(S.cid==null)continue;let A=b+g.key,I=S.size;o.push({Name:A,Tsize:Number(I),Hash:S.cid}),s+=BigInt(I??0)}}let a=Uint8Array.from(i.bitField().reverse()),d=new fo({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:_W,mtime:r?.mtime,mode:r?.mode}),u={Data:d.marshal(),Links:o},c=tc(ec(u)),l=await Fd(c,e,n),m=BigInt(c.byteLength)+s;yield{cid:l,unixfs:d,size:m}}function nxe(t){return typeof t.flush=="function"}function SW(t,e,r){let n=t._children,i=[];for(let d=0;d<n.length;d++){let u=n.get(d);if(u==null)continue;let c=d.toString(16).toUpperCase().padStart(2,"0");if(u instanceof Yu){let l=SW(u,null,r);i.push({Name:c,Tsize:Number(l),Hash:r.cidVersion===0?Q2:e_})}else if(typeof u.value.flush=="function"){let m=u.value.nodeSize();i.push({Name:c+u.key,Tsize:Number(m),Hash:r.cidVersion===0?Q2:e_})}else{let l=u.value;if(l.cid==null)continue;let m=c+u.key,p=l.size;i.push({Name:m,Tsize:Number(p),Hash:l.cid})}}let o=Uint8Array.from(n.bitField().reverse()),s=new fo({type:"hamt-sharded-directory",data:o,fanout:BigInt(t.tableSize()),hashType:_W,mtime:e?.mtime,mode:e?.mode});return tc(ec({Data:s.marshal(),Links:i})).length}async function E9(t,e,r,n){let i=e;e instanceof Oy&&e.estimateNodeSize()>r&&(i=await ixe(e,n));let o=i.parent;if(o!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await o.put(i.parentKey,i)}return E9(i,o,r,n)}return i}async function ixe(t,e){let r=new xW({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}h();var AW=(t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)??[]).filter(Boolean);async function oxe(t,e,r){let n=AW(t.path??""),i=n.length-1,o=e,s="";for(let a=0;a<n.length;a++){let d=n[a];s+=`${s!==""?"/":""}${d}`;let u=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,u)await o.put(d,t),e=await E9(null,o,r.shardSplitThresholdBytes,r);else{let c=await o.get(d);(c==null||!(c instanceof Ju))&&(c=new Oy({root:!1,dir:!0,parent:o,parentKey:d,path:s,dirty:!0,flat:!0,mtime:c?.unixfs?.mtime,mode:c?.unixfs?.mode},r)),await o.put(d,c),o=c}}return e}async function*PW(t,e){if(!(t instanceof Ju)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function TW(t){return async function*(r,n){let i=new Oy({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),o,s=!1;for await(let a of r){if(a==null)continue;let d=`${a.originalPath??""}`.split("/")[0];d!=null&&d!==""&&(o==null?(o=d,s=!0):o!==d&&(s=!1)),i=await oxe(a,i,t),(a.unixfs==null||!a.unixfs.isDirectory())&&(yield a)}if(t.wrapWithDirectory||s&&i.childCount()>1)yield*PW(i,n);else for await(let a of i.eachChildSeries())a!=null&&(yield*PW(a.child,n))}}async function*r_(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];let i=r.wrapWithDirectory??!1,o=r.shardSplitThresholdBytes??262144,s=r.cidVersion??1,a=r.rawLeaves??!0,d=r.leafType??"file",u=r.fileImportConcurrency??50,c=r.blockWriteConcurrency??10,l=r.reduceSingleLeafToSelf??!0,m=r.chunker??lG(),p=r.chunkValidator??lW(),g=r.dagBuilder??uW({chunker:m,chunkValidator:p,wrapWithDirectory:i,layout:r.layout??_9(),bufferImporter:r.bufferImporter??sW({cidVersion:s,rawLeaves:a,leafType:d,onProgress:r.onProgress}),blockWriteConcurrency:c,reduceSingleLeafToSelf:l,cidVersion:s,onProgress:r.onProgress}),b=r.treeBuilder??TW({wrapWithDirectory:i,shardSplitThresholdBytes:o,cidVersion:s,onProgress:r.onProgress});for await(let S of b(U2(g(n,e),u),e))yield{cid:S.cid,path:S.path,unixfs:S.unixfs,size:S.size}}var S9=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},IW=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},kW={[ps.code]:ps},RW={[C2]:ky},Sn=class{static computeCid(e,r=C2,n=ps.code){return S9(this,void 0,void 0,function*(){let i=RW[r];if(!i)throw new oe(ne.ComputeCidCodecNotSupported,`codec [${r}] not supported`);let o=kW[n];if(!o)throw new oe(ne.ComputeCidMultihashNotSupported,`multihash code [${n}] not supported`);let s=i.encode(e),a=yield o.digest(s);return(yield Or.createV1(i.code,a)).toString()})}static parseCid(e){let r=Or.parse(e).toV1();if(!RW[r.code])throw new oe(ne.ParseCidCodecNotSupported,`codec [${r.code}] not supported`);if(!kW[r.multihash.code])throw new oe(ne.ParseCidMultihashNotSupported,`multihash code [${r.multihash.code}] not supported`);return r}static computeDagPbCidFromBytes(e){var r,n,i,o;return S9(this,void 0,void 0,function*(){let s=r_([{content:e}],new N2,{cidVersion:1}),a;try{for(var d=!0,u=IW(s),c;c=yield u.next(),r=c.done,!r;d=!0)o=c.value,d=!1,a=o}catch(l){n={error:l}}finally{try{!d&&!r&&(i=u.return)&&(yield i.call(u))}finally{if(n)throw n.error}}return a?a.cid.toString():""})}static computeDagPbCidFromStream(e){var r,n,i,o;return S9(this,void 0,void 0,function*(){let s=r_([{content:e}],new N2,{cidVersion:1}),a;try{for(var d=!0,u=IW(s),c;c=yield u.next(),r=c.done,!r;d=!0)o=c.value,d=!1,a=o}catch(l){n={error:l}}finally{try{!d&&!r&&(i=u.return)&&(yield i.call(u))}finally{if(n)throw n.error}}return a?a.cid.toString():""})}};h();var m4=Ut(m5(),1),Lp=Ut(ere(),1),yC=Ut(h4(),1),p4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})};Lp.ECIES_CONFIG.isEphemeralKeyCompressed=!0;var Hf=class t{static aes256CtrEncrypt(e,r,n){return p4(this,void 0,void 0,function*(){let i=m4.createCipheriv("aes-256-ctr",e,r),o=new yC.Readable({read(){}});return n.on("data",s=>{let a=i.update(s);o.push(a)}),n.on("end",()=>{let s=i.final();o.push(s),o.push(null)}),n.on("error",s=>{o.emit("error",s)}),o})}static aes256CtrDecrypt(e,r,n){return p4(this,void 0,void 0,function*(){let i=m4.createDecipheriv("aes-256-ctr",e,r),o=new yC.Readable({read(){}});return n.on("data",s=>{let a=i.update(s);o.push(a)}),n.on("end",()=>{let s=i.final();o.push(s),o.push(null)}),n.on("error",s=>{o.emit("error",s)}),o})}static eciesSecp256k1Encrypt(e,r){return p4(this,void 0,void 0,function*(){let n=O.Buffer.from(e),i=O.Buffer.from(r),o=Lp.encrypt(n,i),s=0,a=t.isEphemeralKeyCompressed?33:65,d=o.subarray(s,a);s=a,a+=Lp.ECIES_CONFIG.symmetricNonceLength;let u=o.subarray(s,a);s=a,a+=16;let c=o.subarray(s,a);return{ciphertext:o.subarray(a),ephemeralPublicKey:d,initializationVector:u,messageAuthenticationCode:c}})}static eciesSecp256k1Decrypt(e){return p4(this,void 0,void 0,function*(){let r=O.Buffer.from(e.privateKey),n=O.Buffer.concat([e.ephemeralPublicKey,e.initializationVector,e.messageAuthenticationCode,e.ciphertext]);return Lp.decrypt(r,n)})}static get isEphemeralKeyCompressed(){return Lp.ECIES_CONFIG.isEphemeralKeyCompressed}},I0;(function(t){t.Aes256Ctr="A256CTR",t.EciesSecp256k1="ECIES-ES256K"})(I0||(I0={}));h();var Fie=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},k0=class t{constructor(e){this.jws=e}static create(e,r=[]){return Fie(this,void 0,void 0,function*(){let n={payload:Ye.bytesToBase64Url(e),signatures:[]},i=new t(n);for(let o of r)yield i.addSignature(o);return i})}addSignature(e){return Fie(this,void 0,void 0,function*(){let r={kid:e.keyId,alg:e.algorithm},n=JSON.stringify(r),i=Ye.stringToBase64Url(n),o=`${i}.${this.jws.payload}`,s=Ye.stringToBytes(o),a=yield e.sign(s),d=Ye.bytesToBase64Url(a);this.jws.signatures.push({protected:i,signature:d})})}getJws(){return this.jws}};h();h();h();var y4=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function gx(){if(y4&&typeof y4.subtle=="object"&&y4.subtle!=null)return y4.subtle;throw new Error("crypto.subtle must be defined")}h();function hBe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function bx(t,...e){if(!hBe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}var zie={async encrypt(t,e,r,n){let i=gx(),o=await i.importKey("raw",t,e,!0,["encrypt"]),s=await i.encrypt(r,o,n);return new Uint8Array(s)},async decrypt(t,e,r,n){let i=gx(),o=await i.importKey("raw",t,e,!0,["decrypt"]),s=await i.decrypt(r,o,n);return new Uint8Array(s)}},bl={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function pBe(t,e,r){if(t===bl.CBC)return{name:bl.CBC,iv:e};if(t===bl.CTR)return{name:bl.CTR,counter:e,length:64};if(t===bl.GCM)return r?{name:bl.GCM,iv:e,additionalData:r}:{name:bl.GCM,iv:e};throw new Error("unknown aes block mode")}function gC(t){return(e,r,n)=>{bx(e),bx(r);let i={name:t,length:e.length*8},o=pBe(t,r,n);return{encrypt(s){return bx(s),zie.encrypt(e,i,o,s)},decrypt(s){return bx(s),zie.decrypt(e,i,o,s)}}}}var Lyt=gC(bl.CBC),Fyt=gC(bl.CTR),zyt=gC(bl.GCM);var g4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Ji;(function(t){t.DataFormats="dataFormats",t.ProtocolContext="protocolContext",t.ProtocolPath="protocolPath",t.Schemas="schemas"})(Ji||(Ji={}));var R0=class t{static derivePrivateKey(e,r){var n;return g4(this,void 0,void 0,function*(){let i=Bi.privateJwkToBytes(e.derivedPrivateKey),o=(n=e.derivationPath)!==null&&n!==void 0?n:[],s=yield t.derivePrivateKeyBytes(i,r),a=yield Bi.privateKeyToJwk(s);return{rootKeyId:e.rootKeyId,derivationScheme:e.derivationScheme,derivationPath:[...o,...r],derivedPrivateKey:a}})}static derivePublicKey(e,r){return g4(this,void 0,void 0,function*(){let n=yield t.derivePrivateKey(e,r);return yield Bi.getPublicJwk(n.derivedPrivateKey)})}static derivePrivateKeyBytes(e,r){return g4(this,void 0,void 0,function*(){t.validateKeyDerivationPath(r);let n=e;for(let i of r){let o=Ye.stringToBytes(i);n=yield t.deriveKeyUsingHkdf({hashAlgorithm:"SHA-256",initialKeyMaterial:n,info:o,keyLengthInBytes:32})}return n})}static deriveKeyUsingHkdf(e){return g4(this,void 0,void 0,function*(){let{hashAlgorithm:r,initialKeyMaterial:n,info:i,keyLengthInBytes:o}=e,a=yield gx().importKey("raw",n,{name:"HKDF"},!1,["deriveBits"]),d=yield crypto.subtle.deriveBits({name:"HKDF",hash:r,salt:new Uint8Array(0),info:i},a,o*8);return new Uint8Array(d)})}static validateKeyDerivationPath(e){if(e.includes(""))throw new oe(ne.HdKeyDerivationPathInvalid,`Invalid key derivation path: ${e}`)}};h();h();function vx(t,e){return t>e?1:t<e?-1:0}h();function wx(t){if(typeof t!="object")return!1;for(let e in t)return!1;return!0}function vn(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&vn(t[e])})}var vl=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},be=class t{static validateJsonSchema(e){let r=e.descriptor.interface,n=e.descriptor.method,i=r+n;vf(i,e)}static getSigner(e){return e.authorization===void 0?void 0:Qr.getSignerDid(e.authorization.signature.signatures[0])}static getCid(e){return vl(this,void 0,void 0,function*(){let r=Object.assign({},e);return r.encodedData&&delete r.encodedData,yield Sn.computeCid(r)})}static compareCid(e,r){return vl(this,void 0,void 0,function*(){let n=yield t.getCid(e),i=yield t.getCid(r);return vx(n,i)})}static createAuthorization(e){return vl(this,void 0,void 0,function*(){let{descriptor:r,signer:n,delegatedGrant:i,permissionGrantId:o,protocolRole:s}=e,a;i!==void 0&&(a=yield t.getCid(i));let u={signature:yield t.createSignature(r,n,{delegatedGrantId:a,permissionGrantId:o,protocolRole:s})};return i!==void 0&&(u.authorDelegatedGrant=i),u})}static createSignature(e,r,n){return vl(this,void 0,void 0,function*(){let i=yield Sn.computeCid(e),o=Object.assign({descriptorCid:i},n);vn(o);let s=Ye.objectToBytes(o);return(yield k0.create(s,[r])).getJws()})}static getNewestMessage(e){return vl(this,void 0,void 0,function*(){let r;for(let n of e)(r===void 0||(yield t.isNewer(n,r)))&&(r=n);return r})}static getOldestMessage(e){return vl(this,void 0,void 0,function*(){let r;for(let n of e)(r===void 0||(yield t.isOlder(n,r)))&&(r=n);return r})}static isNewer(e,r){return vl(this,void 0,void 0,function*(){return(yield t.compareMessageTimestamp(e,r))>0})}static isOlder(e,r){return vl(this,void 0,void 0,function*(){return(yield t.compareMessageTimestamp(e,r))<0})}static isSignedByAuthorDelegate(e){var r;return((r=e.authorization)===null||r===void 0?void 0:r.authorDelegatedGrant)!==void 0}static isSignedByOwnerDelegate(e){var r;return((r=e.authorization)===null||r===void 0?void 0:r.ownerDelegatedGrant)!==void 0}static compareMessageTimestamp(e,r){return vl(this,void 0,void 0,function*(){return e.descriptor.messageTimestamp>r.descriptor.messageTimestamp?1:e.descriptor.messageTimestamp<r.descriptor.messageTimestamp?-1:t.compareCid(e,r)})}static validateSignatureStructure(e,r,n="GenericSignaturePayload"){return vl(this,void 0,void 0,function*(){if(e.signatures.length!==1)throw new oe(ne.AuthenticationMoreThanOneSignatureNotSupported,"expected no more than 1 signature for authorization purpose");let i=Qr.decodePlainObjectPayload(e);vf(n,i);let{descriptorCid:o}=i,s=yield Sn.computeCid(r);if(o!==s)throw new oe(ne.AuthenticateDescriptorCidMismatch,`provided descriptorCid ${o} does not match expected CID ${s}`);return i})}};h();var mBe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},vo=class t{static parse(e){return mBe(this,void 0,void 0,function*(){return new t(e)})}constructor(e){this.id=e.recordId,this.grantor=be.getSigner(e),this.grantee=e.descriptor.recipient,this.dateGranted=e.descriptor.dateCreated;let r=e.encodedData,n=Ye.base64UrlToObject(r);this.dateExpires=n.dateExpires,this.delegated=n.delegated,this.description=n.description,this.requestId=n.requestId,this.scope=n.scope,this.conditions=n.conditions}};h();h();var $i;(function(t){t.CreatedAscending="createdAscending",t.CreatedDescending="createdDescending",t.PublishedAscending="publishedAscending",t.PublishedDescending="publishedDescending"})($i||($i={}));h();var yBe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Hn=class{static matchAnyFilter(e,r){if(r.length===0)return!0;for(let n of r)if(this.matchFilter(e,n))return!0;return!1}static matchFilter(e,r){for(let n in r){let i=r[n],o=e[n];if(o===void 0||!(Array.isArray(o)?this.matchAnyIndexValue(i,o):this.matchIndexValue(i,o)))return!1}return!0}static matchAnyIndexValue(e,r){for(let n of r)if(this.matchIndexValue(e,n))return!0;return!1}static matchIndexValue(e,r){if(typeof e=="object"){if(Array.isArray(e)){if(this.matchOneOf(e,r))return!0}else if(this.matchRange(e,r))return!0}else if(r===e)return!0;return!1}static matchOneOf(e,r){for(let n of e)if(r===n)return!0;return!1}static matchRange(e,r){return!(e.lt!==void 0&&r>=e.lt||e.lte!==void 0&&r>e.lte||e.gt!==void 0&&r<=e.gt||e.gte!==void 0&&r<e.gte)}static isEqualFilter(e){return typeof e!="object"}static isRangeFilter(e){return typeof e=="object"&&!Array.isArray(e)?"gt"in e||"lt"in e||"lte"in e||"gte"in e:!1}static isOneOfFilter(e){return!!(typeof e=="object"&&Array.isArray(e))}static convertRangeCriterion(e){let r;return e.to!==void 0&&e.from!==void 0?r={gte:e.from,lt:e.to}:e.to!==void 0?r={lt:e.to}:e.from!==void 0&&(r={gte:e.from}),r}static constructPrefixFilterAsRangeFilter(e){return{gte:e,lt:e+"\uFFFF"}}},b4=class{static reduceFilter(e){if(Object.keys(e).length<=1)return e;let{recordId:n,attester:i,parentId:o,recipient:s,contextId:a,author:d,protocolPath:u,schema:c,protocol:l}=e,m=yBe(e,["recordId","attester","parentId","recipient","contextId","author","protocolPath","schema","protocol"]);if(n!==void 0)return{recordId:n};if(i!==void 0)return{attester:i};if(o!==void 0)return{parentId:o};if(s!==void 0)return{recipient:s};if(a!==void 0)return{contextId:a};if(u!==void 0)return{protocolPath:u};if(c!==void 0)return{schema:c};if(l!==void 0)return{protocol:l};let g=Object.keys(m)[0],b={};return b[g]=e[g],b}};h();var Ae;(function(t){t.Events="Events",t.Messages="Messages",t.Protocols="Protocols",t.Records="Records"})(Ae||(Ae={}));var _e;(function(t){t.Configure="Configure",t.Create="Create",t.Get="Get",t.Grant="Grant",t.Query="Query",t.Read="Read",t.Request="Request",t.Revoke="Revoke",t.Write="Write",t.Delete="Delete",t.Subscribe="Subscribe"})(_e||(_e={}));h();function Ta(t){let e;try{e=uu(t)}catch{e=void 0}if(t!==e)throw new oe(ne.UrlProtocolNotNormalized,`Protocol URI ${t} must be normalized.`)}function uu(t){return Gie(t)}function ad(t){let e;try{e=Vf(t)}catch{e=void 0}if(t!==e)throw new oe(ne.UrlSchemaNotNormalized,`Schema URI ${t} must be normalized.`)}function Vf(t){return Gie(t)}function Gie(t){let e;/^[^:]+:(\/{2})?[^\/].*/.test(t)?e=t:e=`http://${t}`;try{let r=new URL(e);return r.search="",r.hash="",gBe(r.href)}catch{throw new oe(ne.UrlProtocolNotNormalizable,"Could not normalize protocol URI")}}function gBe(t){return t.endsWith("/")?t.slice(0,-1):t}var bC=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},bBe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},ht=class t{static isRecordsWrite(e){return e.descriptor.interface===Ae.Records&&e.descriptor.method===_e.Write}static getAuthor(e){let r;return e.authorization.authorDelegatedGrant!==void 0?r=be.getSigner(e.authorization.authorDelegatedGrant):r=be.getSigner(e),r}static decrypt(e,r,n){return bC(this,void 0,void 0,function*(){let{encryption:i}=e,o=i.keyEncryption.find(b=>b.rootKeyId===r.rootKeyId&&b.derivationScheme===r.derivationScheme);if(o===void 0)throw new oe(ne.RecordsDecryptNoMatchingKeyEncryptedFound,`Unable to find a symmetric key encrypted using key         with ID '${r.rootKeyId}' and '${r.derivationScheme}' derivation scheme.`);let s=t.constructKeyDerivationPath(o.derivationScheme,e),a=yield t.derivePrivateKey(r,s),d=Ye.base64UrlToBytes(o.encryptedKey),u=Bi.publicJwkToBytes(o.ephemeralPublicKey),c=Ye.base64UrlToBytes(o.initializationVector),l=Ye.base64UrlToBytes(o.messageAuthenticationCode),m=yield Hf.eciesSecp256k1Decrypt({ciphertext:d,ephemeralPublicKey:u,initializationVector:c,messageAuthenticationCode:l,privateKey:a}),p=Ye.base64UrlToBytes(i.initializationVector);return yield Hf.aes256CtrDecrypt(m,p,n)})}static constructKeyDerivationPath(e,r){let n=r.descriptor,i=r.contextId,o;return e===Ji.DataFormats?o=t.constructKeyDerivationPathUsingDataFormatsScheme(n.schema,n.dataFormat):e===Ji.ProtocolPath?o=t.constructKeyDerivationPathUsingProtocolPathScheme(n):e===Ji.ProtocolContext?o=t.constructKeyDerivationPathUsingProtocolContextScheme(i):o=t.constructKeyDerivationPathUsingSchemasScheme(n.schema),o}static constructKeyDerivationPathUsingDataFormatsScheme(e,r){return e!==void 0?[Ji.DataFormats,e,r]:[Ji.DataFormats,r]}static constructKeyDerivationPathUsingProtocolPathScheme(e){if(e.protocol===void 0)throw new oe(ne.RecordsProtocolPathDerivationSchemeMissingProtocol,"Unable to construct key derivation path using `protocols` scheme because `protocol` is missing.");let r=e.protocolPath.split("/");return[Ji.ProtocolPath,e.protocol,...r]}static constructKeyDerivationPathUsingProtocolContextScheme(e){if(e===void 0)throw new oe(ne.RecordsProtocolContextDerivationSchemeMissingContextId,"Unable to construct key derivation path using `protocolContext` scheme because `contextId` is missing.");let r=e.split("/")[0];return[Ji.ProtocolContext,r]}static constructKeyDerivationPathUsingSchemasScheme(e){if(e===void 0)throw new oe(ne.RecordsSchemasDerivationSchemeMissingSchema,"Unable to construct key derivation path using `schemas` scheme because `schema` is missing.");return[Ji.Schemas,e]}static derivePrivateKey(e,r){var n;return bC(this,void 0,void 0,function*(){if(e.derivedPrivateKey.crv!=="secp256k1")throw new oe(ne.RecordsDerivePrivateKeyUnSupportedCurve,`Curve ${e.derivedPrivateKey.crv} is not supported.`);let i=(n=e.derivationPath)!==null&&n!==void 0?n:[];t.validateAncestorKeyAndDescentKeyDerivationPathsMatch(i,r);let o=r.slice(i.length),s=Bi.privateJwkToBytes(e.derivedPrivateKey);return yield R0.derivePrivateKeyBytes(s,o)})}static validateAncestorKeyAndDescentKeyDerivationPathsMatch(e,r){for(let n=0;n<e.length;n++){let i=e[n],o=r[n];if(i!==o)throw new oe(ne.RecordsInvalidAncestorKeyDerivationSegment,`Ancestor key derivation segment '${i}' mismatches against the descendant key derivation segment '${o}'.`)}}static getParentContextFromOfContextId(e){if(e===void 0)return;let r=e.lastIndexOf("/");return r===-1?"":e.substring(0,r)}static normalizeFilter(e){let r;e.protocol===void 0?r=void 0:r=uu(e.protocol);let n;e.schema===void 0?n=void 0:n=Vf(e.schema);let i=Object.assign(Object.assign({},e),{protocol:r,schema:n});return vn(i),i}static isStartsWithFilter(e){return typeof e=="object"&&"startsWith"in e&&typeof e.startsWith=="string"}static buildTagIndexes(e){let r={};for(let n in e){let i=e[n];r[`tag.${n}`]=i}return r}static convertTagsFilter(e){let r={};for(let n in e){let i=e[n];r[`tag.${n}`]=this.isStartsWithFilter(i)?Hn.constructPrefixFilterAsRangeFilter(i.startsWith):i}return r}static convertFilter(e,r){let{tags:n}=e,i=bBe(e,["tags"]),o={};n!==void 0&&(o=Object.assign({},this.convertTagsFilter(n)));let s=Object.assign(Object.assign({},i),o),{dateCreated:a,datePublished:d,dateUpdated:u,contextId:c}=e,l=a?Hn.convertRangeCriterion(a):void 0;l&&(s.dateCreated=l);let m=d?Hn.convertRangeCriterion(d):void 0;m&&(s.published=!0,s.datePublished=m),s.published!==!0&&(r===$i.PublishedAscending||r===$i.PublishedDescending)&&(s.published=!0);let p=u?Hn.convertRangeCriterion(u):void 0;p&&(s.messageTimestamp=p,delete s.dateUpdated);let g=c?Hn.constructPrefixFilterAsRangeFilter(c):void 0;return g&&(s.contextId=g),s}static validateDelegatedGrantReferentialIntegrity(e,r,n){var i,o;return bC(this,void 0,void 0,function*(){let s=r?.delegatedGrantId!==void 0,a=((i=e.authorization)===null||i===void 0?void 0:i.authorDelegatedGrant)!==void 0;if(s!==a)throw new oe(ne.RecordsAuthorDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in message (author) signature and authorDelegatedGrant must both exist or be undefined.          delegatedGrantId in message (author) signature defined: ${s},          authorDelegatedGrant defined: ${a}`);if(a){let c=e.authorization.authorDelegatedGrant;if((yield vo.parse(c)).delegated!==!0)throw new oe(ne.RecordsAuthorDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");let m=c.descriptor.recipient,p=be.getSigner(e);if(m!==p)throw new oe(ne.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${m} in author delegated grant must be the same as the signer ${p} of the message signature.`);let g=yield be.getCid(c);if(g!==r.delegatedGrantId)throw new oe(ne.RecordsAuthorDelegatedGrantCidMismatch,`CID of the author delegated grant ${g} must be the same as           the delegatedGrantId ${r.delegatedGrantId} in the message signature.`)}let d=n?.delegatedGrantId!==void 0,u=((o=e.authorization)===null||o===void 0?void 0:o.ownerDelegatedGrant)!==void 0;if(d!==u)throw new oe(ne.RecordsOwnerDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in owner signature and ownerDelegatedGrant must both exist or be undefined.          delegatedGrantId in owner signature defined: ${d},          ownerDelegatedGrant defined: ${u}`);if(u){let c=e.authorization.ownerDelegatedGrant;if((yield vo.parse(c)).delegated!==!0)throw new oe(ne.RecordsOwnerDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");let m=c.descriptor.recipient,p=Qr.getSignerDid(e.authorization.ownerSignature.signatures[0]);if(m!==p)throw new oe(ne.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${m} in owner delegated grant must be the same as the signer ${p} of the owner signature.`);let g=yield be.getCid(c);if(g!==n.delegatedGrantId)throw new oe(ne.RecordsOwnerDelegatedGrantCidMismatch,`CID of the owner delegated grant ${g} must be the same as           the delegatedGrantId ${n.delegatedGrantId} in the owner signature.`)}})}static shouldProtocolAuthorize(e){return e.protocolRole!==void 0}static filterIncludesPublishedRecords(e){return e.datePublished!==void 0||e.published!==!1}static filterIncludesUnpublishedRecords(e){return e.datePublished===void 0&&e.published===void 0?!0:e.published===!1}};h();h();var vC=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Jf=class t{static performBaseValidation(e){return vC(this,void 0,void 0,function*(){let{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e,a=r.descriptor;t.verifyExpectedGrantorAndGrantee(n,i,o);let d=n;yield t.verifyGrantActive(d,a.messageTimestamp,o,s),yield t.verifyGrantScopeInterfaceAndMethod(a.interface,a.method,o)})}static verifyExpectedGrantorAndGrantee(e,r,n){let i=n.grantee;if(r!==i)throw new oe(ne.GrantAuthorizationNotGrantedToAuthor,`Permission grant is granted to ${i}, but need to be granted to ${r}`);let o=n.grantor;if(e!==o)throw new oe(ne.GrantAuthorizationNotGrantedForTenant,`Permission grant is granted by ${o}, but need to be granted by ${e}`)}static verifyGrantActive(e,r,n,i){return vC(this,void 0,void 0,function*(){if(r<n.dateGranted)throw new oe(ne.GrantAuthorizationGrantNotYetActive,"The message has a timestamp before the associated permission grant becomes active");if(r>=n.dateExpires)throw new oe(ne.GrantAuthorizationGrantExpired,"The message has timestamp after the expiry of the associated permission grant");let o={parentId:n.id,protocolPath:"grant/revocation",isLatestBaseState:!0},{messages:s}=yield i.query(e,[o]),a=yield be.getOldestMessage(s);if(a!==void 0&&a.descriptor.messageTimestamp<=r)throw new oe(ne.GrantAuthorizationGrantRevoked,`Permission grant with CID ${n.id} has been revoked`)})}static verifyGrantScopeInterfaceAndMethod(e,r,n){return vC(this,void 0,void 0,function*(){if(e!==n.scope.interface)throw new oe(ne.GrantAuthorizationInterfaceMismatch,`DWN Interface of incoming message is outside the scope of permission grant with ID ${n.id}`);if(r!==n.scope.method)throw new oe(ne.GrantAuthorizationMethodMismatch,`DWN Method of incoming message is outside the scope of permission grant with ID ${n.id}`)})}};h();var _x;(function(t){t.Required="Required",t.Prohibited="Prohibited"})(_x||(_x={}));var v4=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Lo=class t{static authorizeWrite(e){return v4(this,void 0,void 0,function*(){let{recordsWriteMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e;yield Jf.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}),t.verifyScope(r,o.scope),t.verifyConditions(r,o.conditions)})}static authorizeRead(e){return v4(this,void 0,void 0,function*(){let{recordsReadMessage:r,recordsWriteMessageToBeRead:n,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}=e;yield Jf.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}),t.verifyScope(n,s.scope)})}static authorizeQueryOrSubscribe(e){return v4(this,void 0,void 0,function*(){let{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e;yield Jf.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s});let d=o.scope.protocol,u=r.descriptor.filter.protocol;if(d!==void 0&&u!==d)throw new oe(ne.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch,`Grant protocol scope ${d} does not match protocol in message ${u}`)})}static authorizeDelete(e){return v4(this,void 0,void 0,function*(){let{recordsDeleteMessage:r,recordsWriteToDelete:n,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}=e;yield Jf.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a});let u=s.scope.protocol,c=n.descriptor.protocol;if(u!==void 0&&c!==u)throw new oe(ne.RecordsGrantAuthorizationDeleteProtocolScopeMismatch,`Grant protocol scope ${u} does not match protocol in record to delete ${c}`)})}static verifyScope(e,r){t.isUnrestrictedScope(r)||(e.descriptor.protocol!==void 0?t.verifyProtocolRecordScope(e,r):t.verifyFlatRecordScope(e,r))}static verifyProtocolRecordScope(e,r){if(r.protocol===void 0)throw new oe(ne.RecordsGrantAuthorizationScopeMissingProtocol,"Grant for protocol record must specify protocol in its scope");if(r.protocol!==e.descriptor.protocol)throw new oe(ne.RecordsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the record");if(r.contextId!==void 0&&(e.contextId===void 0||!e.contextId.startsWith(r.contextId)))throw new oe(ne.RecordsGrantAuthorizationScopeContextIdMismatch,"Grant scope specifies different contextId than what appears in the record");if(r.protocolPath!==void 0&&r.protocolPath!==e.descriptor.protocolPath)throw new oe(ne.RecordsGrantAuthorizationScopeProtocolPathMismatch,"Grant scope specifies different protocolPath than what appears in the record")}static verifyFlatRecordScope(e,r){if(r.schema!==void 0&&r.schema!==e.descriptor.schema)throw new oe(ne.RecordsGrantAuthorizationScopeSchema,`Record does not have schema in permission grant scope with schema '${r.schema}'`)}static verifyConditions(e,r){if(r?.publication===_x.Required&&!e.descriptor.published)throw new oe(ne.RecordsGrantAuthorizationConditionPublicationRequired,"Permission grant requires message to be published");if(r?.publication===_x.Prohibited&&e.descriptor.published)throw new oe(ne.RecordsGrantAuthorizationConditionPublicationProhibited,"Permission grant prohibits message from being published")}static isUnrestrictedScope(e){return e.protocol===void 0&&e.schema===void 0}};h();h();var z=Ut(Wie(),1),IC={};function Il(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(let r of Object.getOwnPropertyNames(t)){let n=Object.getOwnPropertyDescriptor(t,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t,r,n))}for(let r of Object.getOwnPropertyNames(t.prototype)){let n=Object.getOwnPropertyDescriptor(t.prototype,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t.prototype,r,n))}_n(e,t),_n(`${e}.prototype`,t.prototype)}function _n(t,e){let r=`%${t}%`;if(IC[r]!==void 0)throw new Error(`intrinsic ${t} already exists`);IC[r]=e}function xe(t){return IC[t]}var Hie,Vie,ct="slot-epochNanoSeconds",_l="slot-timezone-identifier",Te="slot-year",Re="slot-month",Oe="slot-day",vt="slot-hour",wt="slot-minute",_t="slot-second",xt="slot-millisecond",Et="slot-microsecond",St="slot-nanosecond",se="slot-calendar",koe="slot-date-brand",Roe="slot-year-month-brand",Doe="slot-month-day-brand",xo="slot-cached-instant",$r="slot-time-zone",Fo="slot-years",Ni="slot-months",Bs="slot-weeks",zo="slot-days",Go="slot-hours",Wo="slot-minutes",Ho="slot-seconds",Vo="slot-milliseconds",Jo="slot-microseconds",Yo="slot-nanoseconds",wn="slot-calendar-identifier",Moe=new WeakMap,kC=Symbol.for("@@Temporal__GetSlots");(Hie=globalThis)[kC]||(Hie[kC]=function(e){return Moe.get(e)});var iO=globalThis[kC],RC=Symbol.for("@@Temporal__CreateSlots");(Vie=globalThis)[RC]||(Vie[RC]=function(e){Moe.set(e,Object.create(null))});var kl=globalThis[RC];function Si(t,...e){if(!t||typeof t!="object")return!1;let r=iO(t);return!!r&&e.every(n=>n in r)}function R(t,e){let r=iO(t)?.[e];if(r===void 0)throw new TypeError(`Missing internal slot ${e}`);return r}function kt(t,e,r){let n=iO(t);if(n===void 0)throw new TypeError("Missing slots for the given container");if(n[e])throw new TypeError(`${e} already has set`);n[e]=r}var Jie=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,Ux=new RegExp("(?:"+[`(?:${Jie.source})(?:\\/(?:${Jie.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),Boe=/(?:[+\u2212-]\d{6}|\d{4})/,A4=/(?:0[1-9]|1[0-2])/,DC=/(?:0[1-9]|[12]\d|3[01])/,vBe=new RegExp(`(${Boe.source})(?:-(${A4.source})-(${DC.source})|(${A4.source})(${DC.source}))`),Coe=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,Ooe=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,$oe=new RegExp(`([zZ])|${Ooe.source}?`),Xp=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,wBe=new RegExp([`^${vBe.source}`,`(?:(?:T|\\s+)${Coe.source}(?:${$oe.source})?)?`,`(?:\\[!?(${Ux.source})\\])?`,`((?:${Xp.source})*)$`].join(""),"i"),_Be=new RegExp([`^T?${Coe.source}`,`(?:${$oe.source})?`,`(?:\\[!?${Ux.source}\\])?`,`((?:${Xp.source})*)$`].join(""),"i"),xBe=new RegExp(`^(${Boe.source})-?(${A4.source})(?:\\[!?${Ux.source}\\])?((?:${Xp.source})*)$`),EBe=new RegExp(`^(?:--)?(${A4.source})-?(${DC.source})(?:\\[!?${Ux.source}\\])?((?:${Xp.source})*)$`),xC=/(\d+)(?:[.,](\d{1,9}))?/,SBe=new RegExp(`(?:${xC.source}H)?(?:${xC.source}M)?(?:${xC.source}S)?`),ABe=new RegExp(`^([+\u2212-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${SBe.source})?$`,"i"),PBe=Array.prototype.includes,Noe=Array.prototype.push,joe=globalThis.Intl.DateTimeFormat,TBe=Math.min,IBe=Math.max,on=Math.abs,ta=Math.floor,pw=Math.sign,B0=Math.trunc,q4=Number.isNaN,Zo=Number.isFinite,kBe=Number,Kx=String,RBe=Number.MAX_SAFE_INTEGER,So=Object.create,DBe=Object.getOwnPropertyDescriptor,L4=Reflect.apply,MBe=Reflect.ownKeys,kn=z.default.BigInt(0),Ew=z.default.BigInt(1),xl=z.default.BigInt(60),Uoe=z.default.BigInt(24),xr=z.default.BigInt(1e3),pc=z.default.BigInt(1e6),El=z.default.BigInt(1e9),BBe=z.default.BigInt(-1),Koe=z.default.multiply(z.default.BigInt(3600),El),qoe=z.default.multiply(xl,El),Al=z.default.multiply(Koe,Uoe),Px=z.default.multiply(z.default.BigInt(-86400),z.default.BigInt(1e17)),mw=z.default.multiply(z.default.BigInt(86400),z.default.BigInt(1e17)),P4=-271821,T4=275760,aw=z.default.multiply(z.default.BigInt(-388152),z.default.BigInt(1e13)),CBe=z.default.multiply(Al,z.default.BigInt(3660)),Loe=z.default.multiply(Al,z.default.BigInt(366)),Foe=z.default.multiply(Al,z.default.BigInt(14)),OBe=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function hc(t){return z.default.equal(t,kn)}function Tr(t,e){let r=t[e];if(r!==void 0)return r}function Ve(t,e,r){let n=arguments.length>2?r:[];return L4(t,e,n)}function sn(t){return typeof t=="object"&&t!==null||typeof t=="function"}function yw(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return kBe(t)}function Vn(t){let e=yw(t);if(q4(e)||e===0)return 0;if(!Zo(e))return e;let r=ta(on(e));return r===0?0:pw(e)*r}function Ra(t){if(typeof t!="number"||q4(t)||!Zo(t))return!1;let e=on(t);return ta(e)===e}function Qo(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return Kx(t)}function mr(t){let e=yw(t);if(e===0)return 0;if(q4(e)||!Zo(e))throw new RangeError("invalid number value");let r=B0(e);return r===0?0:r}function Yie(t,e){let r=mr(t);if(r<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return r}function Ei(t){let e=yw(t);if(!Zo(e))throw new RangeError("infinity is out of range");if(!Ra(e))throw new RangeError(`unsupported fractional value ${t}`);return e===0?0:e}function Ln(t,e){return{quotient:z.default.divide(t,e),remainder:z.default.remainder(t,e)}}function I4(t){return z.default.lessThan(t,kn)}function Zie(t){return hc(t)?0:I4(t)?-1:1}function lu(t){return z.default.lessThan(t,kn)?z.default.multiply(t,BBe):t}var Xie=new Map([["year",mr],["month",Yie],["monthCode",Qo],["day",Yie],["hour",mr],["minute",mr],["second",mr],["millisecond",mr],["microsecond",mr],["nanosecond",mr],["years",Ei],["months",Ei],["weeks",Ei],["days",Ei],["hours",Ei],["minutes",Ei],["seconds",Ei],["milliseconds",Ei],["microseconds",Ei],["nanoseconds",Ei],["era",Qo],["eraYear",Vn],["offset",Qo]]),$Be=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),qx=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],k4=new Map(qx.map(t=>[t[0],t[1]])),NBe=new Map(qx.map(([t,e])=>[e,t])),Qie=qx.map(([,t])=>t),eoe=Array.from(k4.keys()).sort(),toe=new Map;function zoe(t){let e=toe.get(t);return e===void 0&&(e=new joe("en-us",{timeZone:Kx(t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),toe.set(t,e)),e}function roe(t){if(t==null)throw new TypeError(`Expected object not ${t}`);return Object(t)}function cw(t,e,r,n){if(e==null)return;let i=MBe(e);for(let o of i)if(!r.some(s=>Object.is(s,o))&&Object.prototype.propertyIsEnumerable.call(e,o)){let s=e[o];if(n&&n.some(a=>Object.is(a,s)))continue;t[o]=s}}function li(t){return Si(t,ct)&&!Si(t,$r,se)}function fc(t){return Si(t,_l)}function Pn(t){return Si(t,wn)}function Tn(t){return Si(t,Fo,Ni,zo,Go,Wo,Ho,Vo,Jo,Yo)}function Gt(t){return Si(t,koe)}function In(t){return Si(t,vt,wt,_t,xt,Et,St)&&!Si(t,Te,Re,Oe)}function bt(t){return Si(t,Te,Re,Oe,vt,wt,_t,xt,Et,St)}function _r(t){return Si(t,Roe)}function xi(t){return Si(t,Doe)}function qe(t){return Si(t,ct,$r,se)}function Sw(t){if(Si(t,se)||Si(t,$r))throw new TypeError("with() does not support a calendar or timeZone property");if(In(t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function jBe(t){let{ianaName:e,offset:r,z:n}=function(o){if(new RegExp(`^${Ux.source}$`,"i").test(o))return{ianaName:o};try{let s=Rl(o);if(s.z||s.offset||s.ianaName)return s}catch{}throw new RangeError(`Invalid time zone: ${o}`)}(t);return e?mO(e):n?"UTC":eA(Wp(r))}function oO(t,e){return e==="never"?"":sO(Qi(t),e)}function sO(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${t}]`}function Rl(t){let e=wBe.exec(t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${t}`);let r=e[1];if(r[0]==="\u2212"&&(r=`-${r.slice(1)}`),r==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);let n=Vn(r),i=Vn(e[2]||e[4]),o=Vn(e[3]||e[5]),s=Vn(e[6]),a=e[6]!==void 0,d=Vn(e[7]||e[10]),u=Vn(e[8]||e[11]);u===60&&(u=59);let c=(e[9]||e[12])+"000000000",l=Vn(c.slice(0,3)),m=Vn(c.slice(3,6)),p=Vn(c.slice(6,9)),g,b=!1;if(e[13])g=void 0,b=!0;else if(e[14]&&e[15]){let P=e[14]==="-"||e[14]==="\u2212"?"-":"+",$=e[15]||"00",N=e[16]||"00",L=e[17]||"00",F=e[18]||"0";if(g=`${P}${$}:${N}`,+F){for(;F.endsWith("0");)F=F.slice(0,-1);g+=`:${L}.${F}`}else+L&&(g+=`:${L}`);g==="-00:00"&&(g="+00:00")}let S=e[19],A=e[20],I;for(let[,P,$,N]of A.matchAll(Xp))if($==="u-ca")I===void 0&&(I=N);else if(P==="!")throw new RangeError(`Unrecognized annotation: !${$}=${N}`);return bO(n,i,o,s,d,u,l,m,p),{year:n,month:i,day:o,hasTime:a,hour:s,minute:d,second:u,millisecond:l,microsecond:m,nanosecond:p,ianaName:S,offset:g,z:b,calendar:I}}function aO(t){let e=xBe.exec(t),r,n,i,o;if(e){let s=e[1];if(s[0]==="\u2212"&&(s=`-${s.slice(1)}`),s==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);r=Vn(s),n=Vn(e[2]);let a=e[3];for(let[,d,u,c]of a.matchAll(Xp))if(u==="u-ca")i===void 0&&(i=c);else if(d==="!")throw new RangeError(`Unrecognized annotation: !${u}=${c}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let s;if({year:r,month:n,calendar:i,day:o,z:s}=Rl(t),s)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:r,month:n,calendar:i,referenceISODay:o}}function cO(t){let e=EBe.exec(t),r,n,i,o;if(e){r=Vn(e[1]),n=Vn(e[2]);let s=e[3];for(let[,a,d,u]of s.matchAll(Xp))if(d==="u-ca")i===void 0&&(i=u);else if(a==="!")throw new RangeError(`Unrecognized annotation: !${d}=${u}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let s;if({month:r,day:n,calendar:i,year:o,z:s}=Rl(t),s)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:r,day:n,calendar:i,referenceISOYear:o}}function UBe(t){let{year:e,month:r,day:n,hour:i,minute:o,second:s,millisecond:a,microsecond:d,nanosecond:u,offset:c,z:l}=function(b){let S=Rl(b);if(!S.z&&!S.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return S}(t);if(!l&&!c)throw new RangeError("Temporal.Instant requires a time zone offset");let m=l?0:Wp(c);({year:e,month:r,day:n,hour:i,minute:o,second:s,millisecond:a,microsecond:d,nanosecond:u}=yO(e,r,n,i,o,s,a,d,u-m));let p=Hp(e,r,n,i,o,s,a,d,u);if(p===null)throw new RangeError("DateTime outside of supported range");return p}function R4(t,e,r,n){let i=t,o=e,s=r;switch(n){case"reject":Pl(i,o,s);break;case"constrain":({year:i,month:o,day:s}=ase(i,o,s))}return{year:i,month:o,day:s}}function F4(t,e,r,n,i,o,s){let a=t,d=e,u=r,c=n,l=i,m=o;switch(s){case"reject":rA(a,d,u,c,l,m);break;case"constrain":({hour:a,minute:d,second:u,millisecond:c,microsecond:l,nanosecond:m}=function(g,b,S,A,I,P){let $=ea(g,0,23),N=ea(b,0,59),L=ea(S,0,59),F=ea(A,0,999),U=ea(I,0,999),G=ea(P,0,999);return{hour:$,minute:N,second:L,millisecond:F,microsecond:U,nanosecond:G}}(a,d,u,c,l,m))}return{hour:a,minute:d,second:u,millisecond:c,microsecond:l,nanosecond:m}}function z0(t){if(!sn(t))return function(g){let b=ABe.exec(g);if(!b)throw new RangeError(`invalid duration: ${g}`);if(b.slice(2).every(_=>_===void 0))throw new RangeError(`invalid duration: ${g}`);let S=b[1]==="-"||b[1]==="\u2212"?-1:1,A=b[2]===void 0?0:mr(b[2])*S,I=b[3]===void 0?0:mr(b[3])*S,P=b[4]===void 0?0:mr(b[4])*S,$=b[5]===void 0?0:mr(b[5])*S,N=b[6]===void 0?0:mr(b[6])*S,L=b[7],F=b[8],U=b[9],G=b[10],q=b[11],T=0,E=0,k=0;if(L!==void 0){if(F??U??G??q)throw new RangeError("only the smallest unit can be fractional");k=3600*Vn((L+"000000000").slice(0,9))*S}else if(T=F===void 0?0:mr(F)*S,U!==void 0){if(G??q)throw new RangeError("only the smallest unit can be fractional");k=60*Vn((U+"000000000").slice(0,9))*S}else E=G===void 0?0:mr(G)*S,q!==void 0&&(k=Vn((q+"000000000").slice(0,9))*S);let f=k%1e3,y=B0(k/1e3)%1e3,w=B0(k/1e6)%1e3;return E+=B0(k/1e9)%60,T+=B0(k/6e10),$4(A,I,P,$,N,T,E,w,y,f),{years:A,months:I,weeks:P,days:$,hours:N,minutes:T,seconds:E,milliseconds:w,microseconds:y,nanoseconds:f}}(Qo(t));if(Tn(t))return{years:R(t,Fo),months:R(t,Ni),weeks:R(t,Bs),days:R(t,zo),hours:R(t,Go),minutes:R(t,Wo),seconds:R(t,Ho),milliseconds:R(t,Vo),microseconds:R(t,Jo),nanoseconds:R(t,Yo)};let e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0},r=function(g){if(!sn(g))throw new TypeError("invalid duration-like");let b={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0},S=!1;for(let A of eoe){let I=g[A];I!==void 0&&(S=!0,b[A]=Ei(I))}if(!S)throw new TypeError("invalid duration-like");return b}(t);for(let p of eoe){let g=r[p];g!==void 0&&(e[p]=g)}let{years:n,months:i,weeks:o,days:s,hours:a,minutes:d,seconds:u,milliseconds:c,microseconds:l,nanoseconds:m}=e;return $4(n,i,o,s,a,d,u,c,l,m),{years:n,months:i,weeks:o,days:s,hours:a,minutes:d,seconds:u,milliseconds:c,microseconds:l,nanoseconds:m}}function Fn(t){return t===void 0?"constrain":Jp(t,"overflow",["constrain","reject"],"constrain")}function gw(t){return t===void 0?"compatible":Jp(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function hu(t,e){return Jp(t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function D4(t,e){return t===void 0?e:Jp(t,"offset",["prefer","use","ignore","reject"],e)}function Lx(t){return Jp(t,"calendarName",["auto","always","never","critical"],"auto")}function Aw(t){let e=t.roundingIncrement;if(e===void 0)return 1;if(e=yw(e),!Zo(e))throw new RangeError("roundingIncrement must be finite");let r=B0(e);if(r<1||r>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return r}function Pw(t,e,r){let n=r?e:e-1;if(t>n)throw new RangeError(`roundingIncrement must be at least 1 and less than ${n}, not ${t}`);if(e%t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function Fx(t){let e=t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if(Qo(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}let r=ta(e);if(!Zo(r)||r<0||r>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return r}function zx(t,e){switch(t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}var j0=Symbol("~required~");function ra(t,e,r,n,i=[]){let o=[];for(let[,u,c]of qx)r!=="datetime"&&r!==c||o.push(u);o.push(...i);let s=n;s===j0?s=void 0:s!==void 0&&o.push(s);let a=[...o];for(let u of o){let c=NBe.get(u);c!==void 0&&a.push(c)}let d=Jp(t,e,a,s);if(d===void 0&&n===j0)throw new RangeError(`${e} is required`);return k4.has(d)?k4.get(d):d}function _4(t){let e=t.relativeTo;if(e===void 0)return e;let r,n,i,o,s,a,d,u,c,l,m,p,g="option",b=!1;if(sn(e)){if(qe(e)||Gt(e))return e;if(bt(e))return vw(e);l=Vx(e);let S=Jn(l,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);S.push("timeZone","offset");let A=Mt(e,S,[]),I=So(null);I.overflow="constrain",{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c}=Gx(l,A,I),p=A.offset,p===void 0&&(g="wall"),m=A.timeZone,m!==void 0&&(m=Eo(m))}else{let S,A;if({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c,calendar:l,ianaName:S,offset:p,z:A}=Rl(Qo(e)),S)m=Eo(S),A?g="exact":p||(g="wall"),b=!0;else if(A)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(l||(l="iso8601"),!nh(l))throw new RangeError(`invalid calendar identifier ${l}`);l=Tl(l)}return m===void 0?yc(r,n,i,l):Yi(B4(r,n,i,o,s,a,d,u,c,g,g==="option"?Wp(p):0,m,"compatible","reject",b),m,l)}function MC(t,e,r,n,i,o,s,a,d,u){for(let[c,l]of[["years",t],["months",e],["weeks",r],["days",n],["hours",i],["minutes",o],["seconds",s],["milliseconds",a],["microseconds",d],["nanoseconds",u]])if(l!==0)return k4.get(c);return"nanosecond"}function U0(t,e){return Qie.indexOf(t)>Qie.indexOf(e)?e:t}function Mt(t,e,r,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){let i=So(null),o=!1;e.sort();for(let s of e){let a=t[s];if(a!==void 0)o=!0,Xie.has(s)&&(a=Xie.get(s)(a)),i[s]=a;else if(r!=="partial"){if(PBe.call(r,s))throw new TypeError(`required property '${s}' missing or undefined`);a=$Be.get(s),i[s]=a}}if(r==="partial"&&!o)throw new TypeError(n);return i}function M4(t,e="complete"){let r=["hour","microsecond","millisecond","minute","nanosecond","second"],n=Mt(t,r,"partial",{emptySourceErrorMessage:"invalid time-like"}),i={};for(let o of r){let s=DBe(n,o);s!==void 0?i[o]=s.value:e==="complete"&&(i[o]=0)}return i}function jr(t,e){let r=t;if(sn(r)){if(Gt(r))return r;if(qe(r)&&(Fn(e),r=ka(R(r,$r),R(r,xo),R(r,se))),bt(r))return Fn(e),yc(R(r,Te),R(r,Re),R(r,Oe),R(r,se));let d=Vx(r);return th(d,Mt(r,Jn(d,["day","month","monthCode","year"]),[]),e)}Fn(e);let{year:n,month:i,day:o,calendar:s,z:a}=function(u){return Rl(u)}(Qo(r));if(a)throw new RangeError("Z designator not supported for PlainDate");if(s||(s="iso8601"),!nh(s))throw new RangeError(`invalid calendar identifier ${s}`);return s=Tl(s),yc(n,i,o,s)}function Gx(t,e,r){let{hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:d}=M4(e),u=Fn(r),c=th(t,e,r),l=R(c,Te),m=R(c,Re),p=R(c,Oe);return{hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:d}=F4(n,i,o,s,a,d,u),{year:l,month:m,day:p,hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:d}}function C0(t,e){let r,n,i,o,s,a,d,u,c,l;if(sn(t)){if(bt(t))return t;if(qe(t))return Fn(e),ka(R(t,$r),R(t,xo),R(t,se));if(Gt(t))return Fn(e),Qs(R(t,Te),R(t,Re),R(t,Oe),0,0,0,0,0,0,R(t,se));l=Vx(t);let m=Mt(t,Jn(l,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c}=Gx(l,m,e))}else{let m;if(Fn(e),{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c,calendar:l,z:m}=function(g){return Rl(g)}(Qo(t)),m)throw new RangeError("Z designator not supported for PlainDateTime");if(bO(r,n,i,o,s,a,d,u,c),l||(l="iso8601"),!nh(l))throw new RangeError(`invalid calendar identifier ${l}`);l=Tl(l)}return Qs(r,n,i,o,s,a,d,u,c,l)}function dw(t){if(Tn(t))return t;let{years:e,months:r,weeks:n,days:i,hours:o,minutes:s,seconds:a,milliseconds:d,microseconds:u,nanoseconds:c}=z0(t);return new(xe("%Temporal.Duration%"))(e,r,n,i,o,s,a,d,u,c)}function fu(t){if(li(t))return t;if(qe(t))return new(xe("%Temporal.Instant%"))(R(t,ct));let e=UBe(Qo(t));return new(xe("%Temporal.Instant%"))(e)}function noe(t,e){let r=t;if(sn(r)){if(xi(r))return r;let a,d;if(Si(r,se))a=R(r,se),d=!1;else{let c=r.calendar;d=c===void 0,c===void 0&&(c="iso8601"),a=na(c)}let u=Mt(r,Jn(a,["day","month","monthCode","year"]),[]);return d&&u.month!==void 0&&u.monthCode===void 0&&u.year===void 0&&(u.year=1972),bw(a,u,e)}Fn(e);let{month:n,day:i,referenceISOYear:o,calendar:s}=cO(Qo(r));if(s===void 0&&(s="iso8601"),!nh(s))throw new RangeError(`invalid calendar identifier ${s}`);return s=Tl(s),o===void 0?(Pl(1972,n,i),Tx(n,i,s)):bw(s,Tx(n,i,s,o))}function Zf(t,e="constrain"){let r,n,i,o,s,a,d=t;if(sn(d)){if(In(d))return d;if(qe(d)&&(d=ka(R(d,$r),R(d,xo),R(d,se))),bt(d))return new(xe("%Temporal.PlainTime%"))(R(d,vt),R(d,wt),R(d,_t),R(d,xt),R(d,Et),R(d,St));({hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=M4(d)),{hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=F4(r,n,i,o,s,a,e)}else({hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=function(c){let l=_Be.exec(c),m,p,g,b,S,A,I;if(l){m=Vn(l[1]),p=Vn(l[2]||l[5]),g=Vn(l[3]||l[6]),g===60&&(g=59);let P=(l[4]||l[7])+"000000000";b=Vn(P.slice(0,3)),S=Vn(P.slice(3,6)),A=Vn(P.slice(6,9)),I=l[14];for(let[,$,N,L]of I.matchAll(Xp))if(N!=="u-ca"&&$==="!")throw new RangeError(`Unrecognized annotation: !${N}=${L}`);if(l[8])throw new RangeError("Z designator not supported for PlainTime")}else{let P,$;if({hasTime:$,hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A,z:P}=Rl(c),!$)throw new RangeError(`time is missing in string: ${c}`);if(P)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(c))return{hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A};try{let{month:P,day:$}=cO(c);Pl(1972,P,$)}catch{try{let{year:P,month:$}=aO(c);Pl(P,$,1)}catch{return{hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A}}}throw new RangeError(`invalid ISO 8601 time-only string ${c}; may need a T prefix`)}(Qo(d))),rA(r,n,i,o,s,a);return new(xe("%Temporal.PlainTime%"))(r,n,i,o,s,a)}function xx(t,e){if(sn(t)){if(_r(t))return t;let s=Vx(t);return q0(s,Mt(t,Jn(s,["month","monthCode","year"]),[]),e)}Fn(e);let{year:r,month:n,referenceISODay:i,calendar:o}=aO(Qo(t));if(o===void 0&&(o="iso8601"),!nh(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=Tl(o),i===void 0?(Pl(r,n,1),Ix(r,n,o)):q0(o,Ix(r,n,o,i))}function B4(t,e,r,n,i,o,s,a,d,u,c,l,m,p,g){let b=new(xe("%Temporal.PlainDateTime%"))(t,e,r,n,i,o,s,a,d);if(u==="wall"||p==="ignore")return R(Xo(l,b,m),ct);if(u==="exact"||p==="use"){let A=Hp(t,e,r,n,i,o,s,a,d);if(A===null)throw new RangeError("ZonedDateTime outside of supported range");return z.default.subtract(A,z.default.BigInt(c))}let S=C4(l,b);for(let A of S){let I=pu(l,A),P=z.default.toNumber(Ia(z.default.BigInt(I),qoe,"halfExpand"));if(I===c||g&&P===c)return R(A,ct)}if(p==="reject"){let A=eA(c),I=fc(l)?R(l,_l):"time zone";throw new RangeError(`Offset ${A} is invalid for ${b.toString()} in ${I}`)}return R(Qoe(S,l,b,m),ct)}function Ex(t,e){let r,n,i,o,s,a,d,u,c,l,m,p,g,b,S=!1,A="option";if(sn(t)){if(qe(t))return t;p=Vx(t);let P=Jn(p,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);P.push("timeZone","offset");let $=Mt(t,P,["timeZone"]);l=Eo($.timeZone),m=$.offset,m===void 0&&(A="wall"),g=gw(e),b=D4(e,"reject"),{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c}=Gx(p,$,e)}else{let P,$;if({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c,ianaName:P,offset:m,z:$,calendar:p}=function(L){let F=Rl(L);if(!F.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return F}(Qo(t)),l=Eo(P),$?A="exact":m||(A="wall"),p||(p="iso8601"),!nh(p))throw new RangeError(`invalid calendar identifier ${p}`);p=Tl(p),S=!0,g=gw(e),b=D4(e,"reject"),Fn(e)}let I=0;return A==="option"&&(I=Wp(m)),Yi(B4(r,n,i,o,s,a,d,u,c,A,I,l,g,b,S),l,p)}function Goe(t,e,r,n,i){Pl(e,r,n),cse(e,r,n),kl(t),kt(t,Te,e),kt(t,Re,r),kt(t,Oe,n),kt(t,se,i),kt(t,koe,!0)}function yc(t,e,r,n="iso8601"){let i=xe("%Temporal.PlainDate%"),o=So(i.prototype);return Goe(o,t,e,r,n),o}function Woe(t,e,r,n,i,o,s,a,d,u,c){bO(e,r,n,i,o,s,a,d,u),dse(e,r,n,i,o,s,a,d,u),kl(t),kt(t,Te,e),kt(t,Re,r),kt(t,Oe,n),kt(t,vt,i),kt(t,wt,o),kt(t,_t,s),kt(t,xt,a),kt(t,Et,d),kt(t,St,u),kt(t,se,c)}function Qs(t,e,r,n,i,o,s,a,d,u="iso8601"){let c=xe("%Temporal.PlainDateTime%"),l=So(c.prototype);return Woe(l,t,e,r,n,i,o,s,a,d,u),l}function Hoe(t,e,r,n,i){Pl(i,e,r),cse(i,e,r),kl(t),kt(t,Re,e),kt(t,Oe,r),kt(t,Te,i),kt(t,se,n),kt(t,Doe,!0)}function Tx(t,e,r="iso8601",n=1972){let i=xe("%Temporal.PlainMonthDay%"),o=So(i.prototype);return Hoe(o,t,e,r,n),o}function Voe(t,e,r,n,i){Pl(e,r,i),function(s,a){Xi(s,P4,T4),s===P4?Xi(a,4,12):s===T4&&Xi(a,1,9)}(e,r),kl(t),kt(t,Te,e),kt(t,Re,r),kt(t,Oe,i),kt(t,se,n),kt(t,Roe,!0)}function Ix(t,e,r="iso8601",n=1){let i=xe("%Temporal.PlainYearMonth%"),o=So(i.prototype);return Voe(o,t,e,r,n),o}function Joe(t,e,r,n){M0(e),kl(t),kt(t,ct,e),kt(t,$r,r),kt(t,se,n);let i=new(xe("%Temporal.Instant%"))(R(t,ct));kt(t,xo,i)}function Yi(t,e,r="iso8601"){let n=xe("%Temporal.ZonedDateTime%"),i=So(n.prototype);return Joe(i,t,e,r),i}function Jn(t,e){if(typeof t=="string"){let i=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.fields%"),i,[e])}let r=Ve(Tr(t,"fields"),t,[e]),n=[];for(let i of r){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");Noe.call(n,i)}return n}function K0(t,e,r){if(typeof t=="string"){let i=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.mergeFields%"),i,[e,r])}let n=Ve(Tr(t,"mergeFields"),t,[e,r]);if(!sn(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function Zi(t,e,r,n,i){let o=i;if(typeof t=="string"){let a=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.dateAdd%"),a,[e,r,n])}o===void 0&&(o=Tr(t,"dateAdd"));let s=L4(o,t,[e,r,n]);if(!Gt(s))throw new TypeError("invalid result");return s}function Gp(t,e,r,n,i){let o=i;if(typeof t=="string"){let a=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.dateUntil%"),a,[e,r,n])}o===void 0&&(o=Tr(t,"dateUntil"));let s=L4(o,t,[e,r,n]);if(!Tn(s))throw new TypeError("invalid result");return s}function z4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.year%"),n,[e])}let r=Ve(Tr(t,"year"),t,[e]);if(typeof r!="number")throw new TypeError("calendar year result must be an integer");if(!Ra(r))throw new RangeError("calendar year result must be an integer");return r}function G4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.month%"),n,[e])}let r=Ve(Tr(t,"month"),t,[e]);if(typeof r!="number")throw new TypeError("calendar month result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar month result must be a positive integer");return r}function Wx(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.monthCode%"),n,[e])}let r=Ve(Tr(t,"monthCode"),t,[e]);if(typeof r!="string")throw new TypeError("calendar monthCode result must be a string");return r}function Hx(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.day%"),n,[e])}let r=Ve(Tr(t,"day"),t,[e]);if(typeof r!="number")throw new TypeError("calendar day result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar day result must be a positive integer");return r}function W4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.era%"),n,[e])}let r=Ve(Tr(t,"era"),t,[e]);if(r===void 0)return r;if(typeof r!="string")throw new TypeError("calendar era result must be a string or undefined");return r}function H4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.eraYear%"),n,[e])}let r=Ve(Tr(t,"eraYear"),t,[e]);if(r===void 0)return r;if(typeof r!="number")throw new TypeError("calendar eraYear result must be an integer or undefined");if(!Ra(r))throw new RangeError("calendar eraYear result must be an integer or undefined");return r}function dO(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.dayOfWeek%"),n,[e])}let r=Ve(Tr(t,"dayOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return r}function uO(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.dayOfYear%"),n,[e])}let r=Ve(Tr(t,"dayOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfYear result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return r}function lO(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.weekOfYear%"),n,[e])}let r=Ve(Tr(t,"weekOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar weekOfYear result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return r}function fO(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.yearOfWeek%"),n,[e])}let r=Ve(Tr(t,"yearOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar yearOfWeek result must be an integer");if(!Ra(r))throw new RangeError("calendar yearOfWeek result must be an integer");return r}function hO(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.daysInWeek%"),n,[e])}let r=Ve(Tr(t,"daysInWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInWeek result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return r}function V4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.daysInMonth%"),n,[e])}let r=Ve(Tr(t,"daysInMonth"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInMonth result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return r}function J4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.daysInYear%"),n,[e])}let r=Ve(Tr(t,"daysInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInYear result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar daysInYear result must be a positive integer");return r}function Y4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.monthsInYear%"),n,[e])}let r=Ve(Tr(t,"monthsInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar monthsInYear result must be a positive integer");if(!Ra(r)||r<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return r}function Z4(t,e){if(typeof t=="string"){let n=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.inLeapYear%"),n,[e])}let r=Ve(Tr(t,"inLeapYear"),t,[e]);if(typeof r!="boolean")throw new TypeError("calendar inLeapYear result must be a boolean");return r}function na(t){if(sn(t)){if(Si(t,se))return R(t,se);if(!function(i){return!!Pn(i)||"dateAdd"in i&&"dateFromFields"in i&&"dateUntil"in i&&"day"in i&&"dayOfWeek"in i&&"dayOfYear"in i&&"daysInMonth"in i&&"daysInWeek"in i&&"daysInYear"in i&&"fields"in i&&"id"in i&&"inLeapYear"in i&&"mergeFields"in i&&"month"in i&&"monthCode"in i&&"monthDayFromFields"in i&&"monthsInYear"in i&&"weekOfYear"in i&&"year"in i&&"yearMonthFromFields"in i&&"yearOfWeek"in i}(t))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return t}let e=Qo(t);if(nh(e))return Tl(e);let r;try{({calendar:r}=Rl(e))}catch{try{({calendar:r}=aO(e))}catch{({calendar:r}=cO(e))}}if(r||(r="iso8601"),!nh(r))throw new RangeError(`invalid calendar identifier ${r}`);return Tl(r)}function Vx(t){if(Si(t,se))return R(t,se);let{calendar:e}=t;return e===void 0?"iso8601":na(e)}function Qi(t){if(typeof t=="string")return t;let e=t.id;if(typeof e!="string")throw new TypeError("calendar.id should be a string");return e}function Tw(t){return sn(t)?t:new(xe("%Temporal.Calendar%"))(t)}function Jx(t,e){return t===e?!0:Qi(t)===Qi(e)}function X4(t,e,r){if(t===e)return;let n=Qi(t),i=Qi(e);if(n!==i)throw new RangeError(`cannot ${r} of ${n} and ${i} calendars`)}function Yoe(t,e){if(t===e)return e;let r=Qi(t),n=Qi(e);if(r===n||r==="iso8601")return e;if(n==="iso8601")return t;throw new RangeError("irreconcilable calendars")}function th(t,e,r,n){if(typeof t=="string"){let o=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.dateFromFields%"),o,[e,r])}let i=Ve(n??Tr(t,"dateFromFields"),t,[e,r]);if(!Gt(i))throw new TypeError("invalid result");return i}function q0(t,e,r){if(typeof t=="string"){let i=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.yearMonthFromFields%"),i,[e,r])}let n=Ve(Tr(t,"yearMonthFromFields"),t,[e,r]);if(!_r(n))throw new TypeError("invalid result");return n}function bw(t,e,r){if(typeof t=="string"){let i=new(xe("%Temporal.Calendar%"))(t);return Ve(xe("%Temporal.Calendar.prototype.monthDayFromFields%"),i,[e,r])}let n=Ve(Tr(t,"monthDayFromFields"),t,[e,r]);if(!xi(n))throw new TypeError("invalid result");return n}function Eo(t){if(sn(t)){if(qe(t))return R(t,$r);if(!function(r){return!!fc(r)||"getOffsetNanosecondsFor"in r&&"getPossibleInstantsFor"in r&&"id"in r}(t))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return t}return jBe(Qo(t))}function kx(t){if(typeof t=="string")return t;let e=t.id;if(typeof e!="string")throw new TypeError("timeZone.id should be a string");return e}function Zoe(t){return sn(t)?t:new(xe("%Temporal.TimeZone%"))(t)}function Xoe(t,e){return t===e?!0:kx(t)===kx(e)}function vw(t){return yc(R(t,Te),R(t,Re),R(t,Oe),R(t,se))}function pO(t){return new(xe("%Temporal.PlainTime%"))(R(t,vt),R(t,wt),R(t,_t),R(t,xt),R(t,Et),R(t,St))}function pu(t,e,r){if(typeof t=="string"){let i=new(xe("%Temporal.TimeZone%"))(t);return Ve(xe("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),i,[e])}let n=Ve(r??Tr(t,"getOffsetNanosecondsFor"),t,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!Ra(n)||on(n)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function BC(t,e){return eA(pu(t,e))}function ka(t,e,r){let n=R(e,ct),i=pu(t,e),{year:o,month:s,day:a,hour:d,minute:u,second:c,millisecond:l,microsecond:m,nanosecond:p}=tse(n);return{year:o,month:s,day:a,hour:d,minute:u,second:c,millisecond:l,microsecond:m,nanosecond:p}=yO(o,s,a,d,u,c,l,m,p+i),Qs(o,s,a,d,u,c,l,m,p,r)}function Xo(t,e,r){return Qoe(C4(t,e),t,e,r)}function Qoe(t,e,r,n){let i=xe("%Temporal.Instant%"),o=t.length;if(o===1)return t[0];if(o)switch(n){case"compatible":case"earlier":return t[0];case"later":return t[o-1];case"reject":throw new RangeError("multiple instants found")}let s=R(r,Te),a=R(r,Re),d=R(r,Oe),u=R(r,vt),c=R(r,wt),l=R(r,_t),m=R(r,xt),p=R(r,Et),g=R(r,St),b=Hp(s,a,d,u,c,l,m,p,g);if(b===null)throw new RangeError("DateTime outside of supported range");let S=new i(z.default.subtract(b,Al)),A=new i(z.default.add(b,Al)),I=pu(e,S),P=pu(e,A)-I;switch(n){case"earlier":{let $=R(r,se),N=xe("%Temporal.PlainDateTime%"),L=NC(s,a,d,u,c,l,m,p,g,$,0,0,0,0,0,0,0,0,0,-P,void 0);return C4(e,new N(L.year,L.month,L.day,L.hour,L.minute,L.second,L.millisecond,L.microsecond,L.nanosecond,$))[0]}case"compatible":case"later":{let $=R(r,se),N=xe("%Temporal.PlainDateTime%"),L=NC(s,a,d,u,c,l,m,p,g,$,0,0,0,0,0,0,0,0,0,P,void 0),F=C4(e,new N(L.year,L.month,L.day,L.hour,L.minute,L.second,L.millisecond,L.microsecond,L.nanosecond,$));return F[F.length-1]}case"reject":throw new RangeError("no such instant found")}}function C4(t,e,r){if(typeof t=="string"){let o=new(xe("%Temporal.TimeZone%"))(t);return Ve(xe("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),o,[e])}let n=Ve(r??Tr(t,"getPossibleInstantsFor"),t,[e]),i=[];for(let o of n){if(!li(o))throw new TypeError("bad return from getPossibleInstantsFor");Noe.call(i,o)}return i}function G0(t){let e;return t<0||t>9999?e=(t<0?"-":"+")+`000000${on(t)}`.slice(-6):e=`0000${t}`.slice(-4),e}function pn(t){return`00${t}`.slice(-2)}function Q4(t,e,r,n,i){if(i==="minute")return"";let o=`:${pn(t)}`,s,a=1e6*e+1e3*r+n;if(i==="auto"){if(a===0)return o;for(s=`${a}`.padStart(9,"0");s[s.length-1]==="0";)s=s.slice(0,-1)}else{if(i===0)return o;s=`${a}`.padStart(9,"0").slice(0,i)}return`${o}.${s}`}function ioe(t,e,r){let n=e;n===void 0&&(n="UTC");let i=ka(n,t,"iso8601"),o=G0(R(i,Te)),s=pn(R(i,Re)),a=pn(R(i,Oe)),d=pn(R(i,vt)),u=pn(R(i,wt)),c=Q4(R(i,_t),R(i,xt),R(i,Et),R(i,St),r),l="Z";return e!==void 0&&(l=ese(pu(n,t))),`${o}-${s}-${a}T${d}:${u}${c}${l}`}function EC(t,e="auto",r){function n(G){return G<=RBe?G.toString(10):z.default.BigInt(G).toString(10)}let i=R(t,Fo),o=R(t,Ni),s=R(t,Bs),a=R(t,zo),d=R(t,Go),u=R(t,Wo),c=R(t,Ho),l=R(t,Vo),m=R(t,Jo),p=R(t,Yo),g=Sl(i,o,s,a,d,u,c,l,m,p);if(r){let{unit:G,increment:q,roundingMode:T}=r;({seconds:c,milliseconds:l,microseconds:m,nanoseconds:p}=rh(0,0,0,0,0,0,c,l,m,p,q,G,T))}let b=[];i&&b.push(`${n(on(i))}Y`),o&&b.push(`${n(on(o))}M`),s&&b.push(`${n(on(s))}W`),a&&b.push(`${n(on(a))}D`);let S=[];d&&S.push(`${n(on(d))}H`),u&&S.push(`${n(on(u))}M`);let A=[],I,P,$,N,L=ww(0,0,0,c,l,m,p,0);({quotient:L,remainder:I}=Ln(L,xr)),{quotient:L,remainder:P}=Ln(L,xr),{quotient:N,remainder:$}=Ln(L,xr);let F=1e6*on(z.default.toNumber($))+1e3*on(z.default.toNumber(P))+on(z.default.toNumber(I)),U;if(e==="auto"){if(F!==0)for(U=`${F}`.padStart(9,"0");U[U.length-1]==="0";)U=U.slice(0,-1)}else e!==0&&(U=`${F}`.padStart(9,"0").slice(0,e));return U&&A.unshift(".",U),z.default.equal(N,kn)&&!A.length&&e==="auto"||A.unshift(lu(N).toString()),A.length&&S.push(`${A.join("")}S`),S.length&&S.unshift("T"),b.length||S.length?`${g<0?"-":""}P${b.join("")}${S.join("")}`:"PT0S"}function ooe(t,e="auto"){return`${G0(R(t,Te))}-${pn(R(t,Re))}-${pn(R(t,Oe))}${oO(R(t,se),e)}`}function soe(t,e,r="auto",n){let i=R(t,Te),o=R(t,Re),s=R(t,Oe),a=R(t,vt),d=R(t,wt),u=R(t,_t),c=R(t,xt),l=R(t,Et),m=R(t,St);if(n){let{unit:p,increment:g,roundingMode:b}=n;({year:i,month:o,day:s,hour:a,minute:d,second:u,millisecond:c,microsecond:l,nanosecond:m}=xO(i,o,s,a,d,u,c,l,m,g,p,b))}return`${G0(i)}-${pn(o)}-${pn(s)}T${pn(a)}:${pn(d)}${Q4(u,c,l,m,e)}${oO(R(t,se),r)}`}function aoe(t,e="auto"){let r=`${pn(R(t,Re))}-${pn(R(t,Oe))}`,n=Qi(R(t,se));(e==="always"||e==="critical"||n!=="iso8601")&&(r=`${G0(R(t,Te))}-${r}`);let i=sO(n,e);return i&&(r+=i),r}function coe(t,e="auto"){let r=`${G0(R(t,Te))}-${pn(R(t,Re))}`,n=Qi(R(t,se));(e==="always"||e==="critical"||n!=="iso8601")&&(r+=`-${pn(R(t,Oe))}`);let i=sO(n,e);return i&&(r+=i),r}function doe(t,e,r="auto",n="auto",i="auto",o){let s=R(t,xo);if(o){let{unit:c,increment:l,roundingMode:m}=o,p=N4(R(t,ct),l,c,m);s=new(xe("%Temporal.Instant%"))(p)}let a=R(t,$r),d=ka(a,s,"iso8601"),u=`${G0(R(d,Te))}-${pn(R(d,Re))}-${pn(R(d,Oe))}T${pn(R(d,vt))}:${pn(R(d,wt))}${Q4(R(d,_t),R(d,xt),R(d,Et),R(d,St),e)}`;return i!=="never"&&(u+=ese(pu(a,s))),n!=="never"&&(u+=`[${n==="critical"?"!":""}${kx(a)}]`),u+=oO(R(t,se),r),u}function sw(t){return yse.test(Kx(t))}function Wp(t){let e=yse.exec(Kx(t));if(!e)throw new RangeError(`invalid time zone offset: ${t}`);return(e[1]==="-"||e[1]==="\u2212"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function mO(t){return sw(t)?eA(Wp(t)):zoe(Kx(t)).resolvedOptions().timeZone}function Xf(t,e){let{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u,nanosecond:c}=rse(t,e),l=r%400,m=(r-l)/400,p=z.default.multiply(z.default.BigInt(146097),Al),g=Hp(l,n,i,o,s,a,d,u,c),b=z.default.add(g,z.default.multiply(p,z.default.BigInt(m)));return z.default.toNumber(z.default.subtract(b,e))}function eA(t){let e=t<0?"-":"+",r=on(t),n=r%1e9,i=ta(r/1e9)%60,o=ta(r/6e10)%60,s=pn(ta(r/36e11)),a=pn(o),d=pn(i),u="";if(n){let c=`${n}`.padStart(9,"0");for(;c[c.length-1]==="0";)c=c.slice(0,-1);u=`:${d}.${c}`}else i&&(u=`:${d}`);return`${e}${s}:${a}${u}`}function ese(t){let e=z.default.toNumber(Ia(z.default.BigInt(t),qoe,"halfExpand")),r=e<0?"-":"+";e=on(e);let n=e/6e10%60;return`${r}${pn(ta(e/36e11))}:${pn(n)}`}function Hp(t,e,r,n,i,o,s,a,d){let u=new Date;u.setUTCHours(n,i,o,s),u.setUTCFullYear(t,e-1,r);let c=u.getTime();if(q4(c))return null;let l=z.default.multiply(z.default.BigInt(c),pc);return l=z.default.add(l,z.default.multiply(z.default.BigInt(a),xr)),l=z.default.add(l,z.default.BigInt(d)),z.default.lessThan(l,Px)||z.default.greaterThan(l,mw)?null:l}function tse(t){let{quotient:e,remainder:r}=Ln(t,pc),n=z.default.toNumber(e),i=z.default.toNumber(r);i<0&&(i+=1e6,n-=1);let o=ta(i/1e3)%1e3,s=i%1e3,a=new Date(n);return{epochMilliseconds:n,year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds(),microsecond:o,nanosecond:s}}function rse(t,e){let{epochMilliseconds:r,millisecond:n,microsecond:i,nanosecond:o}=tse(e),{year:s,month:a,day:d,hour:u,minute:c,second:l}=function(p,g){let b=zoe(p).format(new Date(g));return function(A){let I=A.split(/[^\w]+/);if(I.length!==7)throw new RangeError(`expected 7 parts in "${A}`);let P=+I[0],$=+I[1],N=+I[2],L=I[3].toUpperCase();if(L==="B"||L==="BC")N=1-N;else if(L!=="A"&&L!=="AD")throw new RangeError(`Unknown era ${L} in "${A}`);let F=+I[4];F===24&&(F=0);let U=+I[5],G=+I[6];if(!(Zo(N)&&Zo(P)&&Zo($)&&Zo(F)&&Zo(U)&&Zo(G)))throw new RangeError(`Invalid number in "${A}`);return{year:N,month:P,day:$,hour:F,minute:U,second:G}}(b)}(t,r);return yO(s,a,d,u,c,l,n,i,o)}function uoe(t,e){return z.default.lessThan(t,e)?e:t}function nse(){return z.default.add(SO(),CBe)}function ise(t,e){if(z.default.lessThan(e,aw))return ise(t,aw);let r=z.default.add(e,Loe),n=uoe(nse(),r),i=uoe(aw,e),o=Xf(t,i),s=i,a=o;for(;o===a&&z.default.lessThan(z.default.BigInt(i),n);){if(s=z.default.add(i,Foe),z.default.greaterThan(s,mw))return null;a=Xf(t,s),o===a&&(i=s)}return o===a?null:gse(d=>Xf(t,d),i,s,o,a)}function CC(t,e){let r=nse(),n=z.default.greaterThan(e,r),i=n?z.default.subtract(e,Loe):aw;if(t==="Africa/Casablanca"||t==="Africa/El_Aaiun"){let u=R(fu("2088-01-01T00Z"),ct);if(z.default.lessThan(u,e))return CC(t,u)}let o=z.default.subtract(e,Ew);if(z.default.lessThan(o,aw))return null;let s=Xf(t,o),a=o,d=s;for(;s===d&&z.default.greaterThan(o,i);){if(a=z.default.subtract(o,Foe),z.default.lessThan(a,aw))return null;d=Xf(t,a),s===d&&(o=a)}if(s===d){if(n){let u=z.default.subtract(r,Al);return CC(t,u)}return null}return gse(u=>Xf(t,u),a,o,d,s)}function Vp(t){return t===void 0?!1:t%4==0&&(t%100!=0||t%400==0)}function Qf(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Vp(t)?"leapyear":"standard"][e-1]}function OC(t,e,r){let n=e+(e<3?10:-2),i=t-(e<3?1:0),o=ta(i/100),s=i-100*o,a=(r+ta(2.6*n-.2)+(s+ta(s/4))+(ta(o/4)-2*o))%7;return a+(a<=0?7:0)}function O4(t,e,r){let n=r;for(let i=e-1;i>0;i--)n+=Qf(t,i);return n}function loe(t,e,r){let n=O4(t,e,r),i=OC(t,e,r)||7,o=OC(t,1,1),s=ta((n-i+10)/7);return s<1?o===5||o===6&&Vp(t-1)?{week:53,year:t-1}:{week:52,year:t-1}:s===53&&(Vp(t)?366:365)-n<4-i?{week:1,year:t+1}:{week:s,year:t}}function Sl(t,e,r,n,i,o,s,a,d,u){for(let c of[t,e,r,n,i,o,s,a,d,u])if(c!==0)return c<0?-1:1;return 0}function x4(t,e){let r=t,n=e;if(!Zo(r)||!Zo(n))throw new RangeError("infinity is out of range");return n-=1,r+=ta(n/12),n%=12,n<0&&(n+=12),n+=1,{year:r,month:n}}function tA(t,e,r){let n=t,i=e,o=r;if(!Zo(o))throw new RangeError("infinity is out of range");({year:n,month:i}=x4(n,i));let s=146097;if(on(o)>s){let u=B0(o/s);n+=400*u,o-=u*s}let a=0,d=i>2?n:n-1;for(;a=Vp(d)?366:365,o<-a;)n-=1,d-=1,o+=a;for(d+=1;a=Vp(d)?366:365,o>a;)n+=1,d+=1,o-=a;for(;o<1;)({year:n,month:i}=x4(n,i-1)),o+=Qf(n,i);for(;o>Qf(n,i);)o-=Qf(n,i),{year:n,month:i}=x4(n,i+1);return{year:n,month:i,day:o}}function yO(t,e,r,n,i,o,s,a,d){let{deltaDays:u,hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}=Yf(n,i,o,s,a,d),{year:S,month:A,day:I}=tA(t,e,r+u);return{year:S,month:A,day:I,hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}}function Yf(t,e,r,n,i,o){let s,a=z.default.BigInt(t),d=z.default.BigInt(e),u=z.default.BigInt(r),c=z.default.BigInt(n),l=z.default.BigInt(i),m=z.default.BigInt(o);return{quotient:s,remainder:m}=D0(m,xr),l=z.default.add(l,s),{quotient:s,remainder:l}=D0(l,xr),c=z.default.add(c,s),{quotient:s,remainder:c}=D0(c,xr),u=z.default.add(u,s),{quotient:s,remainder:u}=D0(u,xl),d=z.default.add(d,s),{quotient:s,remainder:d}=D0(d,xl),a=z.default.add(a,s),{quotient:s,remainder:a}=D0(a,Uoe),{deltaDays:z.default.toNumber(s),hour:z.default.toNumber(a),minute:z.default.toNumber(d),second:z.default.toNumber(u),millisecond:z.default.toNumber(c),microsecond:z.default.toNumber(l),nanosecond:z.default.toNumber(m)}}function ww(t,e,r,n,i,o,s,a){let d=z.default.BigInt(t),u=z.default.BigInt(s);t!==0&&(u=z.default.subtract(z.default.BigInt(s),z.default.BigInt(a)));let c=z.default.add(z.default.BigInt(e),z.default.multiply(d,z.default.BigInt(24))),l=z.default.add(z.default.BigInt(r),z.default.multiply(c,xl)),m=z.default.add(z.default.BigInt(n),z.default.multiply(l,xl)),p=z.default.add(z.default.BigInt(i),z.default.multiply(m,xr)),g=z.default.add(z.default.BigInt(o),z.default.multiply(p,xr));return z.default.add(z.default.BigInt(u),z.default.multiply(g,xr))}function gO(t,e){let r=xe("%Temporal.Instant%"),n=pw(z.default.toNumber(t)),i=z.default.BigInt(t),o=864e11;if(n===0)return{days:0,nanoseconds:kn,dayLengthNs:o};if(!qe(e)){let P;return{quotient:P,remainder:i}=Ln(i,z.default.BigInt(o)),{days:z.default.toNumber(P),nanoseconds:i,dayLengthNs:o}}let s=R(e,ct),a=R(e,xo),d=z.default.add(s,i),u=new r(d),c=R(e,$r),l=R(e,se),m=ka(c,a,l),p=ka(c,u,l),{days:g}=_O(R(m,Te),R(m,Re),R(m,Oe),R(m,vt),R(m,wt),R(m,_t),R(m,xt),R(m,Et),R(m,St),R(p,Te),R(p,Re),R(p,Oe),R(p,vt),R(p,wt),R(p,_t),R(p,xt),R(p,Et),R(p,St),l,"day",So(null)),b=mc(a,c,l,0,0,0,g,0,0,0,0,0,0),S=z.default.BigInt(g);if(n===1)for(;z.default.greaterThan(S,kn)&&z.default.greaterThan(b,d);)S=z.default.subtract(S,Ew),b=mc(a,c,l,0,0,0,z.default.toNumber(S),0,0,0,0,0,0);i=z.default.subtract(d,b);let A=!1,I=new r(b);do{let P=mc(I,c,l,0,0,0,n,0,0,0,0,0,0),$=R(I,ct);o=z.default.toNumber(z.default.subtract(P,$)),A=z.default.greaterThanOrEqual(z.default.multiply(z.default.subtract(i,z.default.BigInt(o)),z.default.BigInt(n)),kn),A&&(i=z.default.subtract(i,z.default.BigInt(o)),I=new r(P),S=z.default.add(S,z.default.BigInt(n)))}while(A);if(!hc(S)&&Zie(S)!==n)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!hc(i)&&Zie(i)!==n)throw I4(i)&&n===1?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if(z.default.greaterThanOrEqual(lu(i),lu(z.default.BigInt(o))))throw new Error("assert not reached");return{days:z.default.toNumber(S),nanoseconds:i,dayLengthNs:on(o)}}function dd(t,e,r,n,i,o,s,a,d){let u=ose(t,e,r,n,i,o,s,a,d);if(u==="positive overflow"||u==="negative overflow")throw new RangeError("Duration out of range");return u}function ose(t,e,r,n,i,o,s,a,d){let u,c,l,m,p,g,b=t;if(qe(d)){let F=mc(R(d,xo),R(d,$r),R(d,se),0,0,0,b,e,r,n,i,o,s),U=R(d,ct);u=z.default.subtract(F,U)}else u=ww(b,e,r,n,i,o,s,0);a==="year"||a==="month"||a==="week"||a==="day"?{days:b,nanoseconds:u}=gO(u,d):b=0;let S=z.default.lessThan(u,kn)?-1:1;switch(u=lu(u),c=l=m=p=g=kn,a){case"year":case"month":case"week":case"day":case"hour":({quotient:c,remainder:u}=Ln(u,xr)),{quotient:l,remainder:c}=Ln(c,xr),{quotient:m,remainder:l}=Ln(l,xr),{quotient:p,remainder:m}=Ln(m,xl),{quotient:g,remainder:p}=Ln(p,xl);break;case"minute":({quotient:c,remainder:u}=Ln(u,xr)),{quotient:l,remainder:c}=Ln(c,xr),{quotient:m,remainder:l}=Ln(l,xr),{quotient:p,remainder:m}=Ln(m,xl);break;case"second":({quotient:c,remainder:u}=Ln(u,xr)),{quotient:l,remainder:c}=Ln(c,xr),{quotient:m,remainder:l}=Ln(l,xr);break;case"millisecond":({quotient:c,remainder:u}=Ln(u,xr)),{quotient:l,remainder:c}=Ln(c,xr);break;case"microsecond":({quotient:c,remainder:u}=Ln(u,xr));break;case"nanosecond":break;default:throw new Error("assert not reached")}let A=z.default.toNumber(g)*S,I=z.default.toNumber(p)*S,P=z.default.toNumber(m)*S,$=z.default.toNumber(l)*S,N=z.default.toNumber(c)*S,L=z.default.toNumber(u)*S;for(let F of[b,A,I,P,$,N,L])if(!Zo(F))return S===1?"positive overflow":"negative overflow";return{days:b,hours:A,minutes:I,seconds:P,milliseconds:$,microseconds:N,nanoseconds:L}}function w4(t,e,r,n,i,o){let s=xe("%Temporal.Duration%"),a=Sl(t,e,r,n,0,0,0,0,0,0);if(a===0)return{years:t,months:e,weeks:r,days:n};let d=z.default.BigInt(a),u,c,l=z.default.BigInt(t),m=z.default.BigInt(e),p=z.default.BigInt(r),g=z.default.BigInt(n);o&&(c=jr(o),u=R(c,se));let b=new s(a),S=new s(0,a),A=new s(0,0,a);switch(i){case"year":break;case"month":{if(!u)throw new RangeError("a starting point is required for months balancing");let I,P;for(typeof u!="string"&&(I=Tr(u,"dateAdd"),P=Tr(u,"dateUntil"));!hc(l);){let $=Zi(u,c,b,void 0,I),N=So(null);N.largestUnit="month";let L=Gp(u,c,$,N,P),F=z.default.BigInt(R(L,Ni));c=$,m=z.default.add(m,F),l=z.default.subtract(l,d)}}break;case"week":{if(!u)throw new RangeError("a starting point is required for weeks balancing");let I=typeof u!="string"?Tr(u,"dateAdd"):void 0;for(;!hc(l);){let P;({relativeTo:c,days:P}=_o(u,c,b,I)),g=z.default.add(g,z.default.BigInt(P)),l=z.default.subtract(l,d)}for(;!hc(m);){let P;({relativeTo:c,days:P}=_o(u,c,S,I)),g=z.default.add(g,z.default.BigInt(P)),m=z.default.subtract(m,d)}break}default:{if(hc(l)&&hc(m)&&hc(p))break;if(!u)throw new RangeError("a starting point is required for balancing calendar units");let I=typeof u!="string"?Tr(u,"dateAdd"):void 0;for(;!hc(l);){let P;({relativeTo:c,days:P}=_o(u,c,b,I)),g=z.default.add(g,z.default.BigInt(P)),l=z.default.subtract(l,d)}for(;!hc(m);){let P;({relativeTo:c,days:P}=_o(u,c,S,I)),g=z.default.add(g,z.default.BigInt(P)),m=z.default.subtract(m,d)}for(;!hc(p);){let P;({relativeTo:c,days:P}=_o(u,c,A,I)),g=z.default.add(g,z.default.BigInt(P)),p=z.default.subtract(p,d)}break}}return{years:z.default.toNumber(l),months:z.default.toNumber(m),weeks:z.default.toNumber(p),days:z.default.toNumber(g)}}function foe(t,e,r,n,i){if(qe(t)){let o=R(t,xo),s=R(t,$r),a=R(t,se),d=pu(s,o),u=mc(o,s,a,e,r,n,i,0,0,0,0,0,0);return pu(s,new(xe("%Temporal.Instant%"))(u))-d}return 0}function sse(t){return new(xe("%Temporal.Duration%"))(-R(t,Fo),-R(t,Ni),-R(t,Bs),-R(t,zo),-R(t,Go),-R(t,Wo),-R(t,Ho),-R(t,Vo),-R(t,Jo),-R(t,Yo))}function ea(t,e,r){return TBe(r,IBe(e,t))}function ase(t,e,r){let n=ea(e,1,12);return{year:t,month:n,day:ea(r,1,Qf(t,n))}}function Xi(t,e,r){if(t<e||t>r)throw new RangeError(`value out of range: ${e} <= ${t} <= ${r}`)}function Pl(t,e,r){Xi(e,1,12),Xi(r,1,Qf(t,e))}function cse(t,e,r){dse(t,e,r,12,0,0,0,0,0)}function rA(t,e,r,n,i,o){Xi(t,0,23),Xi(e,0,59),Xi(r,0,59),Xi(n,0,999),Xi(i,0,999),Xi(o,0,999)}function bO(t,e,r,n,i,o,s,a,d){Pl(t,e,r),rA(n,i,o,s,a,d)}function dse(t,e,r,n,i,o,s,a,d){if(Xi(t,P4,T4),t===P4&&Hp(t,e,r+1,n,i,o,s,a,d-1)==null||t===T4&&Hp(t,e,r-1,n,i,o,s,a,d+1)==null)throw new RangeError("DateTime outside of supported range")}function M0(t){if(z.default.lessThan(t,Px)||z.default.greaterThan(t,mw))throw new RangeError("Instant outside of supported range")}function $4(t,e,r,n,i,o,s,a,d,u){let c=Sl(t,e,r,n,i,o,s,a,d,u);for(let l of[t,e,r,n,i,o,s,a,d,u]){if(!Zo(l))throw new RangeError("infinite values not allowed as duration fields");let m=pw(l);if(m!==0&&m!==c)throw new RangeError("mixed-sign values not allowed as duration fields")}}function vO(t,e,r,n,i,o,s){switch(s){case"year":case"month":{let a=-zp(t,e,r,n,i,o);if(a===0)return{years:0,months:0,weeks:0,days:0};let d={year:t,month:e,day:r},u={year:n,month:i,day:o},c=u.year-d.year,l=O0(t,e,r,c,0,0,0,"constrain"),m=-zp(l.year,l.month,l.day,n,i,o);if(m===0)return s==="year"?{years:c,months:0,weeks:0,days:0}:{years:0,months:12*c,weeks:0,days:0};let p=u.month-d.month;if(m!==a&&(c-=a,p+=12*a),l=O0(t,e,r,c,p,0,0,"constrain"),m=-zp(l.year,l.month,l.day,n,i,o),m===0)return s==="year"?{years:c,months:p,weeks:0,days:0}:{years:0,months:p+12*c,weeks:0,days:0};m!==a&&(p-=a,p===-a&&(c-=a,p=11*a),l=O0(t,e,r,c,p,0,0,"constrain"));let g=0;return g=l.month===u.month?u.day-l.day:a<0?-l.day-(Qf(u.year,u.month)-u.day):u.day+(Qf(l.year,l.month)-l.day),s==="month"&&(p+=12*c,c=0),{years:c,months:p,weeks:0,days:g}}case"week":case"day":{let a,d,u;zp(t,e,r,n,i,o)<0?(d={year:t,month:e,day:r},a={year:n,month:i,day:o},u=1):(d={year:n,month:i,day:o},a={year:t,month:e,day:r},u=-1);let c=O4(a.year,a.month,a.day)-O4(d.year,d.month,d.day);for(let m=d.year;m<a.year;++m)c+=Vp(m)?366:365;let l=0;return s==="week"&&(l=ta(c/7),c%=7),l*=u,c*=u,{years:0,months:0,weeks:l,days:c}}default:throw new Error("assert not reached")}}function use(t,e,r,n,i,o,s,a,d,u,c,l){let m=s-t,p=a-e,g=d-r,b=u-n,S=c-i,A=l-o,I=Sl(0,0,0,0,m,p,g,b,S,A);m*=I,p*=I,g*=I,b*=I,S*=I,A*=I;let P=0;if({deltaDays:P,hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A}=Yf(m,p,g,b,S,A),P!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return m*=I,p*=I,g*=I,b*=I,S*=I,A*=I,{hours:m,minutes:p,seconds:g,milliseconds:b,microseconds:S,nanoseconds:A}}function wO(t,e,r,n,i,o){let s=z.default.subtract(e,t),a=0,d=0,u=z.default.toNumber(z.default.remainder(s,xr)),c=z.default.toNumber(z.default.remainder(z.default.divide(s,xr),xr)),l=z.default.toNumber(z.default.remainder(z.default.divide(s,pc),xr)),m=z.default.toNumber(z.default.divide(s,El));return{hours:a,minutes:d,seconds:m,milliseconds:l,microseconds:c,nanoseconds:u}=rh(0,0,0,0,0,0,m,l,c,u,r,n,o),dd(0,a,d,m,l,c,u,i)}function _O(t,e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I,P,$){let N=t,L=e,F=r,{hours:U,minutes:G,seconds:q,milliseconds:T,microseconds:E,nanoseconds:k}=use(n,i,o,s,a,d,m,p,g,b,S,A),f=Sl(0,0,0,0,U,G,q,T,E,k);zp(u,c,l,N,L,F)===-f&&({year:N,month:L,day:F}=tA(N,L,F-f),{hours:U,minutes:G,seconds:q,milliseconds:T,microseconds:E,nanoseconds:k}=dd(-f,U,G,q,T,E,k,P));let y=yc(N,L,F,I),w=yc(u,c,l,I),_=U0("day",P),x=Qp($);x.largestUnit=_;let{years:v,months:D,weeks:K,days:M}=Gp(I,y,w,x);return{days:M,hours:U,minutes:G,seconds:q,milliseconds:T,microseconds:E,nanoseconds:k}=dd(M,U,G,q,T,E,k,P),{years:v,months:D,weeks:K,days:M,hours:U,minutes:G,seconds:q,milliseconds:T,microseconds:E,nanoseconds:k}}function lse(t,e,r,n,i,o){let s=z.default.subtract(e,t);if(z.default.equal(s,kn))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let a=xe("%Temporal.Instant%"),d=new a(t),u=new a(e),c=ka(r,d,n),l=ka(r,u,n),{years:m,months:p,weeks:g,days:b}=_O(R(c,Te),R(c,Re),R(c,Oe),R(c,vt),R(c,wt),R(c,_t),R(c,xt),R(c,Et),R(c,St),R(l,Te),R(l,Re),R(l,Oe),R(l,vt),R(l,wt),R(l,_t),R(l,xt),R(l,Et),R(l,St),n,i,o),S=mc(d,r,n,m,p,g,0,0,0,0,0,0,0),A=z.default.subtract(e,S),I=Yi(S,r,n);({nanoseconds:A,days:b}=gO(A,I));let{hours:P,minutes:$,seconds:N,milliseconds:L,microseconds:F,nanoseconds:U}=dd(0,0,0,0,0,0,z.default.toNumber(A),"hour");return{years:m,months:p,weeks:g,days:b,hours:P,minutes:$,seconds:N,milliseconds:L,microseconds:F,nanoseconds:U}}function Iw(t,e,r,n,i,o){let s=qx.reduce((p,g)=>{let b=g[0],S=g[1],A=g[2];return r!=="datetime"&&A!==r||n.includes(S)||p.push(S,b),p},[]),a=ra(e,"largestUnit",r,"auto");if(n.includes(a))throw new RangeError(`largestUnit must be one of ${s.join(", ")}, not ${a}`);let d=Aw(e),u=hu(e,"trunc");t==="since"&&(u=function(g){switch(g){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return g}}(u));let c=ra(e,"smallestUnit",r,i);if(n.includes(c))throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${c}`);let l=U0(o,c);if(a==="auto"&&(a=l),U0(a,c)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${c}`);let m={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[c];return m!==void 0&&Pw(d,m,!1),{largestUnit:a,roundingIncrement:d,roundingMode:u,smallestUnit:c}}function hoe(t,e,r,n){let i=t==="since"?-1:1,o=fu(r),s=Iw(t,Qp(n),"time",[],"nanosecond","second"),a=R(e,ct),d=R(o,ct),{hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=wO(a,d,s.roundingIncrement,s.smallestUnit,s.largestUnit,s.roundingMode);return new(xe("%Temporal.Duration%"))(0,0,0,0,i*u,i*c,i*l,i*m,i*p,i*g)}function poe(t,e,r,n){let i=t==="since"?-1:1,o=jr(r),s=R(e,se);X4(s,R(o,se),"compute difference between dates");let a=Qp(n),d=Iw(t,a,"date",[],"day","day");a.largestUnit=d.largestUnit;let{years:u,months:c,weeks:l,days:m}=Gp(s,e,o,a);return d.smallestUnit==="day"&&d.roundingIncrement===1||({years:u,months:c,weeks:l,days:m}=rh(u,c,l,m,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)),new(xe("%Temporal.Duration%"))(i*u,i*c,i*l,i*m,0,0,0,0,0,0)}function moe(t,e,r,n){let i=t==="since"?-1:1,o=C0(r),s=R(e,se);X4(s,R(o,se),"compute difference between dates");let a=Qp(n),d=Iw(t,a,"datetime",[],"nanosecond","day"),{years:u,months:c,weeks:l,days:m,hours:p,minutes:g,seconds:b,milliseconds:S,microseconds:A,nanoseconds:I}=_O(R(e,Te),R(e,Re),R(e,Oe),R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St),R(o,Te),R(o,Re),R(o,Oe),R(o,vt),R(o,wt),R(o,_t),R(o,xt),R(o,Et),R(o,St),s,d.largestUnit,a),P=vw(e);return{years:u,months:c,weeks:l,days:m,hours:p,minutes:g,seconds:b,milliseconds:S,microseconds:A,nanoseconds:I}=rh(u,c,l,m,p,g,b,S,A,I,d.roundingIncrement,d.smallestUnit,d.roundingMode,P),{days:m,hours:p,minutes:g,seconds:b,milliseconds:S,microseconds:A,nanoseconds:I}=dd(m,p,g,b,S,A,I,d.largestUnit),new(xe("%Temporal.Duration%"))(i*u,i*c,i*l,i*m,i*p,i*g,i*b,i*S,i*A,i*I)}function yoe(t,e,r,n){let i=t==="since"?-1:1,o=Zf(r),s=Iw(t,Qp(n),"time",[],"nanosecond","hour"),{hours:a,minutes:d,seconds:u,milliseconds:c,microseconds:l,nanoseconds:m}=use(R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St),R(o,vt),R(o,wt),R(o,_t),R(o,xt),R(o,Et),R(o,St));return{hours:a,minutes:d,seconds:u,milliseconds:c,microseconds:l,nanoseconds:m}=rh(0,0,0,0,a,d,u,c,l,m,s.roundingIncrement,s.smallestUnit,s.roundingMode),{hours:a,minutes:d,seconds:u,milliseconds:c,microseconds:l,nanoseconds:m}=dd(0,a,d,u,c,l,m,s.largestUnit),new(xe("%Temporal.Duration%"))(0,0,0,0,i*a,i*d,i*u,i*c,i*l,i*m)}function goe(t,e,r,n){let i=t==="since"?-1:1,o=xx(r),s=R(e,se);X4(s,R(o,se),"compute difference between months");let a=Qp(n),d=Iw(t,a,"date",["week","day"],"month","year");a.largestUnit=d.largestUnit;let u=Jn(s,["monthCode","year"]),c=Mt(e,u,[]);c.day=1;let l=th(s,c),m=Mt(o,u,[]);m.day=1;let p=th(s,m),{years:g,months:b}=Gp(s,l,p,a);return d.smallestUnit==="month"&&d.roundingIncrement===1||({years:g,months:b}=rh(g,b,0,0,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,l)),new(xe("%Temporal.Duration%"))(i*g,i*b,0,0,0,0,0,0,0,0)}function boe(t,e,r,n){let i=t==="since"?-1:1,o=Ex(r),s=R(e,se);X4(s,R(o,se),"compute difference between dates");let a=Qp(n),d=Iw(t,a,"datetime",[],"nanosecond","hour");a.largestUnit=d.largestUnit;let u=R(e,ct),c=R(o,ct),l,m,p,g,b,S,A,I,P,$;if(d.largestUnit!=="year"&&d.largestUnit!=="month"&&d.largestUnit!=="week"&&d.largestUnit!=="day")l=0,m=0,p=0,g=0,{hours:b,minutes:S,seconds:A,milliseconds:I,microseconds:P,nanoseconds:$}=wO(u,c,d.roundingIncrement,d.smallestUnit,d.largestUnit,d.roundingMode);else{let N=R(e,$r);if(!Xoe(N,R(o,$r)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:l,months:m,weeks:p,days:g,hours:b,minutes:S,seconds:A,milliseconds:I,microseconds:P,nanoseconds:$}=lse(u,c,N,s,d.largestUnit,a)),{years:l,months:m,weeks:p,days:g,hours:b,minutes:S,seconds:A,milliseconds:I,microseconds:P,nanoseconds:$}=rh(l,m,p,g,b,S,A,I,P,$,d.roundingIncrement,d.smallestUnit,d.roundingMode,e),{years:l,months:m,weeks:p,days:g,hours:b,minutes:S,seconds:A,milliseconds:I,microseconds:P,nanoseconds:$}=mse(l,m,p,g,b,S,A,I,P,$,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)}return new(xe("%Temporal.Duration%"))(i*l,i*m,i*p,i*g,i*b,i*S,i*A,i*I,i*P,i*$)}function O0(t,e,r,n,i,o,s,a){let d=t,u=e,c=r,l=o,m=s;return d+=n,u+=i,{year:d,month:u}=x4(d,u),{year:d,month:u,day:c}=R4(d,u,c,a),m+=7*l,c+=m,{year:d,month:u,day:c}=tA(d,u,c),{year:d,month:u,day:c}}function fse(t,e,r,n,i,o,s,a,d,u,c,l){let m=t,p=e,g=r,b=n,S=i,A=o;m+=s,p+=a,g+=d,b+=u,S+=c,A+=l;let I=0;return{deltaDays:I,hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A}=Yf(m,p,g,b,S,A),{deltaDays:I,hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A}}function hse(t,e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I,P,$){let N=U0(MC(t,e,r,n,i,o,s,a,d,u),MC(c,l,m,p,g,b,S,A,I,P)),L,F,U,G,q,T,E,k,f,y;if($)if(Gt($)){let w=xe("%Temporal.Duration%"),_=R($,se),x=new w(t,e,r,n,0,0,0,0,0,0),v=new w(c,l,m,p,0,0,0,0,0,0),D=typeof _!="string"?Tr(_,"dateAdd"):void 0,K=Zi(_,$,x,void 0,D),M=Zi(_,K,v,void 0,D),j=U0("day",N),J=So(null);J.largestUnit=j,{years:L,months:F,weeks:U,days:G}=Gp(_,$,M,J),{days:G,hours:q,minutes:T,seconds:E,milliseconds:k,microseconds:f,nanoseconds:y}=dd(G,z.default.add(z.default.BigInt(i),z.default.BigInt(g)),z.default.add(z.default.BigInt(o),z.default.BigInt(b)),z.default.add(z.default.BigInt(s),z.default.BigInt(S)),z.default.add(z.default.BigInt(a),z.default.BigInt(A)),z.default.add(z.default.BigInt(d),z.default.BigInt(I)),z.default.add(z.default.BigInt(u),z.default.BigInt(P)),N)}else{let w=xe("%Temporal.Instant%"),_=R($,$r),x=R($,se),v=mc(R($,xo),_,x,t,e,r,n,i,o,s,a,d,u),D=mc(new w(v),_,x,c,l,m,p,g,b,S,A,I,P);N!=="year"&&N!=="month"&&N!=="week"&&N!=="day"?(L=0,F=0,U=0,G=0,{hours:q,minutes:T,seconds:E,milliseconds:k,microseconds:f,nanoseconds:y}=wO(R($,ct),D,1,"nanosecond",N,"halfExpand")):{years:L,months:F,weeks:U,days:G,hours:q,minutes:T,seconds:E,milliseconds:k,microseconds:f,nanoseconds:y}=lse(R($,ct),D,_,x,N,So(null))}else{if(N==="year"||N==="month"||N==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");L=F=U=0,{days:G,hours:q,minutes:T,seconds:E,milliseconds:k,microseconds:f,nanoseconds:y}=dd(n+p,z.default.add(z.default.BigInt(i),z.default.BigInt(g)),z.default.add(z.default.BigInt(o),z.default.BigInt(b)),z.default.add(z.default.BigInt(s),z.default.BigInt(S)),z.default.add(z.default.BigInt(a),z.default.BigInt(A)),z.default.add(z.default.BigInt(d),z.default.BigInt(I)),z.default.add(z.default.BigInt(u),z.default.BigInt(P)),N)}return $4(L,F,U,G,q,T,E,k,f,y),{years:L,months:F,weeks:U,days:G,hours:q,minutes:T,seconds:E,milliseconds:k,microseconds:f,nanoseconds:y}}function $C(t,e,r,n,i,o,s){let a=kn;a=z.default.add(a,z.default.BigInt(s)),a=z.default.add(a,z.default.multiply(z.default.BigInt(o),xr)),a=z.default.add(a,z.default.multiply(z.default.BigInt(i),pc)),a=z.default.add(a,z.default.multiply(z.default.BigInt(n),El)),a=z.default.add(a,z.default.multiply(z.default.BigInt(r),z.default.BigInt(6e10))),a=z.default.add(a,z.default.multiply(z.default.BigInt(e),z.default.BigInt(36e11)));let d=z.default.add(t,a);return M0(d),d}function NC(t,e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I,P,$){let N=p,{deltaDays:L,hour:F,minute:U,second:G,millisecond:q,microsecond:T,nanosecond:E}=fse(n,i,o,s,a,d,g,b,S,A,I,P);N+=L;let k=xe("%Temporal.Duration%"),f=Zi(u,yc(t,e,r,u),new k(c,l,m,N,0,0,0,0,0,0),$);return{year:R(f,Te),month:R(f,Re),day:R(f,Oe),hour:F,minute:U,second:G,millisecond:q,microsecond:T,nanosecond:E}}function mc(t,e,r,n,i,o,s,a,d,u,c,l,m,p){let g=xe("%Temporal.Duration%");if(Sl(n,i,o,s,0,0,0,0,0,0)===0)return $C(R(t,ct),a,d,u,c,l,m);let b=ka(e,t,r),S=Zi(r,yc(R(b,Te),R(b,Re),R(b,Oe),r),new g(n,i,o,s,0,0,0,0,0,0),p),A=Qs(R(S,Te),R(S,Re),R(S,Oe),R(b,vt),R(b,wt),R(b,_t),R(b,xt),R(b,Et),R(b,St),r);return $C(R(Xo(e,A,"compatible"),ct),a,d,u,c,l,m)}function voe(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:d,hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=z0(r),b=_4(Zt(n));return{years:o,months:s,weeks:a,days:d,hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=hse(R(e,Fo),R(e,Ni),R(e,Bs),R(e,zo),R(e,Go),R(e,Wo),R(e,Ho),R(e,Vo),R(e,Jo),R(e,Yo),i*o,i*s,i*a,i*d,i*u,i*c,i*l,i*m,i*p,i*g,b),new(xe("%Temporal.Duration%"))(o,s,a,d,u,c,l,m,p,g)}function woe(t,e,r){let n=t==="subtract"?-1:1,{hours:i,minutes:o,seconds:s,milliseconds:a,microseconds:d,nanoseconds:u}=function(m,p){let g=z0(m);for(let b of p)if(g[b]!==0)throw new RangeError(`Duration field ${b} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return g}(r,["years","months","weeks","days"]),c=$C(R(e,ct),n*i,n*o,n*s,n*a,n*d,n*u);return new(xe("%Temporal.Instant%"))(c)}function _oe(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:d,hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=z0(r),b=Zt(n),S=R(e,se),{year:A,month:I,day:P,hour:$,minute:N,second:L,millisecond:F,microsecond:U,nanosecond:G}=NC(R(e,Te),R(e,Re),R(e,Oe),R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St),S,i*o,i*s,i*a,i*d,i*u,i*c,i*l,i*m,i*p,i*g,b);return Qs(A,I,P,$,N,L,F,U,G,S)}function xoe(t,e,r){let n=t==="subtract"?-1:1,{hours:i,minutes:o,seconds:s,milliseconds:a,microseconds:d,nanoseconds:u}=z0(r),{hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}=fse(R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St),n*i,n*o,n*s,n*a,n*d,n*u);return{hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}=F4(c,l,m,p,g,b,"reject"),new(xe("%Temporal.PlainTime%"))(c,l,m,p,g,b)}function Eoe(t,e,r,n){let i=z0(r);t==="subtract"&&(i={years:-i.years,months:-i.months,weeks:-i.weeks,days:-i.days,hours:-i.hours,minutes:-i.minutes,seconds:-i.seconds,milliseconds:-i.milliseconds,microseconds:-i.microseconds,nanoseconds:-i.nanoseconds});let{years:o,months:s,weeks:a,days:d,hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=i;({days:d}=dd(d,u,c,l,m,p,g,"day"));let b=Zt(n),S=R(e,se),A=Jn(S,["monthCode","year"]),I=Mt(e,A,[]),P=So(null);cw(P,I,[]),I.day=1;let $=th(S,I),N=Sl(o,s,a,d,0,0,0,0,0,0),L=Tr(S,"dateAdd"),F=xe("%Temporal.Duration%");if(N<0){let q=Zi(S,$,new F(0,1,0,0,0,0,0,0,0,0),void 0,L),T=Zi(S,q,new F(0,0,0,-1,0,0,0,0,0,0),void 0,L);P.day=Hx(S,T),$=th(S,P)}let U=new F(o,s,a,d,0,0,0,0,0,0),G=Qp(b);return q0(S,Mt(Zi(S,$,U,b,L),A,[]),G)}function Soe(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:d,hours:u,minutes:c,seconds:l,milliseconds:m,microseconds:p,nanoseconds:g}=z0(r),b=Zt(n),S=R(e,$r),A=R(e,se);return Yi(mc(R(e,xo),S,A,i*o,i*s,i*a,i*d,i*u,i*c,i*l,i*m,i*p,i*g,b),S,A)}function Ia(t,e,r){if(z.default.equal(e,Ew))return t;let{quotient:n,remainder:i}=Ln(t,e);if(z.default.equal(i,kn))return t;let o=z.default.lessThan(i,kn)?-1:1,s=lu(z.default.multiply(i,z.default.BigInt(2))),a=z.default.equal(s,e),d=z.default.greaterThan(s,e);switch(r){case"ceil":o>0&&(n=z.default.add(n,z.default.BigInt(o)));break;case"floor":o<0&&(n=z.default.add(n,z.default.BigInt(o)));break;case"expand":n=z.default.add(n,z.default.BigInt(o));break;case"trunc":break;case"halfCeil":(d||a&&o>0)&&(n=z.default.add(n,z.default.BigInt(o)));break;case"halfFloor":(d||a&&o<0)&&(n=z.default.add(n,z.default.BigInt(o)));break;case"halfExpand":(d||a)&&(n=z.default.add(n,z.default.BigInt(o)));break;case"halfTrunc":d&&(n=z.default.add(n,z.default.BigInt(o)));break;case"halfEven":(d||a&&z.default.toNumber(z.default.remainder(lu(n),z.default.BigInt(2)))===1)&&(n=z.default.add(n,z.default.BigInt(o)))}return z.default.multiply(n,e)}function N4(t,e,r,n){let{remainder:i}=D0(t,Al),o=z.default.subtract(t,i),s=Ia(i,z.default.BigInt(bse[r]*e),n);return z.default.add(o,s)}function xO(t,e,r,n,i,o,s,a,d,u,c,l,m=864e11){let{deltaDays:p,hour:g,minute:b,second:S,millisecond:A,microsecond:I,nanosecond:P}=EO(n,i,o,s,a,d,u,c,l,m),{year:$,month:N,day:L}=tA(t,e,r+p);return{year:$,month:N,day:L,hour:g,minute:b,second:S,millisecond:A,microsecond:I,nanosecond:P}}function EO(t,e,r,n,i,o,s,a,d,u=864e11){let c=kn;switch(a){case"day":case"hour":c=z.default.BigInt(t);case"minute":c=z.default.add(z.default.multiply(c,xl),z.default.BigInt(e));case"second":c=z.default.add(z.default.multiply(c,xl),z.default.BigInt(r));case"millisecond":c=z.default.add(z.default.multiply(c,xr),z.default.BigInt(n));case"microsecond":c=z.default.add(z.default.multiply(c,xr),z.default.BigInt(i));case"nanosecond":c=z.default.add(z.default.multiply(c,xr),z.default.BigInt(o))}let l=a==="day"?u:bse[a],m=Ia(c,z.default.BigInt(l*s),d),p=z.default.toNumber(z.default.divide(m,z.default.BigInt(l)));switch(a){case"day":return{deltaDays:p,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Yf(p,0,0,0,0,0);case"minute":return Yf(t,p,0,0,0,0);case"second":return Yf(t,e,p,0,0,0);case"millisecond":return Yf(t,e,r,p,0,0);case"microsecond":return Yf(t,e,r,n,p,0);case"nanosecond":return Yf(t,e,r,n,i,p);default:throw new Error(`Invalid unit ${a}`)}}function E4(t,e){return vO(R(t,Te),R(t,Re),R(t,Oe),R(e,Te),R(e,Re),R(e,Oe),"day").days}function _o(t,e,r,n){let i=Zi(t,e,r,void 0,n);return{relativeTo:i,days:E4(e,i)}}function pse(t,e,r,n,i){let o=R(t,$r),s=R(t,se);return Yi(mc(R(t,xo),o,s,e,r,n,i,0,0,0,0,0,0),o,s)}function mse(t,e,r,n,i,o,s,a,d,u,c,l,m,p){let g=t,b=e,S=r,A=n,I=i,P=o,$=s,N=a,L=d,F=u;if(!qe(p)||l==="year"||l==="month"||l==="week"||l==="day"||l==="nanosecond"&&c===1)return{years:g,months:b,weeks:S,days:A,hours:I,minutes:P,seconds:$,milliseconds:N,microseconds:L,nanoseconds:F};let U=ww(0,I,P,$,N,L,F,0),G=pw(z.default.toNumber(U)),q=R(p,$r),T=R(p,se),E=mc(R(p,xo),q,T,g,b,S,A,0,0,0,0,0,0),k=mc(new(xe("%Temporal.Instant%"))(E),q,T,0,0,0,G,0,0,0,0,0,0),f=z.default.subtract(k,E);return z.default.greaterThanOrEqual(z.default.multiply(z.default.subtract(U,f),z.default.BigInt(G)),kn)&&({years:g,months:b,weeks:S,days:A}=hse(g,b,S,A,0,0,0,0,0,0,0,0,0,G,0,0,0,0,0,0,p),U=N4(z.default.subtract(U,f),c,l,m),{hours:I,minutes:P,seconds:$,milliseconds:N,microseconds:L,nanoseconds:F}=dd(0,0,0,0,0,0,z.default.toNumber(U),"hour")),{years:g,months:b,weeks:S,days:A,hours:I,minutes:P,seconds:$,milliseconds:N,microseconds:L,nanoseconds:F}}function rh(t,e,r,n,i,o,s,a,d,u,c,l,m,p){let g=t,b=e,S=r,A=n,I=i,P=o,$=s,N=a,L=d,F=z.default.BigInt(u),U=xe("%Temporal.Duration%"),G,q,T,E,k=p;if(k){if(qe(k))q=k,k=jr(k);else if(!Gt(k))throw new TypeError("starting point must be PlainDate or ZonedDateTime");G=R(k,se)}if(l==="year"||l==="month"||l==="week"||l==="day"){let f,y,w;F=ww(0,I,P,$,N,L,u,0),q&&(f=pse(q,g,b,S,A)),{days:y,nanoseconds:F,dayLengthNs:w}=gO(F,f),T=z.default.BigInt(w),A+=y,I=P=$=N=L=0}switch(l){case"year":{if(!G)throw new RangeError("A starting point is required for years rounding");let f=new U(g),y=typeof G!="string"?Tr(G,"dateAdd"):void 0,w=Zi(G,k,f,void 0,y),_=Zi(G,k,new U(g,b,S),void 0,y);k=w,A+=E4(w,_);let x=Zi(G,k,new U(0,0,0,A),void 0,y),v=So(null);v.largestUnit="year";let D=Gp(G,k,x,v).years;g+=D;let K=k;k=Zi(G,k,new U(D),void 0,y),A-=E4(K,k);let M=new U(A<0?-1:1),{days:j}=_o(G,k,M,y);j=on(j);let J=z.default.multiply(z.default.BigInt(j),T);F=z.default.add(z.default.add(z.default.multiply(J,z.default.BigInt(g)),z.default.multiply(z.default.BigInt(A),T)),F);let Z=Ia(F,z.default.multiply(J,z.default.BigInt(c)),m);E=wl(F,J),g=z.default.toNumber(z.default.divide(Z,J)),F=kn,b=S=A=0;break}case"month":{if(!G)throw new RangeError("A starting point is required for months rounding");let f=new U(g,b),y=typeof G!="string"?Tr(G,"dateAdd"):void 0,w=Zi(G,k,f,void 0,y),_=Zi(G,k,new U(g,b,S),void 0,y);k=w,A+=E4(w,_);let x=pw(A),v=new U(0,A<0?-1:1),D;for({relativeTo:k,days:D}=_o(G,k,v,y);on(A)>=on(D);)b+=x,A-=D,{relativeTo:k,days:D}=_o(G,k,v,y);D=on(D);let K=z.default.multiply(z.default.BigInt(D),T);F=z.default.add(z.default.add(z.default.multiply(K,z.default.BigInt(b)),z.default.multiply(z.default.BigInt(A),T)),F);let M=Ia(F,z.default.multiply(K,z.default.BigInt(c)),m);E=wl(F,K),b=z.default.toNumber(z.default.divide(M,K)),F=kn,S=A=0;break}case"week":{if(!G)throw new RangeError("A starting point is required for weeks rounding");let f=pw(A),y=new U(0,0,A<0?-1:1),w=typeof G!="string"?Tr(G,"dateAdd"):void 0,_;for({relativeTo:k,days:_}=_o(G,k,y,w);on(A)>=on(_);)S+=f,A-=_,{relativeTo:k,days:_}=_o(G,k,y,w);_=on(_);let x=z.default.multiply(z.default.BigInt(_),T);F=z.default.add(z.default.add(z.default.multiply(x,z.default.BigInt(S)),z.default.multiply(z.default.BigInt(A),T)),F);let v=Ia(F,z.default.multiply(x,z.default.BigInt(c)),m);E=wl(F,x),S=z.default.toNumber(z.default.divide(v,x)),F=kn,A=0;break}case"day":{let f=T;F=z.default.add(z.default.multiply(f,z.default.BigInt(A)),F);let y=Ia(F,z.default.multiply(f,z.default.BigInt(c)),m);E=wl(F,f),A=z.default.toNumber(z.default.divide(y,f)),F=kn;break}case"hour":{let y=z.default.multiply(z.default.BigInt(I),z.default.BigInt(36e11));y=z.default.add(y,z.default.multiply(z.default.BigInt(P),z.default.BigInt(6e10))),y=z.default.add(y,z.default.multiply(z.default.BigInt($),El)),y=z.default.add(y,z.default.multiply(z.default.BigInt(N),pc)),y=z.default.add(y,z.default.multiply(z.default.BigInt(L),xr)),y=z.default.add(y,F),E=wl(y,z.default.BigInt(36e11));let w=Ia(y,z.default.BigInt(36e11*c),m);I=z.default.toNumber(z.default.divide(w,z.default.BigInt(36e11))),F=kn,P=$=N=L=0;break}case"minute":{let y=z.default.multiply(z.default.BigInt(P),z.default.BigInt(6e10));y=z.default.add(y,z.default.multiply(z.default.BigInt($),El)),y=z.default.add(y,z.default.multiply(z.default.BigInt(N),pc)),y=z.default.add(y,z.default.multiply(z.default.BigInt(L),xr)),y=z.default.add(y,F),E=wl(y,z.default.BigInt(6e10));let w=Ia(y,z.default.BigInt(6e10*c),m);P=z.default.toNumber(z.default.divide(w,z.default.BigInt(6e10))),F=kn,$=N=L=0;break}case"second":{let y=z.default.multiply(z.default.BigInt($),El);y=z.default.add(y,z.default.multiply(z.default.BigInt(N),pc)),y=z.default.add(y,z.default.multiply(z.default.BigInt(L),xr)),y=z.default.add(y,F),E=wl(y,z.default.BigInt(1e9));let w=Ia(y,z.default.BigInt(1e9*c),m);$=z.default.toNumber(z.default.divide(w,z.default.BigInt(1e9))),F=kn,N=L=0;break}case"millisecond":{let y=z.default.multiply(z.default.BigInt(N),pc);y=z.default.add(y,z.default.multiply(z.default.BigInt(L),xr)),y=z.default.add(y,F),E=wl(y,z.default.BigInt(1e6));let w=Ia(y,z.default.BigInt(1e6*c),m);N=z.default.toNumber(z.default.divide(w,z.default.BigInt(1e6))),F=kn,L=0;break}case"microsecond":{let y=z.default.multiply(z.default.BigInt(L),xr);y=z.default.add(y,F),E=wl(y,z.default.BigInt(1e3));let w=Ia(y,z.default.BigInt(1e3*c),m);L=z.default.toNumber(z.default.divide(w,z.default.BigInt(1e3))),F=kn;break}case"nanosecond":E=z.default.toNumber(F),F=Ia(z.default.BigInt(F),z.default.BigInt(c),m)}return{years:g,months:b,weeks:S,days:A,hours:I,minutes:P,seconds:$,milliseconds:N,microseconds:L,nanoseconds:z.default.toNumber(F),total:E}}function zp(t,e,r,n,i,o){for(let[s,a]of[[t,n],[e,i],[r,o]])if(s!==a)return $0(s-a);return 0}function D0(t,e){let{quotient:r,remainder:n}=Ln(t,e);return z.default.lessThan(n,kn)&&(r=z.default.subtract(r,Ew),n=z.default.add(n,e)),{quotient:r,remainder:n}}function uw(t,e){let{quotient:r,remainder:n}=Ln(t,e);return hc(n)||!I4(t)==!I4(e)?r:z.default.subtract(r,Ew)}function wl(t,e){let{quotient:r,remainder:n}=Ln(t,e);return z.default.toNumber(r)+z.default.toNumber(n)/z.default.toNumber(e)}function j4(t){let e=Sx(t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function Sx(t){let e=t;if(typeof t=="object"){let r=t[Symbol.toPrimitive];r&&typeof r=="function"&&(e=L4(r,t,["number"]))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?z.default.BigInt(e.toString(10)):z.default.BigInt(e)}var SO=(()=>{let t=z.default.BigInt(Date.now()%1e6);return()=>{let e=z.default.BigInt(Date.now()),r=z.default.add(z.default.multiply(e,pc),t);return t=z.default.remainder(e,pc),z.default.greaterThan(r,mw)?mw:z.default.lessThan(r,Px)?Px:r}})();function Fp(){return new joe().resolvedOptions().timeZone}function $0(t){return t<0?-1:t>0?1:t}function Zt(t){if(t===void 0)return So(null);if(sn(t)&&t!==null)return t;throw new TypeError("Options parameter must be an object, not "+(t===null?"null":typeof t))}function _w(t,e){let r=So(null);return r[t]=e,r}function Qp(t){let e=So(null);return cw(e,Zt(t),[]),e}function Jp(t,e,r,n){let i=t[e];if(i!==void 0){if(i=Qo(i),!r.includes(i))throw new RangeError(`${e} must be one of ${r.join(", ")}, not ${i}`);return i}return n}function nh(t){return OBe.includes(Tl(t))}function Tl(t){return t.replace(/[A-Z]/g,e=>{let r=e.charCodeAt(0);return String.fromCharCode(r+32)})}var yse=new RegExp(`^${Ooe.source}$`);function gse(t,e,r,n=t(e),i=t(r)){let o=z.default.BigInt(e),s=z.default.BigInt(r),a=n,d=i;for(;z.default.greaterThan(z.default.subtract(s,o),Ew);){let u=z.default.divide(z.default.add(o,s),z.default.BigInt(2)),c=t(u);if(c===a)o=u,a=c;else{if(c!==d)throw new Error(`invalid state in bisection ${a} - ${c} - ${d}`);s=u,d=c}}return s}var bse={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},vse=Symbol("date"),wse=Symbol("ym"),_se=Symbol("md"),xse=Symbol("time"),Ese=Symbol("datetime"),Sse=Symbol("instant"),lw=Symbol("original"),ow=Symbol("timezone"),cd=Symbol("calendar-id"),Ase=Symbol("locale"),jC=Symbol("options"),Ax=t=>({value:t,enumerable:!0,writable:!1,configurable:!0}),fw=globalThis.Intl.DateTimeFormat,ih=Object.assign,KBe=Object.prototype.hasOwnProperty,qBe=Reflect.apply;function iw(t,e){let r=t[e];return typeof r=="function"&&(r=new fw(t[Ase],r(t[jC])),t[e]=r),r}function L0(t,e={}){if(!(this instanceof L0))return new L0(t,e);let r=e!==void 0,n=r?ih({},e):{},i=new fw(t,n),o=i.resolvedOptions();if(r){let s=ih({},o);for(let a in s)qBe(KBe,n,[a])||delete s[a];this[jC]=s}else this[jC]=n;this[Ase]=o.locale,this[lw]=i,this[ow]=o.timeZone,this[cd]=o.calendar,this[vse]=GBe,this[wse]=FBe,this[_se]=zBe,this[xse]=LBe,this[Ese]=WBe,this[Sse]=HBe}Object.defineProperty(L0,"name",{writable:!0,value:"DateTimeFormat"}),L0.supportedLocalesOf=function(t,e){return fw.supportedLocalesOf(t,e)};var SC={resolvedOptions:Ax(function(){return this[lw].resolvedOptions()}),format:Ax(function(e,...r){let{instant:n,formatter:i}=hw(e,this);return n&&i?i.format(n.epochMilliseconds):this[lw].format(e,...r)}),formatRange:Ax(function(e,r){if(xw(e)||xw(r)){if(!Pse(e,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");let{instant:n,formatter:i}=hw(e,this),{instant:o,formatter:s}=hw(r,this);if(n&&o&&i&&s&&i===s)return i.formatRange(n.epochMilliseconds,o.epochMilliseconds)}return this[lw].formatRange(e,r)})};"formatToParts"in fw.prototype&&(SC.formatToParts=Ax(function(e,...r){let{instant:n,formatter:i}=hw(e,this);return n&&i?i.formatToParts(n.epochMilliseconds):this[lw].formatToParts(e,...r)})),"formatRangeToParts"in fw.prototype&&(SC.formatRangeToParts=Ax(function(e,r){if(xw(e)||xw(r)){if(!Pse(e,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");let{instant:n,formatter:i}=hw(e,this),{instant:o,formatter:s}=hw(r,this);if(n&&o&&i&&s&&i===s)return i.formatRangeToParts(n.epochMilliseconds,o.epochMilliseconds)}return this[lw].formatRangeToParts(e,r)})),L0.prototype=Object.create(fw.prototype,SC),Object.defineProperty(L0,"prototype",{writable:!1,enumerable:!1,configurable:!1});var oh=L0;function Yx(t={},e={}){let r=ih({},t);for(let n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])r[n]=n in e?e[n]:r[n],r[n]!==!1&&r[n]!==void 0||delete r[n];return r}function LBe(t){let e=Yx(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return PO(e)||(e=ih({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function FBe(t){let e=Yx(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=ih(e,{year:"numeric",month:"numeric"})),e}function zBe(t){let e=Yx(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=ih({},e,{month:"numeric",day:"numeric"})),e}function GBe(t){let e=Yx(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return AO(e)||(e=ih({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function WBe(t){let e=Yx(t,{timeZoneName:!1});return PO(e)||AO(e)||(e=ih({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function HBe(t){let e=t;return PO(e)||AO(e)||(e=ih({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function AO(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t}function PO(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t}function xw(t){return Gt(t)||In(t)||bt(t)||qe(t)||_r(t)||xi(t)||li(t)}function Pse(t,e){return!(!xw(t)||!xw(e))&&!(In(t)&&!In(e))&&!(Gt(t)&&!Gt(e))&&!(bt(t)&&!bt(e))&&!(qe(t)&&!qe(e))&&!(_r(t)&&!_r(e))&&!(xi(t)&&!xi(e))&&!(li(t)&&!li(e))}function hw(t,e){let r=xe("%Temporal.PlainDateTime%");if(In(t)){let n=new r(1970,1,1,R(t,vt),R(t,wt),R(t,_t),R(t,xt),R(t,Et),R(t,St),e[cd]);return{instant:Xo(e[ow],n,"compatible"),formatter:iw(e,xse)}}if(_r(t)){let n=R(t,Te),i=R(t,Re),o=R(t,Oe),s=Qi(R(t,se));if(s!==e[cd])throw new RangeError(`cannot format PlainYearMonth with calendar ${s} in locale with calendar ${e[cd]}`);let a=new r(n,i,o,12,0,0,0,0,0,s);return{instant:Xo(e[ow],a,"compatible"),formatter:iw(e,wse)}}if(xi(t)){let n=R(t,Te),i=R(t,Re),o=R(t,Oe),s=Qi(R(t,se));if(s!==e[cd])throw new RangeError(`cannot format PlainMonthDay with calendar ${s} in locale with calendar ${e[cd]}`);let a=new r(n,i,o,12,0,0,0,0,0,s);return{instant:Xo(e[ow],a,"compatible"),formatter:iw(e,_se)}}if(Gt(t)){let n=R(t,Te),i=R(t,Re),o=R(t,Oe),s=Qi(R(t,se));if(s!=="iso8601"&&s!==e[cd])throw new RangeError(`cannot format PlainDate with calendar ${s} in locale with calendar ${e[cd]}`);let a=new r(n,i,o,12,0,0,0,0,0,e[cd]);return{instant:Xo(e[ow],a,"compatible"),formatter:iw(e,vse)}}if(bt(t)){let n=R(t,Te),i=R(t,Re),o=R(t,Oe),s=R(t,vt),a=R(t,wt),d=R(t,_t),u=R(t,xt),c=R(t,Et),l=R(t,St),m=Qi(R(t,se));if(m!=="iso8601"&&m!==e[cd])throw new RangeError(`cannot format PlainDateTime with calendar ${m} in locale with calendar ${e[cd]}`);let p=t;return m==="iso8601"&&(p=new r(n,i,o,s,a,d,u,c,l,e[cd])),{instant:Xo(e[ow],p,"compatible"),formatter:iw(e,Ese)}}if(qe(t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return li(t)?{instant:t,formatter:iw(e,Sse)}:{}}var Q0t=Object.freeze({__proto__:null,DateTimeFormat:oh}),Rx=class t{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");let r=Sx(e);M0(r),kl(this),kt(this,ct,r)}get epochSeconds(){if(!li(this))throw new TypeError("invalid receiver");let e=R(this,ct);return z.default.toNumber(uw(e,El))}get epochMilliseconds(){if(!li(this))throw new TypeError("invalid receiver");let e=z.default.BigInt(R(this,ct));return z.default.toNumber(uw(e,pc))}get epochMicroseconds(){if(!li(this))throw new TypeError("invalid receiver");return j4(uw(z.default.BigInt(R(this,ct)),xr))}get epochNanoseconds(){if(!li(this))throw new TypeError("invalid receiver");return j4(z.default.BigInt(R(this,ct)))}add(e){if(!li(this))throw new TypeError("invalid receiver");return woe("add",this,e)}subtract(e){if(!li(this))throw new TypeError("invalid receiver");return woe("subtract",this,e)}until(e,r){if(!li(this))throw new TypeError("invalid receiver");return hoe("until",this,e,r)}since(e,r){if(!li(this))throw new TypeError("invalid receiver");return hoe("since",this,e,r)}round(e){if(!li(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?_w("smallestUnit",e):Zt(e),n=Aw(r),i=hu(r,"halfExpand"),o=ra(r,"smallestUnit","time",j0);Pw(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0);let s=N4(R(this,ct),n,o,i);return new t(s)}equals(e){if(!li(this))throw new TypeError("invalid receiver");let r=fu(e),n=R(this,ct),i=R(r,ct);return z.default.equal(z.default.BigInt(n),z.default.BigInt(i))}toString(e){if(!li(this))throw new TypeError("invalid receiver");let r=Zt(e),n=Fx(r),i=hu(r,"trunc"),o=ra(r,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let s=r.timeZone;s!==void 0&&(s=Eo(s));let{precision:a,unit:d,increment:u}=zx(o,n),c=N4(R(this,ct),u,d,i);return ioe(new t(c),s,a)}toJSON(){if(!li(this))throw new TypeError("invalid receiver");return ioe(this,void 0,"auto")}toLocaleString(e,r){if(!li(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!li(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument in toZonedDateTime");let r=e.calendar;if(r===void 0)throw new TypeError("missing calendar property in toZonedDateTime");let n=na(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");let o=Eo(i);return Yi(R(this,ct),o,n)}toZonedDateTimeISO(e){if(!li(this))throw new TypeError("invalid receiver");let r=Eo(e);return Yi(R(this,ct),r,"iso8601")}static fromEpochSeconds(e){let r=yw(e),n=z.default.multiply(z.default.BigInt(r),El);return M0(n),new t(n)}static fromEpochMilliseconds(e){let r=yw(e),n=z.default.multiply(z.default.BigInt(r),pc);return M0(n),new t(n)}static fromEpochMicroseconds(e){let r=Sx(e),n=z.default.multiply(r,xr);return M0(n),new t(n)}static fromEpochNanoseconds(e){let r=Sx(e);return M0(r),new t(r)}static from(e){return li(e)?new t(R(e,ct)):fu(e)}static compare(e,r){let n=fu(e),i=fu(r),o=R(n,ct),s=R(i,ct);return z.default.lessThan(o,s)?-1:z.default.greaterThan(o,s)?1:0}};Il(Rx,"Temporal.Instant");var Tse=Array.prototype.includes,VBe=Array.prototype.push,JBe=globalThis.Intl.DateTimeFormat,YBe=Array.prototype.sort,ZBe=Math.abs,XBe=Math.floor,AC=Object.create,UC=Object.entries,Ise=Set,Aoe=Reflect.ownKeys,wo=Set.prototype.add,kse=Set.prototype.values,hn={},fn=class{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");let r=Qo(e);if(!nh(r))throw new RangeError(`invalid calendar identifier ${r}`);kl(this),kt(this,wn,Tl(r))}get id(){if(!Pn(this))throw new TypeError("invalid receiver");return R(this,wn)}dateFromFields(e,r){if(!Pn(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid fields");let n=Zt(r),i=R(this,wn);return hn[i].dateFromFields(e,n,i)}yearMonthFromFields(e,r){if(!Pn(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid fields");let n=Zt(r),i=R(this,wn);return hn[i].yearMonthFromFields(e,n,i)}monthDayFromFields(e,r){if(!Pn(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid fields");let n=Zt(r),i=R(this,wn);return hn[i].monthDayFromFields(e,n,i)}fields(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(let i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!n.has(i))throw new RangeError(`invalid field name ${i}`);n.delete(i),VBe.call(r,i)}return hn[R(this,wn)].fields(r)}mergeFields(e,r){if(!Pn(this))throw new TypeError("invalid receiver");let n=roe(e),i=AC(null);cw(i,n,[],[void 0]);let o=roe(r),s=AC(null);cw(s,o,[],[void 0]);let a=Aoe(s),d=hn[R(this,wn)].fieldKeysToIgnore(a),u=AC(null),c=Aoe(i);for(let l of c){let m;m=Ve(Tse,d,[l])?s[l]:i[l],m!==void 0&&(u[l]=m)}return cw(u,s,[]),u}dateAdd(e,r,n){if(!Pn(this))throw new TypeError("invalid receiver");let i=jr(e),o=dw(r),s=Fn(Zt(n)),{days:a}=dd(R(o,zo),R(o,Go),R(o,Wo),R(o,Ho),R(o,Vo),R(o,Jo),R(o,Yo),"day"),d=R(this,wn);return hn[d].dateAdd(i,R(o,Fo),R(o,Ni),R(o,Bs),a,s,d)}dateUntil(e,r,n){if(!Pn(this))throw new TypeError("invalid receiver");let i=jr(e),o=jr(r),s=ra(Zt(n),"largestUnit","date","auto");s==="auto"&&(s="day");let{years:a,months:d,weeks:u,days:c}=hn[R(this,wn)].dateUntil(i,o,s);return new(xe("%Temporal.Duration%"))(a,d,u,c,0,0,0,0,0,0)}year(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].year(r)}month(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");if(xi(r))throw new TypeError("use monthCode on PlainMonthDay instead");return _r(r)||(r=jr(r)),hn[R(this,wn)].month(r)}monthCode(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||xi(r)||(r=jr(r)),hn[R(this,wn)].monthCode(r)}day(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return xi(r)||(r=jr(r)),hn[R(this,wn)].day(r)}era(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].era(r)}eraYear(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].eraYear(r)}dayOfWeek(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=jr(e);return hn[R(this,wn)].dayOfWeek(r)}dayOfYear(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=jr(e);return hn[R(this,wn)].dayOfYear(r)}weekOfYear(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=jr(e);return hn[R(this,wn)].weekOfYear(r)}yearOfWeek(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=jr(e);return hn[R(this,wn)].yearOfWeek(r)}daysInWeek(e){if(!Pn(this))throw new TypeError("invalid receiver");let r=jr(e);return hn[R(this,wn)].daysInWeek(r)}daysInMonth(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].daysInMonth(r)}daysInYear(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].daysInYear(r)}monthsInYear(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].monthsInYear(r)}inLeapYear(e){let r=e;if(!Pn(this))throw new TypeError("invalid receiver");return _r(r)||(r=jr(r)),hn[R(this,wn)].inLeapYear(r)}toString(){if(!Pn(this))throw new TypeError("invalid receiver");return R(this,wn)}toJSON(){if(!Pn(this))throw new TypeError("invalid receiver");return R(this,wn)}static from(e){return Tw(na(e))}};function TO(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);let e=+t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function eh(t,e=!1){return`M${t.toString().padStart(2,"0")}${e?"L":""}`}function S4(t,e,r=12){let{month:n,monthCode:i}=t;if(i===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&Xi(n,1,r),e==="constrain"&&(n=ea(n,1,r)),i=eh(n)}else{let o=TO(i);if(n!==void 0&&n!==o)throw new RangeError(`monthCode ${i} and month ${n} must match if both are present`);if(i!==eh(o))throw new RangeError(`Invalid month code: ${i}`);if(n=o,n<1||n>r)throw new RangeError(`Invalid monthCode: ${i}`)}return{...t,month:n,monthCode:i}}Il(fn,"Temporal.Calendar"),_n("Temporal.Calendar.from",fn.from),_n("Temporal.Calendar.prototype.dateAdd",fn.prototype.dateAdd),_n("Temporal.Calendar.prototype.dateFromFields",fn.prototype.dateFromFields),_n("Temporal.Calendar.prototype.dateUntil",fn.prototype.dateUntil),_n("Temporal.Calendar.prototype.day",fn.prototype.day),_n("Temporal.Calendar.prototype.dayOfWeek",fn.prototype.dayOfWeek),_n("Temporal.Calendar.prototype.dayOfYear",fn.prototype.dayOfYear),_n("Temporal.Calendar.prototype.daysInMonth",fn.prototype.daysInMonth),_n("Temporal.Calendar.prototype.daysInWeek",fn.prototype.daysInWeek),_n("Temporal.Calendar.prototype.daysInYear",fn.prototype.daysInYear),_n("Temporal.Calendar.prototype.era",fn.prototype.era),_n("Temporal.Calendar.prototype.eraYear",fn.prototype.eraYear),_n("Temporal.Calendar.prototype.fields",fn.prototype.fields),_n("Temporal.Calendar.prototype.inLeapYear",fn.prototype.inLeapYear),_n("Temporal.Calendar.prototype.mergeFields",fn.prototype.mergeFields),_n("Temporal.Calendar.prototype.month",fn.prototype.month),_n("Temporal.Calendar.prototype.monthCode",fn.prototype.monthCode),_n("Temporal.Calendar.prototype.monthDayFromFields",fn.prototype.monthDayFromFields),_n("Temporal.Calendar.prototype.monthsInYear",fn.prototype.monthsInYear),_n("Temporal.Calendar.prototype.weekOfYear",fn.prototype.weekOfYear),_n("Temporal.Calendar.prototype.year",fn.prototype.year),_n("Temporal.Calendar.prototype.yearMonthFromFields",fn.prototype.yearMonthFromFields),_n("Temporal.Calendar.prototype.yearOfWeek",fn.prototype.yearOfWeek),hn.iso8601={dateFromFields(t,e,r){let n=Mt(t,["day","month","monthCode","year"],["year","day"]),i=Fn(e);n=S4(n);let{year:o,month:s,day:a}=n;return{year:o,month:s,day:a}=R4(o,s,a,i),yc(o,s,a,r)},yearMonthFromFields(t,e,r){let n=Mt(t,["month","monthCode","year"],["year"]),i=Fn(e);n=S4(n);let{year:o,month:s}=n;return{year:o,month:s}=function(d,u,c){let l=d,m=u;switch(c){case"reject":Pl(l,m,1);break;case"constrain":({year:l,month:m}=ase(l,m))}return{year:l,month:m}}(o,s,i),Ix(o,s,r,1)},monthDayFromFields(t,e,r){let n=Mt(t,["day","month","monthCode","year"],["day"]),i=Fn(e);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");let o=n.monthCode===void 0;n=S4(n);let{month:s,day:a,year:d}=n;return{month:s,day:a}=R4(o?d:1972,s,a,i),Tx(s,a,r,1972)},fields:t=>t,fieldKeysToIgnore(t){let e=new Ise;for(let r=0;r<t.length;r++){let n=t[r];Ve(wo,e,[n]),n==="month"?Ve(wo,e,["monthCode"]):n==="monthCode"&&Ve(wo,e,["month"])}return[...Ve(kse,e,[])]},dateAdd(t,e,r,n,i,o,s){let a=R(t,Te),d=R(t,Re),u=R(t,Oe);return{year:a,month:d,day:u}=O0(a,d,u,e,r,n,i,o),yc(a,d,u,s)},dateUntil:(t,e,r)=>vO(R(t,Te),R(t,Re),R(t,Oe),R(e,Te),R(e,Re),R(e,Oe),r),year:t=>R(t,Te),era(){},eraYear(){},month:t=>R(t,Re),monthCode:t=>eh(R(t,Re)),day:t=>R(t,Oe),dayOfWeek:t=>OC(R(t,Te),R(t,Re),R(t,Oe)),dayOfYear:t=>O4(R(t,Te),R(t,Re),R(t,Oe)),weekOfYear:t=>loe(R(t,Te),R(t,Re),R(t,Oe)).week,yearOfWeek:t=>loe(R(t,Te),R(t,Re),R(t,Oe)).year,daysInWeek:()=>7,daysInMonth:t=>Qf(R(t,Te),R(t,Re)),daysInYear(t){let e=t;return Si(e,Te)||(e=jr(e)),Vp(R(e,Te))?366:365},monthsInYear:()=>12,inLeapYear(t){let e=t;return Si(e,Te)||(e=jr(e)),Vp(R(e,Te))}};var ui=class t{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let r=0;for(let n of e.map.entries()){if(++r>t.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){let r=this.map.get(e);return r&&(this.hits++,this.report()),this.calls++,r}set(e,r){this.map.set(e,r),this.misses++,this.report()}report(){}setObject(e){if(t.objectMap.get(e))throw new RangeError("object already cached");t.objectMap.set(e,this),this.report()}static getCacheForObject(e){let r=t.objectMap.get(e);return r||(r=new t,t.objectMap.set(e,r)),r}};function Rse({isoYear:t,isoMonth:e,isoDay:r}){return`${G0(t)}-${pn(e)}-${pn(r)}T00:00Z`}function PC(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}ui.objectMap=new WeakMap,ui.MAX_CACHE_ENTRIES=1e3;var Yp=class{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new JBe(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,r){let{year:n,month:i,day:o}=e,s=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:i,isoDay:o,id:this.id}),a=r.get(s);if(a)return a;let d=this.getFormatter(),u,c;try{c=Rse({isoYear:n,isoMonth:i,isoDay:o}),u=d.formatToParts(new Date(c))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:i,isoDay:o})}`)}let l={};for(let{type:p,value:g}of u){if(p==="year"&&(l.eraYear=+g),p==="relatedYear"&&(l.eraYear=+g),p==="month"){let b=/^([0-9]*)(.*?)$/.exec(g);if(!b||b.length!=3||!b[1]&&!b[2])throw new RangeError(`Unexpected month: ${g}`);if(l.month=b[1]?+b[1]:1,l.month<1)throw new RangeError(`Invalid month ${g} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(l.month>13)throw new RangeError(`Invalid month ${g} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);b[2]&&(l.monthExtra=b[2])}p==="day"&&(l.day=+g),this.hasEra&&p==="era"&&g!=null&&g!==""&&(g=g.split(" (")[0],l.era=g.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(l.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){let{era:p,eraYear:g}=this.reviseIntlEra(l,e);l.era=p,l.eraYear=g}this.checkIcuBugs&&this.checkIcuBugs(e);let m=this.adjustCalendarDate(l,r,"constrain",!0);if(m.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(m.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(m.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return r.set(s,m),["constrain","reject"].forEach(p=>{let g=JSON.stringify({func:"calendarToIsoDate",year:m.year,month:m.month,day:m.day,overflow:p,id:this.id});r.set(g,e)}),m}validateCalendarDate(e){let{era:r,month:n,year:i,day:o,eraYear:s,monthCode:a,monthExtra:d}=e;if(d!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&s===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&a===void 0)throw new TypeError("month or monthCode is required");if(o===void 0)throw new RangeError("Missing day");if(a!==void 0){if(typeof a!="string")throw new RangeError("monthCode must be a string, not "+typeof a);if(!/^M([01]?\d)(L?)$/.test(a))throw new RangeError(`Invalid monthCode: ${a}`)}if(this.constantEra){if(r!==void 0&&r!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${r}`);if(s!==void 0&&i!==void 0&&s!==i)throw new RangeError(`eraYear ${s} does not match year ${i}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(e,r,n="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=e;if(this.validateCalendarDate(o),this.constantEra){let{year:u,eraYear:c}=o;o={...o,era:this.constantEra,year:u!==void 0?u:c,eraYear:c!==void 0?c:u}}let s=this.monthsInYear(o,r),{month:a,monthCode:d}=o;return{month:a,monthCode:d}=S4(o,n,s),{...o,month:a,monthCode:d}}regulateMonthDayNaive(e,r,n){let i=this.monthsInYear(e,n),{month:o,day:s}=e;return r==="reject"?(Xi(o,1,i),Xi(s,1,this.maximumMonthLength(e))):(o=ea(o,1,i),s=ea(s,1,this.maximumMonthLength({...e,month:o}))),{...e,month:o,day:s}}calendarToIsoDate(e,r="constrain",n){let i=e,o=this.adjustCalendarDate(e,n,r,!1);o=this.regulateMonthDayNaive(o,r,n);let{year:s,month:a,day:d}=o,u=JSON.stringify({func:"calendarToIsoDate",year:s,month:a,day:d,overflow:r,id:this.id}),c,l=n.get(u);if(l||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(c=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:r,id:this.id}),l=n.get(c),l))return l;let m=this.estimateIsoDate({year:s,month:a,day:d}),p=I=>{let P=this.addDaysIso(m,I);if(o.day>this.minimumMonthLength(o)){let $=this.isoToCalendarDate(P,n);for(;$.month!==a||$.year!==s;){if(r==="reject")throw new RangeError(`day ${d} does not exist in month ${a} of year ${s}`);P=this.addDaysIso(P,-1),$=this.isoToCalendarDate(P,n)}}return P},g=0,b=this.isoToCalendarDate(m,n),S=PC(o,b);if(S.years!==0||S.months!==0||S.days!==0){let I=365*S.years+30*S.months+S.days;m=this.addDaysIso(m,I),b=this.isoToCalendarDate(m,n),S=PC(o,b),S.years===0&&S.months===0?m=p(S.days):g=this.compareCalendarDates(o,b)}let A=8;for(;g;){m=this.addDaysIso(m,g*A);let I=b;b=this.isoToCalendarDate(m,n);let P=g;if(g=this.compareCalendarDates(o,b),g){if(S=PC(o,b),S.years===0&&S.months===0)m=p(S.days),g=0;else if(P&&g!==P)if(A>1)A/=2;else{if(r==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(b,I)>0&&(m=this.addDaysIso(m,-1)),g=0}}}if(n.set(u,m),c&&n.set(c,m),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");return m}temporalToCalendarDate(e,r){let n={year:R(e,Te),month:R(e,Re),day:R(e,Oe)};return this.isoToCalendarDate(n,r)}compareCalendarDates(e,r){let n=Mt(e,["day","month","year"],["day","month","year"]),i=Mt(r,["day","month","year"],["day","month","year"]);return n.year!==i.year?$0(n.year-i.year):n.month!==i.month?$0(n.month-i.month):n.day!==i.day?$0(n.day-i.day):0}regulateDate(e,r="constrain",n){let i=this.calendarToIsoDate(e,r,n);return this.isoToCalendarDate(i,n)}addDaysIso(e,r){return O0(e.year,e.month,e.day,0,0,0,r,"constrain")}addDaysCalendar(e,r,n){let i=this.calendarToIsoDate(e,"constrain",n),o=this.addDaysIso(i,r);return this.isoToCalendarDate(o,n)}addMonthsCalendar(e,r,n,i){let o=e,{day:s}=o;for(let a=0,d=ZBe(r);a<d;a++){let{month:u}=o,c=o,l=r<0?-Math.max(s,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),m=this.calendarToIsoDate(o,"constrain",i),p=this.addDaysIso(m,l);if(o=this.isoToCalendarDate(p,i),r>0){let g=this.monthsInYear(c,i);for(;o.month-1!=u%g;)p=this.addDaysIso(p,-1),o=this.isoToCalendarDate(p,i)}o.day!==s&&(o=this.regulateDate({...o,day:s},"constrain",i))}if(n==="reject"&&o.day!==s)throw new RangeError(`Day ${s} does not exist in resulting calendar month`);return o}addCalendar(e,{years:r=0,months:n=0,weeks:i=0,days:o=0},s,a){let{year:d,day:u,monthCode:c}=e,l=this.adjustCalendarDate({year:d+r,monthCode:c,day:u},a),m=this.addMonthsCalendar(l,n,s,a),p=o+7*i;return this.addDaysCalendar(m,p,a)}untilCalendar(e,r,n,i){let o=0,s=0,a=0,d=0;switch(n){case"day":o=this.calendarDaysUntil(e,r,i);break;case"week":{let u=this.calendarDaysUntil(e,r,i);o=u%7,s=(u-o)/7;break}case"month":case"year":{let u=this.compareCalendarDates(r,e);if(!u)return{years:0,months:0,weeks:0,days:0};let c=r.year-e.year,l=r.day-e.day;if(n==="year"&&c){let g=0;r.monthCode>e.monthCode&&(g=1),r.monthCode<e.monthCode&&(g=-1),g||(g=Math.sign(l)),d=g*u<0?c-u:c}let m,p=d?this.addCalendar(e,{years:d},"constrain",i):e;do a+=u,m=p,p=this.addMonthsCalendar(m,u,"constrain",i),p.day!==e.day&&(p=this.regulateDate({...p,day:e.day},"constrain",i));while(this.compareCalendarDates(r,p)*u>=0);a-=u,o=this.calendarDaysUntil(m,r,i);break}}return{years:d,months:a,weeks:s,days:o}}daysInMonth(e,r){let{day:n}=e,i=this.maximumMonthLength(e),o=this.minimumMonthLength(e);if(o===i)return o;let s=n<=i-o?i:o,a=this.calendarToIsoDate(e,"constrain",r),d=this.addDaysIso(a,s),u=this.isoToCalendarDate(d,r),c=this.addDaysIso(d,-u.day);return this.isoToCalendarDate(c,r).day}daysInPreviousMonth(e,r){let{day:n,month:i,year:o}=e,s={year:i>1?o:o-1,month:i,day:1},a=i>1?i-1:this.monthsInYear(s,r);s={...s,month:a};let d=this.minimumMonthLength(s),u=this.maximumMonthLength(s);if(d===u)return u;let c=this.calendarToIsoDate(e,"constrain",r),l=this.addDaysIso(c,-n);return this.isoToCalendarDate(l,r).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,r,n){let i=this.calendarToIsoDate(e,"constrain",n),o=this.calendarToIsoDate(r,"constrain",n);return this.isoDaysUntil(i,o)}isoDaysUntil(e,r){return vO(e.year,e.month,e.day,r.year,r.month,r.day,"day").days}monthDayFromFields(e,r,n){let i,o,s,a,d,{monthCode:u,day:c}=e;if(u===void 0){let{year:p,era:g,eraYear:b}=e;if(p===void 0&&(g===void 0||b===void 0))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:u,day:c}=this.isoToCalendarDate(this.calendarToIsoDate(e,r,n),n))}let l=this.isoToCalendarDate({year:1972,month:12,day:31},n),m=l.monthCode>u||l.monthCode===u&&l.day>=c?l.year:l.year-1;for(let p=0;p<100;p++){let g=this.adjustCalendarDate({day:c,monthCode:u,year:m-p},n),b=this.calendarToIsoDate(g,"constrain",n),S=this.isoToCalendarDate(b,n);if({year:i,month:o,day:s}=b,S.monthCode===u&&S.day===c)return{month:o,day:s,year:i};r==="constrain"&&(a===void 0||S.monthCode===a.monthCode&&S.day>a.day)&&(a=S,d=b)}if(r==="constrain"&&d!==void 0)return d;throw new RangeError(`No recent ${this.id} year with monthCode ${u} and day ${c}`)}},KC=class extends Yp{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){let{year:r}=e;return(7*r+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,r){let{month:n,year:i}=e,o=this.getMonthCode(i,n),s=UC(this.months).find(d=>d[1].monthCode===o);if(s===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);let a=s[1].days;return typeof a=="number"?a:a[r]}estimateIsoDate(e){let{year:r}=e;return{year:r-3760,month:1,day:1}}getMonthCode(e,r){return this.inLeapYear({year:e})?r===6?eh(5,!0):eh(r<6?r:r-1):eh(r)}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:o,eraYear:s,month:a,monthCode:d,day:u,monthExtra:c}=e;if(o===void 0&&s!==void 0&&(o=s),s===void 0&&o!==void 0&&(s=o),i){if(c){let l=this.months[c];if(!l)throw new RangeError(`Unrecognized month from formatToParts: ${c}`);a=this.inLeapYear({year:o})?l.leap:l.regular}return d=this.getMonthCode(o,a),{year:o,month:a,day:u,era:void 0,eraYear:s,monthCode:d}}if(this.validateCalendarDate(e),a===void 0)if(d.endsWith("L")){if(d!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${d}`);if(a=6,!this.inLeapYear({year:o})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);a=6,d="M06"}}else{a=TO(d),this.inLeapYear({year:o})&&a>=6&&a++;let l=this.monthsInYear({year:o});if(a<1||a>l)throw new RangeError(`Invalid monthCode: ${d}`)}else if(n==="reject"?(Xi(a,1,this.monthsInYear({year:o})),Xi(u,1,this.maximumMonthLength({year:o,month:a}))):(a=ea(a,1,this.monthsInYear({year:o})),u=ea(u,1,this.maximumMonthLength({year:o,month:a}))),d===void 0)d=this.getMonthCode(o,a);else if(this.getMonthCode(o,a)!==d)throw new RangeError(`monthCode ${d} doesn't correspond to month ${a} in Hebrew year ${o}`);return{...e,day:u,month:a,monthCode:d,year:o,eraYear:s}}},Zp=class extends Yp{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,r){return this.daysInMonth({year:e.year,month:12,day:1},r)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){let{year:r}=this.adjustCalendarDate(e);return{year:XBe(r*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}},U4=class extends Zp{constructor(){super(...arguments),this.id="islamic"}},qC=class extends Zp{constructor(){super(...arguments),this.id="islamic-umalqura"}},LC=class extends Zp{constructor(){super(...arguments),this.id="islamic-tbla"}},FC=class extends Zp{constructor(){super(...arguments),this.id="islamic-civil"}},zC=class extends Zp{constructor(){super(...arguments),this.id="islamic-rgsa"}},GC=class extends Zp{constructor(){super(...arguments),this.id="islamicc"}},WC=class extends Yp{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,r){return U4.prototype.inLeapYear.call(this,e,r)}monthsInYear(){return 12}minimumMonthLength(e){let{month:r}=e;return r===12?29:r<=6?31:30}maximumMonthLength(e){let{month:r}=e;return r===12?30:r<=6?31:30}estimateIsoDate(e){let{year:r}=this.adjustCalendarDate(e);return{year:r+621,month:1,day:1}}},HC=class extends Yp{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return Dse(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){let{month:r}=e,n=this.months[r];if(n===void 0)throw new RangeError(`Invalid month: ${r}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){let r=this.adjustCalendarDate(e),n=this.getMonthInfo(r);return O0(r.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,r.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}};function Dse(t){return t%4==0&&(t%100!=0||t%400==0)}var F0=class extends Yp{constructor(e,r){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;let{eras:n,anchorEra:i}=function(s){let a,d=s;if(d.length===0)throw new RangeError("Invalid era data: eras are required");if(d.length===1&&d[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(d.length===1&&!d[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(d.filter(c=>c.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");d.forEach(c=>{if(c.isAnchor||!c.anchorEpoch&&!c.reverseOf){if(a)throw new RangeError("Invalid era data: cannot have multiple anchor eras");a=c,c.anchorEpoch={year:c.hasYearZero?0:1}}else if(!c.name)throw new RangeError("If era name is blank, it must be the anchor era")}),d=d.filter(c=>c.name),d.forEach(c=>{let{reverseOf:l}=c;if(l){let m=d.find(p=>p.name===l);if(m===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${l}`);c.reverseOf=m,c.anchorEpoch=m.anchorEpoch,c.isoEpoch=m.isoEpoch}c.anchorEpoch.month===void 0&&(c.anchorEpoch.month=1),c.anchorEpoch.day===void 0&&(c.anchorEpoch.day=1)}),YBe.call(d,(c,l)=>{if(c.reverseOf)return 1;if(l.reverseOf)return-1;if(!c.isoEpoch||!l.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return l.isoEpoch.year-c.isoEpoch.year});let u=d[d.length-1].reverseOf;if(u&&u!==d[d.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return d.forEach((c,l)=>{c.genericName="era"+(d.length-1-l)}),{eras:d,anchorEra:a||d[0]}}(r);this.anchorEra=i,this.eras=n}inLeapYear(e){let{year:r}=this.estimateIsoDate({month:1,day:1,year:e.year});return Dse(r)}monthsInYear(){return 12}minimumMonthLength(e){let{month:r}=e;return r===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(r)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){let r=(a,d)=>{let u=e[a];if(u!=null&&u!=d)throw new RangeError(`Input ${a} ${u} doesn't match calculated value ${d}`)},n=a=>{let d,u={...e,year:a},c=this.eras.find((l,m)=>{if(m===this.eras.length-1){if(l.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${l.name}`);return d=l.anchorEpoch.year-a,!0}return d=a-l.anchorEpoch.year+(l.hasYearZero?0:1),!0}return this.compareCalendarDates(u,l.anchorEpoch)>=0&&(d=a-l.anchorEpoch.year+(l.hasYearZero?0:1),!0)});if(!c)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:d,era:c.name}},{year:i,eraYear:o,era:s}=e;if(i!=null)({eraYear:o,era:s}=n(i)),r("era",s),r("eraYear",o);else{if(o==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{let a=s===void 0?void 0:this.eras.find(d=>d.name===s||d.genericName===s);if(!a)throw new RangeError(`Era ${s} (ISO year ${o}) was not matched by any era`);if(o<1&&a.reverseOf)throw new RangeError(`Years in ${s} era must be positive, not ${i}`);i=a.reverseOf?a.anchorEpoch.year-o:o+a.anchorEpoch.year-(a.hasYearZero?0:1),r("year",i),{eraYear:o,era:s}=n(i)}}return{...e,year:i,eraYear:o,era:s}}adjustCalendarDate(e,r,n="constrain"){let i=e,{month:o,monthCode:s}=i;return o===void 0&&(i={...i,month:TO(s)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,r,n)}estimateIsoDate(e){let r=this.adjustCalendarDate(e),{year:n,month:i,day:o}=r,{anchorEra:s}=this;return R4(n+s.isoEpoch.year-(s.hasYearZero?0:1),i,o,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&zp(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}},Dx=class extends F0{constructor(e,r){super(e,r)}inLeapYear(e){let{year:r}=e;return(r+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){let{month:r}=e;return r===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}},VC=class extends Dx{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}},JC=class extends Dx{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}},YC=class extends Dx{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}},ZC=class extends F0{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}},XC=class extends F0{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}},QC=class extends F0{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:r,eraYear:n}=e;return r!=="bc"&&r!=="b"||(r="bce"),r!=="ad"&&r!=="a"||(r="ce"),{era:r,eraYear:n}}},eO=class extends F0{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(e,r){let{era:n,eraYear:i}=e,{year:o}=r;return this.eras.find(s=>s.name===n)?{era:n,eraYear:i}:o<1?{era:"bce",eraYear:1-o}:{era:"ce",eraYear:o}}},K4=class extends Yp{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,r){let n=this.getMonthList(e.year,r);return UC(n).length===13}monthsInYear(e,r){return this.inLeapYear(e,r)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,r){if(e===void 0)throw new TypeError("Missing year");let n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=r.get(n);if(i)return i;let o=this.getFormatter(),s=(S,A)=>{let I=Rse({isoYear:S,isoMonth:2,isoDay:1}),P=new Date(I);P.setUTCDate(A+1);let $=o.formatToParts(P),N=$.find(U=>U.type==="month").value,L=+$.find(U=>U.type==="day").value,F=$.find(U=>U.type==="relatedYear");if(F===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return F=+F.value,{calendarMonthString:N,calendarDay:L,calendarYearToVerify:F}},a=17,{calendarMonthString:d,calendarDay:u,calendarYearToVerify:c}=s(e,a);d!=="1"&&(a+=29,{calendarMonthString:d,calendarDay:u}=s(e,a)),a-=u-5;let l={},m,p,g=1,b=!1;do({calendarMonthString:d,calendarDay:u,calendarYearToVerify:c}=s(e,a)),m&&(l[p].daysInMonth=m+30-u),c!==e?b=!0:(l[d]={monthIndex:g++},a+=30),m=u,p=d;while(!b);return l[p].daysInMonth=m+30-u,r.set(n,l),l}estimateIsoDate(e){let{year:r,month:n}=e;return{year:r,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:o,month:s,monthExtra:a,day:d,monthCode:u,eraYear:c}=e;if(i){if(o=c,a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);let l=eh(s,a!==void 0),m=`${s}${a||""}`,p=this.getMonthList(o,r)[m];if(p===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${o}`);return s=p.monthIndex,{year:o,month:s,day:d,era:void 0,eraYear:c,monthCode:l}}if(this.validateCalendarDate(e),o===void 0&&(o=c),c===void 0&&(c=o),s===void 0){let l=this.getMonthList(o,r),m=u.replace("L","bis").slice(1);m[0]==="0"&&(m=m.slice(1));let p=l[m];if(s=p&&p.monthIndex,s===void 0&&u.endsWith("L")&&u!="M13L"&&n==="constrain"){let g=u.slice(1,-1);g[0]==="0"&&(g=g.slice(1)),p=l[g],p&&(s=p.monthIndex,u=eh(g))}if(s===void 0)throw new RangeError(`Unmatched month ${u} in Chinese year ${o}`)}else if(u===void 0){let l=this.getMonthList(o,r),m=UC(l),p=m.length;n==="reject"?(Xi(s,1,p),Xi(d,1,this.maximumMonthLength())):(s=ea(s,1,p),d=ea(d,1,this.maximumMonthLength()));let g=m.find(([,b])=>b.monthIndex===s);if(g===void 0)throw new RangeError(`Invalid month ${s} in Chinese year ${o}`);u=eh(g[0].replace("bis",""),g[0].indexOf("bis")!==-1)}else{let l=this.getMonthList(o,r),m=u.replace("L","bis").slice(1);m[0]==="0"&&(m=m.slice(1));let p=l[m];if(!p)throw new RangeError(`Unmatched monthCode ${u} in Chinese year ${o}`);if(s!==p.monthIndex)throw new RangeError(`monthCode ${u} doesn't correspond to month ${s} in Chinese year ${o}`)}return{...e,year:o,eraYear:c,month:s,monthCode:u,day:d}}},tO=class extends K4{constructor(){super(...arguments),this.id="chinese"}},rO=class extends K4{constructor(){super(...arguments),this.id="dangi"}},nO=class{constructor(e){this.helper=e}dateFromFields(e,r,n){let i=new ui,o=Mt(e,this.fields(["day","month","monthCode","year"]),[]),s=Fn(r),{year:a,month:d,day:u}=this.helper.calendarToIsoDate(o,s,i),c=yc(a,d,u,n);return i.setObject(c),c}yearMonthFromFields(e,r,n){let i=new ui,o=Mt(e,this.fields(["month","monthCode","year"]),[]),s=Fn(r),{year:a,month:d,day:u}=this.helper.calendarToIsoDate({...o,day:1},s,i),c=Ix(a,d,n,u);return i.setObject(c),c}monthDayFromFields(e,r,n){let i=new ui,o=Mt(e,this.fields(["day","month","monthCode","year"]),[]),s=Fn(r),{year:a,month:d,day:u}=this.helper.monthDayFromFields(o,s,i),c=Tx(d,u,n,a);return i.setObject(c),c}fields(e){let r=e;return Tse.call(r,"year")&&(r=[...r,"era","eraYear"]),r}fieldKeysToIgnore(e){let r=new Ise;for(let n=0;n<e.length;n++){let i=e[n];switch(Ve(wo,r,[i]),i){case"era":Ve(wo,r,["eraYear"]),Ve(wo,r,["year"]);break;case"eraYear":Ve(wo,r,["era"]),Ve(wo,r,["year"]);break;case"year":Ve(wo,r,["era"]),Ve(wo,r,["eraYear"]);break;case"month":Ve(wo,r,["monthCode"]),this.helper.erasBeginMidYear&&(Ve(wo,r,["era"]),Ve(wo,r,["eraYear"]));break;case"monthCode":Ve(wo,r,["month"]),this.helper.erasBeginMidYear&&(Ve(wo,r,["era"]),Ve(wo,r,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(Ve(wo,r,["era"]),Ve(wo,r,["eraYear"]))}}return[...Ve(kse,r,[])]}dateAdd(e,r,n,i,o,s,a){let d=ui.getCacheForObject(e),u=this.helper.temporalToCalendarDate(e,d),c=this.helper.addCalendar(u,{years:r,months:n,weeks:i,days:o},s,d),l=this.helper.calendarToIsoDate(c,"constrain",d),{year:m,month:p,day:g}=l,b=yc(m,p,g,a);return new ui(d).setObject(b),b}dateUntil(e,r,n){let i=ui.getCacheForObject(e),o=ui.getCacheForObject(r),s=this.helper.temporalToCalendarDate(e,i),a=this.helper.temporalToCalendarDate(r,o);return this.helper.untilCalendar(s,a,n,i)}year(e){let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).year}month(e){let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).month}day(e){let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).day}era(e){if(!this.helper.hasEra)return;let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).era}eraYear(e){if(!this.helper.hasEra)return;let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).eraYear}monthCode(e){let r=ui.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).monthCode}dayOfWeek(e){return hn.iso8601.dayOfWeek(e)}dayOfYear(e){let r=ui.getCacheForObject(e),n=this.helper.isoToCalendarDate(e,r),i=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(i,n,r)+1}weekOfYear(e){return hn.iso8601.weekOfYear(e)}yearOfWeek(e){return hn.iso8601.yearOfWeek(e)}daysInWeek(e){return hn.iso8601.daysInWeek(e)}daysInMonth(e){let r=ui.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r),i=this.helper.maximumMonthLength(n);if(i===this.helper.minimumMonthLength(n))return i;let o=this.helper.startOfCalendarMonth(n),s=this.helper.addMonthsCalendar(o,1,"constrain",r);return this.helper.calendarDaysUntil(o,s,r)}daysInYear(e){let r=e;Si(r,Te)||(r=jr(r));let n=ui.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n),o=this.helper.startOfCalendarYear(i),s=this.helper.addCalendar(o,{years:1},"constrain",n);return this.helper.calendarDaysUntil(o,s,n)}monthsInYear(e){let r=ui.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r);return this.helper.monthsInYear(n,r)}inLeapYear(e){let r=e;Si(r,Te)||(r=jr(r));let n=ui.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n);return this.helper.inLeapYear(i,n)}};for(let t of[KC,WC,YC,VC,JC,tO,rO,ZC,HC,XC,QC,eO,U4,qC,LC,FC,zC,GC]){let e=new t;hn[e.id]=new nO(e)}var Mx=class t{constructor(e,r,n,i="iso8601"){Goe(this,mr(e),mr(r),mr(n),na(i))}get calendarId(){if(!Gt(this))throw new TypeError("invalid receiver");return Qi(R(this,se))}get era(){if(!Gt(this))throw new TypeError("invalid receiver");return W4(R(this,se),this)}get eraYear(){if(!Gt(this))throw new TypeError("invalid receiver");return H4(R(this,se),this)}get year(){if(!Gt(this))throw new TypeError("invalid receiver");return z4(R(this,se),this)}get month(){if(!Gt(this))throw new TypeError("invalid receiver");return G4(R(this,se),this)}get monthCode(){if(!Gt(this))throw new TypeError("invalid receiver");return Wx(R(this,se),this)}get day(){if(!Gt(this))throw new TypeError("invalid receiver");return Hx(R(this,se),this)}get dayOfWeek(){if(!Gt(this))throw new TypeError("invalid receiver");return dO(R(this,se),this)}get dayOfYear(){if(!Gt(this))throw new TypeError("invalid receiver");return uO(R(this,se),this)}get weekOfYear(){if(!Gt(this))throw new TypeError("invalid receiver");return lO(R(this,se),this)}get yearOfWeek(){if(!Gt(this))throw new TypeError("invalid receiver");return fO(R(this,se),this)}get daysInWeek(){if(!Gt(this))throw new TypeError("invalid receiver");return hO(R(this,se),this)}get daysInMonth(){if(!Gt(this))throw new TypeError("invalid receiver");return V4(R(this,se),this)}get daysInYear(){if(!Gt(this))throw new TypeError("invalid receiver");return J4(R(this,se),this)}get monthsInYear(){if(!Gt(this))throw new TypeError("invalid receiver");return Y4(R(this,se),this)}get inLeapYear(){if(!Gt(this))throw new TypeError("invalid receiver");return Z4(R(this,se),this)}with(e,r){if(!Gt(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");Sw(e);let n=Zt(r),i=R(this,se),o=Jn(i,["day","month","monthCode","year"]),s=Mt(this,o,[]);return s=K0(i,s,Mt(e,o,"partial")),s=Mt(s,o,[]),th(i,s,n)}withCalendar(e){if(!Gt(this))throw new TypeError("invalid receiver");let r=na(e);return new t(R(this,Te),R(this,Re),R(this,Oe),r)}add(e,r){if(!Gt(this))throw new TypeError("invalid receiver");let n=dw(e),i=Zt(r);return Zi(R(this,se),this,n,i)}subtract(e,r){if(!Gt(this))throw new TypeError("invalid receiver");let n=sse(dw(e)),i=Zt(r);return Zi(R(this,se),this,n,i)}until(e,r){if(!Gt(this))throw new TypeError("invalid receiver");return poe("until",this,e,r)}since(e,r){if(!Gt(this))throw new TypeError("invalid receiver");return poe("since",this,e,r)}equals(e){if(!Gt(this))throw new TypeError("invalid receiver");let r=jr(e);for(let n of[Te,Re,Oe])if(R(this,n)!==R(r,n))return!1;return Jx(R(this,se),R(r,se))}toString(e){if(!Gt(this))throw new TypeError("invalid receiver");return ooe(this,Lx(Zt(e)))}toJSON(){if(!Gt(this))throw new TypeError("invalid receiver");return ooe(this)}toLocaleString(e,r){if(!Gt(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!Gt(this))throw new TypeError("invalid receiver");let r=R(this,Te),n=R(this,Re),i=R(this,Oe),o=R(this,se);if(e===void 0)return Qs(r,n,i,0,0,0,0,0,0,o);let s=Zf(e);return Qs(r,n,i,R(s,vt),R(s,wt),R(s,_t),R(s,xt),R(s,Et),R(s,St),o)}toZonedDateTime(e){if(!Gt(this))throw new TypeError("invalid receiver");let r,n;if(sn(e))if(fc(e))r=e;else{let g=e.timeZone;g===void 0?r=Eo(e):(r=Eo(g),n=e.plainTime)}else r=Eo(e);let i=R(this,Te),o=R(this,Re),s=R(this,Oe),a=R(this,se),d=0,u=0,c=0,l=0,m=0,p=0;return n!==void 0&&(n=Zf(n),d=R(n,vt),u=R(n,wt),c=R(n,_t),l=R(n,xt),m=R(n,Et),p=R(n,St)),Yi(R(Xo(r,Qs(i,o,s,d,u,c,l,m,p,a),"compatible"),ct),r,a)}toPlainYearMonth(){if(!Gt(this))throw new TypeError("invalid receiver");let e=R(this,se);return q0(e,Mt(this,Jn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Gt(this))throw new TypeError("invalid receiver");let e=R(this,se);return bw(e,Mt(this,Jn(e,["day","monthCode"]),[]))}getISOFields(){if(!Gt(this))throw new TypeError("invalid receiver");return{calendar:R(this,se),isoDay:R(this,Oe),isoMonth:R(this,Re),isoYear:R(this,Te)}}getCalendar(){if(!Gt(this))throw new TypeError("invalid receiver");return Tw(R(this,se))}static from(e,r){let n=Zt(r);return Gt(e)?(Fn(n),yc(R(e,Te),R(e,Re),R(e,Oe),R(e,se))):jr(e,n)}static compare(e,r){let n=jr(e),i=jr(r);return zp(R(n,Te),R(n,Re),R(n,Oe),R(i,Te),R(i,Re),R(i,Oe))}};Il(Mx,"Temporal.PlainDate");var Bx=class t{constructor(e,r,n,i=0,o=0,s=0,a=0,d=0,u=0,c="iso8601"){Woe(this,mr(e),mr(r),mr(n),i===void 0?0:mr(i),o===void 0?0:mr(o),s===void 0?0:mr(s),a===void 0?0:mr(a),d===void 0?0:mr(d),u===void 0?0:mr(u),na(c))}get calendarId(){if(!bt(this))throw new TypeError("invalid receiver");return Qi(R(this,se))}get year(){if(!bt(this))throw new TypeError("invalid receiver");return z4(R(this,se),this)}get month(){if(!bt(this))throw new TypeError("invalid receiver");return G4(R(this,se),this)}get monthCode(){if(!bt(this))throw new TypeError("invalid receiver");return Wx(R(this,se),this)}get day(){if(!bt(this))throw new TypeError("invalid receiver");return Hx(R(this,se),this)}get hour(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,vt)}get minute(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,wt)}get second(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,_t)}get millisecond(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,xt)}get microsecond(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,Et)}get nanosecond(){if(!bt(this))throw new TypeError("invalid receiver");return R(this,St)}get era(){if(!bt(this))throw new TypeError("invalid receiver");return W4(R(this,se),this)}get eraYear(){if(!bt(this))throw new TypeError("invalid receiver");return H4(R(this,se),this)}get dayOfWeek(){if(!bt(this))throw new TypeError("invalid receiver");return dO(R(this,se),this)}get dayOfYear(){if(!bt(this))throw new TypeError("invalid receiver");return uO(R(this,se),this)}get weekOfYear(){if(!bt(this))throw new TypeError("invalid receiver");return lO(R(this,se),this)}get yearOfWeek(){if(!bt(this))throw new TypeError("invalid receiver");return fO(R(this,se),this)}get daysInWeek(){if(!bt(this))throw new TypeError("invalid receiver");return hO(R(this,se),this)}get daysInYear(){if(!bt(this))throw new TypeError("invalid receiver");return J4(R(this,se),this)}get daysInMonth(){if(!bt(this))throw new TypeError("invalid receiver");return V4(R(this,se),this)}get monthsInYear(){if(!bt(this))throw new TypeError("invalid receiver");return Y4(R(this,se),this)}get inLeapYear(){if(!bt(this))throw new TypeError("invalid receiver");return Z4(R(this,se),this)}with(e,r){if(!bt(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");Sw(e);let n=Zt(r),i=R(this,se),o=Jn(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),s=Mt(this,o,[]);s=K0(i,s,Mt(e,o,"partial")),s=Mt(s,o,[]);let{year:a,month:d,day:u,hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}=Gx(i,s,n);return Qs(a,d,u,c,l,m,p,g,b,i)}withPlainTime(e){if(!bt(this))throw new TypeError("invalid receiver");let r=R(this,Te),n=R(this,Re),i=R(this,Oe),o=R(this,se);if(e===void 0)return Qs(r,n,i,0,0,0,0,0,0,o);let s=Zf(e);return Qs(r,n,i,R(s,vt),R(s,wt),R(s,_t),R(s,xt),R(s,Et),R(s,St),o)}withPlainDate(e){if(!bt(this))throw new TypeError("invalid receiver");let r=jr(e),n=R(r,Te),i=R(r,Re),o=R(r,Oe),s=R(r,se),a=R(this,vt),d=R(this,wt),u=R(this,_t),c=R(this,xt),l=R(this,Et),m=R(this,St);return s=Yoe(R(this,se),s),Qs(n,i,o,a,d,u,c,l,m,s)}withCalendar(e){if(!bt(this))throw new TypeError("invalid receiver");let r=na(e);return new t(R(this,Te),R(this,Re),R(this,Oe),R(this,vt),R(this,wt),R(this,_t),R(this,xt),R(this,Et),R(this,St),r)}add(e,r){if(!bt(this))throw new TypeError("invalid receiver");return _oe("add",this,e,r)}subtract(e,r){if(!bt(this))throw new TypeError("invalid receiver");return _oe("subtract",this,e,r)}until(e,r){if(!bt(this))throw new TypeError("invalid receiver");return moe("until",this,e,r)}since(e,r){if(!bt(this))throw new TypeError("invalid receiver");return moe("since",this,e,r)}round(e){if(!bt(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?_w("smallestUnit",e):Zt(e),n=Aw(r),i=hu(r,"halfExpand"),o=ra(r,"smallestUnit","time",j0,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];Pw(n,s,s===1);let a=R(this,Te),d=R(this,Re),u=R(this,Oe),c=R(this,vt),l=R(this,wt),m=R(this,_t),p=R(this,xt),g=R(this,Et),b=R(this,St);return{year:a,month:d,day:u,hour:c,minute:l,second:m,millisecond:p,microsecond:g,nanosecond:b}=xO(a,d,u,c,l,m,p,g,b,n,o,i),Qs(a,d,u,c,l,m,p,g,b,R(this,se))}equals(e){if(!bt(this))throw new TypeError("invalid receiver");let r=C0(e);for(let n of[Te,Re,Oe,vt,wt,_t,xt,Et,St])if(R(this,n)!==R(r,n))return!1;return Jx(R(this,se),R(r,se))}toString(e){if(!bt(this))throw new TypeError("invalid receiver");let r=Zt(e),n=Lx(r),i=Fx(r),o=hu(r,"trunc"),s=ra(r,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:a,unit:d,increment:u}=zx(s,i);return soe(this,a,n,{unit:d,increment:u,roundingMode:o})}toJSON(){if(!bt(this))throw new TypeError("invalid receiver");return soe(this,"auto")}toLocaleString(e,r){if(!bt(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,r){if(!bt(this))throw new TypeError("invalid receiver");let n=Eo(e);return Yi(R(Xo(n,this,gw(Zt(r))),ct),n,R(this,se))}toPlainDate(){if(!bt(this))throw new TypeError("invalid receiver");return vw(this)}toPlainYearMonth(){if(!bt(this))throw new TypeError("invalid receiver");let e=R(this,se);return q0(e,Mt(this,Jn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!bt(this))throw new TypeError("invalid receiver");let e=R(this,se);return bw(e,Mt(this,Jn(e,["day","monthCode"]),[]))}toPlainTime(){if(!bt(this))throw new TypeError("invalid receiver");return pO(this)}getISOFields(){if(!bt(this))throw new TypeError("invalid receiver");return{calendar:R(this,se),isoDay:R(this,Oe),isoHour:R(this,vt),isoMicrosecond:R(this,Et),isoMillisecond:R(this,xt),isoMinute:R(this,wt),isoMonth:R(this,Re),isoNanosecond:R(this,St),isoSecond:R(this,_t),isoYear:R(this,Te)}}getCalendar(){if(!bt(this))throw new TypeError("invalid receiver");return Tw(R(this,se))}static from(e,r){let n=Zt(r);return bt(e)?(Fn(n),Qs(R(e,Te),R(e,Re),R(e,Oe),R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St),R(e,se))):C0(e,n)}static compare(e,r){let n=C0(e),i=C0(r);for(let o of[Te,Re,Oe,vt,wt,_t,xt,Et,St]){let s=R(n,o),a=R(i,o);if(s!==a)return $0(s-a)}return 0}};Il(Bx,"Temporal.PlainDateTime");var Cx=class t{constructor(e=0,r=0,n=0,i=0,o=0,s=0,a=0,d=0,u=0,c=0){let l=e===void 0?0:Ei(e),m=r===void 0?0:Ei(r),p=n===void 0?0:Ei(n),g=i===void 0?0:Ei(i),b=o===void 0?0:Ei(o),S=s===void 0?0:Ei(s),A=a===void 0?0:Ei(a),I=d===void 0?0:Ei(d),P=u===void 0?0:Ei(u),$=c===void 0?0:Ei(c);$4(l,m,p,g,b,S,A,I,P,$),kl(this),kt(this,Fo,l),kt(this,Ni,m),kt(this,Bs,p),kt(this,zo,g),kt(this,Go,b),kt(this,Wo,S),kt(this,Ho,A),kt(this,Vo,I),kt(this,Jo,P),kt(this,Yo,$)}get years(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Fo)}get months(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Ni)}get weeks(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Bs)}get days(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,zo)}get hours(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Go)}get minutes(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Wo)}get seconds(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Ho)}get milliseconds(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Vo)}get microseconds(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Jo)}get nanoseconds(){if(!Tn(this))throw new TypeError("invalid receiver");return R(this,Yo)}get sign(){if(!Tn(this))throw new TypeError("invalid receiver");return Sl(R(this,Fo),R(this,Ni),R(this,Bs),R(this,zo),R(this,Go),R(this,Wo),R(this,Ho),R(this,Vo),R(this,Jo),R(this,Yo))}get blank(){if(!Tn(this))throw new TypeError("invalid receiver");return Sl(R(this,Fo),R(this,Ni),R(this,Bs),R(this,zo),R(this,Go),R(this,Wo),R(this,Ho),R(this,Vo),R(this,Jo),R(this,Yo))===0}with(e){if(!Tn(this))throw new TypeError("invalid receiver");let r=Mt(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:n=R(this,Fo),months:i=R(this,Ni),weeks:o=R(this,Bs),days:s=R(this,zo),hours:a=R(this,Go),minutes:d=R(this,Wo),seconds:u=R(this,Ho),milliseconds:c=R(this,Vo),microseconds:l=R(this,Jo),nanoseconds:m=R(this,Yo)}=r;return new t(n,i,o,s,a,d,u,c,l,m)}negated(){if(!Tn(this))throw new TypeError("invalid receiver");return sse(this)}abs(){if(!Tn(this))throw new TypeError("invalid receiver");return new t(Math.abs(R(this,Fo)),Math.abs(R(this,Ni)),Math.abs(R(this,Bs)),Math.abs(R(this,zo)),Math.abs(R(this,Go)),Math.abs(R(this,Wo)),Math.abs(R(this,Ho)),Math.abs(R(this,Vo)),Math.abs(R(this,Jo)),Math.abs(R(this,Yo)))}add(e,r){if(!Tn(this))throw new TypeError("invalid receiver");return voe("add",this,e,r)}subtract(e,r){if(!Tn(this))throw new TypeError("invalid receiver");return voe("subtract",this,e,r)}round(e){if(!Tn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=R(this,Fo),n=R(this,Ni),i=R(this,Bs),o=R(this,zo),s=R(this,Go),a=R(this,Wo),d=R(this,Ho),u=R(this,Vo),c=R(this,Jo),l=R(this,Yo),m=MC(r,n,i,o,s,a,d,u,c,l),p=typeof e=="string"?_w("smallestUnit",e):Zt(e),g=ra(p,"largestUnit","datetime",void 0,["auto"]),b=_4(p),S=Aw(p),A=hu(p,"halfExpand"),I=ra(p,"smallestUnit","datetime",void 0),P=!0;I||(P=!1,I="nanosecond"),m=U0(m,I);let $=!0;if(g||($=!1,g=m),g==="auto"&&(g=m),!P&&!$)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(U0(g,I)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${I}`);let N={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[I];return N!==void 0&&Pw(S,N,!1),{years:r,months:n,weeks:i,days:o}=w4(r,n,i,o,g,b),{years:r,months:n,weeks:i,days:o,hours:s,minutes:a,seconds:d,milliseconds:u,microseconds:c,nanoseconds:l}=rh(r,n,i,o,s,a,d,u,c,l,S,I,A,b),{years:r,months:n,weeks:i,days:o,hours:s,minutes:a,seconds:d,milliseconds:u,microseconds:c,nanoseconds:l}=mse(r,n,i,o,s,a,d,u,c,l,S,I,A,b),{days:o,hours:s,minutes:a,seconds:d,milliseconds:u,microseconds:c,nanoseconds:l}=dd(o,s,a,d,u,c,l,g,b),{years:r,months:n,weeks:i,days:o}=function(F,U,G,q,T,E){let k=xe("%Temporal.Duration%"),f=Sl(F,U,G,q,0,0,0,0,0,0);if(f===0)return{years:F,months:U,weeks:G,days:q};let y=z.default.BigInt(f),w,_,x=z.default.BigInt(F),v=z.default.BigInt(U),D=z.default.BigInt(G),K=z.default.BigInt(q);E&&(_=jr(E),w=R(_,se));let M=new k(f),j=new k(0,f),J=new k(0,0,f);switch(T){case"year":{if(!w)throw new RangeError("a starting point is required for years balancing");let Z=typeof w!="string"?Tr(w,"dateAdd"):void 0,V,H,X;for({relativeTo:V,days:H}=_o(w,_,M,Z);z.default.greaterThanOrEqual(lu(K),z.default.BigInt(on(H)));)K=z.default.subtract(K,z.default.BigInt(H)),x=z.default.add(x,y),_=V,{relativeTo:V,days:H}=_o(w,_,M,Z);for({relativeTo:V,days:X}=_o(w,_,j,Z);z.default.greaterThanOrEqual(lu(K),z.default.BigInt(on(X)));)K=z.default.subtract(K,z.default.BigInt(X)),v=z.default.add(v,y),_=V,{relativeTo:V,days:X}=_o(w,_,j,Z);V=Zi(w,_,M,void 0,Z);let ee=typeof w!="string"?Tr(w,"dateUntil"):void 0,ue=So(null);ue.largestUnit="month";let ae=Gp(w,_,V,ue,ee),ce=R(ae,Ni);for(;z.default.greaterThanOrEqual(lu(v),z.default.BigInt(on(ce)));){v=z.default.subtract(v,z.default.BigInt(ce)),x=z.default.add(x,y),_=V,V=Zi(w,_,M,void 0,Z);let pe=So(null);pe.largestUnit="month",ae=Gp(w,_,V,pe,ee),ce=R(ae,Ni)}break}case"month":{if(!w)throw new RangeError("a starting point is required for months balancing");let Z=typeof w!="string"?Tr(w,"dateAdd"):void 0,V,H;for({relativeTo:V,days:H}=_o(w,_,j,Z);z.default.greaterThanOrEqual(lu(K),z.default.BigInt(on(H)));)K=z.default.subtract(K,z.default.BigInt(H)),v=z.default.add(v,y),_=V,{relativeTo:V,days:H}=_o(w,_,j,Z);break}case"week":{if(!w)throw new RangeError("a starting point is required for weeks balancing");let Z=typeof w!="string"?Tr(w,"dateAdd"):void 0,V,H;for({relativeTo:V,days:H}=_o(w,_,J,Z);z.default.greaterThanOrEqual(lu(K),z.default.BigInt(on(H)));)K=z.default.subtract(K,z.default.BigInt(H)),D=z.default.add(D,y),_=V,{relativeTo:V,days:H}=_o(w,_,J,Z);break}}return{years:z.default.toNumber(x),months:z.default.toNumber(v),weeks:z.default.toNumber(D),days:z.default.toNumber(K)}}(r,n,i,o,g,b),new t(r,n,i,o,s,a,d,u,c,l)}total(e){if(!Tn(this))throw new TypeError("invalid receiver");let r=R(this,Fo),n=R(this,Ni),i=R(this,Bs),o=R(this,zo),s=R(this,Go),a=R(this,Wo),d=R(this,Ho),u=R(this,Vo),c=R(this,Jo),l=R(this,Yo);if(e===void 0)throw new TypeError("options argument is required");let m=typeof e=="string"?_w("unit",e):Zt(e),p=_4(m),g=ra(m,"unit","datetime",j0),b;({years:r,months:n,weeks:i,days:o}=w4(r,n,i,o,g,p)),qe(p)&&(b=pse(p,r,n,i,0));let S=ose(o,s,a,d,u,c,l,g,b);if(S==="positive overflow")return 1/0;if(S==="negative overflow")return-1/0;({days:o,hours:s,minutes:a,seconds:d,milliseconds:u,microseconds:c,nanoseconds:l}=S);let{total:A}=rh(r,n,i,o,s,a,d,u,c,l,1,g,"trunc",p);return A}toString(e){if(!Tn(this))throw new TypeError("invalid receiver");let r=Zt(e),n=Fx(r),i=hu(r,"trunc"),o=ra(r,"smallestUnit","time",void 0);if(o==="hour"||o==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');let{precision:s,unit:a,increment:d}=zx(o,n);return EC(this,s,{unit:a,increment:d,roundingMode:i})}toJSON(){if(!Tn(this))throw new TypeError("invalid receiver");return EC(this)}toLocaleString(e,r){if(!Tn(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,r).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),EC(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return Tn(e)?new t(R(e,Fo),R(e,Ni),R(e,Bs),R(e,zo),R(e,Go),R(e,Wo),R(e,Ho),R(e,Vo),R(e,Jo),R(e,Yo)):dw(e)}static compare(e,r,n){let i=dw(e),o=dw(r),s=_4(Zt(n)),a=R(i,Fo),d=R(i,Ni),u=R(i,Bs),c=R(i,zo),l=R(i,Go),m=R(i,Wo),p=R(i,Ho),g=R(i,Vo),b=R(i,Jo),S=R(i,Yo),A=R(o,Fo),I=R(o,Ni),P=R(o,Bs),$=R(o,zo),N=R(o,Go),L=R(o,Wo),F=R(o,Ho),U=R(o,Vo),G=R(o,Jo),q=R(o,Yo),T=foe(s,a,d,u,c),E=foe(s,A,I,P,$);a===0&&A===0&&d===0&&I===0&&u===0&&P===0||({days:c}=w4(a,d,u,c,"day",s),{days:$}=w4(A,I,P,$,"day",s));let k=ww(c,l,m,p,g,b,S,T),f=ww($,N,L,F,U,G,q,E);return $0(z.default.toNumber(z.default.subtract(k,f)))}};Il(Cx,"Temporal.Duration");var QBe=Object.create,Ox=class{constructor(e,r,n="iso8601",i=1972){Hoe(this,mr(e),mr(r),na(n),mr(i))}get monthCode(){if(!xi(this))throw new TypeError("invalid receiver");return Wx(R(this,se),this)}get day(){if(!xi(this))throw new TypeError("invalid receiver");return Hx(R(this,se),this)}get calendarId(){if(!xi(this))throw new TypeError("invalid receiver");return Qi(R(this,se))}with(e,r){if(!xi(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");Sw(e);let n=Zt(r),i=R(this,se),o=Jn(i,["day","month","monthCode","year"]),s=Mt(this,o,[]);return s=K0(i,s,Mt(e,o,"partial")),s=Mt(s,o,[]),bw(i,s,n)}equals(e){if(!xi(this))throw new TypeError("invalid receiver");let r=noe(e);for(let n of[Re,Oe,Te])if(R(this,n)!==R(r,n))return!1;return Jx(R(this,se),R(r,se))}toString(e){if(!xi(this))throw new TypeError("invalid receiver");return aoe(this,Lx(Zt(e)))}toJSON(){if(!xi(this))throw new TypeError("invalid receiver");return aoe(this)}toLocaleString(e,r){if(!xi(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!xi(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("argument should be an object");let r=R(this,se),n=Jn(r,["day","monthCode"]),i=Mt(this,n,[]),o=Jn(r,["year"]),s=K0(r,i,Mt(e,o,[]));s=Mt(s,[...new Set([...n,...o])],[]);let a=QBe(null);return a.overflow="reject",th(r,s,a)}getISOFields(){if(!xi(this))throw new TypeError("invalid receiver");return{calendar:R(this,se),isoDay:R(this,Oe),isoMonth:R(this,Re),isoYear:R(this,Te)}}getCalendar(){if(!xi(this))throw new TypeError("invalid receiver");return Tw(R(this,se))}static from(e,r){let n=Zt(r);return xi(e)?(Fn(n),Tx(R(e,Re),R(e,Oe),R(e,se),R(e,Te))):noe(e,n)}};Il(Ox,"Temporal.PlainMonthDay");var IO=()=>new(xe("%Temporal.Instant%"))(SO()),Poe=(t,e=Fp())=>{let r=Eo(e),n=na(t);return ka(r,IO(),n)},TC=(t=Fp())=>ka(Eo(t),IO(),"iso8601"),Toe=(t,e=Fp())=>{let r=Eo(e),n=na(t);return Yi(SO(),r,n)},Mse={instant:IO,plainDateTime:Poe,plainDateTimeISO:TC,plainDate:(t,e=Fp())=>vw(Poe(t,e)),plainDateISO:(t=Fp())=>vw(TC(t)),plainTimeISO:(t=Fp())=>pO(TC(t)),timeZoneId:()=>Fp(),zonedDateTime:Toe,zonedDateTimeISO:(t=Fp())=>Toe("iso8601",t),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Mse,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});var eCe=Object.assign;function Ioe(t,e,r){let n=R(t,vt),i=R(t,wt),o=R(t,_t),s=R(t,xt),a=R(t,Et),d=R(t,St);if(r){let{unit:u,increment:c,roundingMode:l}=r;({hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:d}=EO(n,i,o,s,a,d,c,u,l))}return`${pn(n)}:${pn(i)}${Q4(o,s,a,d,e)}`}var $x=class t{constructor(e=0,r=0,n=0,i=0,o=0,s=0){let a=e===void 0?0:mr(e),d=r===void 0?0:mr(r),u=n===void 0?0:mr(n),c=i===void 0?0:mr(i),l=o===void 0?0:mr(o),m=s===void 0?0:mr(s);rA(a,d,u,c,l,m),kl(this),kt(this,vt,a),kt(this,wt,d),kt(this,_t,u),kt(this,xt,c),kt(this,Et,l),kt(this,St,m)}get hour(){if(!In(this))throw new TypeError("invalid receiver");return R(this,vt)}get minute(){if(!In(this))throw new TypeError("invalid receiver");return R(this,wt)}get second(){if(!In(this))throw new TypeError("invalid receiver");return R(this,_t)}get millisecond(){if(!In(this))throw new TypeError("invalid receiver");return R(this,xt)}get microsecond(){if(!In(this))throw new TypeError("invalid receiver");return R(this,Et)}get nanosecond(){if(!In(this))throw new TypeError("invalid receiver");return R(this,St)}with(e,r){if(!In(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");Sw(e);let n=Fn(Zt(r)),i=M4(e,"partial"),o=M4(this),{hour:s,minute:a,second:d,millisecond:u,microsecond:c,nanosecond:l}=eCe(o,i);return{hour:s,minute:a,second:d,millisecond:u,microsecond:c,nanosecond:l}=F4(s,a,d,u,c,l,n),new t(s,a,d,u,c,l)}add(e){if(!In(this))throw new TypeError("invalid receiver");return xoe("add",this,e)}subtract(e){if(!In(this))throw new TypeError("invalid receiver");return xoe("subtract",this,e)}until(e,r){if(!In(this))throw new TypeError("invalid receiver");return yoe("until",this,e,r)}since(e,r){if(!In(this))throw new TypeError("invalid receiver");return yoe("since",this,e,r)}round(e){if(!In(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?_w("smallestUnit",e):Zt(e),n=Aw(r),i=hu(r,"halfExpand"),o=ra(r,"smallestUnit","time",j0);Pw(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1);let s=R(this,vt),a=R(this,wt),d=R(this,_t),u=R(this,xt),c=R(this,Et),l=R(this,St);return{hour:s,minute:a,second:d,millisecond:u,microsecond:c,nanosecond:l}=EO(s,a,d,u,c,l,n,o,i),new t(s,a,d,u,c,l)}equals(e){if(!In(this))throw new TypeError("invalid receiver");let r=Zf(e);for(let n of[vt,wt,_t,xt,Et,St])if(R(this,n)!==R(r,n))return!1;return!0}toString(e){if(!In(this))throw new TypeError("invalid receiver");let r=Zt(e),n=Fx(r),i=hu(r,"trunc"),o=ra(r,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:s,unit:a,increment:d}=zx(o,n);return Ioe(this,s,{unit:a,increment:d,roundingMode:i})}toJSON(){if(!In(this))throw new TypeError("invalid receiver");return Ioe(this,"auto")}toLocaleString(e,r){if(!In(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!In(this))throw new TypeError("invalid receiver");let r=jr(e),n=R(r,Te),i=R(r,Re),o=R(r,Oe),s=R(r,se);return Qs(n,i,o,R(this,vt),R(this,wt),R(this,_t),R(this,xt),R(this,Et),R(this,St),s)}toZonedDateTime(e){if(!In(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");let r=e.plainDate;if(r===void 0)throw new TypeError("missing date property");let n=jr(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");let o=Eo(i),s=R(n,Te),a=R(n,Re),d=R(n,Oe),u=R(n,se),c=R(this,vt),l=R(this,wt),m=R(this,_t),p=R(this,xt),g=R(this,Et),b=R(this,St);return Yi(R(Xo(o,new(xe("%Temporal.PlainDateTime%"))(s,a,d,c,l,m,p,g,b,u),"compatible"),ct),o,u)}getISOFields(){if(!In(this))throw new TypeError("invalid receiver");return{isoHour:R(this,vt),isoMicrosecond:R(this,Et),isoMillisecond:R(this,xt),isoMinute:R(this,wt),isoNanosecond:R(this,St),isoSecond:R(this,_t)}}static from(e,r){let n=Fn(Zt(r));return In(e)?new t(R(e,vt),R(e,wt),R(e,_t),R(e,xt),R(e,Et),R(e,St)):Zf(e,n)}static compare(e,r){let n=Zf(e),i=Zf(r);for(let o of[vt,wt,_t,xt,Et,St]){let s=R(n,o),a=R(i,o);if(s!==a)return $0(s-a)}return 0}};Il($x,"Temporal.PlainTime");var N0=class{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");let r=mO(e);kl(this),kt(this,_l,r)}get id(){if(!fc(this))throw new TypeError("invalid receiver");return R(this,_l)}getOffsetNanosecondsFor(e){if(!fc(this))throw new TypeError("invalid receiver");let r=fu(e),n=R(this,_l);return sw(n)?Wp(n):Xf(n,R(r,ct))}getOffsetStringFor(e){if(!fc(this))throw new TypeError("invalid receiver");return BC(this,fu(e))}getPlainDateTimeFor(e,r="iso8601"){if(!fc(this))throw new TypeError("invalid receiver");return ka(this,fu(e),na(r))}getInstantFor(e,r){if(!fc(this))throw new TypeError("invalid receiver");return Xo(this,C0(e),gw(Zt(r)))}getPossibleInstantsFor(e){if(!fc(this))throw new TypeError("invalid receiver");let r=C0(e),n=xe("%Temporal.Instant%"),i=R(this,_l);if(sw(i)){let s=Hp(R(r,Te),R(r,Re),R(r,Oe),R(r,vt),R(r,wt),R(r,_t),R(r,xt),R(r,Et),R(r,St));if(s===null)throw new RangeError("DateTime outside of supported range");let a=Wp(i);return[new n(z.default.subtract(s,z.default.BigInt(a)))]}return function(a,d,u,c,l,m,p,g,b,S){let A=Hp(d,u,c,l,m,p,g,b,S);if(A===null)throw new RangeError("DateTime outside of supported range");let I=z.default.subtract(A,Al);z.default.lessThan(I,Px)&&(I=A);let P=z.default.add(A,Al);z.default.greaterThan(P,mw)&&(P=A);let $=Xf(a,I),N=Xf(a,P);return($===N?[$]:[$,N]).map(L=>{let F=z.default.subtract(A,z.default.BigInt(L)),U=rse(a,F);if(d===U.year&&u===U.month&&c===U.day&&l===U.hour&&m===U.minute&&p===U.second&&g===U.millisecond&&b===U.microsecond&&S===U.nanosecond)return F}).filter(L=>L!==void 0)}(i,R(r,Te),R(r,Re),R(r,Oe),R(r,vt),R(r,wt),R(r,_t),R(r,xt),R(r,Et),R(r,St)).map(s=>new n(s))}getNextTransition(e){if(!fc(this))throw new TypeError("invalid receiver");let r=fu(e),n=R(this,_l);if(sw(n)||n==="UTC")return null;let i=R(r,ct),o=xe("%Temporal.Instant%");return i=ise(n,i),i===null?null:new o(i)}getPreviousTransition(e){if(!fc(this))throw new TypeError("invalid receiver");let r=fu(e),n=R(this,_l);if(sw(n)||n==="UTC")return null;let i=R(r,ct),o=xe("%Temporal.Instant%");return i=CC(n,i),i===null?null:new o(i)}toString(){if(!fc(this))throw new TypeError("invalid receiver");return R(this,_l)}toJSON(){if(!fc(this))throw new TypeError("invalid receiver");return R(this,_l)}static from(e){return Zoe(Eo(e))}};Il(N0,"Temporal.TimeZone"),_n("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",N0.prototype.getOffsetNanosecondsFor),_n("Temporal.TimeZone.prototype.getPossibleInstantsFor",N0.prototype.getPossibleInstantsFor);var tCe=Object.create,Nx=class{constructor(e,r,n="iso8601",i=1){Voe(this,mr(e),mr(r),na(n),mr(i))}get year(){if(!_r(this))throw new TypeError("invalid receiver");return z4(R(this,se),this)}get month(){if(!_r(this))throw new TypeError("invalid receiver");return G4(R(this,se),this)}get monthCode(){if(!_r(this))throw new TypeError("invalid receiver");return Wx(R(this,se),this)}get calendarId(){if(!_r(this))throw new TypeError("invalid receiver");return Qi(R(this,se))}get era(){if(!_r(this))throw new TypeError("invalid receiver");return W4(R(this,se),this)}get eraYear(){if(!_r(this))throw new TypeError("invalid receiver");return H4(R(this,se),this)}get daysInMonth(){if(!_r(this))throw new TypeError("invalid receiver");return V4(R(this,se),this)}get daysInYear(){if(!_r(this))throw new TypeError("invalid receiver");return J4(R(this,se),this)}get monthsInYear(){if(!_r(this))throw new TypeError("invalid receiver");return Y4(R(this,se),this)}get inLeapYear(){if(!_r(this))throw new TypeError("invalid receiver");return Z4(R(this,se),this)}with(e,r){if(!_r(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid argument");Sw(e);let n=Zt(r),i=R(this,se),o=Jn(i,["month","monthCode","year"]),s=Mt(this,o,[]);return s=K0(i,s,Mt(e,o,"partial")),s=Mt(s,o,[]),q0(i,s,n)}add(e,r){if(!_r(this))throw new TypeError("invalid receiver");return Eoe("add",this,e,r)}subtract(e,r){if(!_r(this))throw new TypeError("invalid receiver");return Eoe("subtract",this,e,r)}until(e,r){if(!_r(this))throw new TypeError("invalid receiver");return goe("until",this,e,r)}since(e,r){if(!_r(this))throw new TypeError("invalid receiver");return goe("since",this,e,r)}equals(e){if(!_r(this))throw new TypeError("invalid receiver");let r=xx(e);for(let n of[Te,Re,Oe])if(R(this,n)!==R(r,n))return!1;return Jx(R(this,se),R(r,se))}toString(e){if(!_r(this))throw new TypeError("invalid receiver");return coe(this,Lx(Zt(e)))}toJSON(){if(!_r(this))throw new TypeError("invalid receiver");return coe(this)}toLocaleString(e,r){if(!_r(this))throw new TypeError("invalid receiver");return new oh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!_r(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("argument should be an object");let r=R(this,se),n=Jn(r,["monthCode","year"]),i=Mt(this,n,[]),o=Jn(r,["day"]),s=K0(r,i,Mt(e,o,[]));s=Mt(s,[...new Set([...n,...o])],[]);let a=tCe(null);return a.overflow="reject",th(r,s,a)}getISOFields(){if(!_r(this))throw new TypeError("invalid receiver");return{calendar:R(this,se),isoDay:R(this,Oe),isoMonth:R(this,Re),isoYear:R(this,Te)}}getCalendar(){if(!_r(this))throw new TypeError("invalid receiver");return Tw(R(this,se))}static from(e,r){let n=Zt(r);return _r(e)?(Fn(n),Ix(R(e,Te),R(e,Re),R(e,se),R(e,Oe))):xx(e,n)}static compare(e,r){let n=xx(e),i=xx(r);return zp(R(n,Te),R(n,Re),R(n,Oe),R(i,Te),R(i,Re),R(i,Oe))}};Il(Nx,"Temporal.PlainYearMonth");var rCe=oh.prototype.resolvedOptions,nCe=Object.create,jx=class{constructor(e,r,n="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Joe(this,Sx(e),Eo(r),na(n))}get calendarId(){if(!qe(this))throw new TypeError("invalid receiver");return Qi(R(this,se))}get timeZoneId(){if(!qe(this))throw new TypeError("invalid receiver");return kx(R(this,$r))}get year(){if(!qe(this))throw new TypeError("invalid receiver");return z4(R(this,se),nn(this))}get month(){if(!qe(this))throw new TypeError("invalid receiver");return G4(R(this,se),nn(this))}get monthCode(){if(!qe(this))throw new TypeError("invalid receiver");return Wx(R(this,se),nn(this))}get day(){if(!qe(this))throw new TypeError("invalid receiver");return Hx(R(this,se),nn(this))}get hour(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),vt)}get minute(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),wt)}get second(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),_t)}get millisecond(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),xt)}get microsecond(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),Et)}get nanosecond(){if(!qe(this))throw new TypeError("invalid receiver");return R(nn(this),St)}get era(){if(!qe(this))throw new TypeError("invalid receiver");return W4(R(this,se),nn(this))}get eraYear(){if(!qe(this))throw new TypeError("invalid receiver");return H4(R(this,se),nn(this))}get epochSeconds(){if(!qe(this))throw new TypeError("invalid receiver");let e=R(this,ct);return z.default.toNumber(uw(e,El))}get epochMilliseconds(){if(!qe(this))throw new TypeError("invalid receiver");let e=R(this,ct);return z.default.toNumber(uw(e,pc))}get epochMicroseconds(){if(!qe(this))throw new TypeError("invalid receiver");return j4(uw(R(this,ct),xr))}get epochNanoseconds(){if(!qe(this))throw new TypeError("invalid receiver");return j4(R(this,ct))}get dayOfWeek(){if(!qe(this))throw new TypeError("invalid receiver");return dO(R(this,se),nn(this))}get dayOfYear(){if(!qe(this))throw new TypeError("invalid receiver");return uO(R(this,se),nn(this))}get weekOfYear(){if(!qe(this))throw new TypeError("invalid receiver");return lO(R(this,se),nn(this))}get yearOfWeek(){if(!qe(this))throw new TypeError("invalid receiver");return fO(R(this,se),nn(this))}get hoursInDay(){if(!qe(this))throw new TypeError("invalid receiver");let e=nn(this),r=xe("%Temporal.PlainDateTime%"),n=R(e,Te),i=R(e,Re),o=R(e,Oe),s=new r(n,i,o,0,0,0,0,0,0),a=O0(n,i,o,0,0,0,1,"reject"),d=new r(a.year,a.month,a.day,0,0,0,0,0,0),u=R(this,$r),c=R(Xo(u,s,"compatible"),ct),l=R(Xo(u,d,"compatible"),ct);return wl(z.default.subtract(l,c),Koe)}get daysInWeek(){if(!qe(this))throw new TypeError("invalid receiver");return hO(R(this,se),nn(this))}get daysInMonth(){if(!qe(this))throw new TypeError("invalid receiver");return V4(R(this,se),nn(this))}get daysInYear(){if(!qe(this))throw new TypeError("invalid receiver");return J4(R(this,se),nn(this))}get monthsInYear(){if(!qe(this))throw new TypeError("invalid receiver");return Y4(R(this,se),nn(this))}get inLeapYear(){if(!qe(this))throw new TypeError("invalid receiver");return Z4(R(this,se),nn(this))}get offset(){if(!qe(this))throw new TypeError("invalid receiver");return BC(R(this,$r),R(this,xo))}get offsetNanoseconds(){if(!qe(this))throw new TypeError("invalid receiver");return pu(R(this,$r),R(this,xo))}with(e,r){if(!qe(this))throw new TypeError("invalid receiver");if(!sn(e))throw new TypeError("invalid zoned-date-time-like");Sw(e);let n=Zt(r),i=R(this,se),o=Jn(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);o.push("offset");let s=Mt(this,o,["offset"]);s=K0(i,s,Mt(e,o,"partial")),s=Mt(s,o,["offset"]);let a=gw(n),d=D4(n,"prefer"),{year:u,month:c,day:l,hour:m,minute:p,second:g,millisecond:b,microsecond:S,nanosecond:A}=Gx(i,s,n),I=Wp(s.offset),P=R(this,$r);return Yi(B4(u,c,l,m,p,g,b,S,A,"option",I,P,a,d,!1),P,i)}withPlainDate(e){if(!qe(this))throw new TypeError("invalid receiver");let r=jr(e),n=R(r,Te),i=R(r,Re),o=R(r,Oe),s=R(r,se),a=nn(this),d=R(a,vt),u=R(a,wt),c=R(a,_t),l=R(a,xt),m=R(a,Et),p=R(a,St);s=Yoe(R(this,se),s);let g=R(this,$r);return Yi(R(Xo(g,new(xe("%Temporal.PlainDateTime%"))(n,i,o,d,u,c,l,m,p,s),"compatible"),ct),g,s)}withPlainTime(e){if(!qe(this))throw new TypeError("invalid receiver");let r=xe("%Temporal.PlainTime%"),n=e===void 0?new r:Zf(e),i=nn(this),o=R(i,Te),s=R(i,Re),a=R(i,Oe),d=R(this,se),u=R(n,vt),c=R(n,wt),l=R(n,_t),m=R(n,xt),p=R(n,Et),g=R(n,St),b=R(this,$r);return Yi(R(Xo(b,new(xe("%Temporal.PlainDateTime%"))(o,s,a,u,c,l,m,p,g,d),"compatible"),ct),b,d)}withTimeZone(e){if(!qe(this))throw new TypeError("invalid receiver");let r=Eo(e);return Yi(R(this,ct),r,R(this,se))}withCalendar(e){if(!qe(this))throw new TypeError("invalid receiver");let r=na(e);return Yi(R(this,ct),R(this,$r),r)}add(e,r){if(!qe(this))throw new TypeError("invalid receiver");return Soe("add",this,e,r)}subtract(e,r){if(!qe(this))throw new TypeError("invalid receiver");return Soe("subtract",this,e,r)}until(e,r){if(!qe(this))throw new TypeError("invalid receiver");return boe("until",this,e,r)}since(e,r){if(!qe(this))throw new TypeError("invalid receiver");return boe("since",this,e,r)}round(e){if(!qe(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?_w("smallestUnit",e):Zt(e),n=Aw(r),i=hu(r,"halfExpand"),o=ra(r,"smallestUnit","time",j0,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];Pw(n,s,s===1);let a=nn(this),d=R(a,Te),u=R(a,Re),c=R(a,Oe),l=R(a,vt),m=R(a,wt),p=R(a,_t),g=R(a,xt),b=R(a,Et),S=R(a,St),A=xe("%Temporal.PlainDateTime%"),I=R(this,$r),P=R(this,se),$=Xo(I,new A(R(a,Te),R(a,Re),R(a,Oe),0,0,0,0,0,0),"compatible"),N=mc($,I,P,0,0,0,1,0,0,0,0,0,0),L=z.default.subtract(N,z.default.BigInt(R($,ct)));if(z.default.lessThanOrEqual(L,kn))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return{year:d,month:u,day:c,hour:l,minute:m,second:p,millisecond:g,microsecond:b,nanosecond:S}=xO(d,u,c,l,m,p,g,b,S,n,o,i,z.default.toNumber(L)),Yi(B4(d,u,c,l,m,p,g,b,S,"option",pu(I,R(this,xo)),I,"compatible","prefer",!1),I,R(this,se))}equals(e){if(!qe(this))throw new TypeError("invalid receiver");let r=Ex(e),n=R(this,ct),i=R(r,ct);return!!z.default.equal(z.default.BigInt(n),z.default.BigInt(i))&&!!Xoe(R(this,$r),R(r,$r))&&Jx(R(this,se),R(r,se))}toString(e){if(!qe(this))throw new TypeError("invalid receiver");let r=Zt(e),n=Lx(r),i=Fx(r),o=function(p){return Jp(p,"offset",["auto","never"],"auto")}(r),s=hu(r,"trunc"),a=ra(r,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let d=function(p){return Jp(p,"timeZoneName",["auto","never","critical"],"auto")}(r),{precision:u,unit:c,increment:l}=zx(a,i);return doe(this,u,n,d,o,{unit:c,increment:l,roundingMode:s})}toLocaleString(e,r){if(!qe(this))throw new TypeError("invalid receiver");let n=Zt(r),i=nCe(null);if(cw(i,n,["timeZone"]),n.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");i.year===void 0&&i.month===void 0&&i.day===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short");let o=kx(R(this,$r));if(sw(o))throw new RangeError("toLocaleString does not support offset string time zones");o=mO(o),i.timeZone=o;let s=new oh(e,i),a=Ve(rCe,s,[]).calendar,d=Qi(R(this,se));if(d!=="iso8601"&&a!=="iso8601"&&a!==d)throw new RangeError(`cannot format ZonedDateTime with calendar ${d} in locale with calendar ${a}`);return s.format(R(this,xo))}toJSON(){if(!qe(this))throw new TypeError("invalid receiver");return doe(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!qe(this))throw new TypeError("invalid receiver");let e=nn(this),r=xe("%Temporal.PlainDateTime%"),n=R(this,se),i=new r(R(e,Te),R(e,Re),R(e,Oe),0,0,0,0,0,0,n),o=R(this,$r);return Yi(R(Xo(o,i,"compatible"),ct),o,n)}toInstant(){if(!qe(this))throw new TypeError("invalid receiver");return new(xe("%Temporal.Instant%"))(R(this,ct))}toPlainDate(){if(!qe(this))throw new TypeError("invalid receiver");return vw(nn(this))}toPlainTime(){if(!qe(this))throw new TypeError("invalid receiver");return pO(nn(this))}toPlainDateTime(){if(!qe(this))throw new TypeError("invalid receiver");return nn(this)}toPlainYearMonth(){if(!qe(this))throw new TypeError("invalid receiver");let e=R(this,se);return q0(e,Mt(this,Jn(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!qe(this))throw new TypeError("invalid receiver");let e=R(this,se);return bw(e,Mt(this,Jn(e,["day","monthCode"]),[]))}getISOFields(){if(!qe(this))throw new TypeError("invalid receiver");let e=nn(this),r=R(this,$r);return{calendar:R(this,se),isoDay:R(e,Oe),isoHour:R(e,vt),isoMicrosecond:R(e,Et),isoMillisecond:R(e,xt),isoMinute:R(e,wt),isoMonth:R(e,Re),isoNanosecond:R(e,St),isoSecond:R(e,_t),isoYear:R(e,Te),offset:BC(r,R(this,xo)),timeZone:r}}getCalendar(){if(!qe(this))throw new TypeError("invalid receiver");return Tw(R(this,se))}getTimeZone(){if(!qe(this))throw new TypeError("invalid receiver");return Zoe(R(this,$r))}static from(e,r){let n=Zt(r);return qe(e)?(gw(n),D4(n,"reject"),Fn(n),Yi(R(e,ct),R(e,$r),R(e,se))):Ex(e,n)}static compare(e,r){let n=Ex(e),i=Ex(r),o=R(n,ct),s=R(i,ct);return z.default.lessThan(z.default.BigInt(o),z.default.BigInt(s))?-1:z.default.greaterThan(z.default.BigInt(o),z.default.BigInt(s))?1:0}};function nn(t){return ka(R(t,$r),R(t,xo),R(t,se))}Il(jx,"Temporal.ZonedDateTime");var W0=Object.freeze({__proto__:null,Calendar:fn,Duration:Cx,Instant:Rx,Now:Mse,PlainDate:Mx,PlainDateTime:Bx,PlainMonthDay:Ox,PlainTime:$x,PlainYearMonth:Nx,TimeZone:N0,ZonedDateTime:jx});var iCe=[Rx,fn,Mx,Bx,Cx,Ox,$x,N0,Nx,jx];for(let t of iCe){let e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}var Bse=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},tr=class t{static sleep(e){return Bse(this,void 0,void 0,function*(){return new Promise(r=>setTimeout(r,e))})}static minimalSleep(){return Bse(this,void 0,void 0,function*(){yield t.sleep(2)})}static getCurrentTimestamp(){return W0.Now.instant().toString({smallestUnit:"microseconds"})}static createTimestamp(e){let{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u}=e;return W0.ZonedDateTime.from({timeZone:"UTC",year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:d,microsecond:u}).toInstant().toString({smallestUnit:"microseconds"})}static createOffsetTimestamp(e,r){let n=r?W0.Instant.from(r):W0.Now.instant(),i=W0.Duration.from(e);return n.add(i).toString({smallestUnit:"microseconds"})}static validateTimestamp(e){try{W0.Instant.from(e)}catch{throw new oe(ne.TimestampInvalid,`Invalid timestamp: ${e}`)}}};var Ai=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},oCe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Fr=class t{get message(){if(this._message.authorization===void 0)throw new oe(ne.RecordsWriteMissingSigner,"This RecordsWrite is not yet signed, JSON message cannot be generated from an incomplete state.");return this._message}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get owner(){return this._owner}get ownerSignaturePayload(){return this._ownerSignaturePayload}get isSignedByAuthorDelegate(){return be.isSignedByAuthorDelegate(this._message)}get isSignedByOwnerDelegate(){return be.isSignedByOwnerDelegate(this._message)}get signer(){return be.getSigner(this._message)}get ownerSignatureSigner(){var e;return((e=this._message.authorization)===null||e===void 0?void 0:e.ownerSignature)===void 0?void 0:Qr.getSignerDid(this._message.authorization.ownerSignature.signatures[0])}constructor(e,r){this.parentContextId=r,this._message=e,e.authorization!==void 0&&(this._author=ht.getAuthor(e),this._signaturePayload=Qr.decodePlainObjectPayload(e.authorization.signature),e.authorization.ownerSignature!==void 0&&(e.authorization.ownerDelegatedGrant!==void 0?this._owner=be.getSigner(e.authorization.ownerDelegatedGrant):this._owner=Qr.getSignerDid(e.authorization.ownerSignature.signatures[0]),this._ownerSignaturePayload=Qr.decodePlainObjectPayload(e.authorization.ownerSignature))),this.attesters=t.getAttesters(e)}static parse(e){return Ai(this,void 0,void 0,function*(){let r=JSON.parse(JSON.stringify(e));yield be.validateSignatureStructure(r.authorization.signature,r.descriptor,"RecordsWriteSignaturePayload"),r.authorization.ownerSignature!==void 0&&(yield be.validateSignatureStructure(r.authorization.ownerSignature,r.descriptor)),yield t.validateAttestationIntegrity(r);let n=new t(r);return yield n.validateIntegrity(),n})}static create(e){var r,n,i,o;return Ai(this,void 0,void 0,function*(){if(e.protocol===void 0&&e.protocolPath!==void 0||e.protocol!==void 0&&e.protocolPath===void 0)throw new oe(ne.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive,"`protocol` and `protocolPath` must both be defined or undefined at the same time");if(e.data===void 0&&e.dataCid===void 0||e.data!==void 0&&e.dataCid!==void 0)throw new oe(ne.RecordsWriteCreateDataAndDataCidMutuallyExclusive,"one and only one parameter between `data` and `dataCid` is required");if(e.dataCid===void 0&&e.dataSize!==void 0||e.dataCid!==void 0&&e.dataSize===void 0)throw new oe(ne.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive,"`dataCid` and `dataSize` must both be defined or undefined at the same time");if(e.signer===void 0&&e.delegatedGrant!==void 0)throw new oe(ne.RecordsWriteCreateMissingSigner,"`signer` must be given when `delegatedGrant` is given");let s=(r=e.dataCid)!==null&&r!==void 0?r:yield Sn.computeDagPbCidFromBytes(e.data),a=(n=e.dataSize)!==null&&n!==void 0?n:e.data.length,d=tr.getCurrentTimestamp(),u={interface:Ae.Records,method:_e.Write,protocol:e.protocol!==void 0?uu(e.protocol):void 0,protocolPath:e.protocolPath,recipient:e.recipient,schema:e.schema!==void 0?Vf(e.schema):void 0,tags:e.tags,parentId:t.getRecordIdFromContextId(e.parentContextId),dataCid:s,dataSize:a,dateCreated:(i=e.dateCreated)!==null&&i!==void 0?i:d,messageTimestamp:(o=e.messageTimestamp)!==null&&o!==void 0?o:d,published:e.published,datePublished:e.datePublished,dataFormat:e.dataFormat};e.published===!0&&e.datePublished===void 0&&(u.datePublished=d),vn(u);let c=e.recordId,l=yield Sn.computeCid(u),m=yield t.createAttestation(l,e.attestationSigners),p=yield t.createEncryptionProperty(u,e.encryptionInput),g={recordId:c,descriptor:u};m!==void 0&&(g.attestation=m),p!==void 0&&(g.encryption=p);let b=new t(g,e.parentContextId);return e.signer!==void 0&&(yield b.sign({signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId,protocolRole:e.protocolRole})),b})}static getRecordIdFromContextId(e){return e?.split("/").filter(r=>r!=="").pop()}static createFrom(e){var r,n,i,o;return Ai(this,void 0,void 0,function*(){let s=e.recordsWriteMessage,a=yield t.parse(s),d=tr.getCurrentTimestamp(),u=(r=e.published)!==null&&r!==void 0?r:e.datePublished?!0:s.descriptor.published,c;e.datePublished?c=e.datePublished:u&&(s.descriptor.published?c=s.descriptor.datePublished:c=d);let l={recipient:s.descriptor.recipient,recordId:s.recordId,dateCreated:s.descriptor.dateCreated,protocol:s.descriptor.protocol,protocolPath:s.descriptor.protocolPath,schema:s.descriptor.schema,parentContextId:ht.getParentContextFromOfContextId(s.contextId),messageTimestamp:(n=e.messageTimestamp)!==null&&n!==void 0?n:d,published:u,datePublished:c,tags:e.tags,data:e.data,dataCid:e.data?void 0:s.descriptor.dataCid,dataSize:e.data?void 0:s.descriptor.dataSize,dataFormat:(i=e.dataFormat)!==null&&i!==void 0?i:s.descriptor.dataFormat,protocolRole:(o=e.protocolRole)!==null&&o!==void 0?o:a.signaturePayload.protocolRole,delegatedGrant:e.delegatedGrant,signer:e.signer,attestationSigners:e.attestationSigners};return yield t.create(l)})}toJSON(){return this.message}encryptSymmetricEncryptionKey(e){return Ai(this,void 0,void 0,function*(){this._message.encryption=yield t.createEncryptionProperty(this._message.descriptor,e),delete this._message.authorization,this._signaturePayload=void 0,this._author=void 0})}sign(e){var r;return Ai(this,void 0,void 0,function*(){let{signer:n,delegatedGrant:i,permissionGrantId:o,protocolRole:s}=e,a,d;i!==void 0?(a=yield be.getCid(i),d=Qr.getSignerDid(i.authorization.signature.signatures[0])):d=Qr.extractDid(n.keyId);let u=this._message.descriptor,c=yield Sn.computeCid(u);this._message.recordId=(r=this._message.recordId)!==null&&r!==void 0?r:yield t.getEntryId(d,u),this._message.descriptor.protocol!==void 0&&(this.parentContextId===void 0||this.parentContextId===""?this._message.contextId=this._message.recordId:this._message.contextId=this.parentContextId+"/"+this._message.recordId);let l=yield t.createSignerSignature({recordId:this._message.recordId,contextId:this._message.contextId,descriptorCid:c,attestation:this._message.attestation,encryption:this._message.encryption,signer:n,delegatedGrantId:a,permissionGrantId:o,protocolRole:s});this._message.authorization={signature:l},i!==void 0&&(this._message.authorization.authorDelegatedGrant=i),this._signaturePayload=Qr.decodePlainObjectPayload(l),this._author=d})}signAsOwner(e){return Ai(this,void 0,void 0,function*(){if(this._author===void 0)throw new oe(ne.RecordsWriteSignAsOwnerUnknownAuthor,"Unable to sign as owner without message signature because owner needs to sign over `recordId` which depends on author DID.");let r=this._message.descriptor,n=yield be.createSignature(r,e);this._message.authorization.ownerSignature=n,this._ownerSignaturePayload=Qr.decodePlainObjectPayload(n),this._owner=Qr.extractDid(e.keyId)})}signAsOwnerDelegate(e,r){return Ai(this,void 0,void 0,function*(){if(this._author===void 0)throw new oe(ne.RecordsWriteSignAsOwnerDelegateUnknownAuthor,"Unable to sign as owner delegate without message signature because owner delegate needs to sign over `recordId` which depends on author DID.");let n=yield be.getCid(r),i=this._message.descriptor,o=yield be.createSignature(i,e,{delegatedGrantId:n});this._message.authorization.ownerSignature=o,this._message.authorization.ownerDelegatedGrant=r,this._ownerSignaturePayload=Qr.decodePlainObjectPayload(o),this._owner=Qr.getSignerDid(r.authorization.signature.signatures[0])})}validateIntegrity(){return Ai(this,void 0,void 0,function*(){if(yield this.isInitialWrite()){let n=this.message.descriptor.dateCreated,i=this.message.descriptor.messageTimestamp;if(i!==n)throw new oe(ne.RecordsWriteValidateIntegrityDateCreatedMismatch,`messageTimestamp ${i} must match dateCreated ${n} for the initial write`);if(this.message.descriptor.protocol!==void 0&&this.message.descriptor.parentId===void 0){let o=yield this.getEntryId();if(this.message.contextId!==o)throw new oe(ne.RecordsWriteValidateIntegrityContextIdMismatch,`contextId in message: ${this.message.contextId} does not match deterministic contextId: ${o}`)}}let r=this.signaturePayload;if(this.message.recordId!==r.recordId)throw new oe(ne.RecordsWriteValidateIntegrityRecordIdUnauthorized,`recordId in message ${this.message.recordId} does not match recordId in authorization: ${r.recordId}`);if(this.message.contextId!==r.contextId)throw new oe(ne.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload,`contextId in message ${this.message.contextId} does not match contextId in authorization: ${r.contextId}`);if(yield ht.validateDelegatedGrantReferentialIntegrity(this.message,r,this.ownerSignaturePayload),r.attestationCid!==void 0){let n=yield Sn.computeCid(this.message.attestation),i=r.attestationCid;if(i!==n)throw new oe(ne.RecordsWriteValidateIntegrityAttestationMismatch,`CID ${n} of attestation property in message does not match attestationCid in authorization: ${i}`)}if(r.encryptionCid!==void 0){let n=yield Sn.computeCid(this.message.encryption),i=r.encryptionCid;if(i!==n)throw new oe(ne.RecordsWriteValidateIntegrityEncryptionCidMismatch,`CID ${n} of encryption property in message does not match encryptionCid in authorization: ${i}`)}this.message.descriptor.protocol!==void 0&&Ta(this.message.descriptor.protocol),this.message.descriptor.schema!==void 0&&ad(this.message.descriptor.schema),tr.validateTimestamp(this.message.descriptor.messageTimestamp),tr.validateTimestamp(this.message.descriptor.dateCreated),this.message.descriptor.datePublished&&tr.validateTimestamp(this.message.descriptor.datePublished)})}static validateAttestationIntegrity(e){return Ai(this,void 0,void 0,function*(){if(e.attestation===void 0)return;if(e.attestation.signatures.length!==1)throw new oe(ne.RecordsWriteAttestationIntegrityMoreThanOneSignature,`Currently implementation only supports 1 attester, but got ${e.attestation.signatures.length}`);let r=Qr.decodePlainObjectPayload(e.attestation),{descriptorCid:n}=r,i=yield Sn.computeCid(e.descriptor);if(n!==i)throw new oe(ne.RecordsWriteAttestationIntegrityDescriptorCidMismatch,`descriptorCid ${n} does not match expected descriptorCid ${i}`);let o=Object.keys(r).length;if(o>1)throw new oe(ne.RecordsWriteAttestationIntegrityInvalidPayloadProperty,`Only 'descriptorCid' is allowed in attestation payload, but got ${o} properties.`)})}getEntryId(){return Ai(this,void 0,void 0,function*(){return yield t.getEntryId(this.author,this.message.descriptor)})}static getEntryId(e,r){return Ai(this,void 0,void 0,function*(){if(e===void 0)throw new oe(ne.RecordsWriteGetEntryIdUndefinedAuthor,"Property `author` is needed to compute entry ID.");let n=Object.assign({},r);return n.author=e,yield Sn.computeCid(n)})}isInitialWrite(){return Ai(this,void 0,void 0,function*(){return(yield this.getEntryId())===this.message.recordId})}constructIndexes(e){return Ai(this,void 0,void 0,function*(){let r=this.message,n=r.descriptor,{tags:i}=n,o=oCe(n,["tags"]);delete o.published;let s=Object.assign(Object.assign({},o),{isLatestBaseState:e,published:!!r.descriptor.published,author:this.author,recordId:r.recordId,entryId:yield t.getEntryId(this.author,this.message.descriptor)});if(i!==void 0&&e===!0){let a=ht.buildTagIndexes(Object.assign({},i));s=Object.assign(Object.assign({},s),a)}return this.attesters.length>0&&(s.attester=this.attesters[0]),r.contextId!==void 0&&(s.contextId=r.contextId),s})}authorizeAuthorDelegate(e){return Ai(this,void 0,void 0,function*(){let r=yield vo.parse(this.message.authorization.authorDelegatedGrant);yield Lo.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})})}authorizeOwnerDelegate(e){return Ai(this,void 0,void 0,function*(){let r=yield vo.parse(this.message.authorization.ownerDelegatedGrant);yield Lo.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.owner,expectedGrantee:this.ownerSignatureSigner,permissionGrant:r,messageStore:e})})}static isInitialWrite(e){return Ai(this,void 0,void 0,function*(){if(e.descriptor.interface!==Ae.Records||e.descriptor.method!==_e.Write)return!1;let r=e,n=ht.getAuthor(r);return(yield t.getEntryId(n,r.descriptor))===r.recordId})}static createEncryptionProperty(e,r){var n,i;return Ai(this,void 0,void 0,function*(){if(r===void 0)return;let o=[];for(let a of r.keyEncryptionInputs){if(a.derivationScheme===Ji.ProtocolPath&&e.protocol===void 0)throw new oe(ne.RecordsWriteMissingProtocol,"`protocols` encryption scheme cannot be applied to record without the `protocol` property.");if(a.derivationScheme===Ji.Schemas&&e.schema===void 0)throw new oe(ne.RecordsWriteMissingSchema,"`schemas` encryption scheme cannot be applied to record without the `schema` property.");let d=Bi.publicJwkToBytes(a.publicKey),u=yield Hf.eciesSecp256k1Encrypt(d,r.key),c=Ye.bytesToBase64Url(u.ciphertext),l=yield Bi.publicKeyToJwk(u.ephemeralPublicKey),m=Ye.bytesToBase64Url(u.initializationVector),p=Ye.bytesToBase64Url(u.messageAuthenticationCode),g={rootKeyId:a.publicKeyId,algorithm:(n=a.algorithm)!==null&&n!==void 0?n:I0.EciesSecp256k1,derivationScheme:a.derivationScheme,ephemeralPublicKey:l,initializationVector:m,messageAuthenticationCode:p,encryptedKey:c};a.derivationScheme===Ji.ProtocolContext&&(g.derivedPublicKey=a.publicKey),o.push(g)}return{algorithm:(i=r.algorithm)!==null&&i!==void 0?i:I0.Aes256Ctr,initializationVector:Ye.bytesToBase64Url(r.initializationVector),keyEncryption:o}})}static createAttestation(e,r){return Ai(this,void 0,void 0,function*(){if(r===void 0||r.length===0)return;let n={descriptorCid:e},i=Ye.objectToBytes(n);return(yield k0.create(i,r)).getJws()})}static createSignerSignature(e){return Ai(this,void 0,void 0,function*(){let{recordId:r,contextId:n,descriptorCid:i,attestation:o,encryption:s,signer:a,delegatedGrantId:d,permissionGrantId:u,protocolRole:c}=e,l=o?yield Sn.computeCid(o):void 0,m=s?yield Sn.computeCid(s):void 0,p={recordId:r,descriptorCid:i,contextId:n,attestationCid:l,encryptionCid:m,delegatedGrantId:d,permissionGrantId:u,protocolRole:c};vn(p);let g=Ye.objectToBytes(p);return(yield k0.create(g,[a])).getJws()})}static getInitialWrite(e){return Ai(this,void 0,void 0,function*(){for(let r of e)if(yield t.isInitialWrite(r))return r;throw new oe(ne.RecordsWriteGetInitialWriteNotFound,"Initial write is not found.")})}static verifyEqualityOfImmutableProperties(e,r){let n=["dataCid","dataSize","dataFormat","datePublished","published","messageTimestamp","tags"],i=[];i.push(...Object.keys(e.descriptor)),i.push(...Object.keys(r.descriptor)),i=[...new Set(i)];for(let o of i)if(n.indexOf(o)===-1){let s=e.descriptor[o],a=r.descriptor[o];if(a!==s)throw new oe(ne.RecordsWriteImmutablePropertyChanged,`${o} is an immutable property: cannot change '${s}' to '${a}'`)}return!0}static getAttesters(e){var r,n;return((n=(r=e.attestation)===null||r===void 0?void 0:r.signatures)!==null&&n!==void 0?n:[]).map(s=>Qr.getSignerDid(s))}static fetchInitialRecordsWrite(e,r,n){return Ai(this,void 0,void 0,function*(){let i={entryId:n},{messages:o}=yield e.query(r,[i]);return o.length===0?void 0:yield t.parse(o[0])})}};var Cse=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})};function Yn(t,e){return Cse(this,void 0,void 0,function*(){if(t===void 0)throw new oe(ne.AuthenticateJwsMissing,"Missing JWS.");if(yield Ty.verifySignatures(t.signature,e),t.ownerSignature!==void 0&&(yield Ty.verifySignatures(t.ownerSignature,e)),t.authorDelegatedGrant!==void 0){let r=yield Fr.parse(t.authorDelegatedGrant);yield Ty.verifySignatures(r.message.authorization.signature,e)}if(t.ownerDelegatedGrant!==void 0){let r=yield Fr.parse(t.ownerDelegatedGrant);yield Ty.verifySignatures(r.message.authorization.signature,e)}})}function Dl(t,e){return Cse(this,void 0,void 0,function*(){if(e.author!==t)throw new oe(ne.AuthorizationAuthorNotOwner,`Message authored by ${e.author}, not authored by expected owner ${t}.`)})}h();var sCe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Zx=class{isActiveTenant(e){return sCe(this,void 0,void 0,function*(){return{isActiveTenant:!0}})}};h();h();var fi=class{get message(){return this._message}get signer(){return this._signer}get author(){return this._author}get signaturePayload(){return this._signaturePayload}constructor(e){this._message=e,e.authorization!==void 0&&(this._signer=be.getSigner(e),e.authorization.authorDelegatedGrant!==void 0?this._author=be.getSigner(e.authorization.authorDelegatedGrant):this._author=this._signer,this._signaturePayload=Qr.decodePlainObjectPayload(e.authorization.signature))}toJSON(){return this.message}};var kO=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},em=class t extends fi{static parse(e){return kO(this,void 0,void 0,function*(){if(e.descriptor.filter.published===!1&&(e.descriptor.dateSort===$i.PublishedAscending||e.descriptor.dateSort===$i.PublishedDescending))throw new oe(ne.RecordsQueryParseFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.descriptor.dateSort}`);let r;if(e.authorization!==void 0&&(r=yield be.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield ht.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new oe(ne.RecordsQueryFilterMissingRequiredProperties,"Role-authorized queries must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&Ta(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&ad(e.descriptor.filter.schema),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return kO(this,void 0,void 0,function*(){let n={interface:Ae.Records,method:_e.Query,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp(),filter:ht.normalizeFilter(e.filter),dateSort:e.dateSort,pagination:e.pagination};if(e.filter.published===!1&&(e.dateSort===$i.PublishedAscending||e.dateSort===$i.PublishedDescending))throw new oe(ne.RecordsQueryCreateFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.dateSort}`);vn(n);let i=e.signer,o;i&&(o=yield be.createAuthorization({descriptor:n,signer:i,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));let s={descriptor:n,authorization:o};return be.validateJsonSchema(s),new t(s)})}authorizeDelegate(e){return kO(this,void 0,void 0,function*(){let r=yield vo.parse(this.message.authorization.authorDelegatedGrant);yield Lo.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantee:this.signer,expectedGrantor:this.author,permissionGrant:r,messageStore:e})})}};h();var nA=Ut(h4(),1),Ose=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},mu=class t{static toBytes(e){return Ose(this,void 0,void 0,function*(){return new Promise((r,n)=>{let i=[];e.on("data",o=>{i.push(o)}),e.on("end",()=>{let o=t.concatenateArrayOfBytes(i);r(o)}),e.on("error",n)})})}static toObject(e){return Ose(this,void 0,void 0,function*(){let r=yield t.toBytes(e);return Ye.bytesToObject(r)})}static concatenateArrayOfBytes(e){let r=e.reduce((o,s)=>o+s.length,0),n=new Uint8Array(r),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}static fromBytes(e){let n=0;return new nA.Readable({read(o){n+1e5>e.length?(this.push(e.subarray(n)),this.push(null)):(this.push(e.subarray(n,n+1e5)),n=n+1e5)}})}static fromObject(e){let r=Ye.objectToBytes(e);return t.fromBytes(r)}static duplicateDataStream(e,r){let n=[];for(let i=0;i<r;i++){let o=new nA.PassThrough;e.pipe(o),n.push(o)}return n}};h();h();h();var $se=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},tm=class t extends fi{static parse(e){return $se(this,void 0,void 0,function*(){return be.validateJsonSchema(e),yield be.validateSignatureStructure(e.authorization.signature,e.descriptor),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return $se(this,void 0,void 0,function*(){let n={interface:Ae.Events,method:_e.Get,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp()};e.cursor&&(n.cursor=e.cursor);let i=yield be.createAuthorization({descriptor:n,signer:e.signer}),o={descriptor:n,authorization:i};return be.validateJsonSchema(o),new t(o)})}};h();function Xt(t,e){let r=t instanceof Error?t.message:"Error";return{status:{code:e,detail:r}}}var aCe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},iA=class{constructor(e,r){this.didResolver=e,this.eventLog=r}handle({tenant:e,message:r}){return aCe(this,void 0,void 0,function*(){let n;try{n=yield tm.parse(r)}catch(a){return Xt(a,400)}try{yield Yn(r.authorization,this.didResolver),yield Dl(e,n)}catch(a){return Xt(a,401)}let{cursor:i}=r.descriptor,{events:o,cursor:s}=yield this.eventLog.getEvents(e,i);return{status:{code:200,detail:"OK"},entries:o,cursor:s}})}};h();h();var rm=class{static normalizeFilters(e){let r=[];for(let n of e){let i;this.isRecordsFilter(n)?i=ht.normalizeFilter(n):i=n,vn(i),wx(i)||r.push(i)}return r}static convertFilters(e){let r=[];for(let n of e)this.isRecordsFilter(n)?r.push(ht.convertFilter(n)):r.push(this.convertFilter(n));return r}static convertFilter(e){let r=Object.assign({},e),{dateUpdated:n}=e,i=n?Hn.convertRangeCriterion(n):void 0;return i&&(r.messageTimestamp=i,delete r.dateUpdated),r}static isRecordsFilter(e){return"author"in e||"dateCreated"in e||"dataFormat"in e||"dataSize"in e||"parentId"in e||"recordId"in e||"schema"in e||"protocol"in e||"protocolPath"in e||"recipient"in e}};h();var Nse=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},nm=class t extends fi{static parse(e){return Nse(this,void 0,void 0,function*(){be.validateJsonSchema(e),yield be.validateSignatureStructure(e.authorization.signature,e.descriptor);for(let r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&Ta(r.protocol),"schema"in r&&r.schema!==void 0&&ad(r.schema);return new t(e)})}static create(e){var r;return Nse(this,void 0,void 0,function*(){let n={interface:Ae.Events,method:_e.Query,filters:rm.normalizeFilters(e.filters),messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp(),cursor:e.cursor};vn(n);let i=yield be.createAuthorization({descriptor:n,signer:e.signer}),o={descriptor:n,authorization:i};return be.validateJsonSchema(o),new t(o)})}};var cCe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},oA=class{constructor(e,r){this.didResolver=e,this.eventLog=r}handle({tenant:e,message:r}){return cCe(this,void 0,void 0,function*(){let n;try{n=yield nm.parse(r)}catch(a){return Xt(a,400)}try{yield Yn(r.authorization,this.didResolver),yield Dl(e,n)}catch(a){return Xt(a,401)}let i=rm.convertFilters(r.descriptor.filters),{events:o,cursor:s}=yield this.eventLog.queryEvents(e,i,r.descriptor.cursor);return{status:{code:200,detail:"OK"},entries:o,cursor:s}})}};h();h();var jse=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},im=class t extends fi{static parse(e){return jse(this,void 0,void 0,function*(){be.validateJsonSchema(e),yield be.validateSignatureStructure(e.authorization.signature,e.descriptor);for(let r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&Ta(r.protocol),"schema"in r&&r.schema!==void 0&&ad(r.schema);return tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r,n;return jse(this,void 0,void 0,function*(){let i=tr.getCurrentTimestamp(),o={interface:Ae.Events,method:_e.Subscribe,filters:(r=e.filters)!==null&&r!==void 0?r:[],messageTimestamp:(n=e.messageTimestamp)!==null&&n!==void 0?n:i};vn(o);let s=yield be.createAuthorization({descriptor:o,signer:e.signer}),a={descriptor:o,authorization:s};return be.validateJsonSchema(a),new t(a)})}};var dCe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},sA=class{constructor(e,r){this.didResolver=e,this.eventStream=r}handle({tenant:e,message:r,subscriptionHandler:n}){return dCe(this,void 0,void 0,function*(){if(this.eventStream===void 0)return Xt(new oe(ne.EventsSubscribeEventStreamUnimplemented,"Subscriptions are not supported"),501);let i;try{i=yield im.parse(r)}catch(c){return Xt(c,400)}try{yield Yn(r.authorization,this.didResolver),yield Dl(e,i)}catch(c){return Xt(c,401)}let{filters:o}=r.descriptor,s=rm.convertFilters(o),a=yield be.getCid(r),d=(c,l,m)=>{e===c&&Hn.matchAnyFilter(m,s)&&n(l)},u=yield this.eventStream.subscribe(e,a,d);return{status:{code:200,detail:"OK"},subscription:u}})}};h();h();var Use=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},om=class t extends fi{static parse(e){return Use(this,void 0,void 0,function*(){return be.validateJsonSchema(e),this.validateMessageCids(e.descriptor.messageCids),yield be.validateSignatureStructure(e.authorization.signature,e.descriptor),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return Use(this,void 0,void 0,function*(){let n={interface:Ae.Messages,method:_e.Get,messageCids:e.messageCids,messageTimestamp:(r=e?.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp()},i=yield be.createAuthorization({descriptor:n,signer:e.signer}),o={descriptor:n,authorization:i};return be.validateJsonSchema(o),t.validateMessageCids(e.messageCids),new t(o)})}static validateMessageCids(e){for(let r of e)try{Sn.parseCid(r)}catch{throw new oe(ne.MessageGetInvalidCid,`${r} is not a valid CID`)}}};var uCe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},aA=class{constructor(e,r,n){this.didResolver=e,this.messageStore=r,this.dataStore=n}handle({tenant:e,message:r}){return uCe(this,void 0,void 0,function*(){let n;try{n=yield om.parse(r)}catch(a){return Xt(a,400)}try{yield Yn(r.authorization,this.didResolver),yield Dl(e,n)}catch(a){return Xt(a,401)}let i=[],o=new Set(r.descriptor.messageCids);for(let a of o){let d=this.messageStore.get(e,a).then(u=>({messageCid:a,message:u})).catch(u=>({messageCid:a,message:void 0,error:`Failed to get message ${a}`}));i.push(d)}let s=yield Promise.all(i);for(let a of s){let{message:d}=a;if(!d)continue;let{interface:u,method:c}=d.descriptor;if(u!==Ae.Records||c!==_e.Write)continue;let l=d;l.encodedData!==void 0&&(a.encodedData=l.encodedData,delete l.encodedData)}return{status:{code:200,detail:"OK"},entries:s}})}};h();h();var Pde=Ut(SN(),1);h();var dh;(function(t){t.Anyone="anyone",t.Author="author",t.Recipient="recipient"})(dh||(dh={}));var hi;(function(t){t.CoDelete="co-delete",t.CoPrune="co-prune",t.CoUpdate="co-update",t.Create="create",t.Delete="delete",t.Prune="prune",t.Query="query",t.Read="read",t.Subscribe="subscribe",t.Update="update"})(hi||(hi={}));var Ade=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},iKe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},pm=class t extends fi{static parse(e){return Ade(this,void 0,void 0,function*(){return be.validateJsonSchema(e),t.validateProtocolDefinition(e.descriptor.definition),yield be.validateSignatureStructure(e.authorization.signature,e.descriptor),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return Ade(this,void 0,void 0,function*(){let n={interface:Ae.Protocols,method:_e.Configure,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp(),definition:t.normalizeDefinition(e.definition)},i=yield be.createAuthorization({descriptor:n,signer:e.signer,permissionGrantId:e.permissionGrantId}),o={descriptor:n,authorization:i};return be.validateJsonSchema(o),t.validateProtocolDefinition(o.descriptor.definition),new t(o)})}static validateProtocolDefinition(e){let{protocol:r,types:n}=e;Ta(r);for(let i in n){let o=n[i].schema;o!==void 0&&ad(o)}t.validateStructure(e)}static validateStructure(e){let r=Object.keys(e.types),n=t.fetchAllRolePathsRecursively("",e.structure,[]);t.validateRuleSetRecursively({ruleSet:e.structure,ruleSetProtocolPath:"",recordTypes:r,roles:n})}static fetchAllRolePathsRecursively(e,r,n){if(e.split("/").length>10)throw new oe(ne.ProtocolsConfigureRecordNestingDepthExceeded,"Record nesting depth exceeded 10 levels.");for(let i in r){if(i.startsWith("$"))continue;let o=r[i],s;e===""?s=i:s=`${e}/${i}`,o.$role?n.push(s):t.fetchAllRolePathsRecursively(s,o,n)}return n}static validateRuleSetRecursively(e){var r;let{ruleSet:n,ruleSetProtocolPath:i,recordTypes:o,roles:s}=e;if(n.$size!==void 0){let{min:d=0,max:u}=n.$size;if(u!==void 0&&u<d)throw new oe(ne.ProtocolsConfigureInvalidSize,`Invalid size range found: max limit ${u} less than min limit ${d} at protocol path '${i}'`)}if(n.$tags){let d=new Pde.default.default,u=n.$tags,{$allowUndefinedTags:c,$requiredTags:l}=u,m=iKe(u,["$allowUndefinedTags","$requiredTags"]);for(let p in m){let g=m[p];if(!d.validateSchema(g)){let b=d.errorsText(d.errors,{dataVar:`${i}/$tags/${p}`});throw new oe(ne.ProtocolsConfigureInvalidTagSchema,`tags schema validation error: ${b}`)}}}let a=(r=n.$actions)!==null&&r!==void 0?r:[];for(let d=0;d<a.length;d++){let u=a[d];if(u.role!==void 0&&!s.includes(u.role))throw new oe(ne.ProtocolsConfigureRoleDoesNotExistAtGivenPath,`Role in action ${JSON.stringify(u)} for rule set ${i} does not exist.`);if(u.who==="anyone"&&u.of)throw new oe(ne.ProtocolsConfigureInvalidActionOfNotAllowed,`'of' is not allowed at rule set protocol path (${i})`);if(u.who===dh.Recipient&&u.of===void 0&&u.can.some(l=>![hi.CoUpdate,hi.CoDelete,hi.CoPrune].includes(l)))throw new oe(ne.ProtocolsConfigureInvalidRecipientOfAction,"Rules for `recipient` without `of` property must have `can` containing only `co-update`, `co-delete`, and `co-prune`.");if(u.who===dh.Author&&!u.of)throw new oe(ne.ProtocolsConfigureInvalidActionMissingOf,"'of' is required when 'author' is specified as 'who'");if(u.can!==void 0){if(u.can.includes(hi.Update)&&!u.can.includes(hi.Create))throw new oe(ne.ProtocolsConfigureInvalidActionUpdateWithoutCreate,`Action rule ${JSON.stringify(u)} contains 'update' action but missing the required 'create' action.`);if(u.can.includes(hi.Delete)&&!u.can.includes(hi.Create))throw new oe(ne.ProtocolsConfigureInvalidActionDeleteWithoutCreate,`Action rule ${JSON.stringify(u)} contains 'delete' action but missing the required 'create' action.`)}for(let c=d+1;c<a.length;c++){let l=a[c];if(u.who!==void 0){if(u.who===l.who&&u.of===l.of)throw new oe(ne.ProtocolsConfigureDuplicateActorInRuleSet,`More than one action rule per actor ${u.who} of ${u.of} not allowed within a rule set: ${JSON.stringify(u)}`)}else if(u.role===l.role)throw new oe(ne.ProtocolsConfigureDuplicateRoleInRuleSet,`More than one action rule per role ${u.role} not allowed within a rule set: ${JSON.stringify(u)}`)}}for(let d in n){if(d.startsWith("$"))continue;if(!o.includes(d))throw new oe(ne.ProtocolsConfigureInvalidRuleSetRecordType,`Rule set ${d} is not declared as an allowed type in the protocol definition.`);let u=n[d],c;i===""?c=d:c=`${i}/${d}`,t.validateRuleSetRecursively({ruleSet:u,ruleSetProtocolPath:c,recordTypes:o,roles:s})}}static normalizeDefinition(e){let r=Object.assign({},e.types);for(let n in r){let i=r[n].schema;i!==void 0&&(r[n].schema=Vf(i))}return Object.assign(Object.assign({},e),{protocol:uu(e.protocol),types:r})}};var oKe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},sKe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},KA=class t{constructor(e,r,n,i){this.didResolver=e,this.messageStore=r,this.eventLog=n,this.eventStream=i}handle({tenant:e,message:r}){return oKe(this,void 0,void 0,function*(){let n;try{n=yield pm.parse(r)}catch(c){return Xt(c,400)}try{yield Yn(r.authorization,this.didResolver),yield Dl(e,n)}catch(c){return Xt(c,401)}let i={interface:Ae.Protocols,method:_e.Configure,protocol:r.descriptor.definition.protocol},{messages:o}=yield this.messageStore.query(e,[i]),s=yield be.getNewestMessage(o),a=!1;(s===void 0||(yield be.isNewer(r,s)))&&(a=!0,s=r);let d;if(a){let c=t.constructIndexes(n);yield this.messageStore.put(e,r,c);let l=yield be.getCid(r);yield this.eventLog.append(e,l,c),this.eventStream!==void 0&&this.eventStream.emit(e,{message:r},c),d={status:{code:202,detail:"Accepted"}}}else d={status:{code:409,detail:"Conflict"}};let u=[];for(let c of o)if(yield be.isNewer(s,c)){let l=yield be.getCid(c);u.push(l),yield this.messageStore.delete(e,l)}return yield this.eventLog.deleteEventsByCid(e,u),d})}static constructIndexes(e){let r=e.message.descriptor,{definition:n}=r,i=sKe(r,["definition"]),{author:o}=e;return Object.assign(Object.assign({},i),{author:o,protocol:n.protocol,published:n.published})}};h();h();h();var qA=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},pi=class t{static parseRequest(e){return Ye.base64UrlToObject(e)}static createRequest(e){return qA(this,void 0,void 0,function*(){let r=t.normalizePermissionScope(e.scope),n={description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions},i=Ye.objectToBytes(n);return{recordsWrite:yield Fr.create({signer:e.signer,messageTimestamp:e.dateRequested,protocol:t.uri,protocolPath:t.requestPath,dataFormat:"application/json",data:i}),permissionRequestData:n,permissionRequestBytes:i}})}static createGrant(e){return qA(this,void 0,void 0,function*(){let r=t.normalizePermissionScope(e.scope),n={dateExpires:e.dateExpires,requestId:e.requestId,description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions},i=Ye.objectToBytes(n),o=yield Fr.create({signer:e.signer,messageTimestamp:e.dateGranted,dateCreated:e.dateGranted,recipient:e.grantedTo,protocol:t.uri,protocolPath:t.grantPath,dataFormat:"application/json",data:i}),s=Object.assign(Object.assign({},o.message),{encodedData:Ye.bytesToBase64Url(i)});return{recordsWrite:o,permissionGrantData:n,permissionGrantBytes:i,dataEncodedMessage:s}})}static createRevocation(e){return qA(this,void 0,void 0,function*(){let r={description:e.description},n=Ye.objectToBytes(r);return{recordsWrite:yield Fr.create({signer:e.signer,parentContextId:e.grantId,protocol:t.uri,protocolPath:t.revocationPath,dataFormat:"application/json",data:n}),permissionRevocationData:r,permissionRevocationBytes:n}})}static validateSchema(e,r){let n=Ye.bytesToString(r),i=JSON.parse(n);if(e.descriptor.protocolPath===t.requestPath)vf("PermissionRequestData",i);else if(e.descriptor.protocolPath===t.grantPath){vf("PermissionGrantData",i);let o=i;t.validateScope(o.scope),tr.validateTimestamp(o.dateExpires)}else if(e.descriptor.protocolPath===t.revocationPath)vf("PermissionRevocationData",i);else throw new oe(ne.PermissionsProtocolValidateSchemaUnexpectedRecord,`Unexpected permission record: ${e.descriptor.protocolPath}`)}static fetchGrant(e,r,n){return qA(this,void 0,void 0,function*(){let i={recordId:n,isLatestBaseState:!0},{messages:o}=yield r.query(e,[i]),s=o[0],a=s?.descriptor.interface,d=s?.descriptor.method;if(a!==Ae.Records||d!==_e.Write||s.descriptor.protocolPath!==t.grantPath)throw new oe(ne.GrantAuthorizationGrantMissing,`Could not find permission grant with record ID ${n}.`);let u=s;return yield vo.parse(u)})}static normalizePermissionScope(e){let r=Object.assign({},e);return t.isRecordPermissionScope(r)&&(r.protocol!==void 0&&(r.protocol=uu(r.protocol)),r.schema!==void 0&&(r.schema=Vf(r.schema))),r}static isRecordPermissionScope(e){return e.interface==="Records"}static validateScope(e){if(this.isRecordPermissionScope(e)){if(e.schema!==void 0&&(e.protocol!==void 0||e.contextId!==void 0||e.protocolPath))throw new oe(ne.PermissionsProtocolValidateScopeSchemaProhibitedProperties,"Permission grants that have `schema` present cannot also have protocol-related properties present");if(e.protocol!==void 0&&e.contextId!==void 0&&e.protocolPath!==void 0)throw new oe(ne.PermissionsProtocolValidateScopeContextIdProhibitedProperties,"Permission grants cannot have both `contextId` and `protocolPath` present")}}};pi.uri="https://tbd.website/dwn/permissions";pi.requestPath="request";pi.grantPath="grant";pi.revocationPath="grant/revocation";pi.definition={published:!0,protocol:pi.uri,types:{request:{dataFormats:["application/json"]},grant:{dataFormats:["application/json"]},revocation:{dataFormats:["application/json"]}},structure:{request:{$size:{max:1e4},$actions:[{who:"anyone",can:["create"]}]},grant:{$size:{max:1e4},$actions:[{who:"recipient",of:"grant",can:["read","query"]}],revocation:{$size:{max:1e4},$actions:[{who:"anyone",can:["read"]}]}}}};var AN=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},mm=class t extends fi{static parse(e){return AN(this,void 0,void 0,function*(){return e.authorization!==void 0&&(yield be.validateSignatureStructure(e.authorization.signature,e.descriptor)),e.descriptor.filter!==void 0&&Ta(e.descriptor.filter.protocol),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return AN(this,void 0,void 0,function*(){let n={interface:Ae.Protocols,method:_e.Query,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp(),filter:e.filter?t.normalizeFilter(e.filter):void 0};vn(n);let i;e.signer!==void 0&&(i=yield be.createAuthorization({descriptor:n,signer:e.signer,permissionGrantId:e.permissionGrantId}));let o={descriptor:n,authorization:i};return be.validateJsonSchema(o),new t(o)})}static normalizeFilter(e){return Object.assign(Object.assign({},e),{protocol:uu(e.protocol)})}authorize(e,r){return AN(this,void 0,void 0,function*(){if(this.author!==e)if(this.author!==void 0&&this.signaturePayload.permissionGrantId){let n=yield pi.fetchGrant(e,r,this.signaturePayload.permissionGrantId);yield Jf.performBaseValidation({incomingMessage:this.message,expectedGrantor:e,expectedGrantee:this.author,permissionGrant:n,messageStore:r})}else throw new oe(ne.ProtocolsQueryUnauthorized,"The ProtocolsQuery failed authorization")})}};var Tde=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},LA=class{constructor(e,r,n){this.didResolver=e,this.messageStore=r,this.dataStore=n}handle({tenant:e,message:r}){return Tde(this,void 0,void 0,function*(){let n;try{n=yield mm.parse(r)}catch(s){return Xt(s,400)}try{yield Yn(r.authorization,this.didResolver),yield n.authorize(e,this.messageStore)}catch(s){if(s.code===ne.AuthenticateJwsMissing||s.code===ne.ProtocolsQueryUnauthorized){let a=yield this.fetchPublishedProtocolsConfigure(e,n);return{status:{code:200,detail:"OK"},entries:a}}else return Xt(s,401)}let i=Object.assign(Object.assign({},r.descriptor.filter),{interface:Ae.Protocols,method:_e.Configure});vn(i);let{messages:o}=yield this.messageStore.query(e,[i]);return{status:{code:200,detail:"OK"},entries:o}})}fetchPublishedProtocolsConfigure(e,r){return Tde(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},r.message.descriptor.filter),{interface:Ae.Protocols,method:_e.Configure,published:!0}),{messages:i}=yield this.messageStore.query(e,[n]);return i})}};h();h();var Ide=Ut(SN(),1);var Ca=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},aKe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},gc=class t{static validateReferentialIntegrity(e,r,n){return Ca(this,void 0,void 0,function*(){let i=yield t.fetchProtocolDefinition(e,r.message.descriptor.protocol,n);t.verifyType(r.message,i.types),yield t.verifyProtocolPathAndContextId(e,r,n);let o=t.getRuleSet(r.message.descriptor.protocolPath,i);yield t.verifyAsRoleRecordIfNeeded(e,r,o,n),t.verifySizeLimit(r,o),t.verifyTagsIfNeeded(r,o)})}static authorizeWrite(e,r,n){return Ca(this,void 0,void 0,function*(){let i=yield t.fetchInitialWrite(e,r.message.recordId,n),o;i===void 0?o=yield t.constructRecordChain(e,r.message.descriptor.parentId,n):o=yield t.constructRecordChain(e,r.message.recordId,n);let s=yield t.fetchProtocolDefinition(e,r.message.descriptor.protocol,n),a=t.getRuleSet(r.message.descriptor.protocolPath,s);yield t.verifyInvokedRole(e,r,r.message.descriptor.protocol,r.message.contextId,s,n),yield t.authorizeAgainstAllowedActions(e,r,a,o,n)})}static authorizeRead(e,r,n,i){return Ca(this,void 0,void 0,function*(){let o=yield t.constructRecordChain(e,n.message.recordId,i),s=yield t.fetchProtocolDefinition(e,n.message.descriptor.protocol,i),a=t.getRuleSet(n.message.descriptor.protocolPath,s);yield t.verifyInvokedRole(e,r,n.message.descriptor.protocol,n.message.contextId,s,i),yield t.authorizeAgainstAllowedActions(e,r,a,o,i)})}static authorizeQueryOrSubscribe(e,r,n){return Ca(this,void 0,void 0,function*(){let{protocol:i,protocolPath:o,contextId:s}=r.message.descriptor.filter,a=yield t.fetchProtocolDefinition(e,i,n),d=t.getRuleSet(o,a);yield t.verifyInvokedRole(e,r,i,s,a,n),yield t.authorizeAgainstAllowedActions(e,r,d,[],n)})}static authorizeDelete(e,r,n,i){return Ca(this,void 0,void 0,function*(){let o=yield t.constructRecordChain(e,r.message.descriptor.recordId,i),s=yield t.fetchProtocolDefinition(e,n.message.descriptor.protocol,i),a=t.getRuleSet(n.message.descriptor.protocolPath,s);yield t.verifyInvokedRole(e,r,n.message.descriptor.protocol,n.message.contextId,s,i),yield t.authorizeAgainstAllowedActions(e,r,a,o,i)})}static fetchProtocolDefinition(e,r,n){return Ca(this,void 0,void 0,function*(){if(r===pi.uri)return pi.definition;let i={interface:Ae.Protocols,method:_e.Configure,protocol:r},{messages:o}=yield n.query(e,[i]);if(o.length===0)throw new oe(ne.ProtocolAuthorizationProtocolNotFound,`unable to find protocol definition for ${r}`);return o[0].descriptor.definition})}static constructRecordChain(e,r,n){return Ca(this,void 0,void 0,function*(){if(r===void 0)return[];let i=[],o=r;for(;o!==void 0;){let s=yield t.fetchInitialWrite(e,o,n);if(s===void 0)throw new oe(ne.ProtocolAuthorizationParentNotFoundConstructingRecordChain,`Unexpected error that should never trigger: no parent found with ID ${o} when constructing record chain.`);i.push(s),o=s.descriptor.parentId}return i.reverse()})}static fetchInitialWrite(e,r,n){return Ca(this,void 0,void 0,function*(){let i={interface:Ae.Records,method:_e.Write,recordId:r},{messages:o}=yield n.query(e,[i]);return o.length===0?void 0:yield Fr.getInitialWrite(o)})}static getRuleSet(e,r){let n=t.getRuleSetAtProtocolPath(e,r);if(n===void 0)throw new oe(ne.ProtocolAuthorizationMissingRuleSet,`No rule set defined for protocolPath ${e}`);return n}static verifyProtocolPathAndContextId(e,r,n){var i;return Ca(this,void 0,void 0,function*(){let o=r.message.descriptor.protocolPath,s=t.getTypeName(o),a=r.message.descriptor.parentId;if(a===void 0){if(o!==s)throw new oe(ne.ProtocolAuthorizationParentlessIncorrectProtocolPath,`Declared protocol path '${o}' is not valid for records with no parent'.`);return}let d=r.message.descriptor.protocol,u={isLatestBaseState:!0,interface:Ae.Records,method:_e.Write,protocol:d,recordId:a},{messages:c}=yield n.query(e,[u]),l=c[0];if(`${(i=l?.descriptor)===null||i===void 0?void 0:i.protocolPath}/${s}`!==o)throw new oe(ne.ProtocolAuthorizationIncorrectProtocolPath,`Could not find matching parent record to verify declared protocol path '${o}'.`);let g=`${l.contextId}/${r.message.recordId}`,b=r.message.contextId;if(b!==g)throw new oe(ne.ProtocolAuthorizationIncorrectContextId,`Declared contextId '${b}' is not the same as expected: '${g}'.`)})}static verifyType(e,r){let n=Object.keys(r),i=e.descriptor.protocolPath,o=t.getTypeName(i);if(!n.includes(o))throw new oe(ne.ProtocolAuthorizationInvalidType,`record with type ${o} not allowed in protocol`);let s=e.descriptor.protocolPath,a=t.getTypeName(s),d=r[a],{schema:u}=e.descriptor;if(d.schema!==void 0&&d.schema!==u)throw new oe(ne.ProtocolAuthorizationInvalidSchema,`type '${a}' must have schema '${d.schema}',         instead has '${u}'`);let{dataFormat:c}=e.descriptor;if(d.dataFormats!==void 0&&!d.dataFormats.includes(c))throw new oe(ne.ProtocolAuthorizationIncorrectDataFormat,`type '${a}' must have data format in (${d.dataFormats}),         instead has '${c}'`)}static verifyInvokedRole(e,r,n,i,o,s){var a;return Ca(this,void 0,void 0,function*(){let d=(a=r.signaturePayload)===null||a===void 0?void 0:a.protocolRole;if(d===void 0)return;let u=t.getRuleSetAtProtocolPath(d,o);if(u===void 0||!u.$role)throw new oe(ne.ProtocolAuthorizationNotARole,`Protocol path ${d} does not match role record type.`);let c={interface:Ae.Records,method:_e.Write,protocol:n,protocolPath:d,recipient:r.author,isLatestBaseState:!0},l=d.split("/").length-1;if(i===void 0&&l>0)throw new oe(ne.ProtocolAuthorizationMissingContextId,"Could not verify role because contextId is missing.");if(l>0){let g=i.split("/").slice(0,l).join("/"),b=Hn.constructPrefixFilterAsRangeFilter(g);c.contextId=b}let{messages:m}=yield s.query(e,[c]);if(m.length===0)throw new oe(ne.ProtocolAuthorizationMatchingRoleRecordNotFound,`No matching role record found for protocol path ${d}`)})}static getActionsSeekingARuleMatch(e,r,n){return Ca(this,void 0,void 0,function*(){switch(r.message.descriptor.method){case _e.Delete:let i=r,o=i.message.descriptor.recordId,s=yield Fr.fetchInitialRecordsWrite(n,e,o);if(s===void 0)return[];let a=[];return i.message.descriptor.prune?(a.push(hi.CoPrune),r.author===s.author&&a.push(hi.Prune)):(a.push(hi.CoDelete),r.author===s.author&&a.push(hi.Delete)),a;case _e.Query:return[hi.Query];case _e.Read:return[hi.Read];case _e.Subscribe:return[hi.Subscribe];case _e.Write:if(yield r.isInitialWrite())return[hi.Create];{let c=r.message.recordId,l=yield Fr.fetchInitialRecordsWrite(n,e,c);return l===void 0?[]:r.author===l.author?[hi.CoUpdate,hi.Update]:[hi.CoUpdate]}}return[]})}static authorizeAgainstAllowedActions(e,r,n,i,o){var s;return Ca(this,void 0,void 0,function*(){let a=r.message.descriptor.method,d=yield t.getActionsSeekingARuleMatch(e,r,o),u=r.author,c=n.$actions;if(c===void 0)throw new oe(ne.ProtocolAuthorizationActionRulesNotFound,`no action rule defined for Records${a}, ${u} is unauthorized`);let l=(s=r.signaturePayload)===null||s===void 0?void 0:s.protocolRole;for(let m of c){if(!m.can.some(b=>d.includes(b)))continue;if(m.who===dh.Anyone)return;if(u===void 0)continue;if(l!==void 0){if(m.role===l)return;continue}if(m.who===dh.Recipient&&m.of===void 0){let b;if(r.message.descriptor.method===_e.Write?b=r.message:b=i[i.length-1],b.descriptor.recipient===u)return;continue}if(yield t.checkActor(u,m,i))return}throw new oe(ne.ProtocolAuthorizationActionNotAllowed,`Inbound message action Records${a} by author ${r.author} not allowed.`)})}static verifySizeLimit(e,r){let{min:n=0,max:i}=r.$size||{},o=e.message.descriptor.dataSize;if(o<n)throw new oe(ne.ProtocolAuthorizationMinSizeInvalid,`data size ${o} is less than allowed ${n}`);if(i!==void 0&&o>i)throw new oe(ne.ProtocolAuthorizationMaxSizeInvalid,`data size ${o} is more than allowed ${i}`)}static verifyTagsIfNeeded(e,r){if(r.$tags!==void 0){let{tags:n={},protocol:i,protocolPath:o}=e.message.descriptor,s=r.$tags,{$allowUndefinedTags:a,$requiredTags:d}=s,u=aKe(s,["$allowUndefinedTags","$requiredTags"]),c=a||!1,l=d||[],m=new Ide.default.default,p=m.compile({type:"object",properties:u,required:l,additionalProperties:c});if(!p(n)){let b=m.errorsText(p.errors,{dataVar:`${i}/${o}/$tags`});throw new oe(ne.ProtocolAuthorizationTagsInvalidSchema,`tags schema validation error: ${b}`)}}}static verifyAsRoleRecordIfNeeded(e,r,n,i){return Ca(this,void 0,void 0,function*(){if(!n.$role)return;let o=r,s=o.message.descriptor.recipient;if(s===void 0)throw new oe(ne.ProtocolAuthorizationRoleMissingRecipient,"Role records must have a recipient");let a=o.message.descriptor.protocolPath,d={interface:Ae.Records,method:_e.Write,isLatestBaseState:!0,protocol:o.message.descriptor.protocol,protocolPath:a,recipient:s},u=ht.getParentContextFromOfContextId(o.message.contextId);if(u!==""){let p=Hn.constructPrefixFilterAsRangeFilter(u);d.contextId=p}let{messages:c}=yield i.query(e,[d]);if(c.filter(p=>p.recordId!==o.message.recordId).length>0)throw new oe(ne.ProtocolAuthorizationDuplicateRoleRecipient,`DID '${s}' is already recipient of a role record at protocol path '${a} under the parent context ${u}.`)})}static getRuleSetAtProtocolPath(e,r){let n=e.split("/"),i=r.structure,o=0;for(;o<n.length;){let s=n[o],a=i[s];if(a===void 0)return;i=a,o++}return i}static checkActor(e,r,n){return Ca(this,void 0,void 0,function*(){let i=n.find(o=>o.descriptor.protocolPath===r.of);if(i===void 0)return!1;if(r.who===dh.Recipient)return e===i.descriptor.recipient;{let o=(yield Fr.parse(i)).author;return e===o}})}static getTypeName(e){return e.split("/").slice(-1)[0]}};h();var PN=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},ym=class t extends fi{static parse(e){return PN(this,void 0,void 0,function*(){let r;return e.authorization!==void 0&&(r=yield be.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield ht.validateDelegatedGrantReferentialIntegrity(e,r),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r,n;return PN(this,void 0,void 0,function*(){let i=e.recordId,o=tr.getCurrentTimestamp(),s={interface:Ae.Records,method:_e.Delete,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:o,recordId:i,prune:(n=e.prune)!==null&&n!==void 0?n:!1},a=yield be.createAuthorization({descriptor:s,signer:e.signer,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}),d={descriptor:s,authorization:a};return be.validateJsonSchema(d),new t(d)})}constructIndexes(e){let r=this.message,n=Object.assign({},r.descriptor),{protocol:i,protocolPath:o,recipient:s,schema:a,parentId:d,dateCreated:u}=e.descriptor,c=Object.assign({protocol:i,protocolPath:o,recipient:s,schema:a,parentId:d,dateCreated:u,contextId:e.contextId,author:this.author},n);return vn(c),c}authorizeDelegate(e,r){return PN(this,void 0,void 0,function*(){let n=yield vo.parse(this.message.authorization.authorDelegatedGrant);yield Lo.authorizeDelete({recordsDeleteMessage:this.message,recordsWriteToDelete:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})})}};h();h();var Ol=class{};Ol.maxDataSizeAllowedToBeEncoded=3e4;var FA=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},ig=class t{static deleteFromDataStoreIfNeeded(e,r,n,i){return FA(this,void 0,void 0,function*(){if(n.descriptor.method!==_e.Write)return;let o=n;o.descriptor.dataSize<=Ol.maxDataSizeAllowedToBeEncoded||o.descriptor.dataCid!==i.descriptor.dataCid&&(yield e.delete(r,o.recordId,o.descriptor.dataCid))})}static purgeRecordDescendants(e,r,n,i,o){return FA(this,void 0,void 0,function*(){let s={interface:Ae.Records,parentId:r},{messages:a}=yield n.query(e,[s]),d=new Map;for(let u of a){let c;ht.isRecordsWrite(u)?c=u.recordId:c=u.descriptor.recordId,d.has(c)||d.set(c,[]),d.get(c).push(u)}for(let u of d.keys())yield t.purgeRecordDescendants(e,u,n,i,o);for(let u of d.keys())yield t.purgeRecordMessages(e,d.get(u),n,i,o)})}static purgeRecordMessages(e,r,n,i,o){return FA(this,void 0,void 0,function*(){let s=r.filter(u=>u.descriptor.method===_e.Write),a=yield be.getNewestMessage(s);yield i.delete(e,a.recordId,a.descriptor.dataCid);let d=yield Promise.all(r.map(u=>be.getCid(u)));yield o.deleteEventsByCid(e,d),yield Promise.all(d.map(u=>n.delete(e,u)))})}static deleteAllOlderMessagesButKeepInitialWrite(e,r,n,i,o,s){return FA(this,void 0,void 0,function*(){let a=[];for(let d of r){if(yield be.isOlder(d,n)){yield t.deleteFromDataStoreIfNeeded(o,e,d,n);let c=yield be.getCid(d);if(yield i.delete(e,c),yield Fr.isInitialWrite(d)){let m=yield Fr.parse(d),p=!1,g=yield m.constructIndexes(p),b=d;delete b.encodedData,yield i.put(e,b,g)}else{let m=yield be.getCid(d);a.push(m)}}yield s.deleteEventsByCid(e,a)}})}};var kde=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},zA=class t{constructor(e,r,n,i,o){this.didResolver=e,this.messageStore=r,this.dataStore=n,this.eventLog=i,this.eventStream=o}handle({tenant:e,message:r}){return kde(this,void 0,void 0,function*(){let n;try{n=yield ym.parse(r)}catch(p){return Xt(p,400)}try{yield Yn(r.authorization,this.didResolver)}catch(p){return Xt(p,401)}let i={interface:Ae.Records,recordId:r.descriptor.recordId},{messages:o}=yield this.messageStore.query(e,[i]),s=yield be.getNewestMessage(o),a=!1,d;if(s===void 0||(yield be.isNewer(r,s))?(a=!0,d=r):d=s,!a)return{status:{code:409,detail:"Conflict"}};if(s===void 0||s.descriptor.method===_e.Delete)return{status:{code:404,detail:"Not Found"}};try{yield t.authorizeRecordsDelete(e,n,yield Fr.parse(s),this.messageStore)}catch(p){return Xt(p,401)}let u=yield Fr.getInitialWrite(o),c=n.constructIndexes(u),l=yield be.getCid(r);return yield this.messageStore.put(e,r,c),yield this.eventLog.append(e,l,c),this.eventStream!==void 0&&this.eventStream.emit(e,{message:r,initialWrite:u},c),r.descriptor.prune&&(yield ig.purgeRecordDescendants(e,r.descriptor.recordId,this.messageStore,this.dataStore,this.eventLog)),yield ig.deleteAllOlderMessagesButKeepInitialWrite(e,o,d,this.messageStore,this.dataStore,this.eventLog),{status:{code:202,detail:"Accepted"}}})}static authorizeRecordsDelete(e,r,n,i){return kde(this,void 0,void 0,function*(){if(be.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(n.message,i)),r.author!==e)if(n.message.descriptor.protocol!==void 0)yield gc.authorizeDelete(e,r,n,i);else throw new oe(ne.RecordsDeleteAuthorizationFailed,"RecordsDelete message failed authorization")})}};h();h();var ns;(function(t){t[t.Descending=-1]="Descending",t[t.Ascending=1]="Ascending"})(ns||(ns={}));var kE=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},GA=class t{constructor(e,r,n){this.didResolver=e,this.messageStore=r,this.dataStore=n}handle({tenant:e,message:r}){return kE(this,void 0,void 0,function*(){let n;try{n=yield em.parse(r)}catch(s){return Xt(s,400)}let i,o;if(ht.filterIncludesPublishedRecords(n.message.descriptor.filter)&&n.author===void 0){let s=yield this.fetchPublishedRecords(e,n);i=s.messages,o=s.cursor}else{try{yield Yn(r.authorization,this.didResolver),yield t.authorizeRecordsQuery(e,n,this.messageStore)}catch(s){return Xt(s,401)}if(n.author===e){let s=yield this.fetchRecordsAsOwner(e,n);i=s.messages,o=s.cursor}else{let s=yield this.fetchRecordsAsNonOwner(e,n);i=s.messages,o=s.cursor}}for(let s of i)if(!(yield Fr.isInitialWrite(s))){let d=(yield this.messageStore.query(e,[{recordId:s.recordId,isLatestBaseState:!1,method:_e.Write}])).messages[0];delete d.encodedData,s.initialWrite=d}return{status:{code:200,detail:"OK"},entries:i,cursor:o}})}convertDateSort(e){switch(e){case $i.CreatedAscending:return{dateCreated:ns.Ascending};case $i.CreatedDescending:return{dateCreated:ns.Descending};case $i.PublishedAscending:return{datePublished:ns.Ascending};case $i.PublishedDescending:return{datePublished:ns.Descending};default:return{dateCreated:ns.Ascending}}}fetchRecordsAsOwner(e,r){return kE(this,void 0,void 0,function*(){let{dateSort:n,filter:i,pagination:o}=r.message.descriptor,s=Object.assign(Object.assign({},ht.convertFilter(i,n)),{interface:Ae.Records,method:_e.Write,isLatestBaseState:!0}),a=this.convertDateSort(n);return this.messageStore.query(e,[s],a,o)})}fetchRecordsAsNonOwner(e,r){return kE(this,void 0,void 0,function*(){let{dateSort:n,pagination:i,filter:o}=r.message.descriptor,s=[];if(ht.filterIncludesPublishedRecords(o)&&s.push(t.buildPublishedRecordsFilter(r)),ht.filterIncludesUnpublishedRecords(o)){s.push(t.buildUnpublishedRecordsByQueryAuthorFilter(r));let d=r.message.descriptor.filter.recipient;(d===void 0||d===r.author)&&s.push(t.buildUnpublishedRecordsForQueryAuthorFilter(r)),ht.shouldProtocolAuthorize(r.signaturePayload)&&s.push(t.buildUnpublishedProtocolAuthorizedRecordsFilter(r))}let a=this.convertDateSort(n);return this.messageStore.query(e,s,a,i)})}fetchPublishedRecords(e,r){return kE(this,void 0,void 0,function*(){let{dateSort:n,pagination:i}=r.message.descriptor,o=t.buildPublishedRecordsFilter(r),s=this.convertDateSort(n);return this.messageStore.query(e,[o],s,i)})}static buildPublishedRecordsFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return Object.assign(Object.assign({},ht.convertFilter(n,r)),{interface:Ae.Records,method:_e.Write,published:!0,isLatestBaseState:!0})}static buildUnpublishedRecordsForQueryAuthorFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return Object.assign(Object.assign({},ht.convertFilter(n,r)),{interface:Ae.Records,method:_e.Write,recipient:e.author,isLatestBaseState:!0,published:!1})}static buildUnpublishedProtocolAuthorizedRecordsFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return Object.assign(Object.assign({},ht.convertFilter(n,r)),{interface:Ae.Records,method:_e.Write,isLatestBaseState:!0,published:!1})}static buildUnpublishedRecordsByQueryAuthorFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return Object.assign(Object.assign({},ht.convertFilter(n,r)),{author:e.author,interface:Ae.Records,method:_e.Write,isLatestBaseState:!0,published:!1})}static authorizeRecordsQuery(e,r,n){return kE(this,void 0,void 0,function*(){be.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(n)),ht.shouldProtocolAuthorize(r.signaturePayload)&&(yield gc.authorizeQueryOrSubscribe(e,r,n))})}};h();h();var TN=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},og=class t extends fi{static parse(e){return TN(this,void 0,void 0,function*(){let r;return e.authorization!==void 0&&(r=yield be.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield ht.validateDelegatedGrantReferentialIntegrity(e,r),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return TN(this,void 0,void 0,function*(){let{filter:n,signer:i,permissionGrantId:o,protocolRole:s}=e,a=tr.getCurrentTimestamp(),d={interface:Ae.Records,method:_e.Read,filter:ht.normalizeFilter(n),messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:a};vn(d);let u;i!==void 0&&(u=yield be.createAuthorization({descriptor:d,signer:i,permissionGrantId:o,protocolRole:s,delegatedGrant:e.delegatedGrant}));let c={descriptor:d,authorization:u};return be.validateJsonSchema(c),new t(c)})}authorizeDelegate(e,r){return TN(this,void 0,void 0,function*(){let n=yield vo.parse(this.message.authorization.authorDelegatedGrant);yield Lo.authorizeRead({recordsReadMessage:this.message,recordsWriteMessageToBeRead:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})})}};var Rde=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},WA=class t{constructor(e,r,n){this.didResolver=e,this.messageStore=r,this.dataStore=n}handle({tenant:e,message:r}){return Rde(this,void 0,void 0,function*(){let n;try{n=yield og.parse(r)}catch(c){return Xt(c,400)}try{n.author!==void 0&&(yield Yn(r.authorization,this.didResolver))}catch(c){return Xt(c,401)}let i=Object.assign({interface:Ae.Records,isLatestBaseState:!0},ht.convertFilter(r.descriptor.filter)),{messages:o}=yield this.messageStore.query(e,[i]);if(o.length===0)return{status:{code:404,detail:"Not Found"}};if(o.length>1)return Xt(new oe(ne.RecordsReadReturnedMultiple,"Multiple records exist for the RecordsRead filter"),400);let s=o[0];try{yield t.authorizeRecordsRead(e,n,yield Fr.parse(s),this.messageStore)}catch(c){return Xt(c,401)}let a;if(s.encodedData!==void 0){let c=Ye.base64UrlToBytes(s.encodedData);a=mu.fromBytes(c),delete s.encodedData}else{let c=yield this.dataStore.get(e,s.recordId,s.descriptor.dataCid);if(c?.dataStream===void 0)return{status:{code:404,detail:"Not Found"}};a=c.dataStream}let d=Object.assign(Object.assign({},s),{data:a});if(!(yield Fr.isInitialWrite(d))){let l=(yield this.messageStore.query(e,[{recordId:d.recordId,isLatestBaseState:!1,method:_e.Write}])).messages[0];delete l.encodedData,d.initialWrite=l}return{status:{code:200,detail:"OK"},record:d}})}static authorizeRecordsRead(e,r,n,i){return Rde(this,void 0,void 0,function*(){be.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(n.message,i));let{descriptor:o}=n.message;if(r.author!==e){if(o.published===!0)return;if(r.author!==void 0&&r.author===o.recipient)return;if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let s=yield pi.fetchGrant(e,i,r.signaturePayload.permissionGrantId);yield Lo.authorizeRead({recordsReadMessage:r.message,recordsWriteMessageToBeRead:n.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:s,messageStore:i})}else if(o.protocol!==void 0)yield gc.authorizeRead(e,r,n,i);else throw new oe(ne.RecordsReadAuthorizationFailed,"message failed authorization")}})}};h();h();var IN=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},gm=class t extends fi{static parse(e){return IN(this,void 0,void 0,function*(){let r;if(e.authorization!==void 0&&(r=yield be.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield ht.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new oe(ne.RecordsSubscribeFilterMissingRequiredProperties,"Role-authorized subscriptions must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&Ta(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&ad(e.descriptor.filter.schema),tr.validateTimestamp(e.descriptor.messageTimestamp),new t(e)})}static create(e){var r;return IN(this,void 0,void 0,function*(){let n={interface:Ae.Records,method:_e.Subscribe,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:tr.getCurrentTimestamp(),filter:ht.normalizeFilter(e.filter)};vn(n);let i=e.signer,o;i&&(o=yield be.createAuthorization({descriptor:n,signer:i,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));let s={descriptor:n,authorization:o};return be.validateJsonSchema(s),new t(s)})}authorizeDelegate(e){return IN(this,void 0,void 0,function*(){let r=yield vo.parse(this.message.authorization.authorDelegatedGrant);yield Lo.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})})}};var HA=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},VA=class t{constructor(e,r,n){this.didResolver=e,this.messageStore=r,this.eventStream=n}handle({tenant:e,message:r,subscriptionHandler:n}){return HA(this,void 0,void 0,function*(){if(this.eventStream===void 0)return Xt(new oe(ne.RecordsSubscribeEventStreamUnimplemented,"Subscriptions are not supported"),501);let i;try{i=yield gm.parse(r)}catch(u){return Xt(u,400)}let o=[];if(ht.filterIncludesPublishedRecords(i.message.descriptor.filter)&&i.author===void 0)o=[t.buildPublishedRecordsFilter(i)],delete r.authorization;else{try{yield Yn(r.authorization,this.didResolver),yield t.authorizeRecordsSubscribe(e,i,this.messageStore)}catch(u){return Xt(u,401)}i.author===e?o=yield t.filterAsOwner(i):o=yield t.filterAsNonOwner(i)}let s=(u,c,l)=>{e===u&&Hn.matchAnyFilter(l,o)&&n(c)},a=yield be.getCid(r),d=yield this.eventStream.subscribe(e,a,s);return{status:{code:200,detail:"OK"},subscription:d}})}static filterAsOwner(e){return HA(this,void 0,void 0,function*(){let{filter:r}=e.message.descriptor;return[Object.assign(Object.assign({},ht.convertFilter(r)),{interface:Ae.Records,method:[_e.Write,_e.Delete]})]})}static filterAsNonOwner(e){return HA(this,void 0,void 0,function*(){let r=[],{filter:n}=e.message.descriptor;if(ht.filterIncludesPublishedRecords(n)&&r.push(t.buildPublishedRecordsFilter(e)),ht.filterIncludesUnpublishedRecords(n)){r.push(t.buildUnpublishedRecordsBySubscribeAuthorFilter(e));let i=e.message.descriptor.filter.recipient;(i===void 0||i===e.author)&&r.push(t.buildUnpublishedRecordsForSubscribeAuthorFilter(e)),ht.shouldProtocolAuthorize(e.signaturePayload)&&r.push(t.buildUnpublishedProtocolAuthorizedRecordsFilter(e))}return r})}static buildPublishedRecordsFilter(e){return Object.assign(Object.assign({},ht.convertFilter(e.message.descriptor.filter)),{interface:Ae.Records,method:[_e.Write,_e.Delete],published:!0})}static buildUnpublishedRecordsForSubscribeAuthorFilter(e){return Object.assign(Object.assign({},ht.convertFilter(e.message.descriptor.filter)),{interface:Ae.Records,method:[_e.Write,_e.Delete],recipient:e.author,published:!1})}static buildUnpublishedProtocolAuthorizedRecordsFilter(e){return Object.assign(Object.assign({},ht.convertFilter(e.message.descriptor.filter)),{interface:Ae.Records,method:[_e.Write,_e.Delete],published:!1})}static buildUnpublishedRecordsBySubscribeAuthorFilter(e){return Object.assign(Object.assign({},ht.convertFilter(e.message.descriptor.filter)),{author:e.author,interface:Ae.Records,method:[_e.Write,_e.Delete],published:!1})}static authorizeRecordsSubscribe(e,r,n){return HA(this,void 0,void 0,function*(){be.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(n)),ht.shouldProtocolAuthorize(r.signaturePayload)&&(yield gc.authorizeQueryOrSubscribe(e,r,n))})}};h();var qw=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},JA=class t{constructor(e,r,n,i,o){this.didResolver=e,this.messageStore=r,this.dataStore=n,this.eventLog=i,this.eventStream=o}handle({tenant:e,message:r,dataStream:n}){return qw(this,void 0,void 0,function*(){let i;try{i=yield Fr.parse(r),r.descriptor.protocol!==void 0&&(yield gc.validateReferentialIntegrity(e,i,this.messageStore))}catch(p){return Xt(p,400)}try{yield Yn(r.authorization,this.didResolver),yield t.authorizeRecordsWrite(e,i,this.messageStore)}catch(p){return Xt(p,401)}let o={interface:Ae.Records,recordId:r.recordId},{messages:s}=yield this.messageStore.query(e,[o]),a=yield i.isInitialWrite(),d;if(!a)try{d=yield Fr.getInitialWrite(s),Fr.verifyEqualityOfImmutableProperties(d,r)}catch(p){return Xt(p,400)}let u=yield be.getNewestMessage(s),c=!1,l;if(u===void 0||(yield be.isNewer(r,u))?(c=!0,l=r):l=u,!c)return{status:{code:409,detail:"Conflict"}};try{let p=!1,g=r;if(n!==void 0)g=yield this.processMessageWithDataStream(e,r,n),p=!0;else{if(u?.descriptor.method===_e.Delete)throw new oe(ne.RecordsWriteMissingDataStream,"No data stream was provided with the previous message being a delete");if(!a){let S=u;g=yield this.processMessageWithoutDataStream(e,r,S),p=!0}}let b=yield i.constructIndexes(p);yield this.messageStore.put(e,g,b),yield this.eventLog.append(e,yield be.getCid(r),b),this.eventStream!==void 0&&p&&this.eventStream.emit(e,{message:r,initialWrite:d},b)}catch(p){let g=p;if(g.code!==void 0&&(g.code===ne.RecordsWriteMissingEncodedDataInPrevious||g.code===ne.RecordsWriteMissingDataInPrevious||g.code===ne.RecordsWriteMissingDataStream||g.code===ne.RecordsWriteDataCidMismatch||g.code===ne.RecordsWriteDataSizeMismatch||g.code.startsWith("PermissionsProtocolValidate")||g.code.startsWith("SchemaValidator")))return Xt(p,400);throw p}let m={status:{code:202,detail:"Accepted"}};return yield ig.deleteAllOlderMessagesButKeepInitialWrite(e,s,l,this.messageStore,this.dataStore,this.eventLog),yield this.postProcessingForCoreRecordsWrite(e,i),m})}static validateSchemaForCoreRecordsWrite(e,r){e.descriptor.protocol===pi.uri&&pi.validateSchema(e,r)}postProcessingForCoreRecordsWrite(e,r){return qw(this,void 0,void 0,function*(){if(r.message.descriptor.protocol===pi.uri&&r.message.descriptor.protocolPath===pi.revocationPath){let i={permissionGrantId:r.message.descriptor.parentId,dateCreated:{gte:r.message.descriptor.messageTimestamp}},{messages:o}=yield this.messageStore.query(e,[i]),s=[];for(let a of o){let d=yield be.getCid(a);yield this.messageStore.delete(e,d)}this.eventLog.deleteEventsByCid(e,s)}})}cloneAndAddEncodedData(e,r){return qw(this,void 0,void 0,function*(){let n=Object.assign({},e);return n.encodedData=Ye.bytesToBase64Url(r),n})}processMessageWithDataStream(e,r,n){return qw(this,void 0,void 0,function*(){let i=r;if(r.descriptor.dataSize<=Ol.maxDataSizeAllowedToBeEncoded){let o=yield mu.toBytes(n),s=yield Sn.computeDagPbCidFromBytes(o);t.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,s,o.length),t.validateSchemaForCoreRecordsWrite(r,o),i=yield this.cloneAndAddEncodedData(r,o)}else{let[o,s]=mu.duplicateDataStream(n,2);try{let[a,d]=yield Promise.all([Sn.computeDagPbCidFromStream(o),this.dataStore.put(e,r.recordId,r.descriptor.dataCid,s)]);t.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,a,d.dataSize)}catch(a){throw yield this.dataStore.delete(e,r.recordId,r.descriptor.dataCid),a}}return i})}processMessageWithoutDataStream(e,r,n){return qw(this,void 0,void 0,function*(){let i=Object.assign({},r),{dataCid:o,dataSize:s}=r.descriptor;if(t.validateDataIntegrity(o,s,n.descriptor.dataCid,n.descriptor.dataSize),s<=Ol.maxDataSizeAllowedToBeEncoded)if(n.encodedData!==void 0)i.encodedData=n.encodedData;else throw new oe(ne.RecordsWriteMissingEncodedDataInPrevious,"No dataStream was provided and unable to get data from previous message");else if((yield this.dataStore.get(e,n.recordId,r.descriptor.dataCid))===void 0)throw new oe(ne.RecordsWriteMissingDataInPrevious,"No dataStream was provided and unable to get data from previous message");return i})}static validateDataIntegrity(e,r,n,i){if(e!==n)throw new oe(ne.RecordsWriteDataCidMismatch,`actual data CID ${n} does not match dataCid in descriptor: ${e}`);if(r!==i)throw new oe(ne.RecordsWriteDataSizeMismatch,`actual data size ${i} bytes does not match dataSize in descriptor: ${r}`)}static authorizeRecordsWrite(e,r,n){return qw(this,void 0,void 0,function*(){if(r.owner!==void 0&&r.owner!==e)throw new oe(ne.RecordsWriteOwnerAndTenantMismatch,`Owner ${r.owner} must be the same as tenant ${e} when specified.`);if(r.isSignedByAuthorDelegate&&(yield r.authorizeAuthorDelegate(n)),r.isSignedByOwnerDelegate&&(yield r.authorizeOwnerDelegate(n)),r.owner===void 0){if(r.author===e)return;if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let i=yield pi.fetchGrant(e,n,r.signaturePayload.permissionGrantId);yield Lo.authorizeWrite({recordsWriteMessage:r.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:i,messageStore:n})}else if(r.message.descriptor.protocol!==void 0)yield gc.authorizeWrite(e,r,n);else throw new oe(ne.RecordsWriteAuthorizationFailed,"message failed authorization")}})}};h();h();var sg;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(sg||(sg={}));h();var Xn={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};h();var br=class t{constructor({method:e,id:r,path:n,query:i,fragment:o,params:s}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=i,this.fragment=o,this.params=s}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:i,path:o,query:s,fragment:a}=r.groups,d={uri:`did:${n}:${i}`,method:n,id:i};if(o&&(d.path=o),s&&(d.query=s.slice(1)),a&&(d.fragment=a.slice(1)),s){let u={},c=s.slice(1).split("&");for(let l of c){let[m,p]=l.split("=");u[m]=p}d.params=u}return d}};br.METHOD_PATTERN="([a-z0-9]+)";br.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";br.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${br.PCT_ENCODED_PATTERN})`;br.METHOD_ID_PATTERN=`((?:${br.ID_CHAR_PATTERN}*:)*(${br.ID_CHAR_PATTERN}+))`;br.PATH_PATTERN="(/[^#?]*)?";br.QUERY_PATTERN="([?][^#]*)?";br.FRAGMENT_PATTERN="(#.*)?";br.DID_URI_PATTERN=new RegExp(`^did:(?<method>${br.METHOD_PATTERN}):(?<id>${br.METHOD_ID_PATTERN})(?<path>${br.PATH_PATTERN})(?<query>${br.QUERY_PATTERN})(?<fragment>${br.FRAGMENT_PATTERN})$`);h();var ot=class t extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},et;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(et||(et={}));h();h();h();h();h();var bm=Ut(Mde(),1);h();h();function Bde(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function Cde(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function vm(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var RE=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Ode=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},ZA=new TextEncoder,ag=new TextDecoder,de=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!Cde(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return ba.baseDecode(this.data).buffer;case"Base64Url":return Ls.baseDecode(this.data).buffer;case"BufferSource":{if(vm(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Bde(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return RE(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return DR.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return ba.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return ba.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Ls.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Ls.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=ZA.encode(e);return Ls.baseEncode(r)}case"String":{let e=ZA.encode(this.data);return Ls.baseEncode(e)}case"Uint8Array":return Ls.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,i;return RE(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let d=[];try{for(var o=!0,s=Ode(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let c=i;d.push(c)}}catch(c){r={error:c}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return new Blob(d)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Ls.baseDecode(this.data),r=ag.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=ag.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return RE(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return ag.decode(this.data);case"Base64Url":{let e=Ls.baseDecode(this.data);return ag.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return ag.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,i;return RE(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let d="";try{for(var o=!0,s=Ode(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let u=i;typeof u=="string"?d+=u:d+=ag.decode(u,{stream:!0})}}catch(u){r={error:u}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return d+=ag.decode(void 0,{stream:!1}),d}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return DR.baseDecode(this.data);case"Base58Btc":return ba.baseDecode(this.data);case"Base64Url":return Ls.baseDecode(this.data);case"BufferSource":{let e=vm(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return ZA.encode(e)}case"String":return ZA.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return RE(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};h();var mi=class t{static addPrefix(e){var r;let{code:n,data:i,name:o}=e;if(!(o?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(o),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let s=sf.encodingLength(n),a=new Uint8Array(s+i.byteLength);return a.set(i,s),sf.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,i]=sf.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,i]=sf.decode(r),o=t.codeToName.get(n);if(o===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:o}}};mi.codeToName=new Map;mi.nameToCode=new Map;mi.registerCodec({code:237,name:"ed25519-pub"});mi.registerCodec({code:4864,name:"ed25519-priv"});mi.registerCodec({code:236,name:"x25519-pub"});mi.registerCodec({code:4866,name:"x25519-priv"});mi.registerCodec({code:231,name:"secp256k1-pub"});mi.registerCodec({code:4865,name:"secp256k1-priv"});h();function DN(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&DN(t[e])})}h();var Nue=Ut(ZE(),1),gd=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},EP=class{constructor({db:e,location:r="DATASTORE"}={}){this.store=e??new Nue.Level(r)}clear(){return gd(this,void 0,void 0,function*(){yield this.store.clear()})}close(){return gd(this,void 0,void 0,function*(){yield this.store.close()})}delete(e){return gd(this,void 0,void 0,function*(){yield this.store.del(e)})}get(e){return gd(this,void 0,void 0,function*(){try{return yield this.store.get(e)}catch(r){if(r.notFound)return;throw r}})}set(e,r){return gd(this,void 0,void 0,function*(){yield this.store.put(e,r)})}},km=class{constructor(){this.store=new Map}clear(){return gd(this,void 0,void 0,function*(){this.store.clear()})}close(){return gd(this,void 0,void 0,function*(){})}delete(e){return gd(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return gd(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return gd(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return gd(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return gd(this,void 0,void 0,function*(){this.store.set(e,r)})}};h();var XE=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},QE=function(t){return this instanceof QE?(this.v=t,this):new QE(t)},dqe=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(p){return new Promise(function(g,b){o.push([m,p,g,b])>1||a(m,p)})})}function a(m,p){try{d(n[m](p))}catch(g){l(o[0][3],g)}}function d(m){m.value instanceof QE?Promise.resolve(m.value.v).then(u,c):l(o[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function l(m,p){m(p),o.shift(),o.length&&a(o[0][0],o[0][1])}},SP=class t{static asAsyncIterator(e){return dqe(this,arguments,function*(){let n=e.getReader();try{for(;;){let{done:i,value:o}=yield QE(n.read());if(i)break;yield yield QE(o)}}finally{n.releaseLock()}})}static consumeToArrayBuffer({readableStream:e}){return XE(this,void 0,void 0,function*(){let r=t.asAsyncIterator(e);return yield de.asyncIterable(r).toArrayBufferAsync()})}static consumeToBlob({readableStream:e}){return XE(this,void 0,void 0,function*(){let r=t.asAsyncIterator(e);return yield de.asyncIterable(r).toBlobAsync()})}static consumeToBytes({readableStream:e}){return XE(this,void 0,void 0,function*(){let r=t.asAsyncIterator(e);return yield de.asyncIterable(r).toUint8ArrayAsync()})}static consumeToJson({readableStream:e}){return XE(this,void 0,void 0,function*(){let r=t.asAsyncIterator(e);return yield de.asyncIterable(r).toObjectAsync()})}static consumeToText({readableStream:e}){return XE(this,void 0,void 0,function*(){let r=t.asAsyncIterator(e);return yield de.asyncIterable(r).toStringAsync()})}static generateByteStream({streamLength:e,chunkLength:r,fillValue:n}){let i=e??1/0,o;function s(){let a=Math.min(i,r??1/0);i-=a;let d;if(typeof n=="number")d=new Uint8Array(a).fill(n);else if(Array.isArray(n)){d=new Uint8Array(a);let[u,c]=n,l=c-u+1;for(let m=0;m<a;m++)d[m]=Math.floor(Math.random()*l)+u}else d=new Uint8Array(a);o.enqueue(d),i<=0&&o.close()}return new ReadableStream({start(a){o=a,s()},pull(){s()}})}static isReadable({readableStream:e}){if(!t.isReadableStream(e)||e.locked)return!1;try{return e.getReader().releaseLock(),!0}catch{return!1}}static isReadableStream(e){return typeof e=="object"&&e!==null&&"getReader"in e&&typeof e.getReader=="function"}static isStream(e){return t.isReadableStream(e)||t.isWritableStream(e)||t.isTransformStream(e)}static isTransformStream(e){return typeof e=="object"&&e!==null&&"readable"in e&&typeof e.readable=="object"&&"writable"in e&&typeof e.writable=="object"}static isWritableStream(e){return typeof e=="object"&&e!==null&&"getWriter"in e&&typeof e.getWriter=="function"&&"abort"in e&&typeof e.abort=="function"}};h();var lhe=Ut(kU(),1);var zGe=Ut(kU(),1),d6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},_h=class t{static consumeToArrayBuffer({readable:e}){return d6(this,void 0,void 0,function*(){return yield de.asyncIterable(e).toArrayBufferAsync()})}static consumeToBlob({readable:e}){return d6(this,void 0,void 0,function*(){return yield de.asyncIterable(e).toBlobAsync()})}static consumeToBytes({readable:e}){return d6(this,void 0,void 0,function*(){return yield de.asyncIterable(e).toUint8ArrayAsync()})}static consumeToJson({readable:e}){return d6(this,void 0,void 0,function*(){return yield de.asyncIterable(e).toObjectAsync()})}static consumeToText({readable:e}){return d6(this,void 0,void 0,function*(){return yield de.asyncIterable(e).toStringAsync()})}static fromWebReadable({readableStream:e,readableOptions:r}){if(!SP.isReadableStream(e))throw new TypeError("NodeStream.fromWebReadable: 'readableStream' is not a Web ReadableStream.");let n=e.getReader(),i=!1,o=new lhe.Readable(Object.assign(Object.assign({},r),{read:function(){n.read().then(({done:s,value:a})=>{if(s)this.push(null);else if(!this.push(a))return}).catch(s=>{this.destroy(s)})},destroy:function(s,a){function d(){a(s)}if(!i){n.cancel(s).then(d).catch(d);return}d()}}));return n.closed.then(()=>{i=!0}).catch(s=>{i=!0,o.destroy(s)}),o}static isDestroyed({stream:e}){if(!t.isStream(e))throw new TypeError("NodeStream.isDestroyed: 'stream' is not a Node stream.");let r="_writableState"in e?e._writableState:void 0,n=e._readableState,i=r||n;return!!(e.destroyed||i.destroyed)}static isReadable({readable:e}){return t.isReadableStream(e)?e.readable&&typeof e._readableState.ended=="boolean"&&!e._readableState.ended&&typeof e._readableState.endEmitted=="boolean"&&!e._readableState.endEmitted&&!e.destroyed&&!e.isPaused():!1}static isReadableStream(e){return typeof e=="object"&&e!==null&&"pipe"in e&&typeof e.pipe=="function"&&"on"in e&&typeof e.on=="function"&&!("_writableState"in e)&&"_readableState"in e}static isStream(e){return typeof e=="object"&&e!==null&&("_readableState"in e||"_writableState"in e)}static toWebReadable({readable:e}){if(!t.isReadableStream(e))throw new TypeError("NodeStream.toWebReadable: 'readable' is not a Node Readable stream.");if(t.isDestroyed({stream:e})){let r=new ReadableStream;return r.cancel(),r}return new ReadableStream({start(r){e.on("data",n=>{r.enqueue(n)}),e.on("end",()=>{r.close()}),e.on("error",n=>{r.error(n)})},cancel(){e.destroy()}})}};h();h();var GGe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},s1=class{static digest({data:e}){return GGe(this,void 0,void 0,function*(){return ms(e)})}};h();var ei=class{};var WGe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Mm=class extends ei{digest({algorithm:e,data:r}){return WGe(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield s1.digest({data:r})}})}};h();h();h();var phe=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),fhe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),HGe=BigInt(1),RU=BigInt(2),hhe=(t,e)=>(t+e/RU)/e;function VGe(t){let e=phe,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),d=BigInt(88),u=t*t*t%e,c=u*u*t%e,l=Dn(c,r,e)*c%e,m=Dn(l,r,e)*c%e,p=Dn(m,RU,e)*u%e,g=Dn(p,i,e)*p%e,b=Dn(g,o,e)*g%e,S=Dn(b,a,e)*b%e,A=Dn(S,d,e)*S%e,I=Dn(A,a,e)*b%e,P=Dn(I,r,e)*c%e,$=Dn(P,s,e)*g%e,N=Dn($,n,e)*u%e,L=Dn(N,RU,e);if(!DU.eql(DU.sqr(L),t))throw new Error("Cannot find square root");return L}var DU=xb(phe,void 0,void 0,{sqrt:VGe}),$a=CS({a:BigInt(0),b:BigInt(7),Fp:DU,n:fhe,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=fhe,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-HGe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=hhe(o*t,e),d=hhe(-n*t,e),u=Zr(t-a*r-d*i,e),c=Zr(-a*n-d*o,e),l=u>s,m=c>s;if(l&&(u=e-u),m&&(c=e-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:m,k2:c}}}},ms),l3t=BigInt(0);var f3t=$a.ProjectivePoint;h();h();function mhe(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n).sort(),o={};for(let s of i)o[s]=e(n[s]);return o}return n},r=e(t);return JSON.stringify(r)}var JGe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Mg="urn:jwk:";function rt({jwk:t}){return JGe(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);DN(r);let n=mhe(r),i=de.string(n).toUint8Array(),o=yield s1.digest({data:i});return de.uint8Array(o).toBase64Url()})}function Na(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function Bm(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Bg(t){return!(!t||typeof t!="object"||!("kty"in t&&"k"in t)||t.kty!=="oct"||typeof t.k!="string")}function ja(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function Cm(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function a1(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var os=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},YGe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Er=class t{static adjustSignatureToLowS({signature:e}){return os(this,void 0,void 0,function*(){let r=$a.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return os(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:de.uint8Array(e).toBase64Url(),x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return os(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return os(this,void 0,void 0,function*(){return $a.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return os(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:de.uint8Array(n.x).toBase64Url(),y:de.uint8Array(n.y).toBase64Url()};return i.kid=yield rt({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return os(this,void 0,void 0,function*(){return $a.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return os(this,void 0,void 0,function*(){return $a.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return os(this,void 0,void 0,function*(){let e=$a.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield rt({jwk:r}),r})}static getPublicKey({key:e}){var r;return os(this,void 0,void 0,function*(){if(!(Na(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,i=YGe(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield rt({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return os(this,void 0,void 0,function*(){if(!Na(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return de.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return os(this,void 0,void 0,function*(){if(!(Bm(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=de.base64Url(e.x).toUint8Array(),i=de.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return os(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return $a.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return os(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),i=ms(e);return $a.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return os(this,void 0,void 0,function*(){return $a.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return os(this,void 0,void 0,function*(){try{$a.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return os(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e}),o=ms(n);return $a.verify(r,o,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return os(this,void 0,void 0,function*(){e.byteLength===32&&(e=$a.getPublicKey(e));let r=$a.ProjectivePoint.fromHex(e),n=ga(r.x,32),i=ga(r.y,32);return{x:n,y:i}})}};h();var ss=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},ZGe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Br=class t{static adjustSignatureToLowS({signature:e}){return ss(this,void 0,void 0,function*(){let r=zs.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return ss(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:de.uint8Array(e).toBase64Url(),x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return ss(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:de.uint8Array(r.x).toBase64Url(),y:de.uint8Array(r.y).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return ss(this,void 0,void 0,function*(){return zs.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return ss(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",x:de.uint8Array(n.x).toBase64Url(),y:de.uint8Array(n.y).toBase64Url()};return i.kid=yield rt({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return ss(this,void 0,void 0,function*(){return zs.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return ss(this,void 0,void 0,function*(){return zs.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return ss(this,void 0,void 0,function*(){let e=zs.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield rt({jwk:r}),r})}static getPublicKey({key:e}){var r;return ss(this,void 0,void 0,function*(){if(!(Na(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,i=ZGe(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield rt({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return ss(this,void 0,void 0,function*(){if(!Na(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return de.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return ss(this,void 0,void 0,function*(){if(!(Bm(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=de.base64Url(e.x).toUint8Array(),i=de.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return ss(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return zs.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return ss(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),i=ms(e);return zs.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return ss(this,void 0,void 0,function*(){return zs.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return ss(this,void 0,void 0,function*(){try{zs.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return ss(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e}),o=ms(n);return zs.verify(r,o,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return ss(this,void 0,void 0,function*(){e.byteLength===32&&(e=zs.getPublicKey(e));let r=zs.ProjectivePoint.fromHex(e),n=ga(r.x,32),i=ga(r.y,32);return{x:n,y:i}})}};var u6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Om=class extends ei{computePublicKey({key:e}){return u6(this,void 0,void 0,function*(){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Er.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Br.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return u6(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield Er.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield Br.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return u6(this,void 0,void 0,function*(){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Er.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Br.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return u6(this,void 0,void 0,function*(){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield Er.sign({key:e,data:r});case"P-256":return yield Br.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return u6(this,void 0,void 0,function*(){if(!Bm(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield Er.verify({key:e,signature:r,data:n});case"P-256":return yield Br.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};h();h();h();h();h();var XP=BigInt(4294967295),MU=BigInt(32);function yhe(t,e=!1){return e?{h:Number(t&XP),l:Number(t>>MU&XP)}:{h:Number(t>>MU&XP)|0,l:Number(t&XP)|0}}function XGe(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=yhe(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var QGe=(t,e)=>BigInt(t>>>0)<<MU|BigInt(e>>>0),eWe=(t,e,r)=>t>>>r,tWe=(t,e,r)=>t<<32-r|e>>>r,rWe=(t,e,r)=>t>>>r|e<<32-r,nWe=(t,e,r)=>t<<32-r|e>>>r,iWe=(t,e,r)=>t<<64-r|e>>>r-32,oWe=(t,e,r)=>t>>>r-32|e<<64-r,sWe=(t,e)=>e,aWe=(t,e)=>t,cWe=(t,e,r)=>t<<r|e>>>32-r,dWe=(t,e,r)=>e<<r|t>>>32-r,uWe=(t,e,r)=>e<<r-32|t>>>64-r,lWe=(t,e,r)=>t<<r-32|e>>>64-r;function fWe(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var hWe=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),pWe=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,mWe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),yWe=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,gWe=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),bWe=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var vWe={fromBig:yhe,split:XGe,toBig:QGe,shrSH:eWe,shrSL:tWe,rotrSH:rWe,rotrSL:nWe,rotrBH:iWe,rotrBL:oWe,rotr32H:sWe,rotr32L:aWe,rotlSH:cWe,rotlSL:dWe,rotlBH:uWe,rotlBL:lWe,add:fWe,add3L:hWe,add3H:pWe,add4L:mWe,add4H:yWe,add5H:bWe,add5L:gWe},nr=vWe;var[wWe,_We]=nr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),$m=new Uint32Array(80),Nm=new Uint32Array(80),BU=class extends Hh{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:d,Eh:u,El:c,Fh:l,Fl:m,Gh:p,Gl:g,Hh:b,Hl:S}=this;return[e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S]}set(e,r,n,i,o,s,a,d,u,c,l,m,p,g,b,S){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=d|0,this.Eh=u|0,this.El=c|0,this.Fh=l|0,this.Fl=m|0,this.Gh=p|0,this.Gl=g|0,this.Hh=b|0,this.Hl=S|0}process(e,r){for(let P=0;P<16;P++,r+=4)$m[P]=e.getUint32(r),Nm[P]=e.getUint32(r+=4);for(let P=16;P<80;P++){let $=$m[P-15]|0,N=Nm[P-15]|0,L=nr.rotrSH($,N,1)^nr.rotrSH($,N,8)^nr.shrSH($,N,7),F=nr.rotrSL($,N,1)^nr.rotrSL($,N,8)^nr.shrSL($,N,7),U=$m[P-2]|0,G=Nm[P-2]|0,q=nr.rotrSH(U,G,19)^nr.rotrBH(U,G,61)^nr.shrSH(U,G,6),T=nr.rotrSL(U,G,19)^nr.rotrBL(U,G,61)^nr.shrSL(U,G,6),E=nr.add4L(F,T,Nm[P-7],Nm[P-16]),k=nr.add4H(E,L,q,$m[P-7],$m[P-16]);$m[P]=k|0,Nm[P]=E|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:d,Dh:u,Dl:c,Eh:l,El:m,Fh:p,Fl:g,Gh:b,Gl:S,Hh:A,Hl:I}=this;for(let P=0;P<80;P++){let $=nr.rotrSH(l,m,14)^nr.rotrSH(l,m,18)^nr.rotrBH(l,m,41),N=nr.rotrSL(l,m,14)^nr.rotrSL(l,m,18)^nr.rotrBL(l,m,41),L=l&p^~l&b,F=m&g^~m&S,U=nr.add5L(I,N,F,_We[P],Nm[P]),G=nr.add5H(U,A,$,L,wWe[P],$m[P]),q=U|0,T=nr.rotrSH(n,i,28)^nr.rotrBH(n,i,34)^nr.rotrBH(n,i,39),E=nr.rotrSL(n,i,28)^nr.rotrBL(n,i,34)^nr.rotrBL(n,i,39),k=n&o^n&a^o&a,f=i&s^i&d^s&d;A=b|0,I=S|0,b=p|0,S=g|0,p=l|0,g=m|0,{h:l,l:m}=nr.add(u|0,c|0,G|0,q|0),u=a|0,c=d|0,a=o|0,d=s|0,o=n|0,s=i|0;let y=nr.add3L(q,E,f);n=nr.add3H(y,G,T,k),i=y|0}({h:n,l:i}=nr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=nr.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:d}=nr.add(this.Ch|0,this.Cl|0,a|0,d|0),{h:u,l:c}=nr.add(this.Dh|0,this.Dl|0,u|0,c|0),{h:l,l:m}=nr.add(this.Eh|0,this.El|0,l|0,m|0),{h:p,l:g}=nr.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:b,l:S}=nr.add(this.Gh|0,this.Gl|0,b|0,S|0),{h:A,l:I}=nr.add(this.Hh|0,this.Hl|0,A|0,I|0),this.set(n,i,o,s,a,d,u,c,l,m,p,g,b,S,A,I)}roundClean(){$m.fill(0),Nm.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var jm=_b(()=>new BU);h();var Au=BigInt(0),_c=BigInt(1),QP=BigInt(2),xWe=BigInt(8),EWe={zip215:!0};function SWe(t){let e=g2(t);return Oc(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function eT(t){let e=SWe(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:d}=e,u=QP<<BigInt(a*8)-_c,c=r.create,l=e.uvRatio||((x,v)=>{try{return{isValid:!0,value:r.sqrt(x*r.inv(v))}}catch{return{isValid:!1,value:Au}}}),m=e.adjustScalarBytes||(x=>x),p=e.domain||((x,v,D)=>{if(v.length||D)throw new Error("Contexts/pre-hash are not supported");return x}),g=x=>typeof x=="bigint"&&Au<x,b=(x,v)=>g(x)&&g(v)&&x<v,S=x=>x===Au||b(x,u);function A(x,v){if(b(x,v))return x;throw new Error(`Expected valid scalar < ${v}, got ${typeof x} ${x}`)}function I(x){return x===Au?x:A(x,n)}let P=new Map;function $(x){if(!(x instanceof N))throw new Error("ExtendedPoint expected")}class N{constructor(v,D,K,M){if(this.ex=v,this.ey=D,this.ez=K,this.et=M,!S(v))throw new Error("x required");if(!S(D))throw new Error("y required");if(!S(K))throw new Error("z required");if(!S(M))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof N)throw new Error("extended point not allowed");let{x:D,y:K}=v||{};if(!S(D)||!S(K))throw new Error("invalid affine point");return new N(D,K,_c,c(D*K))}static normalizeZ(v){let D=r.invertBatch(v.map(K=>K.ez));return v.map((K,M)=>K.toAffine(D[M])).map(N.fromAffine)}_setWindowSize(v){this._WINDOW_SIZE=v,P.delete(this)}assertValidity(){let{a:v,d:D}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:K,ey:M,ez:j,et:J}=this,Z=c(K*K),V=c(M*M),H=c(j*j),X=c(H*H),ee=c(Z*v),ue=c(H*c(ee+V)),ae=c(X+c(D*c(Z*V)));if(ue!==ae)throw new Error("bad point: equation left != right (1)");let ce=c(K*M),pe=c(j*J);if(ce!==pe)throw new Error("bad point: equation left != right (2)")}equals(v){$(v);let{ex:D,ey:K,ez:M}=this,{ex:j,ey:J,ez:Z}=v,V=c(D*Z),H=c(j*M),X=c(K*Z),ee=c(J*M);return V===H&&X===ee}is0(){return this.equals(N.ZERO)}negate(){return new N(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){let{a:v}=e,{ex:D,ey:K,ez:M}=this,j=c(D*D),J=c(K*K),Z=c(QP*c(M*M)),V=c(v*j),H=D+K,X=c(c(H*H)-j-J),ee=V+J,ue=ee-Z,ae=V-J,ce=c(X*ue),pe=c(ee*ae),Ee=c(X*ae),Ue=c(ue*ee);return new N(ce,pe,Ue,Ee)}add(v){$(v);let{a:D,d:K}=e,{ex:M,ey:j,ez:J,et:Z}=this,{ex:V,ey:H,ez:X,et:ee}=v;if(D===BigInt(-1)){let gt=c((j-M)*(H+V)),Pe=c((j+M)*(H-V)),De=c(Pe-gt);if(De===Au)return this.double();let It=c(J*QP*ee),we=c(Z*QP*X),Se=we+It,Kr=Pe+gt,Fe=we-It,He=c(Se*De),js=c(Kr*Fe),ft=c(Se*Fe),Rt=c(De*Kr);return new N(He,js,Rt,ft)}let ue=c(M*V),ae=c(j*H),ce=c(Z*K*ee),pe=c(J*X),Ee=c((M+j)*(V+H)-ue-ae),Ue=pe-ce,le=pe+ce,ge=c(ae-D*ue),ve=c(Ee*Ue),Ce=c(le*ge),Ie=c(Ee*ge),je=c(Ue*le);return new N(ve,Ce,je,Ie)}subtract(v){return this.add(v.negate())}wNAF(v){return U.wNAFCached(this,P,v,N.normalizeZ)}multiply(v){let{p:D,f:K}=this.wNAF(A(v,n));return N.normalizeZ([D,K])[0]}multiplyUnsafe(v){let D=I(v);return D===Au?F:this.equals(F)||D===_c?this:this.equals(L)?this.wNAF(D).p:U.unsafeLadder(this,D)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return U.unsafeLadder(this,n).is0()}toAffine(v){let{ex:D,ey:K,ez:M}=this,j=this.is0();v==null&&(v=j?xWe:r.inv(M));let J=c(D*v),Z=c(K*v),V=c(M*v);if(j)return{x:Au,y:_c};if(V!==_c)throw new Error("invZ was invalid");return{x:J,y:Z}}clearCofactor(){let{h:v}=e;return v===_c?this:this.multiplyUnsafe(v)}static fromHex(v,D=!1){let{d:K,a:M}=e,j=r.BYTES;v=Rn("pointHex",v,j);let J=v.slice(),Z=v[j-1];J[j-1]=Z&-129;let V=$d(J);V===Au||(D?A(V,u):A(V,r.ORDER));let H=c(V*V),X=c(H-_c),ee=c(K*H-M),{isValid:ue,value:ae}=l(X,ee);if(!ue)throw new Error("Point.fromHex: invalid y coordinate");let ce=(ae&_c)===_c,pe=(Z&128)!==0;if(!D&&ae===Au&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==ce&&(ae=c(-ae)),N.fromAffine({x:ae,y:V})}static fromPrivateKey(v){return T(v).point}toRawBytes(){let{x:v,y:D}=this.toAffine(),K=pf(D,r.BYTES);return K[K.length-1]|=v&_c?128:0,K}toHex(){return ff(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,_c,c(e.Gx*e.Gy)),N.ZERO=new N(Au,_c,_c,Au);let{BASE:L,ZERO:F}=N,U=BS(N,a*8);function G(x){return Zr(x,n)}function q(x){return G($d(x))}function T(x){let v=a;x=Rn("private key",x,v);let D=Rn("hashed private key",o(x),2*v),K=m(D.slice(0,v)),M=D.slice(v,2*v),j=q(K),J=L.multiply(j),Z=J.toRawBytes();return{head:K,prefix:M,scalar:j,point:J,pointBytes:Z}}function E(x){return T(x).pointBytes}function k(x=new Uint8Array,...v){let D=mf(...v);return q(o(p(D,Rn("context",x),!!i)))}function f(x,v,D={}){x=Rn("message",x),i&&(x=i(x));let{prefix:K,scalar:M,pointBytes:j}=T(v),J=k(D.context,K,x),Z=L.multiply(J).toRawBytes(),V=k(D.context,Z,j,x),H=G(J+V*M);I(H);let X=mf(Z,pf(H,r.BYTES));return Rn("result",X,a*2)}let y=EWe;function w(x,v,D,K=y){let{context:M,zip215:j}=K,J=r.BYTES;x=Rn("signature",x,2*J),v=Rn("message",v),i&&(v=i(v));let Z=$d(x.slice(J,2*J)),V,H,X;try{V=N.fromHex(D,j),H=N.fromHex(x.slice(0,J),j),X=L.multiplyUnsafe(Z)}catch{return!1}if(!j&&V.isSmallOrder())return!1;let ee=k(M,H.toRawBytes(),V.toRawBytes(),v);return H.add(V.multiplyUnsafe(ee)).subtract(X).clearCofactor().equals(N.ZERO)}return L._setWindowSize(8),{CURVE:e,getPublicKey:E,sign:f,verify:w,ExtendedPoint:N,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>s(r.BYTES),precompute(x=8,v=N.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}}}}h();var l6=BigInt(0),CU=BigInt(1);function AWe(t){return Oc(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function ghe(t){let e=AWe(t),{P:r}=e,n=P=>Zr(P,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(P=>P),d=e.powPminus2||(P=>Uk(P,r-BigInt(2),r));function u(P,$,N){let L=n(P*($-N));return $=n($-L),N=n(N+L),[$,N]}function c(P){if(typeof P=="bigint"&&l6<=P&&P<r)return P;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let l=(e.a-BigInt(2))/BigInt(4);function m(P,$){let N=c(P),L=c($),F=N,U=CU,G=l6,q=N,T=CU,E=l6,k;for(let y=BigInt(i-1);y>=l6;y--){let w=L>>y&CU;E^=w,k=u(E,U,q),U=k[0],q=k[1],k=u(E,G,T),G=k[0],T=k[1],E=w;let _=U+G,x=n(_*_),v=U-G,D=n(v*v),K=x-D,M=q+T,j=q-T,J=n(j*_),Z=n(M*v),V=J+Z,H=J-Z;q=n(V*V),T=n(F*n(H*H)),U=n(x*D),G=n(K*(x+n(l*K)))}k=u(E,U,q),U=k[0],q=k[1],k=u(E,G,T),G=k[0],T=k[1];let f=d(G);return n(U*f)}function p(P){return pf(n(P),o)}function g(P){let $=Rn("u coordinate",P,o);return s===32&&($[31]&=127),$d($)}function b(P){let $=Rn("scalar",P),N=$.length;if(N!==o&&N!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${N}`);return $d(a($))}function S(P,$){let N=g($),L=b(P),F=m(N,L);if(F===l6)throw new Error("Invalid private or public key received");return p(F)}let A=p(e.Gu);function I(P){return S(P,A)}return{scalarMult:S,scalarMultBase:I,getSharedSecret:(P,$)=>S(P,$),getPublicKey:P=>I(P),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:A}}var f6=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),bhe=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),d5t=BigInt(0),PWe=BigInt(1),OU=BigInt(2),TWe=BigInt(5),vhe=BigInt(10),IWe=BigInt(20),kWe=BigInt(40),whe=BigInt(80);function _he(t){let e=f6,n=t*t%e*t%e,i=Dn(n,OU,e)*n%e,o=Dn(i,PWe,e)*t%e,s=Dn(o,TWe,e)*o%e,a=Dn(s,vhe,e)*s%e,d=Dn(a,IWe,e)*a%e,u=Dn(d,kWe,e)*d%e,c=Dn(u,whe,e)*u%e,l=Dn(c,whe,e)*u%e,m=Dn(l,vhe,e)*s%e;return{pow_p_5_8:Dn(m,OU,e)*t%e,b2:n}}function xhe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function RWe(t,e){let r=f6,n=Zr(e*e*e,r),i=Zr(n*n*e,r),o=_he(t*i).pow_p_5_8,s=Zr(t*n*o,r),a=Zr(e*s*s,r),d=s,u=Zr(s*bhe,r),c=a===t,l=a===Zr(-t,r),m=a===Zr(-t*bhe,r);return c&&(s=d),(l||m)&&(s=u),nF(s,r)&&(s=Zr(-s,r)),{isValid:c||l,value:s}}var wd=xb(f6,void 0,!0),h6={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:wd,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:jm,randomBytes:uf,adjustScalarBytes:xhe,uvRatio:RWe},_d=eT(h6);function Ehe(t,e,r){if(e.length>255)throw new Error("Context is too big");return my(m2("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var u5t=eT({...h6,domain:Ehe}),l5t=eT({...h6,domain:Ehe,prehash:jm}),Cg=ghe({P:f6,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=f6,{pow_p_5_8:r,b2:n}=_he(t);return Zr(Dn(r,BigInt(3),e)*n,e)},adjustScalarBytes:xhe,randomBytes:uf});function She(t){let{y:e}=_d.ExtendedPoint.fromHex(t),r=BigInt(1);return wd.toBytes(wd.create((r+e)*wd.inv(r-e)))}function Ahe(t){let e=h6.hash(t.subarray(0,32));return h6.adjustScalarBytes(e).subarray(0,32)}var DWe=(wd.ORDER+BigInt(3))/BigInt(8),f5t=wd.pow(OU,DWe),h5t=wd.sqrt(wd.neg(wd.ONE)),p5t=(wd.ORDER-BigInt(5))/BigInt(8),m5t=BigInt(486662);var y5t=iF(wd,wd.neg(BigInt(486664)));var g5t=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),b5t=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),v5t=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),w5t=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var _5t=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var xd=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},MWe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},er=class t{static bytesToPrivateKey({privateKeyBytes:e}){return xd(this,void 0,void 0,function*(){let r=_d.getPublicKey(e),n={crv:"Ed25519",d:de.uint8Array(e).toBase64Url(),kty:"OKP",x:de.uint8Array(r).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return xd(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:de.uint8Array(e).toBase64Url()};return r.kid=yield rt({jwk:r}),r})}static computePublicKey({key:e}){return xd(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=_d.getPublicKey(r),i={kty:"OKP",crv:"Ed25519",x:de.uint8Array(n).toBase64Url()};return i.kid=yield rt({jwk:i}),i})}static convertPrivateKeyToX25519({privateKey:e}){return xd(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Ahe(r),i=Cg.getPublicKey(n),o={kty:"OKP",crv:"X25519",d:de.uint8Array(n).toBase64Url(),x:de.uint8Array(i).toBase64Url()};return o.kid=yield rt({jwk:o}),o})}static convertPublicKeyToX25519({publicKey:e}){return xd(this,void 0,void 0,function*(){let r=yield t.publicKeyToBytes({publicKey:e});if(!(yield t.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let i=She(r),o={kty:"OKP",crv:"X25519",x:de.uint8Array(i).toBase64Url()};return o.kid=yield rt({jwk:o}),o})}static generateKey(){return xd(this,void 0,void 0,function*(){let e=_d.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield rt({jwk:r}),r})}static getPublicKey({key:e}){var r;return xd(this,void 0,void 0,function*(){if(!(ja(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,i=MWe(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield rt({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return xd(this,void 0,void 0,function*(){if(!ja(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return de.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return xd(this,void 0,void 0,function*(){if(!Cm(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return de.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return xd(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:e});return _d.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return xd(this,void 0,void 0,function*(){try{_d.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return xd(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e});return _d.verify(r,n,i)})}};var p6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},c1=class extends ei{computePublicKey({key:e}){return p6(this,void 0,void 0,function*(){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield er.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return p6(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield er.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return p6(this,void 0,void 0,function*(){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield er.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return p6(this,void 0,void 0,function*(){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield er.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return p6(this,void 0,void 0,function*(){if(!Cm(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield er.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var xh=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},$U={Ed25519:{implementation:c1,names:["Ed25519"]},secp256k1:{implementation:Om,names:["ES256K","secp256k1"]},secp256r1:{implementation:Om,names:["ES256","secp256r1"]},"SHA-256":{implementation:Mm,names:["SHA-256"]}},Sr=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new km}digest({algorithm:e,data:r}){return xh(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return xh(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return xh(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${Mg}${n.kid}`;return yield this._keyStore.set(i,n),i})}getKeyUri({key:e}){return xh(this,void 0,void 0,function*(){let r=yield rt({jwk:e});return`${Mg}${r}`})}getPublicKey({keyUri:e}){return xh(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return xh(this,void 0,void 0,function*(){if(!a1(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield rt({jwk:n}));let i=yield this.getKeyUri({key:n});return yield this._keyStore.set(i,n),i})}sign({keyUri:e,data:r}){return xh(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:i}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return xh(this,void 0,void 0,function*(){let i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=$U[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let i in $U){let o=$U[i];if(r&&o.names.includes(r))return i;if(n&&o.names.includes(n))return i}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return xh(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var ki={};qr(ki,{checkRequiredProperty:()=>BWe,checkValidProperty:()=>CWe,getJoseSignatureAlgorithmFromPublicKey:()=>OWe,isWebCryptoSupported:()=>$We,randomBytes:()=>NWe,randomUuid:()=>jWe});h();function BWe(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function CWe(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function OWe(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function $We(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function NWe(t){return uf(t)}function jWe(){return vb.randomUUID()}h();h();h();h();var m6=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;h();var Eh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function Phe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var The=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),UWe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!UWe)throw new Error("Non little-endian hardware is not supported");function tT(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rT(t){if(typeof t=="string")t=tT(t);else if(Phe(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var KWe=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function Ihe(t,e){if(e!==void 0&&(typeof e!="object"||!KWe(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Og(t,e){if(!Phe(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function khe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var NU=(t,e)=>(Object.assign(e,t),e);function jU(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),d=n?4:0,u=n?0:4;t.setUint32(e+d,s,n),t.setUint32(e+u,a,n)}h();function y6(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function UU(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function qWe(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function d1(t,...e){if(!qWe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function KU(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rhe(t,e){d1(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}function da(){if(m6&&typeof m6.subtle=="object"&&m6.subtle!=null)return m6.subtle;throw new Error("crypto.subtle must be defined")}h();h();var g6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},LWe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},nT=96,Dhe=[128,192,256],iT=[96,104,112,120,128],Ed=class{static bytesToPrivateKey({privateKeyBytes:e}){return g6(this,void 0,void 0,function*(){let r={k:de.uint8Array(e).toBase64Url(),kty:"oct"};return r.kid=yield rt({jwk:r}),r})}static decrypt({key:e,data:r,iv:n,additionalData:i,tagLength:o}){return g6(this,void 0,void 0,function*(){if(n.byteLength!==nT/8)throw new TypeError(`The initialization vector must be ${nT} bits in length`);if(o&&!iT.includes(o))throw new RangeError(`The tag length is invalid: Must be ${iT.join(", ")} bits`);let s=da(),a=yield s.importKey("jwk",e,{name:"AES-GCM"},!0,["decrypt"]),d=Object.assign(Object.assign({name:"AES-GCM",iv:n},o&&{tagLength:o}),i&&{additionalData:i}),u=yield s.decrypt(d,a,r);return new Uint8Array(u)})}static encrypt({data:e,iv:r,key:n,additionalData:i,tagLength:o}){return g6(this,void 0,void 0,function*(){if(r.byteLength!==nT/8)throw new TypeError(`The initialization vector must be ${nT} bits in length`);if(o&&!iT.includes(o))throw new RangeError(`The tag length is invalid: Must be ${iT.join(", ")} bits`);let s=da(),a=yield s.importKey("jwk",n,{name:"AES-GCM"},!0,["encrypt"]),d=Object.assign(Object.assign({name:"AES-GCM",iv:r},o&&{tagLength:o}),i&&{additionalData:i}),u=yield s.encrypt(d,a,e);return new Uint8Array(u)})}static generateKey({length:e}){return g6(this,void 0,void 0,function*(){if(!Dhe.includes(e))throw new RangeError(`The key length is invalid: Must be ${Dhe.join(", ")} bits`);let r=da(),n=yield r.generateKey({name:"AES-GCM",length:e},!0,["encrypt"]),i=yield r.exportKey("jwk",n),{ext:o,key_ops:s}=i,a=LWe(i,["ext","key_ops"]);return a.kid=yield rt({jwk:a}),a})}static privateKeyToBytes({privateKey:e}){return g6(this,void 0,void 0,function*(){if(!Bg(e))throw new Error("AesGcm: The provided key is not a valid oct private key.");return de.base64Url(e.k).toUint8Array()})}};var qU=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},oT=class extends ei{decrypt(e){return qU(this,void 0,void 0,function*(){return Ed.decrypt(e)})}encrypt(e){return qU(this,void 0,void 0,function*(){return Ed.encrypt(e)})}generateKey({algorithm:e}){return qU(this,void 0,void 0,function*(){let r={A128GCM:128,A192GCM:192,A256GCM:256}[e],n=yield Ed.generateKey({length:r});return n.alg=e,n})}};h();h();h();h();h();h();var Um=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},FWe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Gl=class t{static bytesToPrivateKey({privateKeyBytes:e}){return Um(this,void 0,void 0,function*(){let r=Cg.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:de.uint8Array(e).toBase64Url(),x:de.uint8Array(r).toBase64Url()};return n.kid=yield rt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Um(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:de.uint8Array(e).toBase64Url()};return r.kid=yield rt({jwk:r}),r})}static computePublicKey({key:e}){return Um(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Cg.getPublicKey(r),i={kty:"OKP",crv:"X25519",x:de.uint8Array(n).toBase64Url()};return i.kid=yield rt({jwk:i}),i})}static generateKey(){return Um(this,void 0,void 0,function*(){let e=Cg.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield rt({jwk:r}),r})}static getPublicKey({key:e}){var r;return Um(this,void 0,void 0,function*(){if(!(ja(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,i=FWe(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield rt({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return Um(this,void 0,void 0,function*(){if(!ja(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return de.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Um(this,void 0,void 0,function*(){if(!Cm(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return de.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Um(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return Cg.getSharedSecret(n,i)})}};h();h();h();var as=(t,e)=>t[e++]&255|(t[e++]&255)<<8,LU=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=rT(e),Og(e,32);let r=as(e,0),n=as(e,2),i=as(e,4),o=as(e,6),s=as(e,8),a=as(e,10),d=as(e,12),u=as(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|d<<5)&8065,this.r[8]=(d>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let c=0;c<8;c++)this.pad[c]=as(e,16+2*c)}process(e,r,n=!1){let i=n?0:2048,{h:o,r:s}=this,a=s[0],d=s[1],u=s[2],c=s[3],l=s[4],m=s[5],p=s[6],g=s[7],b=s[8],S=s[9],A=as(e,r+0),I=as(e,r+2),P=as(e,r+4),$=as(e,r+6),N=as(e,r+8),L=as(e,r+10),F=as(e,r+12),U=as(e,r+14),G=o[0]+(A&8191),q=o[1]+((A>>>13|I<<3)&8191),T=o[2]+((I>>>10|P<<6)&8191),E=o[3]+((P>>>7|$<<9)&8191),k=o[4]+(($>>>4|N<<12)&8191),f=o[5]+(N>>>1&8191),y=o[6]+((N>>>14|L<<2)&8191),w=o[7]+((L>>>11|F<<5)&8191),_=o[8]+((F>>>8|U<<8)&8191),x=o[9]+(U>>>5|i),v=0,D=v+G*a+q*(5*S)+T*(5*b)+E*(5*g)+k*(5*p);v=D>>>13,D&=8191,D+=f*(5*m)+y*(5*l)+w*(5*c)+_*(5*u)+x*(5*d),v+=D>>>13,D&=8191;let K=v+G*d+q*a+T*(5*S)+E*(5*b)+k*(5*g);v=K>>>13,K&=8191,K+=f*(5*p)+y*(5*m)+w*(5*l)+_*(5*c)+x*(5*u),v+=K>>>13,K&=8191;let M=v+G*u+q*d+T*a+E*(5*S)+k*(5*b);v=M>>>13,M&=8191,M+=f*(5*g)+y*(5*p)+w*(5*m)+_*(5*l)+x*(5*c),v+=M>>>13,M&=8191;let j=v+G*c+q*u+T*d+E*a+k*(5*S);v=j>>>13,j&=8191,j+=f*(5*b)+y*(5*g)+w*(5*p)+_*(5*m)+x*(5*l),v+=j>>>13,j&=8191;let J=v+G*l+q*c+T*u+E*d+k*a;v=J>>>13,J&=8191,J+=f*(5*S)+y*(5*b)+w*(5*g)+_*(5*p)+x*(5*m),v+=J>>>13,J&=8191;let Z=v+G*m+q*l+T*c+E*u+k*d;v=Z>>>13,Z&=8191,Z+=f*a+y*(5*S)+w*(5*b)+_*(5*g)+x*(5*p),v+=Z>>>13,Z&=8191;let V=v+G*p+q*m+T*l+E*c+k*u;v=V>>>13,V&=8191,V+=f*d+y*a+w*(5*S)+_*(5*b)+x*(5*g),v+=V>>>13,V&=8191;let H=v+G*g+q*p+T*m+E*l+k*c;v=H>>>13,H&=8191,H+=f*u+y*d+w*a+_*(5*S)+x*(5*b),v+=H>>>13,H&=8191;let X=v+G*b+q*g+T*p+E*m+k*l;v=X>>>13,X&=8191,X+=f*c+y*u+w*d+_*a+x*(5*S),v+=X>>>13,X&=8191;let ee=v+G*S+q*b+T*g+E*p+k*m;v=ee>>>13,ee&=8191,ee+=f*l+y*c+w*u+_*d+x*a,v+=ee>>>13,ee&=8191,v=(v<<2)+v|0,v=v+D|0,D=v&8191,v=v>>>13,K+=v,o[0]=D,o[1]=K,o[2]=M,o[3]=j,o[4]=J,o[5]=Z,o[6]=V,o[7]=H,o[8]=X,o[9]=ee}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let o=(i^1)-1;for(let a=0;a<10;a++)n[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535}update(e){KU(this);let{buffer:r,blockLen:n}=this;e=rT(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){for(;n<=i-o;o+=n)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){KU(this),Rhe(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=n[s]>>>0,e[o++]=n[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function zWe(t){let e=(n,i)=>t(i).update(rT(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var Mhe=zWe(t=>new LU(t));h();var GWe=tT("expand 16-byte k"),WWe=tT("expand 32-byte k"),HWe=Eh(GWe),VWe=Eh(WWe);function Xe(t,e){return t<<e|t>>>32-e}function FU(t){return t.byteOffset%4===0}var sT=64,JWe=16,Che=2**32-1,Bhe=new Uint32Array;function YWe(t,e,r,n,i,o,s,a){let d=i.length,u=new Uint8Array(sT),c=Eh(u),l=FU(i)&&FU(o),m=l?Eh(i):Bhe,p=l?Eh(o):Bhe;for(let g=0;g<d;s++){if(t(e,r,n,c,s,a),s>=Che)throw new Error("arx: counter overflow");let b=Math.min(sT,d-g);if(l&&b===sT){let S=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let A=0,I;A<JWe;A++)I=S+A,p[I]=m[I]^c[A];g+=sT;continue}for(let S=0,A;S<b;S++)A=g+S,o[A]=i[A]^u[S];g+=b}}function zU(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:s}=Ihe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return y6(i),y6(s),UU(o),UU(r),(a,d,u,c,l=0)=>{d1(a),d1(d),d1(u);let m=u.length;if(c||(c=new Uint8Array(m)),d1(c),y6(l),l<0||l>=Che)throw new Error("arx: counter overflow");if(c.length<m)throw new Error(`arx: output (${c.length}) is shorter than data (${m})`);let p=[],g=a.length,b,S;if(g===32)b=a.slice(),p.push(b),S=VWe;else if(g===16&&r)b=new Uint8Array(32),b.set(a),b.set(a,16),S=HWe,p.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);FU(d)||(d=d.slice(),p.push(d));let A=Eh(b);if(n){if(d.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(S,A,Eh(d.subarray(0,16)),A),d=d.subarray(16)}let I=16-i;if(I!==d.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){let $=new Uint8Array(12);$.set(d,o?0:12-d.length),d=$,p.push(d)}let P=Eh(d);for(YWe(t,S,A,P,u,c,l,s);p.length>0;)p.pop().fill(0);return c}}function Nhe(t,e,r,n,i,o=20){let s=t[0],a=t[1],d=t[2],u=t[3],c=e[0],l=e[1],m=e[2],p=e[3],g=e[4],b=e[5],S=e[6],A=e[7],I=i,P=r[0],$=r[1],N=r[2],L=s,F=a,U=d,G=u,q=c,T=l,E=m,k=p,f=g,y=b,w=S,_=A,x=I,v=P,D=$,K=N;for(let j=0;j<o;j+=2)L=L+q|0,x=Xe(x^L,16),f=f+x|0,q=Xe(q^f,12),L=L+q|0,x=Xe(x^L,8),f=f+x|0,q=Xe(q^f,7),F=F+T|0,v=Xe(v^F,16),y=y+v|0,T=Xe(T^y,12),F=F+T|0,v=Xe(v^F,8),y=y+v|0,T=Xe(T^y,7),U=U+E|0,D=Xe(D^U,16),w=w+D|0,E=Xe(E^w,12),U=U+E|0,D=Xe(D^U,8),w=w+D|0,E=Xe(E^w,7),G=G+k|0,K=Xe(K^G,16),_=_+K|0,k=Xe(k^_,12),G=G+k|0,K=Xe(K^G,8),_=_+K|0,k=Xe(k^_,7),L=L+T|0,K=Xe(K^L,16),w=w+K|0,T=Xe(T^w,12),L=L+T|0,K=Xe(K^L,8),w=w+K|0,T=Xe(T^w,7),F=F+E|0,x=Xe(x^F,16),_=_+x|0,E=Xe(E^_,12),F=F+E|0,x=Xe(x^F,8),_=_+x|0,E=Xe(E^_,7),U=U+k|0,v=Xe(v^U,16),f=f+v|0,k=Xe(k^f,12),U=U+k|0,v=Xe(v^U,8),f=f+v|0,k=Xe(k^f,7),G=G+q|0,D=Xe(D^G,16),y=y+D|0,q=Xe(q^y,12),G=G+q|0,D=Xe(D^G,8),y=y+D|0,q=Xe(q^y,7);let M=0;n[M++]=s+L|0,n[M++]=a+F|0,n[M++]=d+U|0,n[M++]=u+G|0,n[M++]=c+q|0,n[M++]=l+T|0,n[M++]=m+E|0,n[M++]=p+k|0,n[M++]=g+f|0,n[M++]=b+y|0,n[M++]=S+w|0,n[M++]=A+_|0,n[M++]=I+x|0,n[M++]=P+v|0,n[M++]=$+D|0,n[M++]=N+K|0}function ZWe(t,e,r,n){let i=t[0],o=t[1],s=t[2],a=t[3],d=e[0],u=e[1],c=e[2],l=e[3],m=e[4],p=e[5],g=e[6],b=e[7],S=r[0],A=r[1],I=r[2],P=r[3];for(let N=0;N<20;N+=2)i=i+d|0,S=Xe(S^i,16),m=m+S|0,d=Xe(d^m,12),i=i+d|0,S=Xe(S^i,8),m=m+S|0,d=Xe(d^m,7),o=o+u|0,A=Xe(A^o,16),p=p+A|0,u=Xe(u^p,12),o=o+u|0,A=Xe(A^o,8),p=p+A|0,u=Xe(u^p,7),s=s+c|0,I=Xe(I^s,16),g=g+I|0,c=Xe(c^g,12),s=s+c|0,I=Xe(I^s,8),g=g+I|0,c=Xe(c^g,7),a=a+l|0,P=Xe(P^a,16),b=b+P|0,l=Xe(l^b,12),a=a+l|0,P=Xe(P^a,8),b=b+P|0,l=Xe(l^b,7),i=i+u|0,P=Xe(P^i,16),g=g+P|0,u=Xe(u^g,12),i=i+u|0,P=Xe(P^i,8),g=g+P|0,u=Xe(u^g,7),o=o+c|0,S=Xe(S^o,16),b=b+S|0,c=Xe(c^b,12),o=o+c|0,S=Xe(S^o,8),b=b+S|0,c=Xe(c^b,7),s=s+l|0,A=Xe(A^s,16),m=m+A|0,l=Xe(l^m,12),s=s+l|0,A=Xe(A^s,8),m=m+A|0,l=Xe(l^m,7),a=a+d|0,I=Xe(I^a,16),p=p+I|0,d=Xe(d^p,12),a=a+d|0,I=Xe(I^a,8),p=p+I|0,d=Xe(d^p,7);let $=0;n[$++]=i,n[$++]=o,n[$++]=s,n[$++]=a,n[$++]=S,n[$++]=A,n[$++]=I,n[$++]=P}var XWe=zU(Nhe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),jhe=zU(Nhe,{counterRight:!1,counterLength:8,extendNonceFn:ZWe,allowShortKeys:!1});var QWe=new Uint8Array(16),Ohe=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(QWe.subarray(r))},eHe=new Uint8Array(32);function $he(t,e,r,n,i){let o=t(e,r,eHe),s=Mhe.create(o);i&&Ohe(s,i),Ohe(s,n);let a=new Uint8Array(16),d=The(a);jU(d,0,BigInt(i?i.length:0),!0),jU(d,8,BigInt(n.length),!0),s.update(a);let u=s.digest();return o.fill(0),u}var Uhe=t=>(e,r,n)=>(Og(e,32),Og(r),{encrypt:(o,s)=>{let a=o.length,d=a+16;s?Og(s,d):s=new Uint8Array(d),t(e,r,o,s,1);let u=$he(t,e,r,s.subarray(0,-16),n);return s.set(u,a),s},decrypt:(o,s)=>{let a=o.length,d=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");s?Og(s,d):s=new Uint8Array(d);let u=o.subarray(0,-16),c=o.subarray(-16),l=$he(t,e,r,u,n);if(!khe(c,l))throw new Error("invalid tag");return t(e,r,u,s,1),s}}),G8t=NU({blockSize:64,nonceLength:12,tagLength:16},Uhe(XWe)),tHe=NU({blockSize:64,nonceLength:24,tagLength:16},Uhe(jhe));h();h();function xc(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function WU({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(GU))!==null&&r!==void 0?r:[]),Object.keys(sg).forEach(i=>{var o,s;n.push(...(s=(o=t[i])===null||o===void 0?void 0:o.filter(GU))!==null&&s!==void 0?s:[])}),n}function Khe({didDocument:t}){let r=WU({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function qhe({didDocument:t,methodId:e}){let r=[];return Object.keys(sg).forEach(n=>{if(Array.isArray(t[n])){let i=t[n],o=xc(e);i.some(a=>{let d=xc(a)===o,u=GU(a)&&xc(a.id)===o;return d||u})&&r.push(n)}}),r}function GU(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function HU({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=mi.addPrefix({code:e,data:t,name:r}),i=de.uint8Array(n).toBase58Btc();return de.base58Btc(i).toMultibase()}function VU({multibaseKeyId:t}){try{let e=de.multibase(t).toBase58Btc(),r=de.base58Btc(e).toUint8Array(),{code:n,data:i,name:o}=mi.removePrefix({prefixedData:r});return{keyBytes:i,multicodecCode:n,multicodecName:o}}catch{throw new ot(et.InvalidDid,`Invalid multibase identifier: ${t}`)}}var b6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Ua=class t{constructor({uri:e,document:r,metadata:n,keyManager:i}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=i}export(){return b6(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.exportKey({keyUri:i});r.push(Object.assign({},o))}e.privateKeys=r}return e})}getSigner(e){return b6(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(d=>{var u,c;return xc(d.id)===((u=xc(e?.methodId))!==null&&u!==void 0?u:xc((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new ot(et.InternalError,"A verification method intended for signing could not be determined from the DID Document");let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.getPublicKey({keyUri:i}),s=this.keyManager;return{algorithm:ki.getJoseSignatureAlgorithmFromPublicKey(o),keyId:n.id,sign(d){return b6(this,arguments,void 0,function*({data:u}){return yield s.sign({data:u,keyUri:i})})},verify(d){return b6(this,arguments,void 0,function*({data:u,signature:c}){return yield s.verify({data:u,key:o,signature:c})})}}})}static import(e){return b6(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){var i;let o=WU({didDocument:r.document});if(o.length===0)throw new ot(et.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(i=r.privateKeys)!==null&&i!==void 0?i:[])yield n.importKey({key:a});for(let a of o){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let d=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:d})}return new t({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};h();h();h();h();h();var JU="0123456789abcdef",Fhe=[],Lhe=[];for(let t=0;t<256;t++)Fhe[t]=JU[t>>4&15]+JU[t&15],t<16&&(t<10?Lhe[48+t]=t:Lhe[87+t]=t);var YU=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=Fhe[t[n++]];return r};var zhe=(t,e=0)=>{let r=t.length||0;if(!e){let s=r;for(;s--;)e+=t[s].length}let n=new Uint8Array(e),i=e,o=r;for(;o--;)i-=t[o].length,n.set(t[o],i);return n};h();var Ghe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nHe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(v6=0;v6<Ghe.length;v6++)nHe[Ghe.charCodeAt(v6)]=v6;var v6;var iHe=new TextDecoder,ZU=(t,e)=>e?new TextDecoder(e).decode(t):iHe.decode(t),oHe=new TextEncoder,Sd=t=>oHe.encode(t);var Whe=typeof window<"u"?window:self,Hhe=Whe.crypto||Whe.msCrypto||{},Y4t=Hhe.subtle||Hhe.webkitSubtle;h();function u1(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function aT(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Xr(t,e,r){let n=[],i=null;return Xr._encode(n,t),i=zhe(n),Xr.bytes=i.length,ArrayBuffer.isView(e)?(e.set(i,r),e):i}Xr.bytes=-1;Xr._floatConversionDetected=!1;Xr._encode=function(t,e){if(e!=null)switch(aT(e)){case"object":Xr.dict(t,e);break;case"map":Xr.dictMap(t,e);break;case"array":Xr.list(t,e);break;case"set":Xr.listSet(t,e);break;case"string":Xr.string(t,e);break;case"number":Xr.number(t,e);break;case"boolean":Xr.number(t,e);break;case"arraybufferview":Xr.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Xr.buffer(t,new Uint8Array(e));break}};var cT=new Uint8Array([101]),Vhe=new Uint8Array([100]),Jhe=new Uint8Array([108]);Xr.buffer=function(t,e){t.push(Sd(e.length+":"),e)};Xr.string=function(t,e){t.push(Sd(Sd(e).byteLength+":"+e))};Xr.number=function(t,e){if(Number.isInteger(e))return t.push(Sd("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,i=e%r<<0,o=n*r+i;t.push(Sd("i"+o+"e")),o!==e&&!Xr._floatConversionDetected&&(Xr._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+o+'"'),console.trace())};Xr.dict=function(t,e){t.push(Vhe);let r=0,n,i=Object.keys(e).sort(),o=i.length;for(;r<o;r++)n=i[r],e[n]!=null&&(Xr.string(t,n),Xr._encode(t,e[n]));t.push(cT)};Xr.dictMap=function(t,e){t.push(Vhe);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Xr._encode(t,n):Xr.string(t,String(n)),Xr._encode(t,e.get(n)));t.push(cT)};Xr.list=function(t,e){let r=0,n=e.length;for(t.push(Jhe);r<n;r++)e[r]!=null&&Xr._encode(t,e[r]);t.push(cT)};Xr.listSet=function(t,e){t.push(Jhe);for(let r of e)r!=null&&Xr._encode(t,r);t.push(cT)};var Yhe=Xr;h();var sHe=105,aHe=58,cHe=100,dHe=108,XU=101;function Zhe(t,e,r){let n=0,i=1;for(let o=e;o<r;o++){let s=t[o];if(s<58&&s>=48){n=n*10+(s-48);continue}if(!(o===e&&s===43)){if(o===e&&s===45){i=-1;continue}if(s===46)break;throw new Error("not a number: buffer["+o+"] = "+s)}}return n*i}function Tt(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),Tt.position=0,Tt.encoding=n||null,Tt.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Sd(t),Tt.bytes=Tt.data.length,Tt.next())}Tt.bytes=0;Tt.position=0;Tt.data=null;Tt.encoding=null;Tt.next=function(){switch(Tt.data[Tt.position]){case cHe:return Tt.dictionary();case dHe:return Tt.list();case sHe:return Tt.integer();default:return Tt.buffer()}};Tt.find=function(t){let e=Tt.position,r=Tt.data.length,n=Tt.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};Tt.dictionary=function(){Tt.position++;let t={};for(;Tt.data[Tt.position]!==XU;){let e=Tt.buffer(),r=ZU(e);r.includes("\uFFFD")&&(r=YU(e)),t[r]=Tt.next()}return Tt.position++,t};Tt.list=function(){Tt.position++;let t=[];for(;Tt.data[Tt.position]!==XU;)t.push(Tt.next());return Tt.position++,t};Tt.integer=function(){let t=Tt.find(XU),e=Zhe(Tt.data,Tt.position+1,t);return Tt.position+=t+1-Tt.position,e};Tt.buffer=function(){let t=Tt.find(aHe),e=Zhe(Tt.data,Tt.position,t),r=++t+e;return Tt.position=r,Tt.encoding?ZU(Tt.data.slice(t,r)):Tt.data.slice(t,r)};var Xhe=Tt;h();function uHe(t){let e=2;for(let r of t)e+=dT(r);return e}function lHe(t){let e=2;for(let[r,n]of t){let i=Sd(r).byteLength;e+=u1(i)+1+i,e+=dT(n)}return e}function fHe(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let i=Sd(r[n]).byteLength;e+=u1(i)+1+i,e+=dT(t[r[n]])}return e}function hHe(t){let e=Sd(t).byteLength;return u1(e)+1+e}function pHe(t){let e=t.byteLength-t.byteOffset;return u1(e)+1+e}function dT(t){if(t==null)return 0;let r=aT(t);switch(r){case"arraybufferview":return pHe(t);case"string":return hHe(t);case"array":case"set":return uHe(t);case"number":return 1+u1(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return fHe(t);case"map":return lHe(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var QU=dT;var mHe=QU,l1={encode:Yhe,decode:Xhe,byteLength:QU,encodingLength:mHe};h();h();var yHe=/^(\d{1,3}\.){3,3}\d{1,3}$/;var gHe=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var Pu={name:"v4",size:4,isFormat:t=>yHe.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,i=0;for(let o=0;o<n;){let s=t.charCodeAt(o++);s===46?(e[r++]=i,i=0):i=i*10+(s-48)}return e[r]=i,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Sh={name:"v6",size:16,isFormat:t=>t.length>0&&gHe.test(t),encode(t,e,r){r=~~r;let n=r+16,i=-1,o=0,s=0,a=!0,d=!1;e=e||new Uint8Array(r+16);for(let u=0;u<t.length;u++){let c=t.charCodeAt(u);c===58?(a?i!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(i=r):(d===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2),o=0,s=0),a=!0,d=!1):c===46?(r<n&&(e[r]=s),r++,s=0,o=0,a=!1,d=!0):(a=!1,c>=97?c-=87:c>=65?c-=55:(c-=48,s=s*10+c),o=(o<<4)+c)}if(a===!1)d===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2);else if(i===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(i!==-1){r+=2;for(let u=Math.min(r-1,n-1);u>=i+2;u--)e[u]=e[u-2];e[i]=0,e[i+1]=0,i=r}if(i!==r&&i!==-1)for(r>n-2&&(r=n-2);n>i;)e[--n]=r<n&&r>i?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function Qhe(t){if(Pu.isFormat(t))return Pu.size;if(Sh.isFormat(t))return Sh.size;throw Error(`Invalid ip address: ${t}`)}function epe(t){return Qhe(t)===Pu.size?1:2}function tpe(t,e,r){r=~~r;let n=Qhe(t);return typeof e=="function"&&(e=e(r+n)),n===Pu.size?Pu.encode(t,e,r):Sh.encode(t,e,r)}function rpe(t,e,r){if(e=~~e,r=r||t.length-e,r===Pu.size)return Pu.decode(t,e,r);if(r===Sh.size)return Sh.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${Pu.size} for v4 or ${Sh.size} for v6.`)}h();function w6(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function f1(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}h();function npe(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}h();function ipe(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}h();function eK(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function tK(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}h();function ope(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function rK(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}h();h();function nK(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i<=127)e+=1;else if(i<=2047)e+=2;else if((i&63488)!==55296)e+=3;else{let o=n+1;o===r||i>=56320||(t.charCodeAt(o)&64512)!==56320?e+=3:(n=o,e+=4)}}return e}function h1(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(nK(t)+r));let i=r;for(let o=0;o<n;o+=1){let s=t.charCodeAt(o);if(s<=127)e[i++]=s;else if(s<=2047)e[i++]=192|(s&1984)>>6,e[i++]=128|s&63;else if((s&63488)!==55296)e[i++]=224|(s&61440)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63;else{let a=o+1;if(a===n||s>=56320)e[i++]=239,e[i++]=191,e[i++]=189;else{let d=t.charCodeAt(a);(d&64512)!==56320?(e[i++]=239,e[i++]=191,e[i++]=189):(o=a,s=65536|(s&1023)<<10|d&1023,e[i++]=240|(s&1835008)>>18,e[i++]=128|(s&258048)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63)}}}return h1.bytes=i-r,e}h1.bytes=0;function p1(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let i=e;i<r;){let o=t[i++],s;if(o<=128)s=o;else if(o>191&&o<224)s=(o&31)<<6|t[i++]&63;else if(o>239&&o<365){s=((o&7)<<18|(t[i++]&63)<<12|(t[i++]&63)<<6|t[i++]&63)-65536;let a=55296|s>>10&1023;n+=String.fromCharCode(a),s=56320|s&1023}else s=(o&15)<<12|(t[i++]&63)<<6|t[i++]&63;n+=String.fromCharCode(s)}return p1.bytes=r-e,n}p1.bytes=0;var Km=t=>t instanceof Uint8Array;function Ah(t){return typeof t=="string"?nK(t):t.byteLength}function uT(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):h1(t)}function lT(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return h1(e,t,r),h1.bytes}var _6={},spe=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let i=n.toString(16),o=i.toUpperCase(),s=t<<4|n,a=`${e}${i}`;spe[s]=a,_6[a]=s,_6[`${r}${i}`]=s,_6[`${e}${o}`]=s,_6[`${r}${o}`]=s}}function ape(t,e,r){let n="";for(let i=e;i<r;){let o=t[i++];n+=spe[o]}return n}function iK(t){return t.length>>>1}function cpe(t,e,r,n){let i=0;for(;r<n;){let o=e.substr(i,2),s=_6[o];if(s===void 0)return;t[r++]=s,i+=2}return t}var AHe=Math.pow(2,24),PHe=Math.pow(2,16),THe=Math.pow(2,8),Wl=(t,e)=>t[e]*AHe+t[e+1]*PHe+t[e+2]*THe+t[e+3],ir=(t,e)=>t[e]<<8|t[e+1],Hl=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),mt=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Ka(t,e,r,n,i){return r<0&&(n-=r,r=0),n<0&&(n=0),i<0?new Uint8Array(0):r>=e.length||n>=i?0:IHe(t,e,r,n,i)}function IHe(t,e,r,n,i){i-n>e.length-r&&(i=n+e.length-r);let o=i-n,s=t.length-n;return o>s&&(o=s),(n!==0||i<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,o)),e.set(t,r),o}var RHe=0,dpe=32768,sK=32768,DHe=~sK,lpe=32768,MHe=~lpe;function En({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var nt=En({encode(t,e,r){e||(e=new Uint8Array(nt.encodingLength(t))),r||(r=0);let n=r,i=t.replace(/^\.|\.$/gm,"");if(i.length){let o=i.split(".");for(let s=0;s<o.length;s++){let a=lT(e,o[s],r+1);e[r]=a,r+=a+1}}return e[r++]=0,nt.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,i=0,o=0,s=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(o+=s?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let d=ir(t,e-1)-49152;if(d>=n)throw new Error("Cannot decode name (bad pointer)");e=d,n=d,o+=s?0:1,s=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=a+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(p1(t,e,e+a)),e+=a,o+=s?0:a}}return nt.decode.bytes=o,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:Ah(t.replace(/^\.|\.$/gm,""))+2}}),to=En({encode(t,e,r){e||(e=new Uint8Array(to.encodingLength(t))),r||(r=0);let n=lT(e,t,r+1);return e[r]=n,to.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=p1(t,e+1,e+1+r);return to.decode.bytes=r+1,n},encodingLength(t){return Ah(t)+1}}),m1=En({bytes:12,encode(t,e,r){e||(e=new Uint8Array(m1.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,i=t.type==="response"?dpe:RHe;return mt(e,t.id||0,r),mt(e,n|i,r+2),mt(e,t.questions.length,r+4),mt(e,t.answers.length,r+6),mt(e,t.authorities.length,r+8),mt(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=ir(t,e+2);return{id:ir(t,e),type:r&dpe?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:ipe(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:npe(r&15),questions:new Array(ir(t,e+4)),answers:new Array(ir(t,e+6)),authorities:new Array(ir(t,e+8)),additionals:new Array(ir(t,e+10))}},encodingLength(){return 12}}),hT=En({encode(t,e,r){e||(e=new Uint8Array(hT.encodingLength(t))),r||(r=0);let n=t.length;return mt(e,n,r),Ka(t,e,r+2,0,n),hT.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=ir(t,e),n=t.slice(e+2,e+2+r);return hT.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),pT=En({encode(t,e,r){return e||(e=new Uint8Array(pT.encodingLength(t))),r||(r=0),nt.encode(t,e,r+2),mt(e,nt.encode.bytes,r),pT.encode.bytes=nt.encode.bytes+2,e},decode(t,e){e||(e=0);let r=ir(t,e),n=nt.decode(t,e+2);return pT.decode.bytes=r+2,n},encodingLength(t){return nt.encodingLength(t)+2}}),mT=En({encode(t,e,r){e||(e=new Uint8Array(mT.encodingLength(t))),r||(r=0);let n=r;return r+=2,nt.encode(t.mname,e,r),r+=nt.encode.bytes,nt.encode(t.rname,e,r),r+=nt.encode.bytes,Hl(e,t.serial||0,r),r+=4,Hl(e,t.refresh||0,r),r+=4,Hl(e,t.retry||0,r),r+=4,Hl(e,t.expire||0,r),r+=4,Hl(e,t.minimum||0,r),r+=4,mt(e,r-n-2,n),mT.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=nt.decode(t,e),e+=nt.decode.bytes,n.rname=nt.decode(t,e),e+=nt.decode.bytes,n.serial=Wl(t,e),e+=4,n.refresh=Wl(t,e),e+=4,n.retry=Wl(t,e),e+=4,n.expire=Wl(t,e),e+=4,n.minimum=Wl(t,e),e+=4,mT.decode.bytes=e-r,n},encodingLength(t){return 22+nt.encodingLength(t.mname)+nt.encodingLength(t.rname)}}),yT=En({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++)if(typeof t[i]=="string"&&(t[i]=uT(t[i])),!Km(t[i]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(yT.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(i){e[r++]=i.length,Ka(i,e,r,0,i.length),r+=i.length}),mt(e,r-n-2,n),yT.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=ir(t,e);e+=2;let i=[];for(;n>0;){let o=t[e++];if(--n,n<o)throw new Error("Buffer overflow");i.push(t.slice(e,e+o)),e+=o,n-=o}return yT.decode.bytes=e-r,i},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=Ah(r)+1:e+=r.length+1}),e}}),gT=En({encode(t,e,r){e||(e=new Uint8Array(gT.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=uT(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let i=t.length;return Ka(t,e,r,0,i),r+=i,mt(e,r-n-2,n),gT.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=ir(t,e);e+=2;let i=t.slice(e,e+n);return e+=n,gT.decode.bytes=e-r,i},encodingLength(t){return t?(Km(t)?t.length:Ah(t))+2:2}}),bT=En({encode(t,e,r){e||(e=new Uint8Array(bT.encodingLength(t))),r||(r=0);let n=r;return r+=2,to.encode(t.cpu,e,r),r+=to.encode.bytes,to.encode(t.os,e,r),r+=to.encode.bytes,mt(e,r-n-2,n),bT.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=to.decode(t,e),e+=to.decode.bytes,n.os=to.decode(t,e),e+=to.decode.bytes,bT.decode.bytes=e-r,n},encodingLength(t){return to.encodingLength(t.cpu)+to.encodingLength(t.os)+2}}),b1=En({encode(t,e,r){return e||(e=new Uint8Array(b1.encodingLength(t))),r||(r=0),nt.encode(t,e,r+2),mt(e,nt.encode.bytes,r),b1.encode.bytes=nt.encode.bytes+2,e},decode(t,e){e||(e=0);let r=nt.decode(t,e+2);return b1.decode.bytes=nt.decode.bytes+2,r},encodingLength(t){return nt.encodingLength(t)+2}}),vT=En({encode(t,e,r){e||(e=new Uint8Array(vT.encodingLength(t))),r||(r=0),mt(e,t.priority||0,r+2),mt(e,t.weight||0,r+4),mt(e,t.port||0,r+6),nt.encode(t.target,e,r+8);let n=nt.encode.bytes+6;return mt(e,n,r),vT.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=ir(t,e),n={};return n.priority=ir(t,e+2),n.weight=ir(t,e+4),n.port=ir(t,e+6),n.target=nt.decode(t,e+8),vT.decode.bytes=r+2,n},encodingLength(t){return 8+nt.encodingLength(t.target)}}),qm=En({encode(t,e,r){let n=qm.encodingLength(t);return e||(e=new Uint8Array(qm.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=qm.ISSUER_CRITICAL),mt(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,to.encode(t.tag,e,r),r+=to.encode.bytes,lT(e,t.value,r),r+=Ah(t.value),qm.encode.bytes=n,e},decode(t,e){e||(e=0);let r=ir(t,e);e+=2;let n=e,i={};return i.flags=t[e],e+=1,i.tag=to.decode(t,e),e+=to.decode.bytes,i.value=p1(t,e,n+r),i.issuerCritical=!!(i.flags&qm.ISSUER_CRITICAL),qm.decode.bytes=r+2,i},encodingLength(t){return to.encodingLength(t.tag)+to.encodingLength(t.value)+2}});qm.ISSUER_CRITICAL=128;var wT=En({encode(t,e,r){e||(e=new Uint8Array(wT.encodingLength(t))),r||(r=0);let n=r;return r+=2,mt(e,t.preference||0,r),r+=2,nt.encode(t.exchange,e,r),r+=nt.encode.bytes,mt(e,r-n-2,n),wT.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=ir(t,e),e+=2,n.exchange=nt.decode(t,e),e+=nt.decode.bytes,wT.decode.bytes=e-r,n},encodingLength(t){return 4+nt.encodingLength(t.exchange)}}),fpe=En({encode(t,e,r){return e||(e=new Uint8Array(fpe.encodingLength(t))),r||(r=0),mt(e,4,r),r+=2,Pu.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,Pu.decode(t,e)},bytes:6}),_T=En({encode(t,e,r){return e||(e=new Uint8Array(_T.encodingLength(t))),r||(r=0),mt(e,16,r),r+=2,Sh.encode(t,e,r),_T.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=Sh.decode(t,e);return _T.decode.bytes=18,r},bytes:18}),upe=t=>new Uint8Array(t),Ph=En({encode(t,e,r){e||(e=new Uint8Array(Ph.encodingLength(t))),r||(r=0);let n=r,i=rK(t.code);if(mt(e,i,r),r+=2,t.data)mt(e,t.data.length,r),r+=2,Ka(t.data,e,r),r+=t.data.length;else switch(i){case 8:{let o=t.sourcePrefixLength||0,s=t.family||epe(t.ip,upe),a=tpe(t.ip,upe),d=Math.ceil(o/8);mt(e,d+4,r),r+=2,mt(e,s,r),r+=2,e[r++]=o,e[r++]=t.scopePrefixLength||0,Ka(a,e,r,0,d),r+=d}break;case 11:t.timeout?(mt(e,2,r),r+=2,mt(e,t.timeout,r),r+=2):(mt(e,0,r),r+=2);break;case 12:{let o=t.length||0;mt(e,o,r),r+=2,e.fill(0,r,r+o),r+=o}break;case 14:{let o=t.tags.length*2;mt(e,o,r),r+=2;for(let s of t.tags)mt(e,s,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Ph.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=ir(t,e),r.type=ope(r.code),e+=2;let n=ir(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=ir(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let i=new Uint8Array(r.family===1?4:16);Ka(t,i,0,e,e+n-4),r.ip=rpe(i)}break;case 11:n>0&&(r.timeout=ir(t,e),e+=2);break;case 14:r.tags=[];for(let i=0;i<n;i+=2)r.tags.push(ir(t,e)),e+=2}return Ph.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(rK(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),Lm=En({encode(t,e,r){e||(e=new Uint8Array(Lm.encodingLength(t))),r||(r=0);let n=r,i=g1(t,Ph);return mt(e,i,r),r=T6(t,Ph,e,r+2),Lm.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],i=ir(t,e);e+=2;let o=0;for(;i>0;)n[o++]=Ph.decode(t,e),e+=Ph.decode.bytes,i-=Ph.decode.bytes;return Lm.decode.bytes=e-r,n},encodingLength(t){return 2+g1(t||[],Ph)}}),Vl=En({encode(t,e,r){e||(e=new Uint8Array(Vl.encodingLength(t))),r||(r=0);let n=r,i=t.key;if(!Km(i))throw new Error("Key must be a Buffer");return r+=2,mt(e,t.flags,r),r+=2,e[r]=Vl.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Ka(i,e,r,0,i.length),r+=i.length,Vl.encode.bytes=r-n,mt(e,Vl.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=ir(t,e);if(e+=2,n.flags=ir(t,e),e+=2,t[e]!==Vl.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,Vl.decode.bytes=e-r,n},encodingLength(t){return 6+Ah(t.key)}});Vl.PROTOCOL_DNSSEC=3;Vl.ZONE_KEY=128;Vl.SECURE_ENTRYPOINT=32768;var x6=En({encode(t,e,r){e||(e=new Uint8Array(x6.encodingLength(t))),r||(r=0);let n=r,i=t.signature;if(!Km(i))throw new Error("Signature must be a Buffer");return r+=2,mt(e,f1(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Hl(e,t.originalTTL,r),r+=4,Hl(e,t.expiration,r),r+=4,Hl(e,t.inception,r),r+=4,mt(e,t.keyTag,r),r+=2,nt.encode(t.signersName,e,r),r+=nt.encode.bytes,Ka(i,e,r,0,i.length),r+=i.length,x6.encode.bytes=r-n,mt(e,x6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=ir(t,e);return e+=2,n.typeCovered=w6(ir(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Wl(t,e),e+=4,n.expiration=Wl(t,e),e+=4,n.inception=Wl(t,e),e+=4,n.keyTag=ir(t,e),e+=2,n.signersName=nt.decode(t,e),e+=nt.decode.bytes,n.signature=t.slice(e,r+i+2),e+=n.signature.length,x6.decode.bytes=e-r,n},encodingLength(t){return 20+nt.encodingLength(t.signersName)+Ah(t.signature)}}),E6=En({encode(t,e,r){e||(e=new Uint8Array(E6.encodingLength(t))),r||(r=0);let n=r;return r+=2,nt.encode(t.mbox||".",e,r),r+=nt.encode.bytes,nt.encode(t.txt||".",e,r),r+=nt.encode.bytes,E6.encode.bytes=r-n,mt(e,E6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=nt.decode(t,e)||".",e+=nt.decode.bytes,n.txt=nt.decode(t,e)||".",e+=nt.decode.bytes,E6.decode.bytes=e-r,n},encodingLength(t){return 2+nt.encodingLength(t.mbox||".")+nt.encodingLength(t.txt||".")}}),Ec=En({encode(t,e,r){e||(e=new Uint8Array(Ec.encodingLength(t))),r||(r=0);let n=r,i=[];for(let o=0;o<t.length;o++){let s=f1(t[o]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(let o=0;o<i.length;o++)if(i[o]!==void 0){let s=uT(i[o]);e[r]=o,r+=1,e[r]=s.length,r+=1,Ka(s,e,r,0,s.length),r+=s.length}return Ec.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,i=[];for(;e-n<r;){let o=t[e];e+=1;let s=t[e];e+=1;for(let a=0;a<s;a++){let d=t[e+a];for(let u=0;u<8;u++)if(d&1<<7-u){let c=w6(o<<8|a<<3|u);i.push(c)}}e+=s}return Ec.decode.bytes=e-n,i},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let i=f1(t[n]);e[i>>8]=Math.max(e[i>>8]||0,i&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),S6=En({encode(t,e,r){e||(e=new Uint8Array(S6.encodingLength(t))),r||(r=0);let n=r;return r+=2,nt.encode(t.nextDomain,e,r),r+=nt.encode.bytes,Ec.encode(t.rrtypes,e,r),r+=Ec.encode.bytes,S6.encode.bytes=r-n,mt(e,S6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=ir(t,e);return e+=2,n.nextDomain=nt.decode(t,e),e+=nt.decode.bytes,n.rrtypes=Ec.decode(t,e,i-(e-r)),e+=Ec.decode.bytes,S6.decode.bytes=e-r,n},encodingLength(t){return 2+nt.encodingLength(t.nextDomain)+Ec.encodingLength(t.rrtypes)}}),A6=En({encode(t,e,r){e||(e=new Uint8Array(A6.encodingLength(t))),r||(r=0);let n=r,i=t.salt;if(!Km(i))throw new Error("salt must be a Buffer");let o=t.nextDomain;if(!Km(o))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,mt(e,t.iterations,r),r+=2,e[r]=i.length,r+=1,Ka(i,e,r,0,i.length),r+=i.length,e[r]=o.length,r+=1,Ka(o,e,r,0,o.length),r+=o.length,Ec.encode(t.rrtypes,e,r),r+=Ec.encode.bytes,A6.encode.bytes=r-n,mt(e,A6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=ir(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=ir(t,e),e+=2;let o=t[e];e+=1,n.salt=t.slice(e,e+o),e+=o;let s=t[e];return e+=1,n.nextDomain=t.slice(e,e+s),e+=s,n.rrtypes=Ec.decode(t,e,i-(e-r)),e+=Ec.decode.bytes,A6.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+Ec.encodingLength(t.rrtypes)}}),P6=En({encode(t,e,r){e||(e=new Uint8Array(P6.encodingLength(t))),r||(r=0);let n=r,i=t.digest;if(!Km(i))throw new Error("Digest must be a Buffer");return r+=2,mt(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Ka(i,e,r,0,i.length),r+=i.length,P6.encode.bytes=r-n,mt(e,P6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=ir(t,e);return e+=2,n.keyTag=ir(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,P6.decode.bytes=e-r,n},encodingLength(t){return 6+Ah(t.digest)}}),y1=En({encode(t,e,r){e||(e=new Uint8Array(y1.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let i=iK(t.fingerprint),o=aK(t.hash);if(i!==o)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${i} != ${o}`);return cpe(e,t.fingerprint,r,r+=i),y1.encode.bytes=r-n,mt(e,y1.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let i=aK(n.hash);return n.fingerprint=ape(t,e,e+i),e+=i,y1.decode.bytes=e-r,n},encodingLength(t){return 4+iK(t.fingerprint)}});function aK(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}y1.getFingerprintLengthForHashType=aK;function oK(t){switch(t.toUpperCase()){case"A":return fpe;case"PTR":return b1;case"CNAME":return b1;case"DNAME":return b1;case"TXT":return yT;case"NULL":return gT;case"AAAA":return _T;case"SRV":return vT;case"HINFO":return bT;case"CAA":return qm;case"NS":return pT;case"SOA":return mT;case"MX":return wT;case"OPT":return Lm;case"DNSKEY":return Vl;case"RRSIG":return x6;case"RP":return E6;case"NSEC":return S6;case"NSEC3":return A6;case"SSHFP":return y1;case"DS":return P6}return hT}var Ad=En({encode(t,e,r){e||(e=new Uint8Array(Ad.encodingLength(t))),r||(r=0);let n=r;if(nt.encode(t.name,e,r),r+=nt.encode.bytes,mt(e,f1(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");mt(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,mt(e,t.flags||0,r+6),r+=8,Lm.encode(t.options||[],e,r),r+=Lm.encode.bytes}else{let i=tK(t.class===void 0?"IN":t.class);t.flush&&(i|=sK),mt(e,i,r+2),Hl(e,t.ttl||0,r+4),r+=8;let o=oK(t.type);o.encode(t.data,e,r),r+=o.encode.bytes}return Ad.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=nt.decode(t,e),e+=nt.decode.bytes,r.type=w6(ir(t,e)),r.type==="OPT")r.udpPayloadSize=ir(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=ir(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=Lm.decode(t,e+8),e+=8+Lm.decode.bytes;else{let i=ir(t,e+2);r.ttl=Wl(t,e+4),r.class=eK(i&DHe),r.flush=!!(i&sK);let o=oK(r.type);r.data=o.decode(t,e+8),e+=8+o.decode.bytes}return Ad.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return nt.encodingLength(t.name)+8+oK(t.type).encodingLength(e)}}),v1=En({encode(t,e,r){e||(e=new Uint8Array(v1.encodingLength(t))),r||(r=0);let n=r;return nt.encode(t.name,e,r),r+=nt.encode.bytes,mt(e,f1(t.type),r),r+=2,mt(e,tK(t.class===void 0?"IN":t.class),r),r+=2,v1.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=nt.decode(t,e),e+=nt.decode.bytes,n.type=w6(ir(t,e)),e+=2,n.class=eK(ir(t,e)),e+=2,!!(n.class&lpe)&&(n.class&=MHe),v1.decode.bytes=e-r,n},encodingLength(t){return nt.encodingLength(t.name)+4}});var AT=1024;var cs={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(BHe(t))),r||(r=0);let i=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),m1.encode(t,e,r),r+=m1.encode.bytes,r=T6(t.questions,v1,e,r),r=T6(t.answers,Ad,e,r),r=T6(t.authorities,Ad,e,r),r=T6(t.additionals,Ad,e,r),cs.encode.bytes=r-i,n&&$g.bytes!==e.length?e.slice(0,$g.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=m1.decode(t,e);return e+=m1.decode.bytes,e=fT(n.questions,v1,t,e),e=fT(n.answers,Ad,t,e),e=fT(n.authorities,Ad,t,e),e=fT(n.additionals,Ad,t,e),cs.decode.bytes=e-r,n},encodingLength:function(t){return m1.encodingLength(t)+g1(t.questions||[],v1)+g1(t.answers||[],Ad)+g1(t.authorities||[],Ad)+g1(t.additionals||[],Ad)}};cs.encode.bytes=0;cs.decode.bytes=0;function xT(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var ET={encode:function(t,e,r){return e=cs.encode(xT(t,"query"),e,r),ET.encode.bytes=cs.encode.bytes,e},decode:function(t,e){let r=cs.decode(t,e);return ET.decode.bytes=cs.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return cs.encodingLength(xT(t,"query"))}};ET.encode.bytes=0;ET.decode.bytes=0;var ST={encode:function(t,e,r){return e=cs.encode(xT(t,"response"),e,r),ST.encode.bytes=cs.encode.bytes,e},decode:function(t,e){let r=cs.decode(t,e);return ST.decode.bytes=cs.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return cs.encodingLength(xT(t,"response"))}};ST.encode.bytes=0;ST.decode.bytes=0;var $g=cs.encode,w1=cs.decode,BHe=cs.encodingLength;function hpe(t){let e=$g(t),r=new Uint8Array(2+e.byteLength);return mt(r,e.byteLength),Ka(e,r,2,0,e.length),hpe.bytes=r.byteLength,r}hpe.bytes=0;function ppe(t){let e=ir(t,0);if(t.byteLength<e+2)return null;let r=w1(t.slice(2));return ppe.bytes=w1.bytes,r}ppe.bytes=0;function g1(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function T6(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function fT(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}h();var mpe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Pd=class{static getSigningMethod(e){return mpe(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return mpe(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Po=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},ype=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},gpe="https://diddht.tbddev.org",CHe=0,Fm=7200,PT=";",ua=",",cK;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(cK||(cK={}));var la;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(la||(la={}));var dK;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(dK||(dK={}));var vpe={Ed25519:la.Ed25519,ES256K:la.secp256k1,ES256:la.secp256r1,"P-256":la.secp256r1,secp256k1:la.secp256k1,secp256r1:la.secp256r1,X25519:la.X25519},bpe={[la.Ed25519]:"Ed25519",[la.secp256k1]:"ES256K",[la.secp256r1]:"ES256",[la.X25519]:"ECDH-ES+A256KW"},Ng=class t extends Pd{static create(){return Po(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s,a,d,u,c,l,m,p;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(N=>!(N.algorithm in vpe)))throw new Error("One or more verification method algorithms are not supported");let g=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(N=>"id"in N).map(N=>N.id);if(g&&g.length!==new Set(g).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some(N=>!N.id||!N.type||!N.serviceEndpoint))throw new Error("One or more services are missing required properties");let b=yield e.generateKey({algorithm:"Ed25519"}),S=yield e.getPublicKey({keyUri:b}),A=yield Ao.identityKeyToIdentifier({identityKey:S}),I=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),P=[...(s=r.verificationMethods)!==null&&s!==void 0?s:[]];P?.some(N=>{var L;return((L=N.id)===null||L===void 0?void 0:L.split("#").pop())==="0"})||P.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let N of P){let L=N.id&&N.id.split("#").pop()==="0"?b:yield e.generateKey({algorithm:N.algorithm}),F=yield e.getPublicKey({keyUri:L}),U=(d=(a=N.id)!==null&&a!==void 0?a:F.kid)!==null&&d!==void 0?d:yield rt({jwk:F});U=`${A}#${xc(U)}`,(u=I.verificationMethod)!==null&&u!==void 0||(I.verificationMethod=[]),I.verificationMethod.push({id:U,type:"JsonWebKey",controller:(c=N.controller)!==null&&c!==void 0?c:A,publicKeyJwk:F});for(let G of(l=N.purposes)!==null&&l!==void 0?l:[])I[G]||(I[G]=[]),I[G].push(U)}(m=r.services)===null||m===void 0||m.forEach(N=>{var L;(L=I.service)!==null&&L!==void 0||(I.service=[]),N.id=`${A}#${N.id.split("#").pop()}`,I.service.push(N)});let $=new Ua({uri:A,document:I,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((p=r.publish)!==null&&p!==void 0)||p){let N=yield t.publish({did:$,gatewayUri:r.gatewayUri});$.metadata=N.didDocumentMetadata}return $})}static import(e){return Po(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){var i;let o=br.parse(r.uri);if(o?.method!==t.methodName)throw new ot(et.MethodNotSupported,"Method not supported");let s=yield Ua.import({portableDid:r,keyManager:n});if(!(!((i=s.document.verificationMethod)===null||i===void 0)&&i.some(a=>{var d;return((d=a.id)===null||d===void 0?void 0:d.split("#").pop())==="0"})))throw new ot(et.InvalidDidDocument,"DID document must contain an Identity Key");return s})}static getSigningMethod(e){return Po(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var i;let o=br.parse(r.id);if(o&&o.method!==this.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var d,u;return xc(a.id)===((d=xc(n))!==null&&d!==void 0?d:xc((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(s&&s.publicKeyJwk))throw new ot(et.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static publish(e){return Po(this,arguments,void 0,function*({did:r,gatewayUri:n=gpe}){return yield TT.put({did:r,gatewayUri:n})})}static resolve(e){return Po(this,arguments,void 0,function*(r,n={}){var i;let o=(i=n?.gatewayUri)!==null&&i!==void 0?i:gpe;try{yield Ao.identifierToIdentityKey({didUri:r});let{didDocument:s,didDocumentMetadata:a}=yield TT.get({didUri:r,gatewayUri:o});return Object.assign(Object.assign({},Xn),{didDocument:s,didDocumentMetadata:a})}catch(s){if(!(s instanceof ot))throw new Error(s);return Object.assign(Object.assign({},Xn),{didResolutionMetadata:Object.assign({error:s.code},s.message&&{errorMessage:s.message})})}})}};Ng.methodName="dht";var TT=class t{static get(e){return Po(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let i=Ao.identifierToIdentityKeyBytes({didUri:r}),o=yield t.pkarrGet({gatewayUri:n,publicKeyBytes:i}),s=yield Ao.parseBep44GetMessage({bep44Message:o}),a=yield t.fromDnsPacket({didUri:r,dnsPacket:s});return a.didDocumentMetadata.versionId=o.seq.toString(),a})}static put(e){return Po(this,arguments,void 0,function*({did:r,gatewayUri:n}){let i=yield t.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),o=yield Ao.createBep44PutMessage({dnsPacket:i,publicKeyBytes:Ao.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),s=yield t.pkarrPut({gatewayUri:n,bep44Message:o});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:s,versionId:o.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return Po(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let i=de.uint8Array(n).toBase32Z(),o=new URL(i,r).href,s;try{if(s=yield fetch(o,{method:"GET"}),!s.ok)throw new ot(et.NotFound,`Pkarr record not found for: ${i}`)}catch(u){throw u instanceof ot?u:new ot(et.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let a=yield s.arrayBuffer();if(!a)throw new ot(et.NotFound,`Pkarr record not found for: ${i}`);if(a.byteLength<72)throw new ot(et.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new ot(et.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return Po(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let i=de.uint8Array(n.k).toBase32Z(),o=new URL(i,r).href,s=new Uint8Array(n.v.length+72);s.set(n.sig,0),new DataView(s.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),s.set(n.v,n.sig.length+8);let a;try{a=yield fetch(o,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:s})}catch(d){throw new ot(et.InternalError,`Failed to put Pkarr record for identifier ${i}: ${d.message}`)}return a.ok})}static fromDnsPacket(e){return Po(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var i,o,s;let a={id:r},d={published:!0},u=new Map;for(let c of(i=n?.answers)!==null&&i!==void 0?i:[]){if(c.type!=="TXT")continue;let l=c.name.split(".")[0].substring(1);switch(!0){case l.startsWith("aka"):{let m=Ao.parseTxtDataToString(c.data);a.alsoKnownAs=m.split(ua);break}case l.startsWith("cnt"):{let m=Ao.parseTxtDataToString(c.data);a.controller=m.includes(ua)?m.split(ua):m;break}case l.startsWith("k"):{let{id:m,t:p,k:g,c:b,a:S}=Ao.parseTxtDataToObject(c.data),A=de.base64Url(g).toUint8Array(),I=la[Number(p)],P=yield Ao.keyConverter(I).bytesToPublicKey({publicKeyBytes:A});P.alg=S||bpe[Number(p)];let $=l==="k0"?"0":m!==void 0?m:yield rt({jwk:P});(o=a.verificationMethod)!==null&&o!==void 0||(a.verificationMethod=[]);let N=`${r}#${$}`;a.verificationMethod.push({id:N,type:"JsonWebKey",controller:b??r,publicKeyJwk:P}),u.set(l,N);break}case l.startsWith("s"):{let m=Ao.parseTxtDataToObject(c.data),{id:p,t:g,se:b}=m,S=ype(m,["id","t","se"]),A=b.includes(ua)?b.split(ua):[b],I=Object.fromEntries(Object.entries(S).map(([P,$])=>[P,$.includes(ua)?$.split(ua):$]));(s=a.service)!==null&&s!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},I),{id:`${r}#${p}`,type:g,serviceEndpoint:A}));break}case l.startsWith("typ"):{let{id:m}=Ao.parseTxtDataToObject(c.data);d.types=m.split(ua).map(p=>Number(p));break}case l.startsWith("did"):{let m=I=>I.split(ua).map(P=>u.get(P)).filter(P=>typeof P=="string"),{auth:p,asm:g,del:b,inv:S,agm:A}=Ao.parseTxtDataToObject(c.data);p&&(a.authentication=m(p)),g&&(a.assertionMethod=m(g)),b&&(a.capabilityDelegation=m(b)),S&&(a.capabilityInvocation=m(S)),A&&(a.keyAgreement=m(A));break}}}return{didDocument:a,didDocumentMetadata:d,didResolutionMetadata:{}}})}static toDnsPacket(e){return Po(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:i,previousDidProof:o}){var s,a,d,u,c;let l=[],m=[],p=new Map,g=[],b=[];if(o!==void 0){let{signature:I,previousDid:P}=o;yield Ao.validatePreviousDidProof({newDid:r.id,previousDidProof:o}),l.push({type:"TXT",name:"_prv._did.",ttl:Fm,data:`id=${P};s=${I}`})}if(r.alsoKnownAs&&l.push({type:"TXT",name:"_aka._did.",ttl:Fm,data:r.alsoKnownAs.join(ua)}),r.controller){let I=Array.isArray(r.controller)?r.controller.join(ua):r.controller;l.push({type:"TXT",name:"_cnt._did.",ttl:Fm,data:I})}for(let[I,P]of(a=(s=r.verificationMethod)===null||s===void 0?void 0:s.entries())!==null&&a!==void 0?a:[]){let $=`k${I}`;b.push($);let N=P.id.split("#").pop();p.set(N,$);let L=P.publicKeyJwk;if(!(L?.crv&&L.crv in vpe))throw new ot(et.InvalidPublicKeyType,`Verification method '${P.id}' contains an unsupported key type: ${(d=L?.crv)!==null&&d!==void 0?d:"undefined"}`);let F=la[L.crv],U=yield Ao.keyConverter(L.crv).publicKeyToBytes({publicKey:L}),G=de.uint8Array(U).toBase64Url(),q=[`t=${F}`,`k=${G}`];N!=="0"&&(yield rt({jwk:L}))!==N&&q.unshift(`id=${N}`),L.alg!==bpe[F]&&q.push(`a=${L.alg}`),P.controller!==r.id&&q.push(`c=${P.controller}`),l.push({type:"TXT",name:`_${$}._did.`,ttl:Fm,data:q.join(PT)})}(u=r.service)===null||u===void 0||u.forEach((I,P)=>{let $=`s${P}`;g.push($);let{id:N,type:L,serviceEndpoint:F}=I,U=ype(I,["id","type","serviceEndpoint"]);N=xc(N),F=Array.isArray(F)?F.join(","):F;let q=Object.entries(Object.assign({id:N,t:L,se:F},U)).map(([E,k])=>`${E}=${k}`).join(PT),T=Ao.chunkDataIfNeeded(q);l.push({type:"TXT",name:`_${$}._did.`,ttl:Fm,data:T})});let S=[`v=${CHe}`];if(b.length&&S.push(`vm=${b.join(ua)}`),Object.keys(sg).forEach(I=>{var P;let $=(P=r[I])===null||P===void 0?void 0:P.map(N=>p.get(N.split("#").pop()));if($){let N=dK[I];S.push(`${N}=${$.join(ua)}`)}}),g.length&&S.push(`svc=${g.join(ua)}`),!((c=n.types)===null||c===void 0)&&c.length){let P=n.types.map($=>typeof $=="string"?cK[$]:$);l.push({type:"TXT",name:"_typ._did.",ttl:Fm,data:`id=${P.join(ua)}`})}l.push({type:"TXT",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Fm,data:S.join(PT)});for(let I of i||[])m.push({type:"NS",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Fm,data:I+"."});return{id:0,type:"response",flags:AT,answers:[...l,...m]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Ao=class t{static createBep44PutMessage(e){return Po(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:i}){let o=Math.ceil(Date.now()/1e3),s=$g(r),a=l1.encode({seq:o,v:s}).subarray(1,-1);if(a.length>1e3)throw new ot(et.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let d=yield i.sign({data:a});return{k:n,seq:o,sig:d,v:s}})}static identifierToIdentityKey(e){return Po(this,arguments,void 0,function*({didUri:r}){let n=t.identifierToIdentityKeyBytes({didUri:r});return yield er.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=br.parse(e);if(!r)throw new ot(et.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Ng.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=de.base32Z(r.id).toUint8Array()}catch{throw new ot(et.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new ot(et.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return Po(this,arguments,void 0,function*({identityKey:r}){let n=yield er.publicKeyToBytes({publicKey:r}),i=de.uint8Array(n).toBase32Z();return`did:${Ng.methodName}:${i}`})}static keyConverter(e){let n={Ed25519:er,"P-256":{publicKeyToBytes:i=>Po(this,[i],void 0,function*({publicKey:o}){let s=yield Br.publicKeyToBytes({publicKey:o});return yield Br.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Br.bytesToPublicKey,privateKeyToBytes:Br.privateKeyToBytes,bytesToPrivateKey:Br.bytesToPrivateKey},secp256k1:{publicKeyToBytes:i=>Po(this,[i],void 0,function*({publicKey:o}){let s=yield Er.publicKeyToBytes({publicKey:o});return yield Er.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Er.bytesToPublicKey,privateKeyToBytes:Er.privateKeyToBytes,bytesToPrivateKey:Er.bytesToPrivateKey},X25519:Gl}[e];if(!n)throw new ot(et.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return Po(this,arguments,void 0,function*({bep44Message:r}){let n=yield er.bytesToPublicKey({publicKeyBytes:r.k}),i=l1.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield er.verify({key:n,signature:r.sig,data:i})))throw new ot(et.InvalidSignature,"Invalid signature for DHT BEP44 message");return w1(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(PT).reduce((r,n)=>{let[i,o]=n.split("=");return r[i]=o,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return de.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new ot(et.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return Po(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let i=yield t.identifierToIdentityKey({didUri:n.previousDid}),o=t.identifierToIdentityKeyBytes({didUri:r}),s=de.base64Url(n.signature).toUint8Array();if(!(yield er.verify({key:i,data:o,signature:s})))throw new ot(et.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};h();h();h();h();h();var Cn={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};h();var yn=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var qa=class t{static encode(e){return Pb.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new yn(Cn.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return Pb.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};h();var Epe=Ut(g$(),1);h();h();var uK;(function(t){t.Public="public",t.Private="private"})(uK||(uK={}));var Sc=uK;var ro=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===Sc.Private&&n.add("d");for(let i in e)if(!n.has(i))throw new yn(Cn.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${i}'.`);if(e.crv!=="secp256k1")throw new yn(Cn.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new yn(Cn.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new yn(Cn.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new yn(Cn.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===Sc.Private&&(e.d===void 0||e.d.length!==43))throw new yn(Cn.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new yn(Cn.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!qa.isBase64UrlString(e))throw new yn(Cn.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new yn(Cn.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};h();var I6=class{};I6.hashAlgorithmInMultihashCode=18;I6.maxCanonicalizedDeltaSizeInBytes=1e3;var fa=I6;h();var xpe=Ut(_pe(),1);var Tu=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=xpe.default(r);return qa.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};h();var k6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},To=class t{static hash(e,r){return k6(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield _2.digest(e)).bytes;break;default:throw new yn(Cn.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return k6(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield _2.encode(e);break;default:throw new yn(Cn.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=Tu.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=Tu.canonicalizeAsBytes(e),i=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(i,r)})}static hashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return qa.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,i=qa.decodeAsBytes(e,r);try{n=NS(i)}catch{throw new yn(Cn.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let o=fa.hashAlgorithmInMultihashCode;if(o!==n.code)throw new yn(Cn.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${o} or change IonSdkConfig to desired hashing algorithm.`)}};h();var lK;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(lK||(lK={}));var R6=lK;h();var fK;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(fK||(fK={}));var jg=fK;var IT=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Jl=class t{static createCreateRequest(e){return IT(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,i=e.document.publicKeys,o=e.document.services;ro.validateEs256kOperationKey(r,Sc.Public),ro.validateEs256kOperationKey(n,Sc.Public),t.validateDidDocumentKeys(i),t.validateServices(o);let s=fa.hashAlgorithmInMultihashCode,a=[{action:jg.Replace,document:e.document}],d={updateCommitment:yield To.canonicalizeThenDoubleHashThenEncode(n,s),patches:a};t.validateDeltaSize(d);let c={deltaHash:yield To.canonicalizeThenHashThenEncode(d,s),recoveryCommitment:yield To.canonicalizeThenDoubleHashThenEncode(r,s)};return{type:R6.Create,suffixData:c,delta:d}})}static createDeactivateRequest(e){return IT(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),ro.validateEs256kOperationKey(e.recoveryPublicKey,Sc.Public);let r=fa.hashAlgorithmInMultihashCode,n=yield To.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},o=yield e.signer.sign({alg:"ES256K"},i);return{type:R6.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:o}})}static createRecoverRequest(e){return IT(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),ro.validateEs256kOperationKey(e.recoveryPublicKey,Sc.Public),ro.validateEs256kOperationKey(e.nextRecoveryPublicKey,Sc.Public),ro.validateEs256kOperationKey(e.nextUpdatePublicKey,Sc.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=fa.hashAlgorithmInMultihashCode,n=yield To.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i=[{action:jg.Replace,document:e.document}],o=yield To.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),s={patches:i,updateCommitment:o},a=yield To.canonicalizeThenHashThenEncode(s,r),u={recoveryCommitment:yield To.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},c=yield e.signer.sign({alg:"ES256K"},u);return{type:R6.Recover,didSuffix:e.didSuffix,revealValue:n,delta:s,signedData:c}})}static createUpdateRequest(e){return IT(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),ro.validateEs256kOperationKey(e.updatePublicKey,Sc.Public),ro.validateEs256kOperationKey(e.nextUpdatePublicKey,Sc.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let g of e.idsOfServicesToRemove)ro.validateId(g);if(e.idsOfPublicKeysToRemove!==void 0)for(let g of e.idsOfPublicKeysToRemove)ro.validateId(g);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let g={action:jg.AddServices,services:n};r.push(g)}let i=e.idsOfServicesToRemove;if(i!==void 0&&i.length>0){let g={action:jg.RemoveServices,ids:i};r.push(g)}let o=e.publicKeysToAdd;if(o!==void 0&&o.length>0){let g={action:jg.AddPublicKeys,publicKeys:o};r.push(g)}let s=e.idsOfPublicKeysToRemove;if(s!==void 0&&s.length>0){let g={action:jg.RemovePublicKeys,ids:s};r.push(g)}let a=fa.hashAlgorithmInMultihashCode,d=yield To.canonicalizeThenHashThenEncode(e.updatePublicKey,a),u=yield To.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),c={patches:r,updateCommitment:u},l=yield To.canonicalizeThenHashThenEncode(c,a),m={updateKey:e.updatePublicKey,deltaHash:l},p=yield e.signer.sign({alg:"ES256K"},m);return{type:R6.Update,didSuffix:e.didSuffix,revealValue:d,delta:c,signedData:p}})}static validateDidSuffix(e){To.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new yn(Cn.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(ro.validateId(n.id),r.has(n.id))throw new yn(Cn.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),ro.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new yn(Cn.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){ro.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new yn(Cn.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new yn(Cn.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&Epe.parse(e.serviceEndpoint).error!==void 0)throw new yn(Cn.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=Tu.canonicalizeAsBytes(e);if(r.length>fa.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${fa.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new yn(Cn.DeltaExceedsMaximumSize,n)}}};var Spe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},zm=class t{static createLongFormDid(e){return Spe(this,void 0,void 0,function*(){let r=yield Jl.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),i;fa.network===void 0||fa.network==="mainnet"?i=`did:ion:${n}`:i=`did:ion:${fa.network}:${n}`;let o={suffixData:r.suffixData,delta:r.delta},s=Tu.canonicalizeAsBytes(o),a=qa.encode(s);return`${i}:${a}`})}static computeDidUniqueSuffix(e){return Spe(this,void 0,void 0,function*(){let r=Tu.canonicalizeAsBytes(e),n=yield To.hash(r,fa.hashAlgorithmInMultihashCode);return qa.encode(n)})}};h();h();var Ape;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(Ape||(Ape={}));h();var Ppe;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(Ppe||(Ppe={}));h();var Gm=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Yl;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Yl||(Yl={}));var OHe={Ed25519:Yl.Ed25519,ES256K:Yl.secp256k1,ES256:Yl.secp256r1,"P-256":Yl.secp256r1,secp256k1:Yl.secp256k1,secp256r1:Yl.secp256r1},Tpe="https://ion.tbd.engineering",D6=class t extends Pd{static create(){return Gm(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s,a,d,u;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(N=>!(N.algorithm in OHe)))throw new Error("One or more verification method algorithms are not supported");let c=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(N=>"id"in N).map(N=>N.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some(N=>!N.id||!N.type||!N.serviceEndpoint))throw new Error("One or more services are missing required properties");let l={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},m=[];for(let N of(s=r.verificationMethods)!==null&&s!==void 0?s:[l]){let L=yield e.generateKey({algorithm:N.algorithm}),F=yield e.getPublicKey({keyUri:L});m.push({id:N.id,publicKeyJwk:F,purposes:(a=N.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let p=yield e.generateKey({algorithm:Yl.secp256k1}),g=yield e.getPublicKey({keyUri:p}),b=yield e.generateKey({algorithm:Yl.secp256k1}),S=yield e.getPublicKey({keyUri:b}),A=yield Ug.computeLongFormDidUri({recoveryKey:g,updateKey:S,services:(d=r.services)!==null&&d!==void 0?d:[],verificationMethods:m}),{didDocument:I,didResolutionMetadata:P}=yield t.resolve(A,{gatewayUri:r.gatewayUri});if(I===null)throw new Error(`Unable to resolve DID during creation: ${P?.error}`);let $=new Ua({uri:A,document:I,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:g,updateKey:S},keyManager:e});if(!((u=r.publish)!==null&&u!==void 0)||u){let N=yield t.publish({did:$,gatewayUri:r.gatewayUri});$.metadata=N.didDocumentMetadata}return $})}static getSigningMethod(e){return Gm(this,arguments,void 0,function*({didDocument:r,methodId:n}){var i;let o=br.parse(r.id);if(o&&o.method!==this.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var d;return a.id===(n??((d=r.assertionMethod)===null||d===void 0?void 0:d[0]))});if(!(s&&s.publicKeyJwk))throw new ot(et.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Gm(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=br.parse(r.uri);if(i?.method!==t.methodName)throw new ot(et.MethodNotSupported,"Method not supported");return yield Ua.import({portableDid:r,keyManager:n})})}static publish(e){return Gm(this,arguments,void 0,function*({did:r,gatewayUri:n=Tpe}){var i,o,s;let a=(o=(i=r.document.verificationMethod)===null||i===void 0?void 0:i.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:qhe({didDocument:r.document,methodId:c.id})})))!==null&&o!==void 0?o:[],d=yield Ug.createIonDocument({services:(s=r.document.service)!==null&&s!==void 0?s:[],verificationMethods:a}),u=yield Ug.constructCreateRequest({ionDocument:d,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let c=Ug.appendPathToUrl({baseUrl:n,path:"/operations"}),l=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:l.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:et.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Gm(this,arguments,void 0,function*(r,n={}){var i,o;let s=br.parse(r);if(!s)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"invalidDid"}});if(s.method!==t.methodName)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(i=n?.gatewayUri)!==null&&i!==void 0?i:Tpe;try{let d=Ug.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),u=yield fetch(d);if(!u.ok)throw new ot(et.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:c,didDocumentMetadata:l}=yield u.json();return Object.assign(Object.assign(Object.assign({},Xn),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(o=l?.method)===null||o===void 0?void 0:o.published},l)})}catch(d){if(!(d instanceof ot))throw new Error(d);return Object.assign(Object.assign({},Xn),{didResolutionMetadata:Object.assign({error:d.code},d.message&&{errorMessage:d.message})})}})}};D6.methodName="ion";var Ug=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Gm(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:i,verificationMethods:o}){let s=yield t.createIonDocument({services:i,verificationMethods:o}),a=t.normalizeJwk(r),d=t.normalizeJwk(n);return yield zm.createLongFormDid({document:s,recoveryKey:a,updateKey:d})})}static constructCreateRequest(e){return Gm(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:i}){return yield Jl.createCreateRequest({document:r,recoveryKey:t.normalizeJwk(n),updateKey:t.normalizeJwk(i)})})}static createIonDocument(e){return Gm(this,arguments,void 0,function*({services:r,verificationMethods:n}){var i,o;let s=[];for(let u of n){let c=(o=(i=u.id)!==null&&i!==void 0?i:u.publicKeyJwk.kid)!==null&&o!==void 0?o:yield rt({jwk:u.publicKeyJwk});c=`${c.split("#").pop()}`;let l={id:c,publicKeyJwk:t.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};s.push(l)}let a=r.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:s,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};h();var kT=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},hK=class t extends Pd{static create(){return kT(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",d=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:d}),c=de.object(u).toBase64Url(),l=`did:${t.methodName}:${c}`,p=(yield t.resolve(l)).didDocument;return new Ua({uri:l,document:p,metadata:{},keyManager:e})})}static getSigningMethod(e){return kT(this,arguments,void 0,function*({didDocument:r}){var n;let i=br.parse(r.id);if(i&&i.method!==this.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(o&&o.publicKeyJwk))throw new ot(et.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return kT(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=br.parse(r.uri);if(i?.method!==t.methodName)throw new ot(et.MethodNotSupported,"Method not supported");let o=yield Ua.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new ot(et.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return kT(this,void 0,void 0,function*(){let n=br.parse(e),i;try{i=de.base64Url(n.id).toObject()}catch{}if(!n||!i)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"methodNotSupported"}});let o={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},s=`${o.id}#0`;switch(o.verificationMethod=[{id:s,type:"JsonWebKey",controller:o.id,publicKeyJwk:i}],o.authentication=[s],o.assertionMethod=[s],o.capabilityInvocation=[s],o.capabilityDelegation=[s],o.keyAgreement=[s],i.use){case"sig":{delete o.keyAgreement;break}case"enc":{delete o.authentication,delete o.assertionMethod,delete o.capabilityInvocation,delete o.capabilityDelegation;break}}return Object.assign(Object.assign({},Xn),{didDocument:o})})}};hK.methodName="jwk";h();var Iu=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Th;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Th||(Th={}));var pK={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},$He={Ed25519:Th.Ed25519,ES256K:Th.secp256k1,ES256:Th.secp256r1,"P-256":Th.secp256r1,secp256k1:Th.secp256k1,secp256r1:Th.secp256r1,X25519:Th.X25519},_1=class t extends Pd{static create(){return Iu(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",d=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:d}),c=yield La.publicKeyToMultibaseId({publicKey:u}),l=`did:${t.methodName}:${c}`,p=(yield t.resolve(l,r)).didDocument;return new Ua({uri:l,document:p,metadata:{},keyManager:e})})}static getSigningMethod(e){return Iu(this,arguments,void 0,function*({didDocument:r}){var n;let i=br.parse(r.id);if(i&&i.method!==this.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=r.assertionMethod||[],s=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===o);if(!(s&&s.publicKeyJwk))throw new ot(et.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Iu(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=br.parse(r.uri);if(i?.method!==t.methodName)throw new ot(et.MethodNotSupported,"Method not supported");let o=yield Ua.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new ot(et.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return Iu(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},Xn),{didDocument:n})}catch(n){if(!(n instanceof ot))throw new Error(n);return Object.assign(Object.assign({},Xn),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Iu(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:i="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:o=!1,enableExperimentalPublicKeyTypes:s=!1,publicKeyFormat:a="JsonWebKey2020"}=n,d={id:""},u=br.parse(r);if(!u)throw new ot(et.InvalidDid,`Invalid DID URI: ${r}`);let c=u.id;if(u.method!==t.methodName)throw new ot(et.MethodNotSupported,`Method not supported: ${u.method}`);if(!t.validateIdentifier(u))throw new ot(et.InvalidDid,`Invalid DID URI: ${r}`);let l=yield t.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:a}});if(d.id=u.uri,d.verificationMethod=[l],d.authentication=[l.id],d.assertionMethod=[l.id],d.capabilityInvocation=[l.id],d.capabilityDelegation=[l.id],o===!0){let g=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",b=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:g}});d.verificationMethod.push(b),d.keyAgreement=[b.id]}let m=[i];return Khe({didDocument:d}).forEach(g=>{let b=pK[g];m.push(b)}),d["@context"]=m,d})}static createEncryptionMethod(e){return Iu(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:u}=yield t.deriveEncryptionKey({multibaseValue:n}),c=d.byteLength,l=La.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(c!==l)throw new ot(et.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${l}`);let m=HU({keyBytes:d,multicodecCode:u});a.id=`${r}#${m}`;try{new URL(a.id)}catch{throw new ot(et.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in pK))throw new ot(et.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(s))throw new ot(et.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=m),s==="JsonWebKey2020"){let{crv:g}=yield La.multicodecToJwk({code:u});a.publicKeyJwk=yield La.keyConverter(g).bytesToPublicKey({publicKeyBytes:d})}return a})}static createSignatureMethod(e){return Iu(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:u,multicodecName:c}=VU({multibaseKeyId:n}),l=d.byteLength,m=La.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==m)throw new ot(et.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${m}`);let p=!1;switch(c){case"secp256k1-pub":p=yield Er.validatePublicKey({publicKeyBytes:d});break;case"ed25519-pub":p=yield er.validatePublicKey({publicKeyBytes:d});break;case"x25519-pub":p=!0;break}if(!p)throw new ot(et.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new ot(et.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in pK))throw new ot(et.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(s))throw new ot(et.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),s==="JsonWebKey2020"){let{crv:b}=yield La.multicodecToJwk({code:u});a.publicKeyJwk=yield La.keyConverter(b).bytesToPublicKey({publicKeyBytes:d})}return a})}static deriveEncryptionKey(e){return Iu(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:i,multicodecCode:o}=VU({multibaseKeyId:r});if(o===237){let s=yield La.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:i}),a=yield er.convertPublicKeyToX25519({publicKey:s});n={keyBytes:yield La.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[i]=e.uri.split(":",1);return i==="did"&&r==="key"&&Number("1")>0&&vm(n)==="String"&&n.startsWith("z")}};_1.methodName="key";var La=class t{static jwkToMulticodec(e){return Iu(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let i=n.join(":"),o=t.JWK_TO_MULTICODEC[i];if(o===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${i}'`);return{code:mi.getCodeFromName({name:o}),name:o}})}static keyCompressor(e){let n={"P-256":Br.compressPublicKey,secp256k1:Er.compressPublicKey}[e];if(!n)throw new ot(et.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:er,"P-256":Br,secp256k1:Er,X25519:Gl}[e];if(!n)throw new ot(et.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Iu(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?mi.getNameFromCode({code:r}):n;let i=n,o=t.MULTICODEC_TO_JWK[i];if(o===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},o)})}static publicKeyToMultibaseId(e){return Iu(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in $He))throw new ot(et.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let i=yield t.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(i=yield t.keyCompressor(r.crv)({publicKeyBytes:i}));let{name:o}=yield t.jwkToMulticodec({jwk:r});return HU({keyBytes:i,multicodecName:o})})}};La.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};La.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};La.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};h();var NHe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},mK=class t extends Pd{static resolve(e,r){return NHe(this,void 0,void 0,function*(){let n=br.parse(e);if(!n)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"methodNotSupported"}});let i=`https://${n.id.replace(/:/g,"/")}`;i=decodeURIComponent(i);let o=n.id.includes(":")?`${i}/did.json`:`${i}/.well-known/did.json`;try{let s=yield fetch(o);if(!s.ok)throw new Error("HTTP error status code returned");let a=yield s.json();return Object.assign(Object.assign({},Xn),{didDocument:a})}catch{return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:"notFound"}})}})}};mK.methodName="web";h();var Rpe=Ut(qg(),1),Dpe=Ut(yK(),1),FHe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},DT=class{constructor({db:e,location:r="DATA/DID_RESOLVERCACHE",ttl:n="15m"}={}){this.cache=e??new Dpe.Level(r),this.ttl=(0,Rpe.default)(n)}get(e){return FHe(this,void 0,void 0,function*(){try{let r=yield this.cache.get(e),n=JSON.parse(r);if(Date.now()>=n.ttlMillis){this.cache.nextTick(()=>this.cache.del(e));return}else return n.value}catch(r){if(r.notFound)return;throw r}})}set(e,r){let n={ttlMillis:Date.now()+this.ttl,value:r},i=JSON.stringify(n);return this.cache.put(e,i)}delete(e){return this.cache.del(e)}clear(){return this.cache.clear()}close(){return this.cache.close()}};h();var Mpe={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};h();var Bpe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},MT=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||Mpe;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return Bpe(this,void 0,void 0,function*(){let n=br.parse(e);if(!n)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:et.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let i=this.didResolvers.get(n.method);if(!i)return Object.assign(Object.assign({},Xn),{didResolutionMetadata:{error:et.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let o=yield this.cache.get(n.uri);if(o)return o;{let s=yield i.resolve(n.uri,r);return s.didResolutionMetadata.error||(yield this.cache.set(n.uri,s)),s}})}dereference(e,r){return Bpe(this,void 0,void 0,function*(){let n=br.parse(e);if(!n)return{dereferencingMetadata:{error:et.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:i,didResolutionMetadata:o,didDocumentMetadata:s}=yield this.resolve(n.uri);if(!i)return{dereferencingMetadata:{error:o.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:i,contentMetadata:s};let{service:a=[],verificationMethod:d=[]}=i,u=new Set([e,n.fragment,`#${n.fragment}`]),c;for(let l of d)if(u.has(l.id)){c=l;break}for(let l of a)if(u.has(l.id)){c=l;break}return c?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:c,contentMetadata:o}:{dereferencingMetadata:{error:et.NotFound},contentStream:null,contentMetadata:{}}})}};var A1=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},M6=class t{constructor(e){this.didResolver=e.didResolver,this.tenantGate=e.tenantGate,this.eventStream=e.eventStream,this.messageStore=e.messageStore,this.dataStore=e.dataStore,this.eventLog=e.eventLog,this.eventStream=e.eventStream,this.methodHandlers={[Ae.Events+_e.Get]:new iA(this.didResolver,this.eventLog),[Ae.Events+_e.Query]:new oA(this.didResolver,this.eventLog),[Ae.Events+_e.Subscribe]:new sA(this.didResolver,this.eventStream),[Ae.Messages+_e.Get]:new aA(this.didResolver,this.messageStore,this.dataStore),[Ae.Protocols+_e.Configure]:new KA(this.didResolver,this.messageStore,this.eventLog,this.eventStream),[Ae.Protocols+_e.Query]:new LA(this.didResolver,this.messageStore,this.dataStore),[Ae.Records+_e.Delete]:new zA(this.didResolver,this.messageStore,this.dataStore,this.eventLog,this.eventStream),[Ae.Records+_e.Query]:new GA(this.didResolver,this.messageStore,this.dataStore),[Ae.Records+_e.Read]:new WA(this.didResolver,this.messageStore,this.dataStore),[Ae.Records+_e.Subscribe]:new VA(this.didResolver,this.messageStore,this.eventStream),[Ae.Records+_e.Write]:new JA(this.didResolver,this.messageStore,this.dataStore,this.eventLog,this.eventStream)}}static create(e){var r,n;return A1(this,void 0,void 0,function*(){(r=e.didResolver)!==null&&r!==void 0||(e.didResolver=new MT({didResolvers:[Ng,D6,_1],cache:new DT({location:"RESOLVERCACHE"})})),(n=e.tenantGate)!==null&&n!==void 0||(e.tenantGate=new Zx);let i=new t(e);return yield i.open(),i})}open(){var e;return A1(this,void 0,void 0,function*(){yield this.messageStore.open(),yield this.dataStore.open(),yield this.eventLog.open(),yield(e=this.eventStream)===null||e===void 0?void 0:e.open()})}close(){var e;return A1(this,void 0,void 0,function*(){yield(e=this.eventStream)===null||e===void 0?void 0:e.close(),yield this.messageStore.close(),yield this.dataStore.close(),yield this.eventLog.close()})}processMessage(e,r,n={}){var i;return A1(this,void 0,void 0,function*(){let o=(i=yield this.validateTenant(e))!==null&&i!==void 0?i:yield this.validateMessageIntegrity(r);if(o!==void 0)return o;let{dataStream:s,subscriptionHandler:a}=n,d=r.descriptor.interface+r.descriptor.method;return yield this.methodHandlers[d].handle({tenant:e,message:r,dataStream:s,subscriptionHandler:a})})}validateTenant(e){var r;return A1(this,void 0,void 0,function*(){let n=yield this.tenantGate.isActiveTenant(e);if(!n.isActiveTenant)return{status:{code:401,detail:(r=n.detail)!==null&&r!==void 0?r:`DID ${e} is not an active tenant.`}}})}validateMessageIntegrity(e){var r,n;return A1(this,void 0,void 0,function*(){let i=(r=e?.descriptor)===null||r===void 0?void 0:r.interface,o=(n=e?.descriptor)===null||n===void 0?void 0:n.method;if(i===void 0||o===void 0)return{status:{code:400,detail:`Both interface and method must be present, interface: ${i}, method: ${o}`}};try{be.validateJsonSchema(e)}catch(s){return Xt(s,400)}})}};h();var zHe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})};function GHe(t){return new Promise((e,r)=>{if(t.aborted){r(t.reason);return}t.addEventListener("abort",()=>{r(t.reason)})})}function Ui(t,e){return zHe(this,void 0,void 0,function*(){return e?Promise.race([t,GHe(e)]):t})}h();h();h();h();var Ope=Ut(ZE(),1),Ac=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},ku=function(t){return this instanceof ku?(this.v=t,this):new ku(t)},gK=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},Cpe=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(p){return new Promise(function(g,b){o.push([m,p,g,b])>1||a(m,p)})})}function a(m,p){try{d(n[m](p))}catch(g){l(o[0][3],g)}}function d(m){m.value instanceof ku?Promise.resolve(m.value.v).then(u,c):l(o[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function l(m,p){m(p),o.shift(),o.length&&a(o[0][0],o[0][1])}};function Ru(t,e){return Ac(this,void 0,void 0,function*(){return new Ope.Level(t,Object.assign(Object.assign({},e),{keyEncoding:"utf8"}))})}var P1=class t{constructor(e,r){this.config=Object.assign({createLevelDatabase:Ru},e),this.db=r}open(){return Ac(this,void 0,void 0,function*(){switch(yield this.createLevelDatabase(),this.db.status){case"open":return;case"opening":return new Promise(e=>{this.db.once("open",e)});case"closing":return new Promise((e,r)=>{let n=()=>{this.db.open().then(e).catch(r)};this.db.once("closed",n)});case"closed":return this.db.open()}})}close(){return Ac(this,void 0,void 0,function*(){if(this.db)switch(this.db.status){case"open":return this.db.close();case"opening":return new Promise((e,r)=>{let n=()=>{this.db.close().then(e).catch(r)};this.db.once("open",n)});case"closing":return new Promise(e=>{this.db.once("closed",e)});case"closed":return}})}partition(e){return Ac(this,void 0,void 0,function*(){return yield this.createLevelDatabase(),new t(this.config,this.db.sublevel(e,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding}))})}get(e,r){var n;return Ac(this,void 0,void 0,function*(){(n=r?.signal)===null||n===void 0||n.throwIfAborted(),yield Ui(this.createLevelDatabase(),r?.signal);try{return yield Ui(this.db.get(String(e)),r?.signal)}catch(i){if(i.code==="LEVEL_NOT_FOUND")return;throw i}})}has(e,r){return Ac(this,void 0,void 0,function*(){return!!(yield this.get(e,r))})}keys(e){var r,n;return Cpe(this,arguments,function*(){var o,s,a,d;(r=e?.signal)===null||r===void 0||r.throwIfAborted(),yield ku(Ui(this.createLevelDatabase(),e?.signal));try{for(var u=!0,c=gK(this.db.keys()),l;l=yield ku(c.next()),o=l.done,!o;u=!0){d=l.value,u=!1;let m=d;(n=e?.signal)===null||n===void 0||n.throwIfAborted(),yield yield ku(m)}}catch(m){s={error:m}}finally{try{!u&&!o&&(a=c.return)&&(yield ku(a.call(c)))}finally{if(s)throw s.error}}})}iterator(e,r){var n,i;return Cpe(this,arguments,function*(){var s,a,d,u;(n=r?.signal)===null||n===void 0||n.throwIfAborted(),yield ku(Ui(this.createLevelDatabase(),r?.signal));try{for(var c=!0,l=gK(this.db.iterator(e)),m;m=yield ku(l.next()),s=m.done,!s;c=!0){u=m.value,c=!1;let p=u;(i=r?.signal)===null||i===void 0||i.throwIfAborted(),yield yield ku(p)}}catch(p){a={error:p}}finally{try{!c&&!s&&(d=l.return)&&(yield ku(d.call(l)))}finally{if(a)throw a.error}}})}put(e,r,n){var i;return Ac(this,void 0,void 0,function*(){return(i=n?.signal)===null||i===void 0||i.throwIfAborted(),yield Ui(this.createLevelDatabase(),n?.signal),Ui(this.db.put(String(e),r),n?.signal)})}delete(e,r){var n;return Ac(this,void 0,void 0,function*(){return(n=r?.signal)===null||n===void 0||n.throwIfAborted(),yield Ui(this.createLevelDatabase(),r?.signal),Ui(this.db.del(String(e)),r?.signal)})}isEmpty(e){var r,n,i,o;return Ac(this,void 0,void 0,function*(){try{for(var s=!0,a=gK(this.keys(e)),d;d=yield a.next(),r=d.done,!r;s=!0){o=d.value,s=!1;let u=o;return!1}}catch(u){n={error:u}}finally{try{!s&&!r&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return!0})}clear(){return Ac(this,void 0,void 0,function*(){yield this.createLevelDatabase(),yield this.db.clear(),yield this.compactUnderlyingStorage()})}batch(e,r){var n;return Ac(this,void 0,void 0,function*(){return(n=r?.signal)===null||n===void 0||n.throwIfAborted(),yield Ui(this.createLevelDatabase(),r?.signal),Ui(this.db.batch(e),r?.signal)})}createPartitionOperation(e,r){return Object.assign(Object.assign({},r),{sublevel:this.db.sublevel(e,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding})})}compactUnderlyingStorage(e){var r,n,i;return Ac(this,void 0,void 0,function*(){(r=e?.signal)===null||r===void 0||r.throwIfAborted(),yield Ui(this.createLevelDatabase(),e?.signal);let o=this.sublevelRange;if(!o)return;let s=this.root;if(s.db.supports.additionalMethods.compactRange)return Ui((i=(n=s.db).compactRange)===null||i===void 0?void 0:i.call(n,...o),e?.signal)})}get sublevelRange(){let e=this.db.prefix;if(!e)return;let r=e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1);return[e,r]}get root(){let e=this.db;for(let r=e.db;r&&r!==e;)e=r;return new t(this.config,e)}createLevelDatabase(){var e;return Ac(this,void 0,void 0,function*(){(e=this.db)!==null&&e!==void 0||(this.db=yield this.config.createLevelDatabase(this.config.location,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding}))})}};var Ih=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},BT=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},Io=function(t){return this instanceof Io?(this.v=t,this):new Io(t)},CT=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(p){return new Promise(function(g,b){o.push([m,p,g,b])>1||a(m,p)})})}function a(m,p){try{d(n[m](p))}catch(g){l(o[0][3],g)}}function d(m){m.value instanceof Io?Promise.resolve(m.value.v).then(u,c):l(o[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function l(m,p){m(p),o.shift(),o.length&&a(o[0][0],o[0][1])}},T1=class t{constructor(e,r){this.config=Object.assign({createLevelDatabase:Ru},e),this.db=r??new P1(Object.assign(Object.assign({},this.config),{valueEncoding:"binary"}))}open(){return Ih(this,void 0,void 0,function*(){return this.db.open()})}close(){return Ih(this,void 0,void 0,function*(){return this.db.close()})}partition(e){return Ih(this,void 0,void 0,function*(){let r=yield this.db.partition(e);return new t(Object.assign(Object.assign({},this.config),{location:""}),r)})}put(e,r,n){return Ih(this,void 0,void 0,function*(){return yield this.db.put(String(e),r,n),Or.parse(e.toString())})}get(e,r){return Ih(this,void 0,void 0,function*(){return yield this.db.get(String(e),r)})}has(e,r){return Ih(this,void 0,void 0,function*(){return this.db.has(String(e),r)})}delete(e,r){return Ih(this,void 0,void 0,function*(){return this.db.delete(String(e),r)})}isEmpty(e){return Ih(this,void 0,void 0,function*(){return this.db.isEmpty(e)})}putMany(e,r){return CT(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=BT(e),c;c=yield Io(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield Io(this.put(l.cid,l.block,r)),yield yield Io(l.cid)}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield Io(s.call(u)))}finally{if(o)throw o.error}}})}getMany(e,r){return CT(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=BT(e),c;c=yield Io(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield yield Io({cid:l,block:yield Io(this.get(l,r))})}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield Io(s.call(u)))}finally{if(o)throw o.error}}})}getAll(e){return CT(this,arguments,function*(){var n,i,o,s;let a=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);try{for(var d=!0,u=BT(a),c;c=yield Io(u.next()),n=c.done,!n;d=!0){s=c.value,d=!1;let[l,m]=s;yield yield Io({cid:Or.decode(l),block:m})}}catch(l){i={error:l}}finally{try{!d&&!n&&(o=u.return)&&(yield Io(o.call(u)))}finally{if(i)throw i.error}}})}deleteMany(e,r){return CT(this,arguments,function*(){var i,o,s,a;try{for(var d=!0,u=BT(e),c;c=yield Io(u.next()),i=c.done,!i;d=!0){a=c.value,d=!1;let l=a;yield Io(this.delete(l,r)),yield yield Io(l)}}catch(l){o={error:l}}finally{try{!d&&!i&&(s=u.return)&&(yield Io(s.call(u)))}finally{if(o)throw o.error}}})}clear(){return Ih(this,void 0,void 0,function*(){return this.db.clear()})}};h();var oI=Ut(Xa(),1);h();function WHe(t){return t[Symbol.asyncIterator]!=null}function HHe(t){if(WHe(t))return(async()=>{let r;for await(let n of t)r=n;return r})();let e;for(let r of t)e=r;return e}var $pe=HHe;h();h();h();h();h();var VHe=["string","number","bigint","symbol"],JHe=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Npe(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(VHe.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(YHe(t))return"Buffer";let r=ZHe(t);return r||"Object"}function YHe(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function ZHe(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(JHe.includes(e))return e}h();var ye=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};ye.uint=new ye(0,"uint",!0);ye.negint=new ye(1,"negint",!0);ye.bytes=new ye(2,"bytes",!0);ye.string=new ye(3,"string",!0);ye.array=new ye(4,"array",!1);ye.map=new ye(5,"map",!1);ye.tag=new ye(6,"tag",!1);ye.float=new ye(7,"float",!0);ye.false=new ye(7,"false",!0);ye.true=new ye(7,"true",!0);ye.null=new ye(7,"null",!0);ye.undefined=new ye(7,"undefined",!0);ye.break=new ye(7,"break",!0);var Ge=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};h();h();var I1=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",XHe=new TextDecoder,QHe=new TextEncoder;function OT(t){return I1&&globalThis.Buffer.isBuffer(t)}function qpe(t){return t instanceof Uint8Array?OT(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Lpe=I1?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Upe(t,e,r):(t,e,r)=>r-e>64?XHe.decode(t.subarray(e,r)):Upe(t,e,r),Fpe=I1?t=>t.length>64?globalThis.Buffer.from(t):jpe(t):t=>t.length>64?QHe.encode(t):jpe(t);var k1=I1?(t,e,r)=>OT(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),zpe=I1?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),qpe(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Gpe=I1?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Wpe(t,e){if(OT(t)&&OT(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function jpe(t){let e=[],r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function Upe(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,d,u,c;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(c=(i&31)<<6|a&63,c>127&&(o=c));break;case 3:a=t[e+1],d=t[e+2],(a&192)===128&&(d&192)===128&&(c=(i&15)<<12|(a&63)<<6|d&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:a=t[e+1],d=t[e+2],u=t[e+3],(a&192)===128&&(d&192)===128&&(u&192)===128&&(c=(i&15)<<18|(a&63)<<12|(d&63)<<6|u&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return eVe(n)}var Kpe=4096;function eVe(t){let e=t.length;if(e<=Kpe)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Kpe));return r}var tVe=256,$T=class{constructor(e=tVe){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Gpe(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=k1(n,0,this.cursor)}else r=zpe(this.chunks,this.cursor);return e&&this.reset(),r}};h();var qt="CBOR decode error:",bK="CBOR encode error:",B6=[];B6[23]=1;B6[24]=2;B6[25]=3;B6[26]=5;B6[27]=9;function kh(t,e,r){if(t.length-e<r)throw new Error(`${qt} not enough data for type`)}h();h();var ko=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Pc(t,e,r){kh(t,e,1);let n=t[e];if(r.strict===!0&&n<ko[0])throw new Error(`${qt} integer encoded in more bytes than necessary (strict decode)`);return n}function Tc(t,e,r){kh(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<ko[1])throw new Error(`${qt} integer encoded in more bytes than necessary (strict decode)`);return n}function Ic(t,e,r){kh(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<ko[2])throw new Error(`${qt} integer encoded in more bytes than necessary (strict decode)`);return n}function kc(t,e,r){kh(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<ko[3])throw new Error(`${qt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${qt} integers outside of the safe integer range are not supported`)}function Hpe(t,e,r,n){return new Ge(ye.uint,Pc(t,e+1,n),2)}function Vpe(t,e,r,n){return new Ge(ye.uint,Tc(t,e+1,n),3)}function Jpe(t,e,r,n){return new Ge(ye.uint,Ic(t,e+1,n),5)}function Ype(t,e,r,n){return new Ge(ye.uint,kc(t,e+1,n),9)}function Td(t,e){return ds(t,0,e.value)}function ds(t,e,r){if(r<ko[0]){let n=Number(r);t.push([e|n])}else if(r<ko[1]){let n=Number(r);t.push([e|24,n])}else if(r<ko[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<ko[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<ko[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${qt} encountered BigInt larger than allowable range`)}}Td.encodedSize=function(e){return ds.encodedSize(e.value)};ds.encodedSize=function(e){return e<ko[0]?1:e<ko[1]?2:e<ko[2]?3:e<ko[3]?5:9};Td.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};h();function Zpe(t,e,r,n){return new Ge(ye.negint,-1-Pc(t,e+1,n),2)}function Xpe(t,e,r,n){return new Ge(ye.negint,-1-Tc(t,e+1,n),3)}function Qpe(t,e,r,n){return new Ge(ye.negint,-1-Ic(t,e+1,n),5)}var vK=BigInt(-1),eme=BigInt(1);function tme(t,e,r,n){let i=kc(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Ge(ye.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${qt} integers outside of the safe integer range are not supported`);return new Ge(ye.negint,vK-BigInt(i),9)}function NT(t,e){let r=e.value,n=typeof r=="bigint"?r*vK-eme:r*-1-1;ds(t,e.type.majorEncoded,n)}NT.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*vK-eme:r*-1-1;return n<ko[0]?1:n<ko[1]?2:n<ko[2]?3:n<ko[3]?5:9};NT.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};h();function C6(t,e,r,n){kh(t,e,r+n);let i=k1(t,e+r,e+r+n);return new Ge(ye.bytes,i,r+n)}function rme(t,e,r,n){return C6(t,e,1,r)}function nme(t,e,r,n){return C6(t,e,2,Pc(t,e+1,n))}function ime(t,e,r,n){return C6(t,e,3,Tc(t,e+1,n))}function ome(t,e,r,n){return C6(t,e,5,Ic(t,e+1,n))}function sme(t,e,r,n){let i=kc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${qt} 64-bit integer bytes lengths not supported`);return C6(t,e,9,i)}function jT(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===ye.string?Fpe(t.value):t.value),t.encodedBytes}function R1(t,e){let r=jT(e);ds(t,e.type.majorEncoded,r.length),t.push(r)}R1.encodedSize=function(e){let r=jT(e);return ds.encodedSize(r.length)+r.length};R1.compareTokens=function(e,r){return nVe(jT(e),jT(r))};function nVe(t,e){return t.length<e.length?-1:t.length>e.length?1:Wpe(t,e)}h();function O6(t,e,r,n,i){let o=r+n;kh(t,e,o);let s=new Ge(ye.string,Lpe(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=k1(t,e+r,e+o)),s}function ame(t,e,r,n){return O6(t,e,1,r,n)}function cme(t,e,r,n){return O6(t,e,2,Pc(t,e+1,n),n)}function dme(t,e,r,n){return O6(t,e,3,Tc(t,e+1,n),n)}function ume(t,e,r,n){return O6(t,e,5,Ic(t,e+1,n),n)}function lme(t,e,r,n){let i=kc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${qt} 64-bit integer string lengths not supported`);return O6(t,e,9,i,n)}var fme=R1;h();function D1(t,e,r,n){return new Ge(ye.array,n,r)}function hme(t,e,r,n){return D1(t,e,1,r)}function pme(t,e,r,n){return D1(t,e,2,Pc(t,e+1,n))}function mme(t,e,r,n){return D1(t,e,3,Tc(t,e+1,n))}function yme(t,e,r,n){return D1(t,e,5,Ic(t,e+1,n))}function gme(t,e,r,n){let i=kc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${qt} 64-bit integer array lengths not supported`);return D1(t,e,9,i)}function bme(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${qt} indefinite length items not allowed`);return D1(t,e,1,1/0)}function UT(t,e){ds(t,ye.array.majorEncoded,e.value)}UT.compareTokens=Td.compareTokens;UT.encodedSize=function(e){return ds.encodedSize(e.value)};h();function M1(t,e,r,n){return new Ge(ye.map,n,r)}function vme(t,e,r,n){return M1(t,e,1,r)}function wme(t,e,r,n){return M1(t,e,2,Pc(t,e+1,n))}function _me(t,e,r,n){return M1(t,e,3,Tc(t,e+1,n))}function xme(t,e,r,n){return M1(t,e,5,Ic(t,e+1,n))}function Eme(t,e,r,n){let i=kc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${qt} 64-bit integer map lengths not supported`);return M1(t,e,9,i)}function Sme(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${qt} indefinite length items not allowed`);return M1(t,e,1,1/0)}function KT(t,e){ds(t,ye.map.majorEncoded,e.value)}KT.compareTokens=Td.compareTokens;KT.encodedSize=function(e){return ds.encodedSize(e.value)};h();function Ame(t,e,r,n){return new Ge(ye.tag,r,1)}function Pme(t,e,r,n){return new Ge(ye.tag,Pc(t,e+1,n),2)}function Tme(t,e,r,n){return new Ge(ye.tag,Tc(t,e+1,n),3)}function Ime(t,e,r,n){return new Ge(ye.tag,Ic(t,e+1,n),5)}function kme(t,e,r,n){return new Ge(ye.tag,kc(t,e+1,n),9)}function qT(t,e){ds(t,ye.tag.majorEncoded,e.value)}qT.compareTokens=Td.compareTokens;qT.encodedSize=function(e){return ds.encodedSize(e.value)};h();var dVe=20,uVe=21,lVe=22,fVe=23;function Rme(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${qt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Ge(ye.null,null,1):new Ge(ye.undefined,void 0,1)}function Dme(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${qt} indefinite length items not allowed`);return new Ge(ye.break,void 0,1)}function wK(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${qt} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${qt} Infinity values are not supported`)}return new Ge(ye.float,t,e)}function Mme(t,e,r,n){return wK(_K(t,e+1),3,n)}function Bme(t,e,r,n){return wK(xK(t,e+1),5,n)}function Cme(t,e,r,n){return wK(jme(t,e+1),9,n)}function LT(t,e,r){let n=e.value;if(n===!1)t.push([ye.float.majorEncoded|dVe]);else if(n===!0)t.push([ye.float.majorEncoded|uVe]);else if(n===null)t.push([ye.float.majorEncoded|lVe]);else if(n===void 0)t.push([ye.float.majorEncoded|fVe]);else{let i,o=!1;(!r||r.float64!==!0)&&($me(n),i=_K(Du,1),n===i||Number.isNaN(n)?(Du[0]=249,t.push(Du.slice(0,3)),o=!0):(Nme(n),i=xK(Du,1),n===i&&(Du[0]=250,t.push(Du.slice(0,5)),o=!0))),o||(hVe(n),i=jme(Du,1),Du[0]=251,t.push(Du.slice(0,9)))}}LT.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){$me(n);let i=_K(Du,1);if(n===i||Number.isNaN(n))return 3;if(Nme(n),i=xK(Du,1),n===i)return 5}return 9};var Ome=new ArrayBuffer(9),Id=new DataView(Ome,1),Du=new Uint8Array(Ome,0);function $me(t){if(t===1/0)Id.setUint16(0,31744,!1);else if(t===-1/0)Id.setUint16(0,64512,!1);else if(Number.isNaN(t))Id.setUint16(0,32256,!1);else{Id.setFloat32(0,t);let e=Id.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Id.setUint16(0,31744,!1);else if(r===0)Id.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?Id.setUint16(0,0):i<-14?Id.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Id.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function _K(t,e){if(t.length-e<2)throw new Error(`${qt} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Nme(t){Id.setFloat32(0,t,!1)}function xK(t,e){if(t.length-e<4)throw new Error(`${qt} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function hVe(t){Id.setFloat64(0,t,!1)}function jme(t,e){if(t.length-e<8)throw new Error(`${qt} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}LT.compareTokens=Td.compareTokens;function Vr(t,e,r){throw new Error(`${qt} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function FT(t){return()=>{throw new Error(`${qt} ${t}`)}}var Be=[];for(let t=0;t<=23;t++)Be[t]=Vr;Be[24]=Hpe;Be[25]=Vpe;Be[26]=Jpe;Be[27]=Ype;Be[28]=Vr;Be[29]=Vr;Be[30]=Vr;Be[31]=Vr;for(let t=32;t<=55;t++)Be[t]=Vr;Be[56]=Zpe;Be[57]=Xpe;Be[58]=Qpe;Be[59]=tme;Be[60]=Vr;Be[61]=Vr;Be[62]=Vr;Be[63]=Vr;for(let t=64;t<=87;t++)Be[t]=rme;Be[88]=nme;Be[89]=ime;Be[90]=ome;Be[91]=sme;Be[92]=Vr;Be[93]=Vr;Be[94]=Vr;Be[95]=FT("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)Be[t]=ame;Be[120]=cme;Be[121]=dme;Be[122]=ume;Be[123]=lme;Be[124]=Vr;Be[125]=Vr;Be[126]=Vr;Be[127]=FT("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)Be[t]=hme;Be[152]=pme;Be[153]=mme;Be[154]=yme;Be[155]=gme;Be[156]=Vr;Be[157]=Vr;Be[158]=Vr;Be[159]=bme;for(let t=160;t<=183;t++)Be[t]=vme;Be[184]=wme;Be[185]=_me;Be[186]=xme;Be[187]=Eme;Be[188]=Vr;Be[189]=Vr;Be[190]=Vr;Be[191]=Sme;for(let t=192;t<=215;t++)Be[t]=Ame;Be[216]=Pme;Be[217]=Tme;Be[218]=Ime;Be[219]=kme;Be[220]=Vr;Be[221]=Vr;Be[222]=Vr;Be[223]=Vr;for(let t=224;t<=243;t++)Be[t]=FT("simple values are not supported");Be[244]=Vr;Be[245]=Vr;Be[246]=Vr;Be[247]=Rme;Be[248]=FT("simple values are not supported");Be[249]=Mme;Be[250]=Bme;Be[251]=Cme;Be[252]=Vr;Be[253]=Vr;Be[254]=Vr;Be[255]=Dme;var Mu=[];for(let t=0;t<24;t++)Mu[t]=new Ge(ye.uint,t,1);for(let t=-1;t>=-24;t--)Mu[31-t]=new Ge(ye.negint,t,1);Mu[64]=new Ge(ye.bytes,new Uint8Array(0),1);Mu[96]=new Ge(ye.string,"",1);Mu[128]=new Ge(ye.array,0,1);Mu[160]=new Ge(ye.map,0,1);Mu[244]=new Ge(ye.false,!1,1);Mu[245]=new Ge(ye.true,!0,1);Mu[246]=new Ge(ye.null,null,1);function mVe(){let t=[];return t[ye.uint.major]=Td,t[ye.negint.major]=NT,t[ye.bytes.major]=R1,t[ye.string.major]=fme,t[ye.array.major]=UT,t[ye.map.major]=KT,t[ye.tag.major]=qT,t[ye.float.major]=LT,t}var hRt=mVe(),pRt=new $T,zT=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${bK} object contains circular references`);return new t(r,e)}},Wm={null:new Ge(ye.null,null),undefined:new Ge(ye.undefined,void 0),true:new Ge(ye.true,!0),false:new Ge(ye.false,!1),emptyArray:new Ge(ye.array,0),emptyMap:new Ge(ye.map,0)},Hm={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Ge(ye.float,t):t>=0?new Ge(ye.uint,t):new Ge(ye.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Ge(ye.uint,t):new Ge(ye.negint,t)},Uint8Array(t,e,r,n){return new Ge(ye.bytes,t)},string(t,e,r,n){return new Ge(ye.string,t)},boolean(t,e,r,n){return t?Wm.true:Wm.false},null(t,e,r,n){return Wm.null},undefined(t,e,r,n){return Wm.undefined},ArrayBuffer(t,e,r,n){return new Ge(ye.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Ge(ye.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Wm.emptyArray,new Ge(ye.break)]:Wm.emptyArray;n=zT.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=EK(s,r,n);return r.addBreakTokens?[new Ge(ye.array,t.length),i,new Ge(ye.break)]:[new Ge(ye.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[Wm.emptyMap,new Ge(ye.break)]:Wm.emptyMap;n=zT.createCheck(n,t);let a=[],d=0;for(let u of o)a[d++]=[EK(u,r,n),EK(i?t.get(u):t[u],r,n)];return yVe(a,r),r.addBreakTokens?[new Ge(ye.map,s),a,new Ge(ye.break)]:[new Ge(ye.map,s),a]}};Hm.Map=Hm.Object;Hm.Buffer=Hm.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Hm[`${t}Array`]=Hm.DataView;function EK(t,e={},r){let n=Npe(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Hm[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=Hm[n];if(!o)throw new Error(`${bK} unsupported type: ${n}`);return o(t,n,e,r)}function yVe(t,e){e.mapSorter&&t.sort(e.mapSorter)}h();var gVe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},SK=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=Mu[e];if(r===void 0){let n=Be[e];if(!n)throw new Error(`${qt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}},$6=Symbol.for("DONE"),GT=Symbol.for("BREAK");function bVe(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=N6(e,r);if(o===GT){if(t.value===1/0)break;throw new Error(`${qt} got unexpected break to lengthed array`)}if(o===$6)throw new Error(`${qt} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function vVe(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=N6(e,r);if(a===GT){if(t.value===1/0)break;throw new Error(`${qt} got unexpected break to lengthed map`)}if(a===$6)throw new Error(`${qt} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${qt} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${qt} found repeat map key "${a}"`);let d=N6(e,r);if(d===$6)throw new Error(`${qt} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,d):i[a]=d}return n?o:i}function N6(t,e){if(t.done())return $6;let r=t.next();if(r.type===ye.break)return GT;if(r.type.terminal)return r.value;if(r.type===ye.array)return bVe(r,t,e);if(r.type===ye.map)return vVe(r,t,e);if(r.type===ye.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=N6(t,e);return e.tags[r.value](n)}throw new Error(`${qt} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ume(t,e){if(!(t instanceof Uint8Array))throw new Error(`${qt} data to decode must be a Uint8Array`);e=Object.assign({},gVe,e);let r=e.tokenizer||new SK(t,e),n=N6(r,e);if(n===$6)throw new Error(`${qt} did not find any content to decode`);if(n===GT)throw new Error(`${qt} got unexpected break`);return[n,t.subarray(r.pos())]}function AK(t,e){let[r,n]=Ume(t,e);if(n.length>0)throw new Error(`${qt} too many terminals, data makes no sense`);return r}var qme=42;function xVe(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function EVe(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=va.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Ge(ye.tag,qme),new Ge(ye.bytes,r)]}function SVe(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function AVe(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Kme={float64:!0,typeEncoders:{Object:EVe,undefined:SVe,number:AVe}},TRt={...Kme,typeEncoders:{...Kme.typeEncoders}};function PVe(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return va.decode(t.subarray(1))}var WT={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};WT.tags[qme]=PVe;var IRt={...WT,tags:WT.tags.slice()};var Lme=113;var Fme=t=>AK(xVe(t),WT);var Sye=Ut(Xa(),1);h();var Gme=0,TVe="identity",Wme=Bd,IVe=t=>py(Gme,Wme(t)),Hme={code:Gme,name:TVe,encode:Wme,digest:IVe};h();var Vme=Ut(Xa(),1);var kVe=async(t,e,r,n,i,o,s,a)=>{let d=await s.get(t,a),u=Fme(d),c=u,l=r;for(;n.length>0;){let m=n[0];if(m in c){n.shift(),l=`${l}/${m}`;let p=Or.asCID(c[m]);if(p!=null)return{entry:{type:"object",name:e,path:r,cid:t,node:d,depth:o,size:BigInt(d.length),content:async function*(){yield u}},next:{cid:p,name:m,path:l,toResolve:n}};c=c[m]}else throw(0,Vme.default)(new Error(`No property named ${m} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:d,depth:o,size:BigInt(d.length),content:async function*(){yield u}}}},Jme=kVe;h();var Yme=Ut(Xa(),1);h();function RVe(t,e,r,n){let i=BigInt(t.length),o=BigInt(e+i);return r>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(t=t.subarray(0,Number(n-e))),r>=e&&r<o&&(t=t.subarray(Number(r-e))),t)}var Fg=RVe;h();var j6=Ut(Xa(),1),DVe=(t,e=0,r=t)=>{let n=BigInt(t),i=BigInt(e??0),o=BigInt(r);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,j6.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,j6.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,j6.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,j6.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},B1=DVe;var MVe=t=>{async function*e(r={}){let{start:n,end:i}=B1(t.length,r.offset,r.length),o=Fg(t,0n,n,i);r.onProgress?.(new si("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},BVe=async(t,e,r,n,i,o,s,a)=>{if(n.length>0)throw(0,Yme.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let d=TS(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:MVe(d.digest),depth:o,size:BigInt(d.digest.length),node:d.digest}}},Zme=BVe;h();var Xme=Ut(Xa(),1);var CVe=t=>{async function*e(r={}){let{start:n,end:i}=B1(t.length,r.offset,r.length),o=Fg(t,0n,n,i);r.onProgress?.(new si("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},OVe=async(t,e,r,n,i,o,s,a)=>{if(n.length>0)throw(0,Xme.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let d=await s.get(t,a);return{entry:{type:"raw",name:e,path:r,cid:t,content:CVe(d),depth:o,size:BigInt(d.length),node:d}}},Qme=OVe;h();var W6=Ut(Xa(),1);h();var $Ve=async function(t){return(await p3.encode(t)).slice(0,8).reverse()},NVe=async(t,e,r)=>{await Promise.all(t.map(async n=>{if(n.Name==null)throw new Error("Unexpected Link without a Name");if(n.Name.length===2){let i=parseInt(n.Name,16);e._putObjectAt(i,new Yu({hash:r._options.hash,bits:r._options.bits},e,i));return}await r.put(n.Name.substring(2),!0)}))},eye=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),jVe=t=>{let e=t.bucket,r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},tye=async(t,e,r,n,i)=>{if(n==null){let c=g3({hashFn:$Ve});n={rootBucket:c,hamtDepth:1,lastBucket:c}}await NVe(t.Links,n.lastBucket,n.rootBucket);let o=await n.rootBucket._findNewBucketAndPos(e),s=eye(o.pos),a=jVe(o);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],s=eye(n.lastBucket._posAtParent));let d=t.Links.find(c=>{if(c.Name==null)return!1;let l=c.Name.substring(0,2),m=c.Name.substring(2);return!(l!==s||m!==""&&m!==e)});if(d==null)return;if(d.Name!=null&&d.Name.substring(2)===e)return d.Hash;n.hamtDepth++;let u=await r.get(d.Hash,i);return t=xf(u),tye(t,e,r,n,i)},rye=tye;h();h();h();function UVe(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var HT=UVe;function KVe(t){return t[Symbol.asyncIterator]!=null}function qVe(t,e){if(KVe(t))return async function*(){for await(let a of t)await e(a)&&(yield a)}();let r=HT(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let a of r)await e(a)&&(yield a)}();let s=e;return function*(){o===!0&&(yield n);for(let a of r)s(a)&&(yield a)}()}var nye=qVe;h();function LVe(t){return t[Symbol.asyncIterator]!=null}function FVe(t,e){if(LVe(t))return async function*(){for await(let a of t)yield e(a)}();let r=HT(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let a of r)yield e(a)}();let s=e;return function*(){yield o;for(let a of r)yield s(a)}()}var C1=FVe;h();h();function Rh(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var VT=globalThis.CustomEvent??Event;async function*zg(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=Rh(),a=Rh(),d=!1,u,c=!1;i.addEventListener("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let g of t){if(o.length===r&&(s=Rh(),await s.promise),c)break;let b={done:!1};o.push(b),g().then(S=>{b.done=!0,b.ok=!0,b.value=S,i.dispatchEvent(new VT("task-complete"))},S=>{b.done=!0,b.err=S,i.dispatchEvent(new VT("task-complete"))})}d=!0,i.dispatchEvent(new VT("task-complete"))}catch(g){u=g,i.dispatchEvent(new VT("task-complete"))}});function l(){return n?o[0]?.done:!!o.find(g=>g.done)}function*m(){for(;o.length>0&&o[0].done;){let g=o[0];if(o.shift(),g.ok)yield g.value;else throw c=!0,s.resolve(),g.err;s.resolve()}}function*p(){for(;l();)for(let g=0;g<o.length;g++)if(o[g].done){let b=o[g];if(o.splice(g,1),g--,b.ok)yield b.value;else throw c=!0,s.resolve(),b.err;s.resolve()}}for(;;){if(l()||(a=Rh(),await a.promise),u!=null)throw u;if(n?yield*m():yield*p(),d&&o.length===0)break}}h();h();h();var JT=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},O1=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new JT(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new JT(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var PK=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function $1(t={}){return zVe(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function zVe(t,e){e=e??{};let r=e.onEnd,n=new O1,i,o,s,a=Rh(),d=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((S,A)=>{o=I=>{o=null,n.push(I);try{S(t(n))}catch(P){A(P)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=Rh()})}},u=S=>o!=null?o(S):(n.push(S),i),c=S=>(n=new O1,o!=null?o({error:S}):(n.push({error:S}),i)),l=S=>{if(s)return i;if(e?.objectMode!==!0&&S?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:S})},m=S=>s?i:(s=!0,S!=null?c(S):u({done:!0})),p=()=>(n=new O1,m(),{done:!0}),g=S=>(m(S),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:d,return:p,throw:g,push:l,end:m,get readableLength(){return n.size},onEmpty:async S=>{let A=S?.signal;if(A?.throwIfAborted(),n.isEmpty())return;let I,P;A!=null&&(I=new Promise(($,N)=>{P=()=>{N(new PK)},A.addEventListener("abort",P)}));try{await Promise.race([a.promise,I])}finally{P!=null&&A!=null&&A?.removeEventListener("abort",P)}}},r==null)return i;let b=i;return i={[Symbol.asyncIterator](){return this},next(){return b.next()},throw(S){return b.throw(S),r!=null&&(r(S),r=void 0),{done:!0}},return(){return b.return(),r!=null&&(r(),r=void 0),{done:!0}},push:l,end(S){return b.end(S),r!=null&&(r(S),r=void 0),i},get readableLength(){return b.readableLength},onEmpty:S=>b.onEmpty(S)},i}h();function GVe(t){return t[Symbol.asyncIterator]!=null}function WVe(...t){let e=[];for(let r of t)GVe(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=$1({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var iye=WVe;function N1(t,...e){if(t==null)throw new Error("Empty pipeline");if(TK(t)){let n=t;t=()=>n.source}else if(sye(t)||oye(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&TK(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)TK(r[n])&&(r[n]=VVe(r[n]));return HVe(...r)}var HVe=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},oye=t=>t?.[Symbol.asyncIterator]!=null,sye=t=>t?.[Symbol.iterator]!=null,TK=t=>t==null?!1:t.sink!=null&&t.source!=null,VVe=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=$1({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=t.source;if(oye(o))i=async function*(){yield*o,n.end()};else if(sye(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return iye(n,i())}return t.source};var JVe=(t,e,r,n,i,o,s)=>{async function*a(d={}){let u=d.offset??0,c=d.length??e.Links.length,l=e.Links.slice(u,c);d.onProgress?.(new si("unixfs:exporter:walk:directory",{cid:t})),yield*N1(l,m=>C1(m,p=>async()=>{let g=p.Name??"",b=`${n}/${g}`;return(await i(p.Hash,g,b,[],o+1,s,d)).entry}),m=>zg(m,{ordered:!0}),m=>nye(m,p=>p!=null))}return a},aye=JVe;h();var Wg=Ut(Xa(),1);h();h();var kK=Ut(dye(),1);h();var K6=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},RK=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},uye=t=>globalThis.DOMException===void 0?new RK(t):new DOMException(t),lye=t=>{let e=t.reason===void 0?uye("This operation was aborted."):t.reason;return e instanceof Error?e:uye(e)};function DK(t,e,r,n){let i,o=new Promise((s,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:d}=n;d.aborted&&a(lye(d)),d.addEventListener("abort",()=>{a(lye(d))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(c){a(c)}return}let d=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new K6(d);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{s(await t)}catch(d){a(d)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}h();h();function MK(t,e,r){let n=0,i=t.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Gg=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Dh,BK=class{constructor(){Dh.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&Gg(this,Dh,"f")[this.size-1].priority>=r.priority){Gg(this,Dh,"f").push(n);return}let i=MK(Gg(this,Dh,"f"),n,(o,s)=>s.priority-o.priority);Gg(this,Dh,"f").splice(i,0,n)}dequeue(){let e=Gg(this,Dh,"f").shift();return e?.run}filter(e){return Gg(this,Dh,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return Gg(this,Dh,"f").length}};Dh=new WeakMap;var fye=BK;var ti=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},st=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ri,L6,F6,Jm,rI,z6,ZT,Bu,q6,Rc,XT,Dc,G6,Vm,QT,hye,pye,gye,mye,yye,eI,CK,OK,nI,bye,tI,iI=class extends Error{},$K=class extends kK.default{constructor(e){var r,n,i,o;if(super(),Ri.add(this),L6.set(this,void 0),F6.set(this,void 0),Jm.set(this,0),rI.set(this,void 0),z6.set(this,void 0),ZT.set(this,0),Bu.set(this,void 0),q6.set(this,void 0),Rc.set(this,void 0),XT.set(this,void 0),Dc.set(this,0),G6.set(this,void 0),Vm.set(this,void 0),QT.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:fye,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);ti(this,L6,e.carryoverConcurrencyCount,"f"),ti(this,F6,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),ti(this,rI,e.intervalCap,"f"),ti(this,z6,e.interval,"f"),ti(this,Rc,new e.queueClass,"f"),ti(this,XT,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,ti(this,QT,e.throwOnTimeout===!0,"f"),ti(this,Vm,e.autoStart===!1,"f")}get concurrency(){return st(this,G6,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);ti(this,G6,e,"f"),st(this,Ri,"m",nI).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:st(this,QT,"f"),...r},new Promise((n,i)=>{st(this,Rc,"f").enqueue(async()=>{var o,s,a;ti(this,Dc,(s=st(this,Dc,"f"),s++,s),"f"),ti(this,Jm,(a=st(this,Jm,"f"),a++,a),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted)throw new iI("The task was aborted.");let d=e({signal:r.signal});r.timeout&&(d=DK(Promise.resolve(d),r.timeout)),r.signal&&(d=Promise.race([d,st(this,Ri,"m",bye).call(this,r.signal)]));let u=await d;n(u),this.emit("completed",u)}catch(d){if(d instanceof K6&&!r.throwOnTimeout){n();return}i(d),this.emit("error",d)}finally{st(this,Ri,"m",gye).call(this)}},r),this.emit("add"),st(this,Ri,"m",eI).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return st(this,Vm,"f")?(ti(this,Vm,!1,"f"),st(this,Ri,"m",nI).call(this),this):this}pause(){ti(this,Vm,!0,"f")}clear(){ti(this,Rc,new(st(this,XT,"f")),"f")}async onEmpty(){st(this,Rc,"f").size!==0&&await st(this,Ri,"m",tI).call(this,"empty")}async onSizeLessThan(e){st(this,Rc,"f").size<e||await st(this,Ri,"m",tI).call(this,"next",()=>st(this,Rc,"f").size<e)}async onIdle(){st(this,Dc,"f")===0&&st(this,Rc,"f").size===0||await st(this,Ri,"m",tI).call(this,"idle")}get size(){return st(this,Rc,"f").size}sizeBy(e){return st(this,Rc,"f").filter(e).length}get pending(){return st(this,Dc,"f")}get isPaused(){return st(this,Vm,"f")}};L6=new WeakMap,F6=new WeakMap,Jm=new WeakMap,rI=new WeakMap,z6=new WeakMap,ZT=new WeakMap,Bu=new WeakMap,q6=new WeakMap,Rc=new WeakMap,XT=new WeakMap,Dc=new WeakMap,G6=new WeakMap,Vm=new WeakMap,QT=new WeakMap,Ri=new WeakSet,hye=function(){return st(this,F6,"f")||st(this,Jm,"f")<st(this,rI,"f")},pye=function(){return st(this,Dc,"f")<st(this,G6,"f")},gye=function(){var e;ti(this,Dc,(e=st(this,Dc,"f"),e--,e),"f"),st(this,Ri,"m",eI).call(this),this.emit("next")},mye=function(){st(this,Ri,"m",OK).call(this),st(this,Ri,"m",CK).call(this),ti(this,q6,void 0,"f")},yye=function(){let e=Date.now();if(st(this,Bu,"f")===void 0){let r=st(this,ZT,"f")-e;if(r<0)ti(this,Jm,st(this,L6,"f")?st(this,Dc,"f"):0,"f");else return st(this,q6,"f")===void 0&&ti(this,q6,setTimeout(()=>{st(this,Ri,"m",mye).call(this)},r),"f"),!0}return!1},eI=function(){if(st(this,Rc,"f").size===0)return st(this,Bu,"f")&&clearInterval(st(this,Bu,"f")),ti(this,Bu,void 0,"f"),this.emit("empty"),st(this,Dc,"f")===0&&this.emit("idle"),!1;if(!st(this,Vm,"f")){let e=!st(this,Ri,"a",yye);if(st(this,Ri,"a",hye)&&st(this,Ri,"a",pye)){let r=st(this,Rc,"f").dequeue();return r?(this.emit("active"),r(),e&&st(this,Ri,"m",CK).call(this),!0):!1}}return!1},CK=function(){st(this,F6,"f")||st(this,Bu,"f")!==void 0||(ti(this,Bu,setInterval(()=>{st(this,Ri,"m",OK).call(this)},st(this,z6,"f")),"f"),ti(this,ZT,Date.now()+st(this,z6,"f"),"f"))},OK=function(){st(this,Jm,"f")===0&&st(this,Dc,"f")===0&&st(this,Bu,"f")&&(clearInterval(st(this,Bu,"f")),ti(this,Bu,void 0,"f")),ti(this,Jm,st(this,L6,"f")?st(this,Dc,"f"):0,"f"),st(this,Ri,"m",nI).call(this)},nI=function(){for(;st(this,Ri,"m",eI).call(this););},bye=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new iI("The task was aborted."))},{once:!0})})},tI=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};var vye=$K;async function wye(t,e,r,n,i,o,s){if(e instanceof Uint8Array){let u=Fg(e,n,i,o);r.push(u);return}if(e.Data==null)throw(0,Wg.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=fo.unmarshal(e.Data)}catch(u){throw(0,Wg.default)(u,"ERR_NOT_UNIXFS")}if(a.data!=null){let u=a.data,c=Fg(u,n,i,o);r.push(c),n+=BigInt(c.byteLength)}let d=[];if(e.Links.length!==a.blockSizes.length)throw(0,Wg.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let u=0;u<e.Links.length;u++){let c=e.Links[u],l=n,m=l+a.blockSizes[u];if((i>=l&&i<m||o>=l&&o<=m||i<l&&o>m)&&d.push({link:c,blockStart:n}),n=m,n>o)break}await N1(d,u=>C1(u,c=>async()=>{let l=await t.get(c.link.Hash,s);return{...c,block:l}}),u=>zg(u,{ordered:!0}),async u=>{for await(let{link:c,block:l,blockStart:m}of u){let p;switch(c.Hash.code){case W2:p=xf(l);break;case ap:p=l;break;default:r.end((0,Wg.default)(new Error(`Unsupported codec: ${c.Hash.code}`),"ERR_NOT_UNIXFS"));return}let g=new vye({concurrency:1});g.on("error",b=>{r.end(b)}),g.add(async()=>{s.onProgress?.(new si("unixfs:exporter:walk:file",{cid:c.Hash})),await wye(t,p,r,m,i,o,s)}),await g.onIdle()}}),n>=o&&r.end()}var XVe=(t,e,r,n,i,o,s)=>{async function*a(d={}){let u=r.fileSize();if(u===void 0)throw new Error("File was a directory");let{start:c,end:l}=B1(u,d.offset,d.length);if(l===0n)return;let m=0n,p=l-c,g=$1();d.onProgress?.(new si("unixfs:exporter:walk:file",{cid:t})),wye(s,e,g,0n,c,l,d).catch(b=>{g.end(b)});for await(let b of g)if(b!=null){if(m+=BigInt(b.byteLength),m>p)throw g.end(),(0,Wg.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");m===p&&g.end(),d.onProgress?.(new si("unixfs:exporter:progress:unixfs:file",{bytesRead:m,totalBytes:p,fileSize:u})),yield b}if(m<p)throw(0,Wg.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return a},NK=XVe;h();var QVe=(t,e,r,n,i,o,s)=>{function a(d={}){return d.onProgress?.(new si("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),_ye(e,n,i,o,s,d)}return a};async function*_ye(t,e,r,n,i,o){let s=t.Links,a=N1(s,d=>C1(d,u=>async()=>{let c=u.Name!=null?u.Name.substring(2):null;if(c!=null&&c!==""){let l=await r(u.Hash,c,`${e}/${c}`,[],n+1,i,o);return{entries:l.entry==null?[]:[l.entry]}}else{let l=await i.get(u.Hash,o);return t=xf(l),o.onProgress?.(new si("unixfs:exporter:walk:hamt-sharded-directory",{cid:u.Hash})),{entries:_ye(t,e,r,n,i,o)}}}),d=>zg(d,{ordered:!0}));for await(let{entries:d}of a)yield*d}var xye=QVe;var eJe=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,tJe={raw:NK,file:NK,directory:aye,"hamt-sharded-directory":xye,metadata:(t,e,r,n,i,o,s)=>()=>[],symlink:(t,e,r,n,i,o,s)=>()=>[]},rJe=async(t,e,r,n,i,o,s,a)=>{let d=await s.get(t,a),u=xf(d),c,l;if(e==null&&(e=t.toString()),u.Data==null)throw(0,W6.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{c=fo.unmarshal(u.Data)}catch(p){throw(0,W6.default)(p,"ERR_NOT_UNIXFS")}if(r==null&&(r=e),n.length>0){let p;if(c?.type==="hamt-sharded-directory"?p=await rye(u,n[0],s):p=eJe(u,n[0]),p==null)throw(0,W6.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let g=n.shift(),b=`${r}/${g}`;l={cid:p,toResolve:n,name:g??"",path:b}}let m=tJe[c.type](t,u,c,r,i,o,s);if(m==null)throw(0,W6.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return c.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:m,unixfs:c,depth:o,node:u,size:c.fileSize()},next:l}:{entry:{type:"file",name:e,path:r,cid:t,content:m,unixfs:c,depth:o,node:u,size:c.fileSize()},next:l}},Eye=rJe;var nJe={[W2]:Eye,[ap]:Qme,[Lme]:Jme,[Hme.code]:Zme},Aye=async(t,e,r,n,i,o,s)=>{let a=nJe[t.code];if(a==null)throw(0,Sye.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,r,n,Aye,i,o,s)},Pye=Aye;var iJe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),oJe=t=>{if(t instanceof Uint8Array)return{cid:Or.decode(t),toResolve:[]};let e=Or.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=iJe(t);return{cid:Or.parse(r[0]),toResolve:r.slice(1)}}throw(0,oI.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*sJe(t,e,r={}){let{cid:n,toResolve:i}=oJe(t),o=n.toString(),s=o,a=i.length;for(;;){let d=await Pye(n,o,s,i,a,e,r);if(d.entry==null&&d.next==null)throw(0,oI.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(d.entry!=null&&(yield d.entry),d.next==null)return;i=d.next.toResolve,n=d.next.cid,o=d.next.name,s=d.next.path}}async function Tye(t,e,r={}){let n=await $pe(sJe(t,e,r));if(n==null)throw(0,oI.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return n}var Iye=Ut(h4(),1),Ym=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},aJe=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},Hg=class{constructor(e={}){this.config=Object.assign({blockstoreLocation:"DATASTORE",createLevelDatabase:Ru},e),this.blockstore=new T1({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase})}open(){return Ym(this,void 0,void 0,function*(){yield this.blockstore.open()})}close(){return Ym(this,void 0,void 0,function*(){yield this.blockstore.close()})}put(e,r,n,i){var o,s,a,d,u,c;return Ym(this,void 0,void 0,function*(){let l=yield this.getBlockstoreForStoringData(e,r,n),m=r_([{content:i}],l,{cidVersion:1}),p;try{for(var g=!0,b=aJe(m),S;S=yield b.next(),o=S.done,!o;g=!0)d=S.value,g=!1,p=d}catch(A){s={error:A}}finally{try{!g&&!o&&(a=b.return)&&(yield a.call(b))}finally{if(s)throw s.error}}return{dataSize:Number((c=(u=p.unixfs)===null||u===void 0?void 0:u.fileSize())!==null&&c!==void 0?c:p.size)}})}get(e,r,n){return Ym(this,void 0,void 0,function*(){let i=yield this.getBlockstoreForStoringData(e,r,n);if(!(yield i.has(n)))return;let s=yield Tye(n,i),a=s.content(),d=new Iye.Readable({read(){return Ym(this,void 0,void 0,function*(){let c=yield a.next();c.done?this.push(null):this.push(c.value)})}}),u=s.size;return(s.type==="file"||s.type==="directory")&&(u=s.unixfs.fileSize()),{dataSize:Number(u),dataStream:d}})}delete(e,r,n){return Ym(this,void 0,void 0,function*(){yield(yield this.getBlockstoreForStoringData(e,r,n)).clear()})}clear(){return Ym(this,void 0,void 0,function*(){yield this.blockstore.clear()})}getBlockstoreForStoringData(e,r,n){return Ym(this,void 0,void 0,function*(){let i="data";return yield(yield(yield(yield this.blockstore.partition(i)).partition(e)).partition(r)).partition(n)})}};h();h();var no=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},H6=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(u){o({value:u,done:a})},s)}},Vg=function(t){return this instanceof Vg?(this.v=t,this):new Vg(t)},cJe=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){n[m]&&(i[m]=function(p){return new Promise(function(g,b){o.push([m,p,g,b])>1||a(m,p)})})}function a(m,p){try{d(n[m](p))}catch(g){l(o[0][3],g)}}function d(m){m.value instanceof Vg?Promise.resolve(m.value.v).then(u,c):l(o[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function l(m,p){m(p),o.shift(),o.length&&a(o[0][0],o[0][1])}},kye="index",Mh=class t{constructor(e){this.config=Object.assign({createLevelDatabase:Ru},e),this.db=new P1({location:this.config.location,createLevelDatabase:this.config.createLevelDatabase,keyEncoding:"utf8"})}open(){return no(this,void 0,void 0,function*(){yield this.db.open()})}close(){return no(this,void 0,void 0,function*(){yield this.db.close()})}clear(){return no(this,void 0,void 0,function*(){yield this.db.clear()})}put(e,r,n,i){return no(this,void 0,void 0,function*(){if(wx(n))throw new oe(ne.IndexMissingIndexableProperty,"Index must include at least one valid indexable property");let o={messageCid:r,indexes:n},s=[];for(let c in n){let l=n[c];if(Array.isArray(l))for(let m of l){let p=this.createPutIndexedItemOperation(e,o,c,m);s.push(p)}else{let m=this.createPutIndexedItemOperation(e,o,c,l);s.push(m)}}let a=this.createOperationForIndexesLookupPartition(e,{type:"put",key:r,value:JSON.stringify(n)});s.push(a);let d=yield Promise.all(s);yield(yield this.db.partition(e)).batch(d,i)})}delete(e,r,n){return no(this,void 0,void 0,function*(){let i=[],o=yield this.getIndexes(e,r);if(o===void 0)return;let s=this.createOperationForIndexesLookupPartition(e,{type:"del",key:r});i.push(s);for(let u in o){let c=o[u];if(Array.isArray(c))for(let l of c){let m=this.createDeleteIndexedItemOperation(e,r,u,l);i.push(m)}else{let l=this.createDeleteIndexedItemOperation(e,r,u,c);i.push(l)}}let a=yield Promise.all(i);yield(yield this.db.partition(e)).batch(a,n)})}createPutIndexedItemOperation(e,r,n,i){return no(this,void 0,void 0,function*(){let{messageCid:o}=r,s=t.keySegmentJoin(t.encodeValue(i),o);return this.createOperationForIndexPartition(e,n,{type:"put",key:s,value:JSON.stringify(r)})})}createDeleteIndexedItemOperation(e,r,n,i){return no(this,void 0,void 0,function*(){let o=t.keySegmentJoin(t.encodeValue(i),r);return this.createOperationForIndexPartition(e,n,{type:"del",key:o})})}createOperationForIndexPartition(e,r,n){return no(this,void 0,void 0,function*(){let i=yield this.db.partition(e),o=t.getIndexPartitionName(r);return i.createPartitionOperation(o,n)})}createOperationForIndexesLookupPartition(e,r){return no(this,void 0,void 0,function*(){return(yield this.db.partition(e)).createPartitionOperation(kye,r)})}static getIndexPartitionName(e){return`__${e}__`}getIndexPartition(e,r){return no(this,void 0,void 0,function*(){let n=t.getIndexPartitionName(r);return(yield this.db.partition(e)).partition(n)})}getIndexesLookupPartition(e){return no(this,void 0,void 0,function*(){return(yield this.db.partition(e)).partition(kye)})}query(e,r,n,i){return no(this,void 0,void 0,function*(){return t.shouldQueryWithInMemoryPaging(r,n)?this.queryWithInMemoryPaging(e,r,n,i):this.queryWithIteratorPaging(e,r,n,i)})}queryWithIteratorPaging(e,r,n,i){var o,s,a,d;return no(this,void 0,void 0,function*(){let{cursor:u,limit:c}=n,l=u?this.createStartingKeyFromCursor(u):"",m=[];try{for(var p=!0,g=H6(this.getIndexIterator(e,l,n,i)),b;b=yield g.next(),o=b.done,!o;p=!0){d=b.value,p=!1;let S=d;if(c!==void 0&&c===m.length)break;let{indexes:A}=S;Hn.matchAnyFilter(A,r)&&m.push(S)}}catch(S){s={error:S}}finally{try{!p&&!o&&(a=g.return)&&(yield a.call(g))}finally{if(s)throw s.error}}return m})}getIndexIterator(e,r,n,i){return cJe(this,arguments,function*(){var s,a,d,u;let{sortProperty:c,sortDirection:l=ns.Ascending,cursor:m}=n,p={gt:r};l===ns.Descending&&(p.reverse=!0,m!==void 0&&(p.lt=r,delete p.gt));let g=yield Vg(this.getIndexPartition(e,c));try{for(var b=!0,S=H6(g.iterator(p,i)),A;A=yield Vg(S.next()),s=A.done,!s;b=!0){u=A.value,b=!1;let[I,P]=u,{indexes:$,messageCid:N}=JSON.parse(P);yield yield Vg({indexes:$,messageCid:N})}}catch(I){a={error:I}}finally{try{!b&&!s&&(d=S.return)&&(yield Vg(d.call(S)))}finally{if(a)throw a.error}}})}createStartingKeyFromCursor(e){let{messageCid:r,value:n}=e;return t.keySegmentJoin(t.encodeValue(n),r)}static createCursorFromLastArrayItem(e,r){if(e.length>0)return this.createCursorFromItem(e.at(-1),r)}static createCursorFromItem(e,r){let{messageCid:n,indexes:i}=e,o=i[r];if(o===void 0)throw new oe(ne.IndexInvalidCursorSortProperty,`the sort property '${r}' is not defined within the given item.`);if(typeof o=="boolean"||Array.isArray(o))throw new oe(ne.IndexInvalidCursorValueType,`only string or number values are supported for cursors, a(n) ${typeof o} was given.`);return{messageCid:n,value:o}}queryWithInMemoryPaging(e,r,n,i){return no(this,void 0,void 0,function*(){let{sortProperty:o,sortDirection:s=ns.Ascending,cursor:a,limit:d}=n,u=a?this.createStartingKeyFromCursor(a):void 0,c=new Map;r.length===0&&(r=[{}]);try{yield Promise.all(r.map(g=>this.executeSingleFilterQuery(e,g,o,c,i)))}catch(g){if(g.code===ne.IndexInvalidSortPropertyInMemory)return[]}let l=[...c.values()].sort((g,b)=>this.sortItems(g,b,o,s)),m=u!==void 0?this.findCursorStartingIndex(l,s,o,u):0;if(m<0)return[];let p=d!==void 0?m+d:void 0;return l.slice(m,p)})}executeSingleFilterQuery(e,r,n,i,o){return no(this,void 0,void 0,function*(){let s=[];if(wx(r)){let d=this.getAllItems(e,n);s.push(d)}let a=b4.reduceFilter(r);for(let d in a){let u=a[d];if(Hn.isEqualFilter(u)){let c=this.filterExactMatches(e,d,u,o);s.push(c)}else if(Hn.isOneOfFilter(u))for(let c of new Set(u)){let l=this.filterExactMatches(e,d,c,o);s.push(l)}else if(Hn.isRangeFilter(u)){let c=this.filterRangeMatches(e,d,u,o);s.push(c)}}for(let d of s){let u=yield d;for(let c of u)if(!(i.has(c.messageCid)||!Hn.matchFilter(c.indexes,r))){if(c.indexes[n]===void 0)throw new oe(ne.IndexInvalidSortPropertyInMemory,`invalid sort property ${n}`);i.set(c.messageCid,c)}}})}getAllItems(e,r){var n,i,o,s;return no(this,void 0,void 0,function*(){let a=yield this.getIndexPartition(e,r),d=[];try{for(var u=!0,c=H6(a.iterator()),l;l=yield c.next(),n=l.done,!n;u=!0){s=l.value,u=!1;let[m,p]=s;d.push(JSON.parse(p))}}catch(m){i={error:m}}finally{try{!u&&!n&&(o=c.return)&&(yield o.call(c))}finally{if(i)throw i.error}}return d})}filterExactMatches(e,r,n,i){var o,s,a,d;return no(this,void 0,void 0,function*(){let u=t.keySegmentJoin(t.encodeValue(n)),c={gt:u},l=yield this.getIndexPartition(e,r),m=[];try{for(var p=!0,g=H6(l.iterator(c,i)),b;b=yield g.next(),o=b.done,!o;p=!0){d=b.value,p=!1;let[S,A]=d;if(!S.startsWith(u))break;m.push(JSON.parse(A))}}catch(S){s={error:S}}finally{try{!p&&!o&&(a=g.return)&&(yield a.call(g))}finally{if(s)throw s.error}}return m})}filterRangeMatches(e,r,n,i){var o,s,a,d;return no(this,void 0,void 0,function*(){let u={};for(let b in n){let S=b;u[S]=t.encodeValue(n[S])}u.gt===void 0&&u.gte===void 0&&(u.reverse=!0);let c=[],l=yield this.getIndexPartition(e,r);try{for(var m=!0,p=H6(l.iterator(u,i)),g;g=yield p.next(),o=g.done,!o;m=!0){d=g.value,m=!1;let[b,S]=d;"gt"in n&&this.extractIndexValueFromKey(b)===t.encodeValue(n.gt)||c.push(JSON.parse(S))}}catch(b){s={error:b}}finally{try{!m&&!o&&(a=p.return)&&(yield a.call(p))}finally{if(s)throw s.error}}if("lte"in n)for(let b of yield this.filterExactMatches(e,r,n.lte,i))c.push(b);return c})}sortItems(e,r,n,i){let o=e.indexes[n],s=r.indexes[n],a=t.encodeValue(o)+e.messageCid,d=t.encodeValue(s)+r.messageCid;return i===ns.Ascending?vx(a,d):vx(d,a)}findCursorStartingIndex(e,r,n,i){let o=s=>{let{messageCid:a,indexes:d}=s,u=d[n],c=t.keySegmentJoin(t.encodeValue(u),a);return r===ns.Ascending?c>i:c<i};return e.findIndex(o)}getIndexes(e,r){return no(this,void 0,void 0,function*(){let i=yield(yield this.getIndexesLookupPartition(e)).get(r);if(i!==void 0)return JSON.parse(i)})}extractIndexValueFromKey(e){let[r]=e.split(t.delimiter);return r}static keySegmentJoin(...e){return e.join(t.delimiter)}static encodeNumberValue(e){let r=Number.MAX_SAFE_INTEGER,n="!",i=String(Number.MAX_SAFE_INTEGER).length,o=e<0?n:"",s=e<0?r:0;return o+String(e+s).padStart(i,"0")}static encodeValue(e){switch(typeof e){case"number":return this.encodeNumberValue(e);default:return JSON.stringify(e)}}static shouldQueryWithInMemoryPaging(e,r){for(let n of e)if(!t.isFilterConcise(n,r))return!1;return!0}static isFilterConcise(e,r){return e.recordId!==void 0?!0:r.cursor!==void 0?!1:e.protocolPath!==void 0||e.contextId!==void 0||e.parentId!==void 0||e.schema!==void 0}};Mh.delimiter="\0";h();h();h();h();function V6(t){if(!j1(t))throw new Error("Parameter was not an error")}function j1(t){return dJe(t)==="[object Error]"||t instanceof Error}function dJe(t){return Object.prototype.toString.call(t)}h();function Rye(t){let e,r="";if(t.length===0)e={};else if(j1(t[0]))e={cause:t[0]},r=t.slice(1).join(" ")||"";else if(t[0]&&typeof t[0]=="object")e=Object.assign({},t[0]),r=t.slice(1).join(" ")||"";else if(typeof t[0]=="string")e={},r=r=t.join(" ")||"";else throw new Error("Invalid arguments passed to Layerr");return{options:e,shortMessage:r}}var Cu=class t extends Error{constructor(e,r){let n=[...arguments],{options:i,shortMessage:o}=Rye(n),s=o;if(i.cause&&(s=`${s}: ${i.cause.message}`),super(s),this.message=s,i.name&&typeof i.name=="string"?this.name=i.name:this.name="Layerr",i.cause&&Object.defineProperty(this,"_cause",{value:i.cause}),Object.defineProperty(this,"_info",{value:{}}),i.info&&typeof i.info=="object"&&Object.assign(this._info,i.info),Error.captureStackTrace){let a=i.constructorOpt||this.constructor;Error.captureStackTrace(this,a)}}static cause(e){return V6(e),e._cause&&j1(e._cause)?e._cause:null}static fullStack(e){V6(e);let r=t.cause(e);return r?`${e.stack}
caused by: ${t.fullStack(r)}`:e.stack}static info(e){V6(e);let r={},n=t.cause(e);return n&&Object.assign(r,t.info(n)),e._info&&Object.assign(r,e._info),r}cause(){return t.cause(this)}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e=`${e}: ${this.message}`),e}};h();var J6="0123456789ABCDEFGHJKMNPQRSTVWXYZ",U1=32,Dye=0xffffffffffff,Mye=10,uJe=16,Jg=Object.freeze({source:"ulid"});function lJe(t){let e=t||fJe(),r=e&&(e.crypto||e.msCrypto)||null;if(typeof r?.getRandomValues=="function")return()=>{let n=new Uint8Array(1);return r.getRandomValues(n),n[0]/255};if(typeof r?.randomBytes=="function")return()=>r.randomBytes(1).readUInt8()/255;throw new Cu({info:{code:"PRNG_DETECT",...Jg}},"Failed to find a reliable PRNG")}function fJe(){return mJe()?self:typeof window<"u"?window:typeof globalThis<"u"||typeof globalThis<"u"?globalThis:null}function hJe(t,e){let r="";for(;t>0;t--)r=yJe(e)+r;return r}function Bye(t,e){if(isNaN(t))throw new Cu({info:{code:"ENC_TIME_NAN",...Jg}},`Time must be a number: ${t}`);if(t>Dye)throw new Cu({info:{code:"ENC_TIME_SIZE_EXCEED",...Jg}},`Cannot encode a time larger than ${Dye}: ${t}`);if(t<0)throw new Cu({info:{code:"ENC_TIME_NEG",...Jg}},`Time must be positive: ${t}`);if(Number.isInteger(t)===!1)throw new Cu({info:{code:"ENC_TIME_TYPE",...Jg}},`Time must be an integer: ${t}`);let r,n="";for(let i=e;i>0;i--)r=t%U1,n=J6.charAt(r)+n,t=(t-r)/U1;return n}function pJe(t){let e,r=t.length,n,i,o=t,s=U1-1;for(;!e&&r-->=0;){if(n=o[r],i=J6.indexOf(n),i===-1)throw new Cu({info:{code:"B32_INC_ENC",...Jg}},"Incorrectly encoded string");if(i===s){o=Cye(o,r,J6[0]);continue}e=Cye(o,r,J6[i+1])}if(typeof e=="string")return e;throw new Cu({info:{code:"B32_INC_INVALID",...Jg}},"Failed incrementing string")}function mJe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function sI(t){let e=t||lJe(),r=0,n;return function(o){let s=isNaN(o)?Date.now():o;if(s<=r){let d=n=pJe(n);return Bye(r,Mye)+d}r=s;let a=n=hJe(uJe,e);return Bye(s,Mye)+a}}function yJe(t){let e=Math.floor(t()*U1);return e===U1&&(e=U1-1),J6.charAt(e)}function Cye(t,e,r){return e>t.length-1?t:t.substr(0,e)+r+t.substr(e+1)}var Yg=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Zg=class{constructor(e){this.index=new Mh(Object.assign({location:"EVENTLOG",createLevelDatabase:Ru},e)),this.ulidFactory=sI()}open(){return Yg(this,void 0,void 0,function*(){return this.index.open()})}close(){return Yg(this,void 0,void 0,function*(){return this.index.close()})}clear(){return Yg(this,void 0,void 0,function*(){return this.index.clear()})}append(e,r,n){return Yg(this,void 0,void 0,function*(){let i=this.ulidFactory();yield this.index.put(e,r,Object.assign(Object.assign({},n),{watermark:i}))})}queryEvents(e,r,n){return Yg(this,void 0,void 0,function*(){let i=yield this.index.query(e,r,{sortProperty:"watermark",cursor:n});return{events:i.map(({messageCid:o})=>o),cursor:Mh.createCursorFromLastArrayItem(i,"watermark")}})}getEvents(e,r){return Yg(this,void 0,void 0,function*(){return this.queryEvents(e,[],r)})}deleteEventsByCid(e,r){return Yg(this,void 0,void 0,function*(){let n=[];for(let i of r)n.push(this.index.delete(e,i));yield Promise.all(n)})}};h();h();function aI({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*gJe(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[r,n]of e.entries()){let i=[...t,r],o=Or.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*jK(n,i))}else{let r=Or.asCID(e);r?yield[t.join("/"),r]:yield*jK(e,t)}}function*jK(t,e){if(t==null||t instanceof Uint8Array)return;let r=Or.asCID(t);r&&(yield[e.join("/"),r]);for(let[n,i]of Object.entries(t)){let o=[...e,n];yield*gJe(o,i)}}function*bJe(t,e){if(Array.isArray(e))for(let[r,n]of e.entries()){let i=[...t,r];yield i.join("/"),typeof n=="object"&&!Or.asCID(n)&&(yield*UK(n,i))}else yield*UK(e,t)}function*UK(t,e){if(!(t==null||typeof t!="object"))for(let[r,n]of Object.entries(t)){let i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!Or.asCID(n)&&(yield*bJe(i,n))}}function vJe(t,e){let r=t;for(let[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=Or.asCID(r);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:r}}var cI=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:aI(),bytes:aI(),value:aI(),asBlock:aI()})}links(){return jK(this.value,[])}tree(){return UK(this.value,[])}get(e="/"){return vJe(this.value,e.split("/").filter(Boolean))}};async function Oye({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let n=e.encode(t),i=await r.digest(n),o=Or.create(1,e.code,i);return new cI({value:t,bytes:n,cid:o})}async function $ye({bytes:t,codec:e,hasher:r}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let n=e.decode(t),i=await r.digest(t),o=Or.create(1,e.code,i);return new cI({value:n,bytes:t,cid:o})}var Xg=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Qg=class t{constructor(e={}){this.config=Object.assign({blockstoreLocation:"MESSAGESTORE",indexLocation:"INDEX",createLevelDatabase:Ru},e),this.blockstore=new T1({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase}),this.index=new Mh({location:this.config.indexLocation,createLevelDatabase:this.config.createLevelDatabase})}open(){return Xg(this,void 0,void 0,function*(){yield this.blockstore.open(),yield this.index.open()})}close(){return Xg(this,void 0,void 0,function*(){yield this.blockstore.close(),yield this.index.close()})}get(e,r,n){var i;return Xg(this,void 0,void 0,function*(){(i=n?.signal)===null||i===void 0||i.throwIfAborted();let o=yield Ui(this.blockstore.partition(e),n?.signal),s=Or.parse(r),a=yield o.get(s,n);return a?(yield Ui($ye({bytes:a,codec:ky,hasher:ps}),n?.signal)).value:void 0})}query(e,r,n,i,o){var s;return Xg(this,void 0,void 0,function*(){(s=o?.signal)===null||s===void 0||s.throwIfAborted();let a=t.buildQueryOptions(n,i),d=yield this.index.query(e,r,a,o),u;i?.limit!==void 0&&i.limit<d.length&&(d.splice(-1),u=Mh.createCursorFromLastArrayItem(d,a.sortProperty));let c=[];for(let l=0;l<d.length;l++){let{messageCid:m}=d[l],p=yield this.get(e,m,o);p&&c.push(p)}return{messages:c,cursor:u}})}static buildQueryOptions(e={},r={}){let{limit:n,cursor:i}=r,{dateCreated:o,datePublished:s,messageTimestamp:a}=e,d=ns.Ascending,u="messageTimestamp";return o!==void 0?u="dateCreated":s!==void 0?u="datePublished":a!==void 0&&(u="messageTimestamp"),e[u]!==void 0&&(d=e[u]),n!==void 0&&n>0&&(n=n+1),{sortDirection:d,sortProperty:u,limit:n,cursor:i}}delete(e,r,n){var i;return Xg(this,void 0,void 0,function*(){(i=n?.signal)===null||i===void 0||i.throwIfAborted();let o=yield Ui(this.blockstore.partition(e),n?.signal),s=Or.parse(r);yield o.delete(s,n),yield this.index.delete(e,r,n)})}put(e,r,n,i){var o;return Xg(this,void 0,void 0,function*(){(o=i?.signal)===null||o===void 0||o.throwIfAborted();let s=yield Ui(this.blockstore.partition(e),i?.signal),a=yield Ui(Oye({value:r,codec:ky,hasher:ps}),i?.signal),d=Sn.parseCid(yield be.getCid(r));yield s.put(d,a.bytes,i);let u=d.toString();yield this.index.put(e,u,n,i)})}clear(){return Xg(this,void 0,void 0,function*(){yield this.blockstore.clear(),yield this.index.clear()})}};h();var Nye=Ut(nc(),1);var dI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},KK="events",Y6=class{constructor(e={}){this.isOpen=!1,this.errorHandler=r=>{console.error("event emitter error",r)},this.eventEmitter=new Nye.EventEmitter({captureRejections:!0}),this.eventEmitter.setMaxListeners(0),e.errorHandler&&(this.errorHandler=e.errorHandler),this.eventEmitter.on("error",this.errorHandler)}subscribe(e,r,n){return dI(this,void 0,void 0,function*(){return this.eventEmitter.on(`${e}_${KK}`,n),{id:r,close:()=>dI(this,void 0,void 0,function*(){this.eventEmitter.off(`${e}_${KK}`,n)})}})}open(){return dI(this,void 0,void 0,function*(){this.isOpen=!0})}close(){return dI(this,void 0,void 0,function*(){this.isOpen=!1,this.eventEmitter.removeAllListeners()})}emit(e,r,n){if(!this.isOpen){this.errorHandler(new oe(ne.EventEmitterStreamNotOpenError,"a message emitted when EventEmitterStream is closed"));return}this.eventEmitter.emit(`${e}_${KK}`,e,r,n)}};h();var Gr=(l=>(l[l.EventsGet=Ae.Events+_e.Get]="EventsGet",l[l.EventsQuery=Ae.Events+_e.Query]="EventsQuery",l[l.EventsSubscribe=Ae.Events+_e.Subscribe]="EventsSubscribe",l[l.MessagesGet=Ae.Messages+_e.Get]="MessagesGet",l[l.ProtocolsConfigure=Ae.Protocols+_e.Configure]="ProtocolsConfigure",l[l.ProtocolsQuery=Ae.Protocols+_e.Query]="ProtocolsQuery",l[l.RecordsDelete=Ae.Records+_e.Delete]="RecordsDelete",l[l.RecordsQuery=Ae.Records+_e.Query]="RecordsQuery",l[l.RecordsRead=Ae.Records+_e.Read]="RecordsRead",l[l.RecordsSubscribe=Ae.Records+_e.Subscribe]="RecordsSubscribe",l[l.RecordsWrite=Ae.Records+_e.Write]="RecordsWrite",l))(Gr||{}),Z6={[Gr.EventsGet]:tm,[Gr.EventsQuery]:nm,[Gr.EventsSubscribe]:im,[Gr.MessagesGet]:om,[Gr.ProtocolsConfigure]:pm,[Gr.ProtocolsQuery]:mm,[Gr.RecordsDelete]:ym,[Gr.RecordsQuery]:em,[Gr.RecordsRead]:og,[Gr.RecordsSubscribe]:gm,[Gr.RecordsWrite]:Fr};h();var eb=class{constructor({did:e,metadata:r}){this.did=e,this.metadata=r}async export(){return{portableDid:await this.did.export(),metadata:this.metadata}}};h();h();h();var uI=class{static async deriveKeyBytes({baseKeyBytes:e,length:r,hash:n,salt:i,info:o=new Uint8Array}){let a=await da().importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]);i=typeof i=="string"?de.string(i).toUint8Array():i,o=typeof o=="string"?de.string(o).toUint8Array():o;let d=await crypto.subtle.deriveBits({name:"HKDF",hash:n,salt:i,info:o},a,r);return new Uint8Array(d)}};var lI=class extends ei{async deriveKeyBytes({algorithm:e,...r}){let n={"HKDF-256":"SHA-256","HKDF-384":"SHA-384","HKDF-512":"SHA-512"}[e];return await uI.deriveKeyBytes({...r,hash:n})}};h();h();var it=class t extends Error{constructor(r,n){super(n);this.code=r;this.name="CryptoError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}};var X6=class extends ei{async bytesToPrivateKey({algorithm:e,privateKeyBytes:r}){switch(e){case"ES256K":case"secp256k1":{let n=await Er.bytesToPrivateKey({privateKeyBytes:r});return n.alg="EdDSA",n}case"ES256":case"secp256r1":{let n=await Br.bytesToPrivateKey({privateKeyBytes:r});return n.alg="EdDSA",n}default:throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`)}}async bytesToPublicKey({algorithm:e,publicKeyBytes:r}){switch(e){case"ES256K":case"secp256k1":{let n=await Er.bytesToPublicKey({publicKeyBytes:r});return n.alg="EdDSA",n}case"ES256":case"secp256r1":{let n=await Br.bytesToPublicKey({publicKeyBytes:r});return n.alg="EdDSA",n}default:throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`)}}async computePublicKey({key:e}){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=await Er.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=await Br.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async generateKey({algorithm:e}){switch(e){case"ES256K":case"secp256k1":{let r=await Er.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=await Br.generateKey();return r.alg="ES256",r}}}async getPublicKey({key:e}){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=await Er.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=await Br.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async privateKeyToBytes({privateKey:e}){switch(e.crv){case"secp256k1":return await Er.privateKeyToBytes({privateKey:e});case"P-256":return await Br.privateKeyToBytes({privateKey:e});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async publicKeyToBytes({publicKey:e}){switch(e.crv){case"secp256k1":return await Er.publicKeyToBytes({publicKey:e});case"P-256":return await Br.publicKeyToBytes({publicKey:e});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async sign({key:e,data:r}){if(!Na(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return await Er.sign({key:e,data:r});case"P-256":return await Br.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}}async verify({key:e,signature:r,data:n}){if(!Bm(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return await Er.verify({key:e,signature:r,data:n});case"P-256":return await Br.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}}};h();var fI=class extends ei{async bytesToPrivateKey({algorithm:e,privateKeyBytes:r}){switch(e){case"Ed25519":{let n=await er.bytesToPrivateKey({privateKeyBytes:r});return n.alg="EdDSA",n}default:throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`)}}async bytesToPublicKey({algorithm:e,publicKeyBytes:r}){switch(e){case"Ed25519":{let n=await er.bytesToPublicKey({publicKeyBytes:r});return n.alg="EdDSA",n}default:throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`)}}async computePublicKey({key:e}){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=await er.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async generateKey({algorithm:e}){switch(e){case"Ed25519":{let r=await er.generateKey();return r.alg="EdDSA",r}}}async getPublicKey({key:e}){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=await er.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async privateKeyToBytes({privateKey:e}){switch(e.crv){case"Ed25519":return await er.privateKeyToBytes({privateKey:e});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async publicKeyToBytes({publicKey:e}){switch(e.crv){case"Ed25519":return await er.publicKeyToBytes({publicKey:e});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async sign({key:e,data:r}){if(!ja(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return await er.sign({key:e,data:r});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}async verify({key:e,signature:r,data:n}){if(!Cm(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return await er.verify({key:e,signature:r,data:n});default:throw new it("algorithmNotSupported",`Curve not supported: ${e.crv}`)}}};h();h();var jye=[128,192,256],Zm=class{static async bytesToPrivateKey({privateKeyBytes:e}){let r={k:de.uint8Array(e).toBase64Url(),kty:"oct"};r.kid=await rt({jwk:r});let n=e.length*8;return r.alg={128:"A128KW",192:"A192KW",256:"A256KW"}[n],r}static async generateKey({length:e}){if(!jye.includes(e))throw new RangeError(`The key length is invalid: Must be ${jye.join(", ")} bits`);let r=da(),n=await r.generateKey({name:"AES-KW",length:e},!0,["wrapKey","unwrapKey"]),{ext:i,key_ops:o,...s}=await r.exportKey("jwk",n);return s.kid=await rt({jwk:s}),s}static async privateKeyToBytes({privateKey:e}){if(!Bg(e))throw new Error("AesKw: The provided key is not a valid oct private key.");return de.base64Url(e.k).toUint8Array()}static async unwrapKey({wrappedKeyBytes:e,wrappedKeyAlgorithm:r,decryptionKey:n}){if(!("alg"in n&&n.alg))throw new it("invalidJwk","The decryption key is missing the 'alg' property.");if(!["A128KW","A192KW","A256KW"].includes(n.alg))throw new it("algorithmNotSupported",`The 'decryptionKey' algorithm is not supported: ${n.alg}`);let i=da(),o=await i.importKey("jwk",n,{name:"AES-KW"},!0,["unwrapKey"]),s={A128KW:"AES-KW",A192KW:"AES-KW",A256KW:"AES-KW",A128GCM:"AES-GCM",A192GCM:"AES-GCM",A256GCM:"AES-GCM"}[r];if(!s)throw new it("algorithmNotSupported",`The 'wrappedKeyAlgorithm' is not supported: ${r}`);let a=await i.unwrapKey("raw",e.buffer,o,"AES-KW",{name:s},!0,["unwrapKey"]),{ext:d,key_ops:u,...c}=await i.exportKey("jwk",a),l=c;return l.kid=await rt({jwk:l}),l}static async wrapKey({unwrappedKey:e,encryptionKey:r}){if(!("alg"in r&&r.alg))throw new it("invalidJwk","The encryption key is missing the 'alg' property.");if(!["A128KW","A192KW","A256KW"].includes(r.alg))throw new it("algorithmNotSupported",`The 'encryptionKey' algorithm is not supported: ${r.alg}`);if(!("alg"in e&&e.alg))throw new it("invalidJwk","The private key to wrap is missing the 'alg' property.");let n=da(),i=await n.importKey("jwk",r,{name:"AES-KW"},!0,["wrapKey"]),o={A128KW:"AES-KW",A192KW:"AES-KW",A256KW:"AES-KW",A128GCM:"AES-GCM",A192GCM:"AES-GCM",A256GCM:"AES-GCM"}[e.alg];if(!o)throw new it("algorithmNotSupported",`The 'unwrappedKey' algorithm is not supported: ${e.alg}`);let s=await n.importKey("jwk",e,{name:o},!0,["unwrapKey"]),a=await n.wrapKey("raw",s,i,"AES-KW");return new Uint8Array(a)}};var K1=class extends ei{async bytesToPrivateKey({privateKeyBytes:e}){let r=await Zm.bytesToPrivateKey({privateKeyBytes:e});return r.alg={16:"A128KW",24:"A192KW",32:"A256KW"}[e.length],r}async generateKey({algorithm:e}){let r={A128KW:128,A192KW:192,A256KW:256}[e],n=await Zm.generateKey({length:r});return n.alg=e,n}async privateKeyToBytes({privateKey:e}){return await Zm.privateKeyToBytes({privateKey:e})}async unwrapKey(e){return await Zm.unwrapKey(e)}async wrapKey(e){return Zm.wrapKey(e)}};h();h();var hI=class{static async deriveKeyBytes({baseKeyBytes:e,hash:r,salt:n,iterations:i,length:o}){let s=da(),a=await s.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]),d=await s.deriveBits({name:"PBKDF2",hash:r,salt:n,iterations:i},a,o);return new Uint8Array(d)}};var pI=class extends ei{async deriveKeyBytes({algorithm:e,...r}){let[,n]=e.split(/[-+]/),i={HS256:"SHA-256",HS384:"SHA-384",HS512:"SHA-512"}[n];return await hI.deriveKeyBytes({...r,hash:i})}};h();var mI=class extends ei{async bytesToPrivateKey({privateKeyBytes:e}){let r=await Ed.bytesToPrivateKey({privateKeyBytes:e});return r.alg={16:"A128GCM",24:"A192GCM",32:"A256GCM"}[e.length],r}async decrypt(e){return Ed.decrypt(e)}async encrypt(e){return Ed.encrypt(e)}async generateKey({algorithm:e}){let r={A128GCM:128,A192GCM:192,A256GCM:256}[e],n=await Ed.generateKey({length:r});return n.alg=e,n}async privateKeyToBytes({privateKey:e}){return await Ed.privateKeyToBytes({privateKey:e})}};var qK={"AES-GCM":{implementation:mI,names:["A128GCM","A192GCM","A256GCM"],operations:["bytesToPrivateKey","decrypt","encrypt","generateKey"]},"AES-KW":{implementation:K1,names:["A128KW","A192KW","A256KW"],operations:["bytesToPrivateKey","generateKey","privateKeyToBytes","wrapKey","unwrapKey"]},Ed25519:{implementation:fI,names:["Ed25519"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},HKDF:{implementation:lI,names:["HKDF-256","HKDF-384","HKDF-512"],operations:["deriveKey","deriveKeyBytes"]},PBKDF2:{implementation:pI,names:["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"],operations:["deriveKey","deriveKeyBytes"]},secp256k1:{implementation:X6,names:["ES256K","secp256k1"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},secp256r1:{implementation:X6,names:["ES256","secp256r1"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},"SHA-256":{implementation:Mm,names:["SHA-256"],operations:["digest"]}},kd=class{constructor(){this._algorithmInstances=new Map}async bytesToPrivateKey({algorithm:e,privateKeyBytes:r}){let n=this.getAlgorithmName({algorithm:e});return await this.getAlgorithm({algorithm:n}).bytesToPrivateKey({algorithm:e,privateKeyBytes:r})}async bytesToPublicKey({algorithm:e,publicKeyBytes:r}){let n=this.getAlgorithmName({algorithm:e});return await this.getAlgorithm({algorithm:n}).bytesToPublicKey({algorithm:e,publicKeyBytes:r})}async decrypt(e){let r=this.getAlgorithmName({key:e.key});return await this.getAlgorithm({algorithm:r}).decrypt(e)}async deriveKey(e){let r=this.getAlgorithmName({algorithm:e.algorithm}),n=this.getAlgorithm({algorithm:r}),i;switch(e.algorithm){case"HKDF-256":case"HKDF-384":case"HKDF-512":{i=e.derivedKeyAlgorithm;break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{i=e.algorithm.split(/[-+]/)[2];break}default:throw new it("algorithmNotSupported",`The specified "algorithm" is not supported: ${e.algorithm}`)}let o=+(i.match(/\d+/)?.[0]??-1);if(o===-1)throw new it("algorithmNotSupported",`The derived key algorithm" is not supported: ${i}`);let s=await n.deriveKeyBytes({...e,length:o});return await this.bytesToPrivateKey({algorithm:i,privateKeyBytes:s})}async deriveKeyBytes(e){let r=this.getAlgorithmName({algorithm:e.algorithm});return await this.getAlgorithm({algorithm:r}).deriveKeyBytes(e)}async digest({algorithm:e,data:r}){return await this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})}async encrypt(e){let r=this.getAlgorithmName({key:e.key});return await this.getAlgorithm({algorithm:r}).encrypt(e)}async generateKey(e){let r=this.getAlgorithmName({algorithm:e.algorithm}),i=await this.getAlgorithm({algorithm:r}).generateKey({algorithm:e.algorithm});return i.kid??=await rt({jwk:i}),i}async getKeyUri(e){throw new Error("Method not implemented.")}async getPublicKey({key:e}){let r=this.getAlgorithmName({key:e});return await this.getAlgorithm({algorithm:r}).getPublicKey({key:e})}async privateKeyToBytes({privateKey:e}){let r=this.getAlgorithmName({key:e});return await this.getAlgorithm({algorithm:r}).privateKeyToBytes({privateKey:e})}async publicKeyToBytes({publicKey:e}){let r=this.getAlgorithmName({key:e});return await this.getAlgorithm({algorithm:r}).publicKeyToBytes({publicKey:e})}async sign({key:e,data:r}){let n=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:n}).sign({data:r,key:e})}async unwrapKey(e){let r=this.getAlgorithmName({key:e.decryptionKey});return await this.getAlgorithm({algorithm:r}).unwrapKey(e)}async verify({key:e,signature:r,data:n}){let i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})}async wrapKey(e){let r=this.getAlgorithmName({key:e.encryptionKey});return await this.getAlgorithm({algorithm:r}).wrapKey(e)}getAlgorithm({algorithm:e}){let r=qK[e]?.implementation;if(!r)throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`);return this._algorithmInstances.has(r)||this._algorithmInstances.set(r,new r),this._algorithmInstances.get(r)}getAlgorithmName({algorithm:e,key:r}){let n=r?.alg??e,i=r?.crv;for(let o of Object.keys(qK)){let s=qK[o].names;if(n&&s.includes(n))return o;if(i&&s.includes(i))return o}throw new it("algorithmNotSupported",`Algorithm not supported based on provided input: alg=${n}, crv=${i}. Please check the documentation for the list of supported algorithms.`)}};h();h();h();var rb;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(rb||(rb={}));h();var ri={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};h();var or=class t{constructor({method:e,id:r,path:n,query:i,fragment:o,params:s}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=i,this.fragment=o,this.params=s}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:i,path:o,query:s,fragment:a}=r.groups,d={uri:`did:${n}:${i}`,method:n,id:i};if(o&&(d.path=o),s&&(d.query=s.slice(1)),a&&(d.fragment=a.slice(1)),s){let u={},c=s.slice(1).split("&");for(let l of c){let[m,p]=l.split("=");u[m]=p}d.params=u}return d}};or.METHOD_PATTERN="([a-z0-9]+)";or.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";or.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${or.PCT_ENCODED_PATTERN})`;or.METHOD_ID_PATTERN=`((?:${or.ID_CHAR_PATTERN}*:)*(${or.ID_CHAR_PATTERN}+))`;or.PATH_PATTERN="(/[^#?]*)?";or.QUERY_PATTERN="([?][^#]*)?";or.FRAGMENT_PATTERN="(#.*)?";or.DID_URI_PATTERN=new RegExp(`^did:(?<method>${or.METHOD_PATTERN}):(?<id>${or.METHOD_ID_PATTERN})(?<path>${or.PATH_PATTERN})(?<query>${or.QUERY_PATTERN})(?<fragment>${or.FRAGMENT_PATTERN})$`);h();var at=class t extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},tt;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(tt||(tt={}));h();var vI={};qr(vI,{extractDidFragment:()=>Fa,getServices:()=>xJe,getVerificationMethodByKey:()=>EJe,getVerificationMethodTypes:()=>LK,getVerificationMethods:()=>Q6,getVerificationRelationshipsById:()=>FK,isDidService:()=>Uye,isDidVerificationMethod:()=>yI,isDwnDidService:()=>SJe,keyBytesToMultibaseId:()=>gI,multibaseIdToKeyBytes:()=>bI});h();var _Je=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})};function Fa(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function xJe({didDocument:t,id:e,type:r}){var n,i;return(i=(n=t?.service)===null||n===void 0?void 0:n.filter(o=>!(e&&o.id!==e||r&&o.type!==r)))!==null&&i!==void 0?i:[]}function EJe(t){return _Je(this,arguments,void 0,function*({didDocument:e,publicKeyJwk:r,publicKeyMultibase:n}){let i=Q6({didDocument:e});for(let o of i)if(r&&o.publicKeyJwk){if((yield rt({jwk:r}))===(yield rt({jwk:o.publicKeyJwk})))return o}else if(n&&o.publicKeyMultibase&&n===o.publicKeyMultibase)return o;return null})}function Q6({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(yI))!==null&&r!==void 0?r:[]),Object.keys(rb).forEach(i=>{var o,s;n.push(...(s=(o=t[i])===null||o===void 0?void 0:o.filter(yI))!==null&&s!==void 0?s:[])}),n}function LK({didDocument:t}){let r=Q6({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function FK({didDocument:t,methodId:e}){let r=[];return Object.keys(rb).forEach(n=>{if(Array.isArray(t[n])){let i=t[n],o=Fa(e);i.some(a=>{let d=Fa(a)===o,u=yI(a)&&Fa(a.id)===o;return d||u})&&r.push(n)}}),r}function Uye(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function SJe(t){if(!Uye(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function yI(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function gI({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=mi.addPrefix({code:e,data:t,name:r}),i=de.uint8Array(n).toBase58Btc();return de.base58Btc(i).toMultibase()}function bI({multibaseKeyId:t}){try{let e=de.multibase(t).toBase58Btc(),r=de.base58Btc(e).toUint8Array(),{code:n,data:i,name:o}=mi.removePrefix({prefixedData:r});return{keyBytes:i,multicodecCode:n,multicodecName:o}}catch{throw new at(tt.InvalidDid,`Invalid multibase identifier: ${t}`)}}var eS=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},io=class t{constructor({uri:e,document:r,metadata:n,keyManager:i}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=i}export(){return eS(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.exportKey({keyUri:i});r.push(Object.assign({},o))}e.privateKeys=r}return e})}getSigner(e){return eS(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(d=>{var u,c;return Fa(d.id)===((u=Fa(e?.methodId))!==null&&u!==void 0?u:Fa((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new at(tt.InternalError,"A verification method intended for signing could not be determined from the DID Document");let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.getPublicKey({keyUri:i}),s=this.keyManager;return{algorithm:ki.getJoseSignatureAlgorithmFromPublicKey(o),keyId:n.id,sign(d){return eS(this,arguments,void 0,function*({data:u}){return yield s.sign({data:u,keyUri:i})})},verify(d){return eS(this,arguments,void 0,function*({data:u,signature:c}){return yield s.verify({data:u,key:o,signature:c})})}}})}static import(e){return eS(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){var i;let o=Q6({didDocument:r.document});if(o.length===0)throw new at(tt.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(i=r.privateKeys)!==null&&i!==void 0?i:[])yield n.importKey({key:a});for(let a of o){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let d=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:d})}return new t({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};h();h();var Kye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Rd=class{static getSigningMethod(e){return Kye(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return Kye(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Do=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},qye=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Lye="https://diddht.tbddev.org",AJe=0,Xm=7200,wI=";",pa=",",zK;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(zK||(zK={}));var ma;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(ma||(ma={}));var GK;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(GK||(GK={}));var zye={Ed25519:ma.Ed25519,ES256K:ma.secp256k1,ES256:ma.secp256r1,"P-256":ma.secp256r1,secp256k1:ma.secp256k1,secp256r1:ma.secp256r1,X25519:ma.X25519},Fye={[ma.Ed25519]:"Ed25519",[ma.secp256k1]:"ES256K",[ma.secp256r1]:"ES256",[ma.X25519]:"ECDH-ES+A256KW"},Dd=class t extends Rd{static create(){return Do(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s,a,d,u,c,l,m,p;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(N=>!(N.algorithm in zye)))throw new Error("One or more verification method algorithms are not supported");let g=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(N=>"id"in N).map(N=>N.id);if(g&&g.length!==new Set(g).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some(N=>!N.id||!N.type||!N.serviceEndpoint))throw new Error("One or more services are missing required properties");let b=yield e.generateKey({algorithm:"Ed25519"}),S=yield e.getPublicKey({keyUri:b}),A=yield Ro.identityKeyToIdentifier({identityKey:S}),I=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),P=[...(s=r.verificationMethods)!==null&&s!==void 0?s:[]];P?.some(N=>{var L;return((L=N.id)===null||L===void 0?void 0:L.split("#").pop())==="0"})||P.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let N of P){let L=N.id&&N.id.split("#").pop()==="0"?b:yield e.generateKey({algorithm:N.algorithm}),F=yield e.getPublicKey({keyUri:L}),U=(d=(a=N.id)!==null&&a!==void 0?a:F.kid)!==null&&d!==void 0?d:yield rt({jwk:F});U=`${A}#${Fa(U)}`,(u=I.verificationMethod)!==null&&u!==void 0||(I.verificationMethod=[]),I.verificationMethod.push({id:U,type:"JsonWebKey",controller:(c=N.controller)!==null&&c!==void 0?c:A,publicKeyJwk:F});for(let G of(l=N.purposes)!==null&&l!==void 0?l:[])I[G]||(I[G]=[]),I[G].push(U)}(m=r.services)===null||m===void 0||m.forEach(N=>{var L;(L=I.service)!==null&&L!==void 0||(I.service=[]),N.id=`${A}#${N.id.split("#").pop()}`,I.service.push(N)});let $=new io({uri:A,document:I,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((p=r.publish)!==null&&p!==void 0)||p){let N=yield t.publish({did:$,gatewayUri:r.gatewayUri});$.metadata=N.didDocumentMetadata}return $})}static import(e){return Do(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){var i;let o=or.parse(r.uri);if(o?.method!==t.methodName)throw new at(tt.MethodNotSupported,"Method not supported");let s=yield io.import({portableDid:r,keyManager:n});if(!(!((i=s.document.verificationMethod)===null||i===void 0)&&i.some(a=>{var d;return((d=a.id)===null||d===void 0?void 0:d.split("#").pop())==="0"})))throw new at(tt.InvalidDidDocument,"DID document must contain an Identity Key");return s})}static getSigningMethod(e){return Do(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var i;let o=or.parse(r.id);if(o&&o.method!==this.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var d,u;return Fa(a.id)===((d=Fa(n))!==null&&d!==void 0?d:Fa((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(s&&s.publicKeyJwk))throw new at(tt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static publish(e){return Do(this,arguments,void 0,function*({did:r,gatewayUri:n=Lye}){return yield _I.put({did:r,gatewayUri:n})})}static resolve(e){return Do(this,arguments,void 0,function*(r,n={}){var i;let o=(i=n?.gatewayUri)!==null&&i!==void 0?i:Lye;try{yield Ro.identifierToIdentityKey({didUri:r});let{didDocument:s,didDocumentMetadata:a}=yield _I.get({didUri:r,gatewayUri:o});return Object.assign(Object.assign({},ri),{didDocument:s,didDocumentMetadata:a})}catch(s){if(!(s instanceof at))throw new Error(s);return Object.assign(Object.assign({},ri),{didResolutionMetadata:Object.assign({error:s.code},s.message&&{errorMessage:s.message})})}})}};Dd.methodName="dht";var _I=class t{static get(e){return Do(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let i=Ro.identifierToIdentityKeyBytes({didUri:r}),o=yield t.pkarrGet({gatewayUri:n,publicKeyBytes:i}),s=yield Ro.parseBep44GetMessage({bep44Message:o}),a=yield t.fromDnsPacket({didUri:r,dnsPacket:s});return a.didDocumentMetadata.versionId=o.seq.toString(),a})}static put(e){return Do(this,arguments,void 0,function*({did:r,gatewayUri:n}){let i=yield t.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),o=yield Ro.createBep44PutMessage({dnsPacket:i,publicKeyBytes:Ro.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),s=yield t.pkarrPut({gatewayUri:n,bep44Message:o});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:s,versionId:o.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return Do(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let i=de.uint8Array(n).toBase32Z(),o=new URL(i,r).href,s;try{if(s=yield fetch(o,{method:"GET"}),!s.ok)throw new at(tt.NotFound,`Pkarr record not found for: ${i}`)}catch(u){throw u instanceof at?u:new at(tt.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let a=yield s.arrayBuffer();if(!a)throw new at(tt.NotFound,`Pkarr record not found for: ${i}`);if(a.byteLength<72)throw new at(tt.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new at(tt.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return Do(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let i=de.uint8Array(n.k).toBase32Z(),o=new URL(i,r).href,s=new Uint8Array(n.v.length+72);s.set(n.sig,0),new DataView(s.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),s.set(n.v,n.sig.length+8);let a;try{a=yield fetch(o,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:s})}catch(d){throw new at(tt.InternalError,`Failed to put Pkarr record for identifier ${i}: ${d.message}`)}return a.ok})}static fromDnsPacket(e){return Do(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var i,o,s;let a={id:r},d={published:!0},u=new Map;for(let c of(i=n?.answers)!==null&&i!==void 0?i:[]){if(c.type!=="TXT")continue;let l=c.name.split(".")[0].substring(1);switch(!0){case l.startsWith("aka"):{let m=Ro.parseTxtDataToString(c.data);a.alsoKnownAs=m.split(pa);break}case l.startsWith("cnt"):{let m=Ro.parseTxtDataToString(c.data);a.controller=m.includes(pa)?m.split(pa):m;break}case l.startsWith("k"):{let{id:m,t:p,k:g,c:b,a:S}=Ro.parseTxtDataToObject(c.data),A=de.base64Url(g).toUint8Array(),I=ma[Number(p)],P=yield Ro.keyConverter(I).bytesToPublicKey({publicKeyBytes:A});P.alg=S||Fye[Number(p)];let $=l==="k0"?"0":m!==void 0?m:yield rt({jwk:P});(o=a.verificationMethod)!==null&&o!==void 0||(a.verificationMethod=[]);let N=`${r}#${$}`;a.verificationMethod.push({id:N,type:"JsonWebKey",controller:b??r,publicKeyJwk:P}),u.set(l,N);break}case l.startsWith("s"):{let m=Ro.parseTxtDataToObject(c.data),{id:p,t:g,se:b}=m,S=qye(m,["id","t","se"]),A=b.includes(pa)?b.split(pa):[b],I=Object.fromEntries(Object.entries(S).map(([P,$])=>[P,$.includes(pa)?$.split(pa):$]));(s=a.service)!==null&&s!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},I),{id:`${r}#${p}`,type:g,serviceEndpoint:A}));break}case l.startsWith("typ"):{let{id:m}=Ro.parseTxtDataToObject(c.data);d.types=m.split(pa).map(p=>Number(p));break}case l.startsWith("did"):{let m=I=>I.split(pa).map(P=>u.get(P)).filter(P=>typeof P=="string"),{auth:p,asm:g,del:b,inv:S,agm:A}=Ro.parseTxtDataToObject(c.data);p&&(a.authentication=m(p)),g&&(a.assertionMethod=m(g)),b&&(a.capabilityDelegation=m(b)),S&&(a.capabilityInvocation=m(S)),A&&(a.keyAgreement=m(A));break}}}return{didDocument:a,didDocumentMetadata:d,didResolutionMetadata:{}}})}static toDnsPacket(e){return Do(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:i,previousDidProof:o}){var s,a,d,u,c;let l=[],m=[],p=new Map,g=[],b=[];if(o!==void 0){let{signature:I,previousDid:P}=o;yield Ro.validatePreviousDidProof({newDid:r.id,previousDidProof:o}),l.push({type:"TXT",name:"_prv._did.",ttl:Xm,data:`id=${P};s=${I}`})}if(r.alsoKnownAs&&l.push({type:"TXT",name:"_aka._did.",ttl:Xm,data:r.alsoKnownAs.join(pa)}),r.controller){let I=Array.isArray(r.controller)?r.controller.join(pa):r.controller;l.push({type:"TXT",name:"_cnt._did.",ttl:Xm,data:I})}for(let[I,P]of(a=(s=r.verificationMethod)===null||s===void 0?void 0:s.entries())!==null&&a!==void 0?a:[]){let $=`k${I}`;b.push($);let N=P.id.split("#").pop();p.set(N,$);let L=P.publicKeyJwk;if(!(L?.crv&&L.crv in zye))throw new at(tt.InvalidPublicKeyType,`Verification method '${P.id}' contains an unsupported key type: ${(d=L?.crv)!==null&&d!==void 0?d:"undefined"}`);let F=ma[L.crv],U=yield Ro.keyConverter(L.crv).publicKeyToBytes({publicKey:L}),G=de.uint8Array(U).toBase64Url(),q=[`t=${F}`,`k=${G}`];N!=="0"&&(yield rt({jwk:L}))!==N&&q.unshift(`id=${N}`),L.alg!==Fye[F]&&q.push(`a=${L.alg}`),P.controller!==r.id&&q.push(`c=${P.controller}`),l.push({type:"TXT",name:`_${$}._did.`,ttl:Xm,data:q.join(wI)})}(u=r.service)===null||u===void 0||u.forEach((I,P)=>{let $=`s${P}`;g.push($);let{id:N,type:L,serviceEndpoint:F}=I,U=qye(I,["id","type","serviceEndpoint"]);N=Fa(N),F=Array.isArray(F)?F.join(","):F;let q=Object.entries(Object.assign({id:N,t:L,se:F},U)).map(([E,k])=>`${E}=${k}`).join(wI),T=Ro.chunkDataIfNeeded(q);l.push({type:"TXT",name:`_${$}._did.`,ttl:Xm,data:T})});let S=[`v=${AJe}`];if(b.length&&S.push(`vm=${b.join(pa)}`),Object.keys(rb).forEach(I=>{var P;let $=(P=r[I])===null||P===void 0?void 0:P.map(N=>p.get(N.split("#").pop()));if($){let N=GK[I];S.push(`${N}=${$.join(pa)}`)}}),g.length&&S.push(`svc=${g.join(pa)}`),!((c=n.types)===null||c===void 0)&&c.length){let P=n.types.map($=>typeof $=="string"?zK[$]:$);l.push({type:"TXT",name:"_typ._did.",ttl:Xm,data:`id=${P.join(pa)}`})}l.push({type:"TXT",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Xm,data:S.join(wI)});for(let I of i||[])m.push({type:"NS",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Xm,data:I+"."});return{id:0,type:"response",flags:AT,answers:[...l,...m]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Ro=class t{static createBep44PutMessage(e){return Do(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:i}){let o=Math.ceil(Date.now()/1e3),s=$g(r),a=l1.encode({seq:o,v:s}).subarray(1,-1);if(a.length>1e3)throw new at(tt.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let d=yield i.sign({data:a});return{k:n,seq:o,sig:d,v:s}})}static identifierToIdentityKey(e){return Do(this,arguments,void 0,function*({didUri:r}){let n=t.identifierToIdentityKeyBytes({didUri:r});return yield er.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=or.parse(e);if(!r)throw new at(tt.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Dd.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=de.base32Z(r.id).toUint8Array()}catch{throw new at(tt.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new at(tt.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return Do(this,arguments,void 0,function*({identityKey:r}){let n=yield er.publicKeyToBytes({publicKey:r}),i=de.uint8Array(n).toBase32Z();return`did:${Dd.methodName}:${i}`})}static keyConverter(e){let n={Ed25519:er,"P-256":{publicKeyToBytes:i=>Do(this,[i],void 0,function*({publicKey:o}){let s=yield Br.publicKeyToBytes({publicKey:o});return yield Br.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Br.bytesToPublicKey,privateKeyToBytes:Br.privateKeyToBytes,bytesToPrivateKey:Br.bytesToPrivateKey},secp256k1:{publicKeyToBytes:i=>Do(this,[i],void 0,function*({publicKey:o}){let s=yield Er.publicKeyToBytes({publicKey:o});return yield Er.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Er.bytesToPublicKey,privateKeyToBytes:Er.privateKeyToBytes,bytesToPrivateKey:Er.bytesToPrivateKey},X25519:Gl}[e];if(!n)throw new at(tt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return Do(this,arguments,void 0,function*({bep44Message:r}){let n=yield er.bytesToPublicKey({publicKeyBytes:r.k}),i=l1.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield er.verify({key:n,signature:r.sig,data:i})))throw new at(tt.InvalidSignature,"Invalid signature for DHT BEP44 message");return w1(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(wI).reduce((r,n)=>{let[i,o]=n.split("=");return r[i]=o,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return de.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new at(tt.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return Do(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let i=yield t.identifierToIdentityKey({didUri:n.previousDid}),o=t.identifierToIdentityKeyBytes({didUri:r}),s=de.base64Url(n.signature).toUint8Array();if(!(yield er.verify({key:i,data:o,signature:s})))throw new at(tt.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};h();var Qm=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Zl;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Zl||(Zl={}));var PJe={Ed25519:Zl.Ed25519,ES256K:Zl.secp256k1,ES256:Zl.secp256r1,"P-256":Zl.secp256r1,secp256k1:Zl.secp256k1,secp256r1:Zl.secp256r1},Gye="https://ion.tbd.engineering",WK=class t extends Rd{static create(){return Qm(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s,a,d,u;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(N=>!(N.algorithm in PJe)))throw new Error("One or more verification method algorithms are not supported");let c=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(N=>"id"in N).map(N=>N.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some(N=>!N.id||!N.type||!N.serviceEndpoint))throw new Error("One or more services are missing required properties");let l={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},m=[];for(let N of(s=r.verificationMethods)!==null&&s!==void 0?s:[l]){let L=yield e.generateKey({algorithm:N.algorithm}),F=yield e.getPublicKey({keyUri:L});m.push({id:N.id,publicKeyJwk:F,purposes:(a=N.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let p=yield e.generateKey({algorithm:Zl.secp256k1}),g=yield e.getPublicKey({keyUri:p}),b=yield e.generateKey({algorithm:Zl.secp256k1}),S=yield e.getPublicKey({keyUri:b}),A=yield nb.computeLongFormDidUri({recoveryKey:g,updateKey:S,services:(d=r.services)!==null&&d!==void 0?d:[],verificationMethods:m}),{didDocument:I,didResolutionMetadata:P}=yield t.resolve(A,{gatewayUri:r.gatewayUri});if(I===null)throw new Error(`Unable to resolve DID during creation: ${P?.error}`);let $=new io({uri:A,document:I,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:g,updateKey:S},keyManager:e});if(!((u=r.publish)!==null&&u!==void 0)||u){let N=yield t.publish({did:$,gatewayUri:r.gatewayUri});$.metadata=N.didDocumentMetadata}return $})}static getSigningMethod(e){return Qm(this,arguments,void 0,function*({didDocument:r,methodId:n}){var i;let o=or.parse(r.id);if(o&&o.method!==this.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var d;return a.id===(n??((d=r.assertionMethod)===null||d===void 0?void 0:d[0]))});if(!(s&&s.publicKeyJwk))throw new at(tt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Qm(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=or.parse(r.uri);if(i?.method!==t.methodName)throw new at(tt.MethodNotSupported,"Method not supported");return yield io.import({portableDid:r,keyManager:n})})}static publish(e){return Qm(this,arguments,void 0,function*({did:r,gatewayUri:n=Gye}){var i,o,s;let a=(o=(i=r.document.verificationMethod)===null||i===void 0?void 0:i.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:FK({didDocument:r.document,methodId:c.id})})))!==null&&o!==void 0?o:[],d=yield nb.createIonDocument({services:(s=r.document.service)!==null&&s!==void 0?s:[],verificationMethods:a}),u=yield nb.constructCreateRequest({ionDocument:d,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let c=nb.appendPathToUrl({baseUrl:n,path:"/operations"}),l=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:l.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:tt.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Qm(this,arguments,void 0,function*(r,n={}){var i,o;let s=or.parse(r);if(!s)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"invalidDid"}});if(s.method!==t.methodName)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(i=n?.gatewayUri)!==null&&i!==void 0?i:Gye;try{let d=nb.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),u=yield fetch(d);if(!u.ok)throw new at(tt.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:c,didDocumentMetadata:l}=yield u.json();return Object.assign(Object.assign(Object.assign({},ri),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(o=l?.method)===null||o===void 0?void 0:o.published},l)})}catch(d){if(!(d instanceof at))throw new Error(d);return Object.assign(Object.assign({},ri),{didResolutionMetadata:Object.assign({error:d.code},d.message&&{errorMessage:d.message})})}})}};WK.methodName="ion";var nb=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Qm(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:i,verificationMethods:o}){let s=yield t.createIonDocument({services:i,verificationMethods:o}),a=t.normalizeJwk(r),d=t.normalizeJwk(n);return yield zm.createLongFormDid({document:s,recoveryKey:a,updateKey:d})})}static constructCreateRequest(e){return Qm(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:i}){return yield Jl.createCreateRequest({document:r,recoveryKey:t.normalizeJwk(n),updateKey:t.normalizeJwk(i)})})}static createIonDocument(e){return Qm(this,arguments,void 0,function*({services:r,verificationMethods:n}){var i,o;let s=[];for(let u of n){let c=(o=(i=u.id)!==null&&i!==void 0?i:u.publicKeyJwk.kid)!==null&&o!==void 0?o:yield rt({jwk:u.publicKeyJwk});c=`${c.split("#").pop()}`;let l={id:c,publicKeyJwk:t.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};s.push(l)}let a=r.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:s,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};h();var xI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Bh=class t extends Rd{static create(){return xI(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",d=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:d}),c=de.object(u).toBase64Url(),l=`did:${t.methodName}:${c}`,p=(yield t.resolve(l)).didDocument;return new io({uri:l,document:p,metadata:{},keyManager:e})})}static getSigningMethod(e){return xI(this,arguments,void 0,function*({didDocument:r}){var n;let i=or.parse(r.id);if(i&&i.method!==this.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(o&&o.publicKeyJwk))throw new at(tt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return xI(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=or.parse(r.uri);if(i?.method!==t.methodName)throw new at(tt.MethodNotSupported,"Method not supported");let o=yield io.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new at(tt.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return xI(this,void 0,void 0,function*(){let n=or.parse(e),i;try{i=de.base64Url(n.id).toObject()}catch{}if(!n||!i)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"methodNotSupported"}});let o={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},s=`${o.id}#0`;switch(o.verificationMethod=[{id:s,type:"JsonWebKey",controller:o.id,publicKeyJwk:i}],o.authentication=[s],o.assertionMethod=[s],o.capabilityInvocation=[s],o.capabilityDelegation=[s],o.keyAgreement=[s],i.use){case"sig":{delete o.keyAgreement;break}case"enc":{delete o.authentication,delete o.assertionMethod,delete o.capabilityInvocation,delete o.capabilityDelegation;break}}return Object.assign(Object.assign({},ri),{didDocument:o})})}};Bh.methodName="jwk";h();var Ou=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},Ch;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Ch||(Ch={}));var HK={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},TJe={Ed25519:Ch.Ed25519,ES256K:Ch.secp256k1,ES256:Ch.secp256r1,"P-256":Ch.secp256r1,secp256k1:Ch.secp256k1,secp256r1:Ch.secp256r1,X25519:Ch.X25519},VK=class t extends Rd{static create(){return Ou(this,arguments,void 0,function*({keyManager:e=new Sr,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",d=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:d}),c=yield za.publicKeyToMultibaseId({publicKey:u}),l=`did:${t.methodName}:${c}`,p=(yield t.resolve(l,r)).didDocument;return new io({uri:l,document:p,metadata:{},keyManager:e})})}static getSigningMethod(e){return Ou(this,arguments,void 0,function*({didDocument:r}){var n;let i=or.parse(r.id);if(i&&i.method!==this.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=r.assertionMethod||[],s=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===o);if(!(s&&s.publicKeyJwk))throw new at(tt.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Ou(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Sr}){let i=or.parse(r.uri);if(i?.method!==t.methodName)throw new at(tt.MethodNotSupported,"Method not supported");let o=yield io.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new at(tt.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return Ou(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},ri),{didDocument:n})}catch(n){if(!(n instanceof at))throw new Error(n);return Object.assign(Object.assign({},ri),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Ou(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:i="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:o=!1,enableExperimentalPublicKeyTypes:s=!1,publicKeyFormat:a="JsonWebKey2020"}=n,d={id:""},u=or.parse(r);if(!u)throw new at(tt.InvalidDid,`Invalid DID URI: ${r}`);let c=u.id;if(u.method!==t.methodName)throw new at(tt.MethodNotSupported,`Method not supported: ${u.method}`);if(!t.validateIdentifier(u))throw new at(tt.InvalidDid,`Invalid DID URI: ${r}`);let l=yield t.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:a}});if(d.id=u.uri,d.verificationMethod=[l],d.authentication=[l.id],d.assertionMethod=[l.id],d.capabilityInvocation=[l.id],d.capabilityDelegation=[l.id],o===!0){let g=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",b=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:g}});d.verificationMethod.push(b),d.keyAgreement=[b.id]}let m=[i];return LK({didDocument:d}).forEach(g=>{let b=HK[g];m.push(b)}),d["@context"]=m,d})}static createEncryptionMethod(e){return Ou(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:u}=yield t.deriveEncryptionKey({multibaseValue:n}),c=d.byteLength,l=za.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(c!==l)throw new at(tt.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${l}`);let m=gI({keyBytes:d,multicodecCode:u});a.id=`${r}#${m}`;try{new URL(a.id)}catch{throw new at(tt.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in HK))throw new at(tt.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(s))throw new at(tt.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=m),s==="JsonWebKey2020"){let{crv:g}=yield za.multicodecToJwk({code:u});a.publicKeyJwk=yield za.keyConverter(g).bytesToPublicKey({publicKeyBytes:d})}return a})}static createSignatureMethod(e){return Ou(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:u,multicodecName:c}=bI({multibaseKeyId:n}),l=d.byteLength,m=za.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==m)throw new at(tt.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${m}`);let p=!1;switch(c){case"secp256k1-pub":p=yield Er.validatePublicKey({publicKeyBytes:d});break;case"ed25519-pub":p=yield er.validatePublicKey({publicKeyBytes:d});break;case"x25519-pub":p=!0;break}if(!p)throw new at(tt.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new at(tt.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in HK))throw new at(tt.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(s))throw new at(tt.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),s==="JsonWebKey2020"){let{crv:b}=yield za.multicodecToJwk({code:u});a.publicKeyJwk=yield za.keyConverter(b).bytesToPublicKey({publicKeyBytes:d})}return a})}static deriveEncryptionKey(e){return Ou(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:i,multicodecCode:o}=bI({multibaseKeyId:r});if(o===237){let s=yield za.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:i}),a=yield er.convertPublicKeyToX25519({publicKey:s});n={keyBytes:yield za.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[i]=e.uri.split(":",1);return i==="did"&&r==="key"&&Number("1")>0&&vm(n)==="String"&&n.startsWith("z")}};VK.methodName="key";var za=class t{static jwkToMulticodec(e){return Ou(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let i=n.join(":"),o=t.JWK_TO_MULTICODEC[i];if(o===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${i}'`);return{code:mi.getCodeFromName({name:o}),name:o}})}static keyCompressor(e){let n={"P-256":Br.compressPublicKey,secp256k1:Er.compressPublicKey}[e];if(!n)throw new at(tt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:er,"P-256":Br,secp256k1:Er,X25519:Gl}[e];if(!n)throw new at(tt.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Ou(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?mi.getNameFromCode({code:r}):n;let i=n,o=t.MULTICODEC_TO_JWK[i];if(o===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},o)})}static publicKeyToMultibaseId(e){return Ou(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in TJe))throw new at(tt.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let i=yield t.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(i=yield t.keyCompressor(r.crv)({publicKeyBytes:i}));let{name:o}=yield t.jwkToMulticodec({jwk:r});return gI({keyBytes:i,multicodecName:o})})}};za.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};za.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};za.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};h();var IJe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},JK=class t extends Rd{static resolve(e,r){return IJe(this,void 0,void 0,function*(){let n=or.parse(e);if(!n)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"methodNotSupported"}});let i=`https://${n.id.replace(/:/g,"/")}`;i=decodeURIComponent(i);let o=n.id.includes(":")?`${i}/did.json`:`${i}/.well-known/did.json`;try{let s=yield fetch(o);if(!s.ok)throw new Error("HTTP error status code returned");let a=yield s.json();return Object.assign(Object.assign({},ri),{didDocument:a})}catch{return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:"notFound"}})}})}};JK.methodName="web";h();var Wye=Ut(qg(),1),Hye=Ut(yK(),1),kJe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},q1=class{constructor({db:e,location:r="DATA/DID_RESOLVERCACHE",ttl:n="15m"}={}){this.cache=e??new Hye.Level(r),this.ttl=(0,Wye.default)(n)}get(e){return kJe(this,void 0,void 0,function*(){try{let r=yield this.cache.get(e),n=JSON.parse(r);if(Date.now()>=n.ttlMillis){this.cache.nextTick(()=>this.cache.del(e));return}else return n.value}catch(r){if(r.notFound)return;throw r}})}set(e,r){let n={ttlMillis:Date.now()+this.ttl,value:r},i=JSON.stringify(n);return this.cache.put(e,i)}delete(e){return this.cache.del(e)}clear(){return this.cache.clear()}close(){return this.cache.close()}};h();var Vye={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};h();var Jye=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(l){s(l)}}function d(c){try{u(n.throw(c))}catch(l){s(l)}}function u(c){c.done?o(c.value):i(c.value).then(a,d)}u((n=n.apply(t,e||[])).next())})},L1=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||Vye;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return Jye(this,void 0,void 0,function*(){let n=or.parse(e);if(!n)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:tt.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let i=this.didResolvers.get(n.method);if(!i)return Object.assign(Object.assign({},ri),{didResolutionMetadata:{error:tt.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let o=yield this.cache.get(n.uri);if(o)return o;{let s=yield i.resolve(n.uri,r);return s.didResolutionMetadata.error||(yield this.cache.set(n.uri,s)),s}})}dereference(e,r){return Jye(this,void 0,void 0,function*(){let n=or.parse(e);if(!n)return{dereferencingMetadata:{error:tt.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:i,didResolutionMetadata:o,didDocumentMetadata:s}=yield this.resolve(n.uri);if(!i)return{dereferencingMetadata:{error:o.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:i,contentMetadata:s};let{service:a=[],verificationMethod:d=[]}=i,u=new Set([e,n.fragment,`#${n.fragment}`]),c;for(let l of d)if(u.has(l.id)){c=l;break}for(let l of a)if(u.has(l.id)){c=l;break}return c?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:c,contentMetadata:o}:{dereferencingMetadata:{error:tt.NotFound},contentStream:null,contentMetadata:{}}})}};h();h();var us="^",EI=class extends Sr{constructor(){super();this._predefinedKeys=new Map,this._keyGenerator=this._predefinedKeys.keys()}async addPredefinedKeys({privateKeys:r}){let n={};for(let i of r){i.kid??=await rt({jwk:i});let o=await this.getKeyUri({key:i});n[o]=i}this._predefinedKeys=new Map(Object.entries(n)),this._keyGenerator=this._predefinedKeys.keys()}async exportKey({keyUri:r}){let n=this._predefinedKeys.get(r);if(!n)throw new Error(`DeterministicKeyGenerator.exportKey: Key not found: ${r}`);return n}async generateKey(r){let{value:n,done:i}=this._keyGenerator.next();if(i)throw new Error("Ran out of predefined keys");return n}async getPublicKey({keyUri:r}){let n=this._predefinedKeys.get(r);if(!n)throw new Error(`DeterministicKeyGenerator.getPublicKey: Key not found: ${r}`);let{d:i,...o}=n;return o}async sign({keyUri:r,data:n}){let i=this._predefinedKeys.get(r);if(!i)throw new Error(`DeterministicKeyGenerator.sign: Key not found: ${r}`);return await er.sign({data:n,key:i})}};async function Oh({agent:t,tenant:e,didUri:r}){if(e)return e;if(t.agentDid)return t.agentDid.uri;if(!r)throw new Error("Failed to determine tenant DID: 'agent.agentDid', 'tenant', and 'didUri' are undefined");return r}h();function F1(t){return!(!t||typeof t!="object"||t===null)&&"uri"in t&&"document"in t&&"metadata"in t&&(!("keyManager"in t)||t.keyManager===void 0)}h();var YK=Ut(qg(),1);var ey=class{constructor(){this.name="DwnDataStore";this._cache=new bm.default({ttl:(0,YK.default)("15 minutes"),max:100});this._index=new bm.default({ttl:(0,YK.default)("2 hours"),max:1e3});this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/private-jwk"}}async delete({id:e,agent:r,tenant:n}){let i=await Oh({agent:r,tenant:n,didUri:e}),o=await this.lookupRecordId({id:e,tenantDid:i,agent:r});if(!o)return!1;let{reply:{status:s}}=await r.dwn.processRequest({author:i,target:i,messageType:Gr.RecordsDelete,messageParams:{recordId:o}});if(s.code===202)return this._index.delete(`${i}${us}${e}`),this._cache.delete(o),!0;throw new Error(`${this.name}: Failed to delete '${e}' from store: (${s.code}) ${s.detail}`)}async get({id:e,agent:r,tenant:n,useCache:i=!1}){let o=await Oh({agent:r,tenant:n,didUri:e}),s=await this.lookupRecordId({id:e,tenantDid:o,agent:r});if(s)return await this.getRecord({recordId:s,tenantDid:o,agent:r,useCache:i})}async list({agent:e,tenant:r}){let n=await Oh({tenant:r,agent:e});return await this.getAllRecords({agent:e,tenantDid:n})}async set({id:e,data:r,tenant:n,agent:i,preventDuplicates:o=!0,useCache:s=!1}){let a=await Oh({agent:i,tenant:n,didUri:e});if(o&&await this.lookupRecordId({id:e,tenantDid:a,agent:i}))throw new Error(`${this.name}: Import failed due to duplicate entry for: ${e}`);let d=de.object(r).toUint8Array(),{message:u,reply:{status:c}}=await i.dwn.processRequest({author:a,target:a,messageType:Gr.RecordsWrite,messageParams:{...this._recordProperties},dataStream:new Blob([d],{type:"application/json"})});if(!(u&&c.code===202))throw new Error(`${this.name}: Failed to write data to store for: ${e}`);this._index.set(`${a}${us}${e}`,u.recordId),s&&this._cache.set(u.recordId,r)}async getAllRecords(e){throw new Error("Not implemented: Classes extending DwnDataStore must implement getAllRecords()")}async getRecord({recordId:e,tenantDid:r,agent:n,useCache:i}){if(i){let a=this._cache.get(e);if(a)return a}let{reply:o}=await n.dwn.processRequest({author:r,target:r,messageType:Gr.RecordsRead,messageParams:{filter:{recordId:e}}});if(!o.record?.data)throw new Error(`${this.name}: Failed to read data from DWN for: ${e}`);let s=await _h.consumeToJson({readable:o.record.data});return i&&this._cache.set(e,s),s}async lookupRecordId({id:e,tenantDid:r,agent:n}){let i=this._index.get(`${r}${us}${e}`,{updateAgeOnGet:!0});return i||(await this.getAllRecords({agent:n,tenantDid:r}),i=this._index.get(`${r}${us}${e}`)),i}},ty=class{constructor(){this.name="InMemoryDataStore";this.store=new Map}async delete({id:e,agent:r,tenant:n}){let i=await Oh({agent:r,tenant:n,didUri:e});return this.store.has(`${i}${us}${e}`)?(this.store.delete(`${i}${us}${e}`),!0):!1}async get({id:e,agent:r,tenant:n}){let i=await Oh({agent:r,tenant:n,didUri:e});return this.store.get(`${i}${us}${e}`)}async list({agent:e,tenant:r}){let n=await Oh({tenant:r,agent:e}),i=[];for(let[o,s]of this.store.entries())o.startsWith(`${n}${us}`)&&i.push(s);return i}async set({id:e,data:r,tenant:n,agent:i,preventDuplicates:o}){let s=await Oh({agent:i,tenant:n,didUri:e});if(o&&this.store.has(`${s}${us}${e}`))throw new Error(`${this.name}: Import failed due to duplicate entry for: ${e}`);let a=structuredClone(r);this.store.set(`${s}${us}${e}`,a)}};var SI=class extends ey{constructor(){super(...arguments);this.name="DwnDidStore";this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/portable-did"}}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async list(r){return await super.list(r)}async set(r){return await super.set(r)}async getAllRecords({agent:r,tenantDid:n}){this._index.clear();let{reply:i}=await r.dwn.processRequest({author:n,target:n,messageType:Gr.RecordsQuery,messageParams:{filter:{...this._recordProperties}}}),o=[];for(let s of i.entries??[]){if(!s.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);let a=de.base64Url(s.encodedData).toObject();if(F1(a)){let d=`${n}${us}${a.uri}`;this._index.set(d,s.recordId),this._cache.set(s.recordId,a),o.push(a)}}return o}},z1=class extends ty{constructor(){super(...arguments);this.name="InMemoryDidStore"}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async list(r){return await super.list(r)}async set(r){return await super.set(r)}};h();var Yye=Ut(qg(),1);var G1=class{constructor({ttl:e="15m"}={}){this.cache=new bm.default({ttl:(0,Yye.default)(e)})}async get(e){if(!e)throw new Error("Key cannot be null or undefined");return this.cache.get(e)}async set(e,r){this.cache.set(e,r)}async delete(e){this.cache.delete(e)}async clear(){this.cache.clear()}async close(){}};var RJe=(r=>(r.Create="Create",r.Resolve="Resolve",r))(RJe||{});function Zye(t,e){return t.messageType===e}var tS=class extends L1{constructor({agent:r,didMethods:n,resolverCache:i,store:o}){if(!n)throw new TypeError("AgentDidApi: Required parameter missing: 'didMethods'");super({didResolvers:n,cache:i??new G1});this._didMethods=new Map;this._agent=r,this._store=o??new z1;for(let s of n)this._didMethods.set(s.methodName,s)}get agent(){if(this._agent===void 0)throw new Error("AgentDidApi: Unable to determine agent execution context.");return this._agent}set agent(r){this._agent=r}async create({method:r,tenant:n,options:i,store:o}){let a=await this.getMethod(r).create({keyManager:this.agent.keyManager,options:i});if(o??!0){let{uri:d,document:u,metadata:c}=a,l={uri:d,document:u,metadata:c};await this._store.set({id:l.uri,data:l,agent:this.agent,tenant:n??l.uri,preventDuplicates:!1,useCache:!0})}return a}async export({didUri:r,tenant:n}){let i=await this.get({didUri:r,tenant:n});if(!i)throw new Error(`AgentDidApi: Failed to export due to DID not found: ${r}`);return await i.export()}async get({didUri:r,tenant:n}){let i=await this._store.get({id:r,agent:this.agent,tenant:n,useCache:!0});return i?await io.import({portableDid:i,keyManager:this.agent.keyManager}):void 0}async getSigningMethod({didUri:r,methodId:n}){let i=or.parse(r);if(!i)throw new Error(`Invalid DID URI: ${r}`);let o=this.getMethod(i.method),{didDocument:s,didResolutionMetadata:a}=await this.resolve(r);if(!s)throw new Error(`DID resolution failed for '${r}': ${JSON.stringify(a)}`);return await o.getSigningMethod({didDocument:s,methodId:n})}async import({portableDid:r,tenant:n}){let i=await io.import({keyManager:this.agent.keyManager,portableDid:r}),{uri:o,document:s,metadata:a}=i,d={uri:o,document:s,metadata:a};return await this._store.set({id:d.uri,data:d,agent:this.agent,tenant:n??d.uri,preventDuplicates:!0,useCache:!0}),i}async processRequest(r){if(Zye(r,"Create"))try{let n=await this.create({...r.messageParams});return{result:{uri:n.uri,document:n.document,metadata:n.metadata},ok:!0,status:{code:201,message:"Created"}}}catch(n){return{ok:!1,status:{code:500,message:n.message??"Unknown error occurred"}}}if(Zye(r,"Resolve")){let{didUri:n,options:i}=r.messageParams;return{result:await this.resolve(n,i),ok:!0,status:{code:200,message:"OK"}}}throw new Error(`AgentDidApi: Unsupported request type: ${r.messageType}`)}getMethod(r){let n=this._didMethods.get(r);if(n===void 0)throw new Error(`DID Method not supported: ${r}`);return n}};h();h();var Qye=Ut(Xye(),1);function XK(t){return TI(t.stream())}async function PI(t,e){let r=await e.dereference(`${t}#dwn`);if(r.dereferencingMetadata.error)throw new Error(`Failed to dereference '${t}#dwn': ${r.dereferencingMetadata.error}`);if(vI.isDwnDidService(r.contentStream)){let{serviceEndpoint:n}=r.contentStream,i=typeof n=="string"?[n]:Array.isArray(n)&&n.every(o=>typeof o=="string")?n:[];if(i.length>0)return i}return[]}function w$t(t){return ht.getAuthor(t)}function W1(t){return!t||typeof t!="object"||t===null?!1:"message"in t&&typeof t.message=="object"&&t.message!==null&&"descriptor"in t.message&&typeof t.message.descriptor=="object"&&t.message.descriptor!==null&&"interface"in t.message.descriptor&&t.message.descriptor.interface===Ae.Records&&"method"in t.message.descriptor&&t.message.descriptor.method===_e.Write}function MJe(t){return be.getCid(t)}async function _$t(t,e){let r=e===$i.CreatedAscending||e===$i.CreatedDescending?t.descriptor.dateCreated:t.descriptor.datePublished;if(r===void 0)throw new Error("The dateCreated or datePublished property is missing from the record descriptor.");return{messageCid:await MJe(t),value:r}}function TI(t){return new Qye.ReadableWebToNodeStream(t)}function BJe(t,e){return t.messageType===e}function R$t(t,e){return e.descriptor.interface+e.descriptor.method===t}var rS=class{constructor({agent:e,dwn:r}){this._agent=e,this._dwn=r}get agent(){if(this._agent===void 0)throw new Error("AgentDwnApi: Unable to determine agent execution context.");return this._agent}set agent(e){this._agent=e}get node(){return this._dwn}static async createDwn({dataPath:e,dataStore:r,didResolver:n,eventLog:i,eventStream:o,messageStore:s,tenantGate:a}){return r??=new Hg({blockstoreLocation:`${e}/DWN_DATASTORE`}),n??=new L1({didResolvers:[Dd,Bh],cache:new q1({location:`${e}/DID_RESOLVERCACHE`})}),i??=new Zg({location:`${e}/DWN_EVENTLOG`}),s??=new Qg({blockstoreLocation:`${e}/DWN_MESSAGESTORE`,indexLocation:`${e}/DWN_MESSAGEINDEX`}),await M6.create({dataStore:r,didResolver:n,eventLog:i,eventStream:o,messageStore:s,tenantGate:a})}async processRequest(e){let{message:r,dataStream:n}=await this.constructDwnMessage({request:e}),{subscriptionHandler:i}=e;return{reply:e.store!==!1?await this._dwn.processMessage(e.target,r,{dataStream:n,subscriptionHandler:i}):{status:{code:202,detail:"Accepted"}},message:r,messageCid:await be.getCid(r)}}async sendRequest(e){let r=await PI(e.target,this.agent.did);if(r.length===0)throw new Error(`AgentDwnApi: DID Service is missing or malformed: ${e.target}#dwn`);let n,i,o,s;if("messageCid"in e)({message:i,data:o}=await this.getDwnMessage({author:e.author,messageCid:e.messageCid,messageType:e.messageType})),n=e.messageCid;else{if({message:i}=await this.constructDwnMessage({request:e}),e.dataStream&&!(e.dataStream instanceof Blob))throw new Error("AgentDwnApi: DataStream must be provided as a Blob");o=e.dataStream,s=e.subscriptionHandler}let a=await this.sendDwnRpcRequest({targetDid:e.target,dwnEndpointUrls:r,message:i,data:o,subscriptionHandler:s});return n??=await be.getCid(i),{reply:a,message:i,messageCid:n}}async sendDwnRpcRequest({targetDid:e,dwnEndpointUrls:r,message:n,data:i,subscriptionHandler:o}){let s=[];if(n.descriptor.method===_e.Subscribe&&o===void 0)throw new Error("AgentDwnApi: Subscription handler is required for subscription requests.");for(let a of r)try{if(o!==void 0){if(!(await this.agent.rpc.getServerInfo(a)).webSocketSupport){s.push({url:a,message:"WebSocket support is not enabled on the server."});continue}let c=new URL(a);c.protocol=c.protocol==="http:"?"ws:":"wss:",a=c.toString()}return await this.agent.rpc.sendDwnRequest({dwnUrl:a,targetDid:e,message:n,data:i,subscriptionHandler:o})}catch(d){s.push({url:a,message:d instanceof Error?d.message:"Unknown error"})}throw new Error(`Failed to send DWN RPC request: ${JSON.stringify(s)}`)}async constructDwnMessage({request:e}){let r=e.rawMessage,n;if(BJe(e,Gr.RecordsWrite)){let a=e.messageParams;if(e.dataStream&&!a?.data){let{dataStream:d}=e,u;if(d instanceof Blob)u=XK(d),n=XK(d);else if(d instanceof ReadableStream){let[c,l]=d.tee();u=TI(c),n=TI(l)}r||(a.dataCid=await Sn.computeDagPbCidFromStream(u),a.dataSize??=u.bytesRead)}}let i=await this.getSigner(e.author),o=Z6[e.messageType],s=r?await o.parse(r):await o.create({...e.messageParams,signer:i});return W1(s)&&e.signAsOwner&&await s.signAsOwner(i),{message:s.message,dataStream:n}}async getSigner(e){if(e===this.agent.agentDid.uri){let r=await this.agent.agentDid.getSigner();return{algorithm:r.algorithm,keyId:r.keyId,sign:async n=>await r.sign({data:n})}}else try{let r=await this.agent.did.getSigningMethod({didUri:e});if(!r.publicKeyJwk)throw new Error(`Verification method '${r.id}' does not contain a public key in JWK format`);let n=await this.agent.keyManager.getKeyUri({key:r.publicKeyJwk}),i=await this.agent.keyManager.getPublicKey({keyUri:n}),o=this.agent.keyManager;return{algorithm:ki.getJoseSignatureAlgorithmFromPublicKey(i),keyId:r.id,sign:async s=>await o.sign({data:s,keyUri:n})}}catch(r){throw new Error(`AgentDwnApi: Unable to get signer for author '${e}': ${r.message}`)}}async getDwnMessage({author:e,messageCid:r}){let n=await this.getSigner(e),i=await Z6[Gr.MessagesGet].create({messageCids:[r],signer:n}),o=await this._dwn.processMessage(e,i.message);if(!(o.entries&&o.entries.length===1))throw new Error("AgentDwnApi: Expected 1 message entry in the MessagesGet response but received none or more than one.");let[s]=o.entries,a=s.message;if(!a)throw new Error(`AgentDwnApi: Message not found with CID: ${r}`);let d={message:a};if(W1(s))if(s.encodedData){let u=de.base64Url(s.encodedData).toUint8Array();d.data=new Blob([u])}else{let u=await Z6[Gr.RecordsRead].create({filter:{recordId:s.message.recordId},signer:n}),c=await this._dwn.processMessage(e,u.message);if(c.status.code>=400){let{status:{code:l,detail:m}}=c;throw new Error(`AgentDwnApi: (${l}) Failed to read data associated with record ${s.message.recordId}. ${m}}`)}else if(c.record){let l=await _h.consumeToBytes({readable:c.record.data});d.data=new Blob([l])}}return d}async createMessage({author:e,messageParams:r,messageType:n}){let i=await this.getSigner(e);return await Z6[n].create({...r,signer:i})}async processMessage({dataStream:e,message:r,targetDid:n}){return await this._dwn.processMessage(n,r,{dataStream:e})}};h();h();h();var CJe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),t0e=Uint8Array.from({length:16},(t,e)=>e),OJe=t0e.map(t=>(9*t+5)%16),eq=[t0e],tq=[OJe];for(let t=0;t<4;t++)for(let e of[eq,tq])e.push(e[t].map(r=>CJe[r]));var r0e=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),$Je=eq.map((t,e)=>t.map(r=>r0e[e][r])),NJe=tq.map((t,e)=>t.map(r=>r0e[e][r])),jJe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),UJe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),II=(t,e)=>t<<e|t>>>32-e;function e0e(t,e,r,n){return t===0?e^r^n:t===1?e&r|~e&n:t===2?(e|~r)^n:t===3?e&n|r&~n:e^(r|~n)}var kI=new Uint32Array(16),QK=class extends Hh{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:r,h2:n,h3:i,h4:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.h0=e|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(e,r){for(let p=0;p<16;p++,r+=4)kI[p]=e.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,d=a,u=this.h3|0,c=u,l=this.h4|0,m=l;for(let p=0;p<5;p++){let g=4-p,b=jJe[p],S=UJe[p],A=eq[p],I=tq[p],P=$Je[p],$=NJe[p];for(let N=0;N<16;N++){let L=II(n+e0e(p,o,a,u)+kI[A[N]]+b,P[N])+l|0;n=l,l=u,u=II(a,10)|0,a=o,o=L}for(let N=0;N<16;N++){let L=II(i+e0e(g,s,d,c)+kI[I[N]]+S,$[N])+m|0;i=m,m=c,c=II(d,10)|0,d=s,s=L}}this.set(this.h1+a+c|0,this.h2+u+m|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+d|0)}roundClean(){kI.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},n0e=_b(()=>new QK);var KJe=m2("ed25519 seed"),rq=2147483648,i0e=new Uint8Array([0]);function o0e(t,...e){return typeof t=="string"&&(t=VL(t)),af(t,...e),t}var qJe=t=>n0e(ms(t)),LJe=t=>df(t).getUint32(0,!1),nq=t=>{if(!Number.isSafeInteger(t)||t<0||t>2**32-1)throw new Error(`Invalid number=${t}. Should be from 0 to 2 ** 32 - 1`);let e=new Uint8Array(4);return df(e).setUint32(0,t,!1),e},RI=class t{get publicKeyRaw(){return _d.getPublicKey(this.privateKey)}get publicKey(){return my(i0e,this.publicKeyRaw)}get pubHash(){return qJe(this.publicKey)}get fingerprint(){return LJe(this.pubHash)}get fingerprintHex(){return Ck(nq(this.fingerprint))}get parentFingerprintHex(){return Ck(nq(this.parentFingerprint))}static fromMasterSeed(e){if(e=o0e(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let r=Wh(jm,KJe,e);return new t({privateKey:r.slice(0,32),chainCode:r.slice(32)})}constructor(e){if(this.depth=0,this.index=0,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(af(e.privateKey,32),af(e.chainCode,32),this.depth=e.depth||0,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");this.chainCode=e.chainCode,this.privateKey=e.privateKey}derive(e,r=!1){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let n=e.replace(/^[mM]'?\//,"").split("/"),i=this;for(let o of n){let s=/^(\d+)('?)$/.exec(o);if(!s||s.length!==3)throw new Error(`Invalid child index: ${o}`);let a=+s[1];if(!Number.isSafeInteger(a)||a>=rq)throw new Error("Invalid index");(r||s[2]==="'")&&(a+=rq),i=i.deriveChild(a)}return i}deriveChild(e){if(e<rq)throw new Error(`Non-hardened child derivation not possible for Ed25519 (index=${e})`);let r=my(i0e,this.privateKey,nq(e)),n=Wh(jm,this.chainCode,r);return new t({chainCode:n.slice(32),depth:this.depth+1,parentFingerprint:this.fingerprint,index:e,privateKey:n.slice(0,32)})}sign(e){return _d.sign(e,this.privateKey)}verify(e,r){return r=o0e(r,64),_d.verify(r,e,this.publicKeyRaw)}};h();var iq=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);h();h();function FJe(t,e,r,n){IS(t);let i=YL({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(zh(o),zh(s),zh(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let d=Gh(e),u=Gh(r),c=new Uint8Array(s),l=Wh.create(t,d),m=l._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:c,PRF:l,PRFSalt:m}}function zJe(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}async function s0e(t,e,r,n){let{c:i,dkLen:o,asyncTick:s,DK:a,PRF:d,PRFSalt:u}=FJe(t,e,r,n),c,l=new Uint8Array(4),m=df(l),p=new Uint8Array(d.outputLen);for(let g=1,b=0;b<o;g++,b+=d.outputLen){let S=a.subarray(b,b+d.outputLen);m.setInt32(0,g,!1),(c=u._cloneInto(c)).update(l).digestInto(p),S.set(p.subarray(0,S.length)),await JL(i-1,s,()=>{d._cloneInto(c).update(p).digestInto(p);for(let A=0;A<S.length;A++)S[A]^=p[A]})}return zJe(d,u,a,c,p)}h();function ib(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function DI(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function GJe(...t){let e=o=>o,r=(o,s)=>a=>o(s(a)),n=t.map(o=>o.encode).reduceRight(r,e),i=t.map(o=>o.decode).reduce(r,e);return{encode:n,decode:i}}function WJe(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(r=>{if(r<0||r>=t.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${t.length})`);return t[r]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=t.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${t}`);return n})}}}function HJe(t=""){if(typeof t!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of e)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return e.join(t)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(t)}}}function VJe(t,e="="){if(typeof e!="string")throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of r)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;r.length*t%8;)r.push(e);return r},decode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of r)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=r.length;if(n*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if(!((n-1)*t%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function oq(t,e,r){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let n=0,i=[],o=Array.from(t);for(o.forEach(s=>{if(s<0||s>=e)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let d=n;d<o.length;d++){let u=o[d],c=e*s+u;if(!Number.isSafeInteger(c)||e*s/e!==s||c-u!==e*s)throw new Error("convertRadix: carry overflow");s=c%r;let l=Math.floor(c/r);if(o[d]=l,!Number.isSafeInteger(l)||l*r+s!==c)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:n=d;else continue}if(i.push(s),a)break}for(let s=0;s<t.length-1&&t[s]===0;s++)i.push(0);return i.reverse()}var a0e=(t,e)=>e?a0e(e,t%e):t,MI=(t,e)=>t+(e-a0e(t,e));function sq(t,e,r,n){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(MI(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${MI(e,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let d of t){if(d>=2**e)throw new Error(`convertRadix2: invalid data word=${d} from=${e}`);if(i=i<<e|d,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=e)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function JJe(t){return{encode:e=>{if(!DI(e))throw new Error("radix.encode input should be Uint8Array");return oq(Array.from(e),2**8,t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(oq(e,t,2**8))}}}function YJe(t,e=!1){if(t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(MI(8,t)>32||MI(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!DI(r))throw new Error("radix2.encode input should be Uint8Array");return sq(Array.from(r),8,t,!e)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(sq(r,t,8,e))}}}function ZJe(t,e){if(typeof e!="function")throw new Error("checksum fn should be function");return{encode(r){if(!DI(r))throw new Error("checksum.encode: input should be Uint8Array");let n=e(r).slice(0,t),i=new Uint8Array(r.length+t);return i.set(r),i.set(n,r.length),i},decode(r){if(!DI(r))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-t),i=e(n).slice(0,t),o=r.slice(-t);for(let s=0;s<t;s++)if(i[s]!==o[s])throw new Error("Invalid checksum");return n}}}var nS={alphabet:WJe,chain:GJe,checksum:ZJe,convertRadix:oq,convertRadix2:sq,radix:JJe,radix2:YJe,join:HJe,padding:VJe};var XJe=t=>t[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function c0e(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function d0e(t){let e=c0e(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}function u0e(t){af(t,16,20,24,28,32)}function l0e(t,e=128){if(zh(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return tYe(uf(e/8),t)}var QJe=t=>{let e=8-t.length/4;return new Uint8Array([ms(t)[0]>>e<<e])};function f0e(t){if(!Array.isArray(t)||t.length!==2048||typeof t[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),nS.chain(nS.checksum(1,QJe),nS.radix2(11,!0),nS.alphabet(t))}function eYe(t,e){let{words:r}=d0e(t),n=f0e(e).decode(r);return u0e(n),n}function tYe(t,e){return u0e(t),f0e(e).encode(t).join(XJe(e)?"\u3000":" ")}function h0e(t,e){try{eYe(t,e)}catch{return!1}return!0}var rYe=t=>c0e(`mnemonic${t}`);function p0e(t,e=""){return s0e(jm,d0e(t).nfkd,rYe(e),{c:2048,dkLen:64})}h();h();var BI=class extends ey{constructor(){super(...arguments);this.name="DwnKeyStore";this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/private-jwk"}}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async set(r){await super.set(r)}async list(r){return await super.list(r)}async getAllRecords({agent:r,tenantDid:n}){this._index.clear();let{reply:i}=await r.dwn.processRequest({author:n,target:n,messageType:Gr.RecordsQuery,messageParams:{filter:{...this._recordProperties}}}),o=[];for(let s of i.entries??[]){if(!s.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);let a=de.base64Url(s.encodedData).toObject();if(a1(a)){let d=`${n}${us}${Mg}${a.kid}`;this._index.set(d,s.recordId),this._cache.set(s.recordId,a),o.push(a)}}return o}},H1=class extends ty{constructor(){super(...arguments);this.name="InMemoryKeyStore"}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async list(r){return await super.list(r)}async set(r){return await super.set(r)}};var aq={"AES-GCM":{implementation:oT,names:["A128GCM","A192GCM","A256GCM"]},"AES-KW":{implementation:K1,names:["A128KW","A192KW","A256KW"]},Ed25519:{implementation:c1,names:["Ed25519"]},secp256k1:{implementation:Om,names:["ES256K","secp256k1"]},secp256r1:{implementation:Om,names:["ES256","secp256r1"]},"SHA-256":{implementation:Mm,names:["SHA-256"]}},Md=class{constructor({agent:e,keyStore:r}={}){this._algorithmInstances=new Map;this._agent=e,this._keyStore=r??new H1}get agent(){if(this._agent===void 0)throw new Error("LocalKeyManager: Unable to determine agent execution context.");return this._agent}set agent(e){this._agent=e}async decrypt({keyUri:e,...r}){let n=await this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return await this.getAlgorithm({algorithm:i}).decrypt({key:n,...r})}digest(e){throw new Error("Method not implemented.")}async encrypt({keyUri:e,...r}){let n=await this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return await this.getAlgorithm({algorithm:i}).encrypt({key:n,...r})}async exportKey({keyUri:e}){return await this.getPrivateKey({keyUri:e})}async generateKey({algorithm:e}){let r=this.getAlgorithmName({key:{alg:e}}),i=await this.getAlgorithm({algorithm:r}).generateKey({algorithm:e});i.kid??=await rt({jwk:i});let o=await this.getKeyUri({key:i});return await this._keyStore.set({id:o,data:i,agent:this.agent,preventDuplicates:!1,useCache:!0}),o}async getKeyUri({key:e}){let r=await rt({jwk:e});return`${Mg}${r}`}async getPublicKey({keyUri:e}){let r=await this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return await this.getAlgorithm({algorithm:n}).getPublicKey({key:r})}async importKey({key:e}){if(!a1(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let r=structuredClone(e);r.kid??=await rt({jwk:r});let n=await this.getKeyUri({key:r});return await this._keyStore.set({id:n,data:r,agent:this.agent,preventDuplicates:!0,useCache:!0}),n}async sign({keyUri:e,data:r}){let n=await this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:i}).sign({data:r,key:n})}async unwrapKey({wrappedKeyBytes:e,wrappedKeyAlgorithm:r,decryptionKeyUri:n}){let i=await this.getPrivateKey({keyUri:n}),o=this.getAlgorithmName({key:i});return await this.getAlgorithm({algorithm:o}).unwrapKey({wrappedKeyBytes:e,wrappedKeyAlgorithm:r,decryptionKey:i})}async verify({key:e,signature:r,data:n}){let i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})}async wrapKey({unwrappedKey:e,encryptionKeyUri:r}){let n=await this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:n});return await this.getAlgorithm({algorithm:i}).wrapKey({unwrappedKey:e,encryptionKey:n})}getAlgorithm({algorithm:e}){let r=aq[e]?.implementation;if(!r)throw new it("algorithmNotSupported",`Algorithm not supported: ${e}`);return this._algorithmInstances.has(r)||this._algorithmInstances.set(r,new r),this._algorithmInstances.get(r)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let i of Object.keys(aq)){let o=aq[i].names;if(r&&o.includes(r))return i;if(n&&o.includes(n))return i}throw new it("algorithmNotSupported",`Algorithm not supported based on provided input: alg=${r}, crv=${n}. Please check the documentation for the list of supported algorithms.`)}async getPrivateKey({keyUri:e}){let r=await this._keyStore.get({id:e,agent:this.agent,useCache:!0});if(!r)throw new Error(`Key not found: ${e}`);return r}};h();h();function oS(t){return typeof t=="object"&&t!==null&&"alg"in t&&t.alg!==void 0&&"enc"in t&&t.enc!==void 0}var iS=class{static async decrypt({key:e,encryptedKey:r,joseHeader:n,crypto:i}){switch(n.alg){case"dir":{if(r!==void 0)throw new it("invalidJwe",'JWE "encrypted_key" is not allowed when using "dir" (Direct Encryption Mode).');if(e instanceof Uint8Array)throw new it("invalidJwe",'Key management "key" must be a Key URI or JWK when using "dir" (Direct Encryption Mode).');return e}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(typeof n.p2c!="number")throw new it("invalidJwe",'JOSE Header "p2c" (PBES2 Count) is missing or not a number.');if(typeof n.p2s!="string")throw new it("invalidJwe",'JOSE Header "p2s" (PBES2 salt) is missing or not a string.');if(!(e instanceof Uint8Array))throw new it("invalidJwe",'Key management "key" must be a Uint8Array when using "PBES2" (Key Encryption Mode).');if(r===void 0)throw new it("invalidJwe",'JWE "encrypted_key" is required when using "PBES2" (Key Encryption Mode).');let o;try{o=new Uint8Array([...de.string(n.alg).toUint8Array(),0,...de.base64Url(n.p2s).toUint8Array()])}catch{throw new it("encodingError",'Failed to decode the JOSE Header "p2s" (PBES2 salt) value.')}let s=await i.deriveKey({algorithm:n.alg,baseKeyBytes:e,iterations:n.p2c,salt:o});if(!(s.alg&&["A128KW","A192KW","A256KW"].includes(s.alg)))throw new it("algorithmNotSupported",`Unsupported Key Encryption Algorithm (alg) value: ${s.alg}`);return await i.unwrapKey({decryptionKey:s,wrappedKeyBytes:r,wrappedKeyAlgorithm:n.enc})}default:throw new it("algorithmNotSupported",`Unsupported "alg" (Algorithm) Header Parameter value: ${n.alg}`)}}static async encrypt({key:e,joseHeader:r,crypto:n}){let i,o;switch(r.alg){case"dir":{if(o!==void 0)throw new it("invalidJwe",'JWE "encrypted_key" is not allowed when using "dir" (Direct Encryption Mode).');if(e instanceof Uint8Array)throw new it("invalidJwe",'Key management "key" must be a Key URI or JWK when using "dir" (Direct Encryption Mode).');i=e;break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(typeof r.p2c!="number")throw new it("invalidJwe",'JOSE Header "p2c" (PBES2 Count) is missing or not a number.');if(typeof r.p2s!="string")throw new it("invalidJwe",'JOSE Header "p2s" (PBES2 salt) is missing or not a string.');if(!(e instanceof Uint8Array))throw new it("invalidJwe",'Key management "key" must be a Uint8Array when using "PBES2" (Key Encryption Mode).');i=await n.generateKey({algorithm:r.enc});let s;try{s=new Uint8Array([...de.string(r.alg).toUint8Array(),0,...de.base64Url(r.p2s).toUint8Array()])}catch{throw new it("encodingError",'Failed to decode the JOSE Header "p2s" (PBES2 salt) value.')}let a=await n.deriveKey({algorithm:r.alg,baseKeyBytes:e,iterations:r.p2c,salt:s});o=await n.wrapKey({encryptionKey:a,unwrappedKey:i});break}default:throw new it("algorithmNotSupported",`Unsupported "alg" (Algorithm) Header Parameter value: ${r.alg}`)}return{cek:i,encryptedKey:o}}};h();h();function sS(t){return t!==null&&typeof t=="object"&&"encrypt"in t&&typeof t.encrypt=="function"&&"decrypt"in t&&typeof t.decrypt=="function"}h();function cq(...t){let e=new Set,r=t.filter(Boolean);for(let n of r)for(let i in n){if(e.has(i))return!0;e.add(i)}return!1}function dq(t,e){if(e!==void 0)try{if(typeof e!="string")throw new Error;return de.base64Url(e).toUint8Array()}catch{throw new it("invalidJwe",`Failed to decode the JWE Header parameter '${t}' from Base64 URL format to Uint8Array. Ensure the value is properly encoded in Base64 URL format without padding.`)}}var aS=class t{constructor(e){this.ciphertext="";Object.assign(this,e)}static async decrypt({jwe:e,key:r,keyManager:n=new Sr,crypto:i=new kd,options:o={}}){if(!sS(i))throw new it("operationNotSupported",'Crypto API does not support the "encrypt" operation.');if(!sS(n))throw new it("operationNotSupported",'Key Manager does not support the "decrypt" operation.');if(!e.protected&&!e.header&&!e.unprotected)throw new it("invalidJwe",'JWE is missing the required JOSE header parameters. Please provide at least one of the following: "protected", "header", or "unprotected"');if(typeof e.ciphertext!="string")throw new it("invalidJwe","JWE Ciphertext is missing or not a string.");let s;if(e.protected)try{s=de.base64Url(e.protected).toObject()}catch{throw new Error("JWE Protected Header is invalid")}if(cq(s,e.header,e.unprotected))throw new Error('Duplicate properties detected. Please ensure that each parameter is defined only once across the JWE "header", "protected", and "unprotected" objects.');let a={...s,...e.header,...e.unprotected};if(!oS(a))throw new Error('JWE Header is missing required "alg" (Algorithm) and/or "enc" (Encryption) Header Parameters');if(Array.isArray(o.allowedAlgValues)&&!o.allowedAlgValues.includes(a.alg))throw new Error(`"alg" (Algorithm) Header Parameter value not allowed: ${a.alg}`);if(Array.isArray(o.allowedEncValues)&&!o.allowedEncValues.includes(a.enc))throw new Error(`"enc" (Encryption Algorithm) Header Parameter value not allowed: ${a.enc}`);let d;try{let g=e.encrypted_key?de.base64Url(e.encrypted_key).toUint8Array():void 0;d=await iS.decrypt({key:r,encryptedKey:g,joseHeader:a,keyManager:n,crypto:i})}catch(g){if(g instanceof it&&(g.code==="invalidJwe"||g.code==="algorithmNotSupported"))throw g;d=typeof r=="string"?await n.generateKey({algorithm:a.enc}):await i.generateKey({algorithm:a.enc})}let u=dq("iv",e.iv),c=dq("tag",e.tag),l=c!==void 0?new Uint8Array([...de.base64Url(e.ciphertext).toUint8Array(),...c??[]]):de.base64Url(e.ciphertext).toUint8Array(),m=e.aad!==void 0?new Uint8Array([...de.string(e.protected??"").toUint8Array(),...de.string(".").toUint8Array(),...de.string(e.aad).toUint8Array()]):de.string(e.protected??"").toUint8Array();return{plaintext:typeof d=="string"?await n.decrypt({keyUri:d,data:l,iv:u,additionalData:m}):await i.decrypt({key:d,data:l,iv:u,additionalData:m}),protectedHeader:s,additionalAuthenticatedData:dq("aad",e.aad),sharedUnprotectedHeader:e.unprotected,unprotectedHeader:e.header}}static async encrypt({key:e,plaintext:r,additionalAuthenticatedData:n,protectedHeader:i,sharedUnprotectedHeader:o,unprotectedHeader:s,keyManager:a=new Sr,crypto:d=new kd}){if(!sS(d))throw new it("operationNotSupported",'Crypto API does not support the "encrypt" operation.');if(!sS(a))throw new it("operationNotSupported",'Key Manager does not support the "decrypt" operation.');if(!i&&!o&&!s)throw new it("invalidJwe",'JWE is missing the required JOSE header parameters. Please provide at least one of the following: "protectedHeader", "sharedUnprotectedHeader", or "unprotectedHeader"');if(!(r instanceof Uint8Array))throw new it("invalidJwe","Plaintext is missing or not a byte array.");if(cq(i,o,s))throw new Error('Duplicate properties detected. Please ensure that each parameter is defined only once across the JWE "protectedHeader", "sharedUnprotectedHeader", and "unprotectedHeader" objects.');let u={...i,...o,...s};if(!oS(u))throw new Error('JWE Header is missing required "alg" (Algorithm) and/or "enc" (Encryption) Header Parameters');let{cek:c,encryptedKey:l}=await iS.encrypt({key:e,joseHeader:u,keyManager:a,crypto:d}),m;switch(u.enc){case"A128GCM":case"A192GCM":case"A256GCM":m=ki.randomBytes(12);break;default:m=new Uint8Array(0)}let p=i?de.object(i).toBase64Url():"",g,b;n?(b=de.uint8Array(n).toBase64Url(),g=de.string(p+"."+b).toUint8Array()):g=de.string(p).toUint8Array();let S=typeof c=="string"?await a.encrypt({keyUri:c,data:r,iv:m,additionalData:g}):await d.encrypt({key:c,data:r,iv:m,additionalData:g}),A=S.slice(0,-16),I=S.slice(-16),P=new t({ciphertext:de.uint8Array(A).toBase64Url()});return l&&(P.encrypted_key=de.uint8Array(l).toBase64Url()),i&&(P.protected=p),o&&(P.unprotected=o),s&&(P.header=s),m&&(P.iv=de.uint8Array(m).toBase64Url()),b&&(P.aad=b),I&&(P.tag=de.uint8Array(I).toBase64Url()),P}};var $h=class{static async decrypt({jwe:e,key:r,keyManager:n=new Sr,crypto:i=new kd,options:o={}}){if(typeof e!="string")throw new it("invalidJwe","Invalid JWE format. JWE must be a string.");let{0:s,1:a,2:d,3:u,4:c,length:l}=e.split(".");if(l!==5)throw new it("invalidJwe","Invalid JWE format. JWE must have 5 parts.");let m=await aS.decrypt({jwe:{ciphertext:u,encrypted_key:a||void 0,iv:d||void 0,protected:s,tag:c||void 0},key:r,keyManager:n,crypto:i,options:o});if(!oS(m.protectedHeader))throw new it("invalidJwe","Decrypt operation failed due to missing or malformed JWE Protected Header");return{plaintext:m.plaintext,protectedHeader:m.protectedHeader}}static async encrypt({plaintext:e,protectedHeader:r,key:n,keyManager:i=new Sr,crypto:o=new kd,options:s={}}){let a=await aS.encrypt({plaintext:e,protectedHeader:r,key:n,keyManager:i,crypto:o,options:s});return[a.protected,a.encrypted_key,a.iv,a.ciphertext,a.tag].join(".")}};function m0e(t){return typeof t!="string"||t.trim().length===0}function nYe(t){return typeof t=="object"&&t!==null&&"dateCreated"in t&&typeof t.dateCreated=="string"&&"size"in t&&typeof t.size=="number"&&"data"in t&&typeof t.data=="string"}function iYe(t){return typeof t=="object"&&t!==null&&"initialized"in t&&typeof t.initialized=="boolean"&&"lastBackup"in t&&"lastRestore"in t}var cS=class{constructor({keyDerivationWorkFactor:e,store:r}={}){this.crypto=new kd;this._keyDerivationWorkFactor=e??21e4,this._store=r??new km}async backup(){if(this.isLocked()||await this.isInitialized()===!1)throw new Error("HdIdentityVault: Unable to proceed with the backup operation because the identity vault has not been initialized and unlocked. Please ensure the vault is properly initialized with a secure password before attempting to backup its contents.");let e={did:await this.getStoredDid(),contentEncryptionKey:await this.getStoredContentEncryptionKey(),status:await this.getStatus()},r=de.object(e).toBase64Url(),n={data:r,dateCreated:new Date().toISOString(),size:r.length};return await this.setStatus({lastBackup:n.dateCreated}),n}async changePassword({oldPassword:e,newPassword:r}){if(await this.isInitialized()===!1)throw new Error("HdIdentityVault: Unable to proceed with the change password operation because the identity vault has not been initialized. Please ensure the vault is properly initialized with a secure password before trying again.");await this.lock();let n=await this.getStoredContentEncryptionKey(),i,o;try{let a;({plaintext:a,protectedHeader:i}=await $h.decrypt({jwe:n,key:de.string(e).toUint8Array(),crypto:this.crypto,keyManager:new Md})),o=de.uint8Array(a).toObject()}catch{throw new Error("HdIdentityVault: Unable to change the vault password due to an incorrectly entered old password.")}let s=await $h.encrypt({key:de.string(r).toUint8Array(),protectedHeader:i,plaintext:de.object(o).toUint8Array(),crypto:this.crypto,keyManager:new Md});await this._store.set("contentEncryptionKey",s),this._contentEncryptionKey=o}async getDid(){if(this.isLocked())throw new Error("HdIdentityVault: Vault has not been initialized and unlocked.");let e=await this.getStoredDid(),{plaintext:r}=await $h.decrypt({jwe:e,key:this._contentEncryptionKey,crypto:this.crypto,keyManager:new Md}),n=de.uint8Array(r).toObject();if(!F1(n))throw new Error("HdIdentityVault: Unable to decode malformed DID in identity vault");return await io.import({portableDid:n})}async getStatus(){let e=await this._store.get("vaultStatus");if(!e)return{initialized:!1,lastBackup:null,lastRestore:null};let r=de.string(e).toObject();if(!iYe(r))throw new Error("HdIdentityVault: Invalid IdentityVaultStatus object in store");return r}async initialize({password:e,recoveryPhrase:r}){if(await this.isInitialized())throw new Error("HdIdentityVault: Vault has already been initialized.");if(m0e(e))throw new Error(`HdIdentityVault: The password is required and cannot be blank. Please provide a ' +
        'valid, non-empty password.`);if(r&&m0e(r))throw new Error(`HdIdentityVault: The password is required and cannot be blank. Please provide a ' +
        'valid, non-empty password.`);if(r??=l0e(iq,128),!h0e(r,iq))throw new Error("HdIdentityVault: The provided recovery phrase is invalid. Please ensure that the recovery phrase is a correctly formatted series of 12 words.");let n=await p0e(r),i=RI.fromMasterSeed(n),o=i.derive("m/44'/0'/0'/0'/0'"),s=await this.crypto.deriveKey({algorithm:"HKDF-512",baseKeyBytes:o.privateKey,salt:"",info:"vault_cek",derivedKeyAlgorithm:"A256GCM"}),a=await this.crypto.deriveKeyBytes({algorithm:"HKDF-512",baseKeyBytes:o.publicKey,salt:"",info:"vault_unlock_salt",length:256}),d={alg:"PBES2-HS512+A256KW",enc:"A256GCM",cty:"text/plain",p2c:this._keyDerivationWorkFactor,p2s:de.uint8Array(a).toBase64Url()},u=await $h.encrypt({key:de.string(e).toUint8Array(),protectedHeader:d,plaintext:de.object(s).toUint8Array(),crypto:this.crypto,keyManager:new Md});await this._store.set("contentEncryptionKey",u);let c=i.derive("m/44'/0'/1708523827'/0'/0'"),l=await this.crypto.bytesToPrivateKey({algorithm:"Ed25519",privateKeyBytes:c.privateKey}),m=i.derive("m/44'/0'/1708523827'/0'/1'"),p=await this.crypto.bytesToPrivateKey({algorithm:"Ed25519",privateKeyBytes:m.privateKey}),g=new EI;await g.addPredefinedKeys({privateKeys:[l,p]});let S=await(await Dd.create({keyManager:g,options:{verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]}]}})).export(),A={alg:"dir",enc:"A256GCM",cty:"json"},I=await $h.encrypt({key:s,plaintext:de.object(S).toUint8Array(),protectedHeader:A,crypto:this.crypto,keyManager:new Md});return await this._store.set("did",I),this._contentEncryptionKey=s,await this.setStatus({initialized:!0}),r}async isInitialized(){return this.getStatus().then(({initialized:e})=>e)}isLocked(){return!this._contentEncryptionKey}async lock(){if(await this.isInitialized()===!1)throw new Error("HdIdentityVault: Lock operation failed. Vault has not been initialized.");this._contentEncryptionKey&&(this._contentEncryptionKey.k=""),this._contentEncryptionKey=void 0}async restore({backup:e,password:r}){if(!nYe(e))throw new Error("HdIdentityVault: Restore operation failed due to invalid backup object.");let n,i,o;try{o=await this.getStoredDid(),i=await this.getStoredContentEncryptionKey(),n=await this.getStatus()}catch{throw new Error("HdIdentityVault: The restore operation cannot proceed because the existing vault contents are missing or inaccessible. If the problem persists consider re-initializing the vault and retrying the restore.")}try{let s=de.base64Url(e.data).toObject();await this._store.set("did",s.did),await this._store.set("contentEncryptionKey",s.contentEncryptionKey),await this.setStatus(s.status),await this.unlock({password:r})}catch{throw await this.setStatus(n),await this._store.set("contentEncryptionKey",i),await this._store.set("did",o),new Error("HdIdentityVault: Restore operation failed due to invalid backup data or an incorrect password. Please verify the password is correct for the provided backup and try again.")}await this.setStatus({lastRestore:new Date().toISOString()})}async unlock({password:e}){await this.lock();let r=await this.getStoredContentEncryptionKey();try{let{plaintext:n}=await $h.decrypt({jwe:r,key:de.string(e).toUint8Array(),crypto:this.crypto,keyManager:new Md}),i=de.uint8Array(n).toObject();this._contentEncryptionKey=i}catch{throw new Error("HdIdentityVault: Unable to unlock the vault due to an incorrect password.")}}async getStoredDid(){let e=await this._store.get("did");if(!e)throw new Error("HdIdentityVault: Unable to retrieve the DID record from the vault. Please check the vault status and if the problem persists consider re-initializing the vault and restoring the contents from a previous backup.");return e}async getStoredContentEncryptionKey(){let e=await this._store.get("contentEncryptionKey");if(!e)throw new Error("HdIdentityVault: Unable to retrieve the Content Encryption Key record from the vault. Please check the vault status and if the problem persists consider re-initializing the vault and restoring the contents from a previous backup.");return e}async setStatus({initialized:e,lastBackup:r,lastRestore:n}){let i=await this.getStatus();return i.initialized=e??i.initialized,i.lastBackup=r??i.lastBackup,i.lastRestore=n??i.lastRestore,await this._store.set("vaultStatus",JSON.stringify(i)),!0}};h();h();function oYe(t){return!(!t||typeof t!="object"||t===null)&&"name"in t}var CI=class extends ey{constructor(){super(...arguments);this.name="DwnIdentityStore";this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/identity-metadata"}}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async set(r){return await super.set(r)}async list(r){return await super.list(r)}async getAllRecords({agent:r,tenantDid:n}){this._index.clear();let{reply:i}=await r.dwn.processRequest({author:n,target:n,messageType:Gr.RecordsQuery,messageParams:{filter:{...this._recordProperties}}}),o=[];for(let s of i.entries??[]){if(!s.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);let a=de.base64Url(s.encodedData).toObject();if(oYe(a)){let d=`${n}${us}${a.uri}`;this._index.set(d,s.recordId),this._cache.set(s.recordId,a),o.push(a)}}return o}},V1=class extends ty{constructor(){super(...arguments);this.name="InMemoryIdentityStore"}async delete(r){return await super.delete(r)}async get(r){return await super.get(r)}async list(r){return await super.list(r)}async set(r){return await super.set(r)}};function wjt(t){return!(!t||typeof t!="object"||t===null)&&"did"in t&&"metadata"in t&&F1(t.did)}var dS=class{constructor({agent:e,store:r}={}){this._agent=e,this._store=r??new V1}get agent(){if(this._agent===void 0)throw new Error("AgentIdentityApi: Unable to determine agent execution context.");return this._agent}set agent(e){this._agent=e}async create({metadata:e,didMethod:r="dht",didOptions:n,store:i,tenant:o}){let s=await this.agent.did.create({method:r,options:n,store:i,tenant:o}),a=new eb({did:s,metadata:{...e,uri:s.uri,tenant:o??s.uri}});return(i??!0)&&await this._store.set({id:a.did.uri,data:a.metadata,agent:this.agent,tenant:a.metadata.tenant,preventDuplicates:!1,useCache:!0}),a}async export({didUri:e,tenant:r}){let n=await this.get({didUri:e,tenant:r});if(!n)throw new Error(`AgentIdentityApi: Failed to export due to Identity not found: ${e}`);return await n.export()}async get({didUri:e,tenant:r}){let n=await this._store.get({id:e,agent:this.agent,tenant:r,useCache:!0});if(!n)return;let i=await this.agent.did.get({didUri:e,tenant:n.tenant});if(!i)throw new Error(`AgentIdentityApi: Identity is present in the store but DID is missing: ${e}`);return new eb({did:i,metadata:n})}async import({portableIdentity:e}){let r=await this.agent.did.import({portableDid:e.portableDid,tenant:e.metadata.tenant});if(!r)throw new Error(`AgentIdentityApi: Failed to import Identity: ${e.metadata.uri}`);let n=new eb({did:r,metadata:e.metadata});return await this._store.set({id:n.did.uri,data:n.metadata,agent:this.agent,tenant:n.metadata.tenant,preventDuplicates:!0,useCache:!0}),n}async list({tenant:e}={}){let r=await this._store.list({agent:this.agent,tenant:e}),n=[];for(let i of r){let o=await this.get({didUri:i.uri,tenant:i.tenant});n.push(o)}return n}async manage({portableIdentity:e}){let r=await this.agent.did.get({didUri:e.metadata.uri,tenant:e.metadata.tenant});if(!r)throw new Error(`AgentIdentityApi: Failed to manage Identity: ${e.metadata.uri}`);let n=new eb({did:r,metadata:e.metadata});return await this._store.set({id:n.did.uri,data:n.metadata,agent:this.agent,preventDuplicates:!0,useCache:!0}),n}};h();h();var J1=(t,e,r)=>({jsonrpc:"2.0",id:t,method:e,params:r}),OI=(t,e,r,n)=>({jsonrpc:"2.0",id:t,method:`rpc.subscribe.${e}`,params:n,subscription:{id:r}});function Y1(t){try{return JSON.parse(t)}catch{return null}}h();h();var y0e=Ut(qg(),1);var $I=class{constructor({ttl:e="15m"}={}){this.cache=new bm.default({ttl:(0,y0e.default)(e)})}async get(e){return this.cache.get(e)}async set(e,r){this.cache.set(e,r)}async delete(e){this.cache.delete(e)}async clear(){this.cache.clear()}async close(){}};var NI=class{constructor(e){this.serverInfoCache=e??new $I}get transportProtocols(){return["http:","https:"]}async sendDwnRequest(e){let r=ki.randomUuid(),n=J1(r,"dwn.processMessage",{target:e.targetDid,message:e.message}),i={method:"POST",headers:{"dwn-request":JSON.stringify(n)}};e.data&&(i.headers["content-type"]="application/octet-stream",i.body=e.data);let o=await fetch(e.dwnUrl,i),s,a,{headers:d}=o;if(d.has("dwn-response")){let c=Y1(d.get("dwn-response"));if(c==null)throw new Error(`failed to parse json rpc response. dwn url: ${e.dwnUrl}`);a=o.body,s=c}else{let c=await o.text();s=JSON.parse(c)}if(s.error){let{code:c,message:l}=s.error;throw new Error(`(${c}) - ${l}`)}let{reply:u}=s.result;return a&&(u.record.data=a),u}async getServerInfo(e){let r=await this.serverInfoCache.get(e);if(r)return r;let n=new URL(e);n.pathname.endsWith("/")?n.pathname+="info":n.pathname+="/info";try{let i=await fetch(n.toString());if(i.ok){let o=await i.json(),s={registrationRequirements:o.registrationRequirements,maxFileSize:o.maxFileSize,webSocketSupport:o.webSocketSupport};return this.serverInfoCache.set(e,s),s}else throw new Error(`HTTP (${i.status}) - ${i.statusText}`)}catch(i){throw new Error(`Error encountered while processing response from ${n.toString()}: ${i.message}`)}}};h();h();h();var Z1=null;typeof WebSocket<"u"?Z1=WebSocket:typeof MozWebSocket<"u"?Z1=MozWebSocket:typeof globalThis<"u"?Z1=globalThis.WebSocket||globalThis.MozWebSocket:typeof window<"u"?Z1=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Z1=self.WebSocket||self.MozWebSocket);var g0e=Z1;var sYe=3e3,aYe=3e4,jI=class t{constructor(e,r){this.socket=e;this.responseTimeout=r;this.messageHandlers=new Map}static async connect(e,r={}){let{connectTimeout:n=sYe,responseTimeout:i=aYe,onclose:o,onerror:s}=r,a=new g0e(e);return o?a.onclose=o:a.onclose=()=>{console.info(`JSON RPC Socket close ${e}`)},s?a.onerror=s:a.onerror=d=>{console.error(`JSON RPC Socket error ${e}`,d)},new Promise((d,u)=>{a.addEventListener("open",()=>{let c=new t(a,i);a.addEventListener("message",l=>{let m=Y1(l.data),p=c.messageHandlers.get(m.id);p&&p(l)}),d(c)}),a.addEventListener("error",c=>{u(c)}),setTimeout(()=>u,n)})}close(){this.socket.close()}async request(e){return new Promise((r,n)=>{e.id??=ki.randomUuid();let i=o=>{let s=Y1(o.data);if(s.id===e.id)return this.messageHandlers.delete(e.id),r(s)};this.messageHandlers.set(e.id,i),this.send(e),setTimeout(()=>{this.messageHandlers.delete(e.id),n(new Error("request timed out"))},this.responseTimeout)})}async subscribe(e,r){if(!e.method.startsWith("rpc.subscribe."))throw new Error("subscribe rpc requests must include the `rpc.subscribe` prefix");if(!e.subscription)throw new Error("subscribe rpc requests must include subscribe options");let n=e.subscription.id,i=a=>{let d=Y1(a.data.toString());d.id===n&&(d.error!==void 0&&(this.messageHandlers.delete(n),this.closeSubscription(n)),r(d))};this.messageHandlers.set(n,i);let o=await this.request(e);return o.error?(this.messageHandlers.delete(n),{response:o}):{response:o,close:async()=>{this.messageHandlers.delete(n),await this.closeSubscription(n)}}}closeSubscription(e){let r=ki.randomUuid(),n=OI(r,"close",e,{});return this.request(n)}send(e){this.socket.send(JSON.stringify(e))}};var ry=class ry{get transportProtocols(){return["ws:","wss:"]}async sendDwnRequest(e,r){let n=new URL(e.dwnUrl);if(n.protocol!=="ws:"&&n.protocol!=="wss:")throw new Error(`Invalid websocket protocol ${n.protocol}`);if(!ry.connections.has(n.host))try{let u=await jI.connect(n.toString(),r),c=new Map;ry.connections.set(n.host,{socket:u,subscriptions:c})}catch(u){throw new Error(`Error connecting to ${n.host}: ${u.message}`)}let o=ry.connections.get(n.host),{targetDid:s,message:a,subscriptionHandler:d}=e;return d?ry.subscriptionRequest(o,s,a,d):ry.processMessage(o,s,a)}static async processMessage(e,r,n){let i=ki.randomUuid(),o=J1(i,"dwn.processMessage",{target:r,message:n}),{socket:s}=e,a=await s.request(o),{error:d,result:u}=a;if(d!==void 0)throw new Error(`error sending DWN request: ${d.message}`);return u.reply}static async subscriptionRequest(e,r,n,i){let o=ki.randomUuid(),s=ki.randomUuid(),a=OI(o,"dwn.processMessage",s,{target:r,message:n}),{socket:d,subscriptions:u}=e,{response:c,close:l}=await d.subscribe(a,b=>{let{result:S,error:A}=b;if(A){let P=u.get(s);P&&P.close(),u.delete(s);return}let{event:I}=S;i(I)}),{error:m,result:p}=c;if(m)throw new Error(`could not subscribe via jsonrpc socket: ${m.message}`);let{reply:g}=p;return g.subscription&&l&&(u.set(s,{...g.subscription,close:l}),g.subscription.close=l),g}};ry.connections=new Map;var UI=ry;var cYe=(r=>(r.Create="did.create",r.Resolve="did.resolve",r))(cYe||{}),KI=class{constructor(e=[]){this.transportClients=new Map,e=[new uq,new lq,...e];for(let r of e)for(let n of r.transportProtocols)this.transportClients.set(n,r)}get transportProtocols(){return Array.from(this.transportClients.keys())}async sendDidRequest(e){let r=new URL(e.url),n=this.transportClients.get(r.protocol);if(!n){let i=new Error(`no ${r.protocol} transport client available`);throw i.name="NO_TRANSPORT_CLIENT",i}return n.sendDidRequest(e)}sendDwnRequest(e){let r=new URL(e.dwnUrl),n=this.transportClients.get(r.protocol);if(!n){let i=new Error(`no ${r.protocol} transport client available`);throw i.name="NO_TRANSPORT_CLIENT",i}return n.sendDwnRequest(e)}async getServerInfo(e){let r=new URL(e),n=this.transportClients.get(r.protocol);if(!n){let i=new Error(`no ${r.protocol} transport client available`);throw i.name="NO_TRANSPORT_CLIENT",i}return n.getServerInfo(e)}},uq=class extends NI{async sendDidRequest(e){let r=ki.randomUuid(),n=J1(r,e.method,{data:e.data}),i=new Request(e.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o;try{let s=await fetch(i);if(s.ok){if(o=await s.json(),o.error){let{code:a,message:d}=o.error;throw new Error(`JSON RPC (${a}) - ${d}`)}}else throw new Error(`HTTP (${s.status}) - ${s.statusText}`)}catch(s){throw new Error(`Error encountered while processing response from ${e.url}: ${s.message}`)}return o.result}},lq=class extends UI{async sendDidRequest(e){throw new Error(`not implemented for transports [${this.transportProtocols.join(", ")}]`)}async getServerInfo(e){throw new Error(`not implemented for transports [${this.transportProtocols.join(", ")}]`)}};h();var qI=class{constructor({agent:e,syncEngine:r}){this._syncEngine=r,this._agent=e}get agent(){if(this._agent===void 0)throw new Error("AgentSyncApi: Unable to determine agent execution context.");return this._agent}set agent(e){this._agent=e,this._syncEngine.agent=e}async registerIdentity(e){await this._syncEngine.registerIdentity(e)}startSync(e){return this._syncEngine.startSync(e)}stopSync(){this._syncEngine.stopSync()}};h();var v0e=Ut(qg(),1),w0e=Ut(ZE(),1);var b0e=t=>t>=200&&t<=299,dYe=t=>t>=400&&t<=499,LI=class{constructor({agent:e,dataPath:r,db:n}){this._agent=e,this._db=n||new w0e.Level(r??"DATA/AGENT/SYNC_STORE"),this._ulidFactory=sI()}get agent(){if(this._agent===void 0)throw new Error("SyncEngineLevel: Unable to determine agent execution context.");return this._agent}set agent(e){this._agent=e}async clear(){await this._db.clear()}async close(){await this._db.close()}async pull(){let e=await this.getSyncPeerState({syncDirection:"pull"});await this.enqueueOperations({syncDirection:"pull",syncPeerState:e});let r=this.getPullQueue(),n=await r.iterator().all(),i=[],o=new Set;for(let s of n){let[a]=s,[d,u,c,l]=a.split("~");if(o.has(u))continue;if(await this.messageExists(d,l)){i.push({type:"del",key:a});continue}let p=await this.agent.dwn.createMessage({author:d,messageType:Gr.MessagesGet,messageParams:{messageCids:[l]}}),g;try{g=await this.agent.rpc.sendDwnRequest({dwnUrl:u,targetDid:d,message:p})}catch{o.add(u);continue}for(let b of g.entries??[]){if(b.error||!b.message){await this.addMessage(d,l),i.push({type:"del",key:a});continue}let S;if(W1(b)){let{encodedData:I}=b,P=b.message;if(I){let $=de.base64Url(I).toUint8Array();S=mu.fromBytes($)}else{let $=await this.agent.dwn.createMessage({author:d,messageType:Gr.RecordsRead,messageParams:{filter:{recordId:P.recordId}}}),N=await this.agent.rpc.sendDwnRequest({dwnUrl:u,targetDid:d,message:$.message}),{record:L,status:F}=N;if(b0e(F.code)&&L)S=_h.fromWebReadable({readableStream:L.data});else if(F.code>=400){let U=await this.agent.dwn.processMessage({targetDid:d,message:P});if(U.status.code===202||U.status.code===409){await this.addMessage(d,l),i.push({type:"del",key:a});continue}else throw new Error(`SyncManager: Failed to sync tombstone for message '${l}'`)}}}let A=await this.agent.dwn.processMessage({targetDid:d,message:b.message,dataStream:S});(A.status.code===202||A.status.code===409)&&(await this.addMessage(d,l),i.push({type:"del",key:a}))}}await r.batch(i)}async push(){let e=await this.getSyncPeerState({syncDirection:"push"});await this.enqueueOperations({syncDirection:"push",syncPeerState:e});let r=this.getPushQueue(),n=await r.iterator().all(),i=[],o=new Set;for(let s of n){let[a]=s,[d,u,c,l]=a.split("~");if(o.has(u))continue;let m=await this.getDwnMessage({author:d,messageCid:l});if(!m){i.push({type:"del",key:a}),await this.addMessage(d,l);continue}try{let p=await this.agent.rpc.sendDwnRequest({dwnUrl:u,targetDid:d,data:m.data,message:m.message});(p.status.code===202||p.status.code===409)&&(await this.addMessage(d,l),i.push({type:"del",key:a}))}catch{o.add(u)}}await r.batch(i)}async registerIdentity({did:e}){await this._db.sublevel("registeredIdentities").put(e,"")}startSync({interval:e}){let r=(0,v0e.default)(e);return new Promise((n,i)=>{let o=async()=>{this._syncIntervalId&&clearInterval(this._syncIntervalId);try{await this.push(),await this.pull()}catch(s){this.stopSync(),i(s)}this._syncIntervalId=setInterval(o,r)};this._syncIntervalId=setInterval(o,r)})}stopSync(){this._syncIntervalId&&(clearInterval(this._syncIntervalId),this._syncIntervalId=void 0)}async enqueueOperations({syncDirection:e,syncPeerState:r}){for(let n of r){let i=await this.getDwnEventLog({did:n.did,dwnUrl:n.dwnUrl,cursor:n.cursor,syncDirection:e}),o=[];for(let s of i){let a=this._ulidFactory(),d=[n.did,n.dwnUrl,a,s].join("~");o.push({type:"put",key:d,value:""})}o.length>0&&await(e==="pull"?this.getPullQueue():this.getPushQueue()).batch(o)}}async getDwnEventLog({did:e,dwnUrl:r,syncDirection:n,cursor:i}){let o={};if(n==="pull"){let a=await this.agent.dwn.createMessage({author:e,messageType:Gr.EventsGet,messageParams:{cursor:i}});try{o=await this.agent.rpc.sendDwnRequest({dwnUrl:r,targetDid:e,message:a})}catch{}}else n==="push"&&(o=(await this.agent.dwn.processRequest({author:e,target:e,messageType:Gr.EventsGet,messageParams:{cursor:i}})).reply);let s=o.entries??[];return o.cursor&&this.setCursor(e,r,n,o.cursor),s}async getDwnMessage({author:e,messageCid:r}){let{reply:n}=await this.agent.dwn.processRequest({author:e,target:e,messageType:Gr.MessagesGet,messageParams:{messageCids:[r]}});if(!(n.entries&&n.entries.length===1))return;let[i]=n.entries,o=i.message;if(!o)return;let s={message:o};if(W1(i))if(i.encodedData){let a=de.base64Url(i.encodedData).toUint8Array();s.data=new Blob([a])}else{let d=(await this.agent.dwn.processRequest({author:e,target:e,messageType:Gr.RecordsRead,messageParams:{filter:{recordId:i.message.recordId}}})).reply;if(b0e(d.status.code)&&d.record)s.data=await _h.consumeToBlob({readable:d.record.data});else if(!dYe(d.status.code)){let{status:{code:u,detail:c}}=d;throw new Error(`SyncEngineLevel: (${u}) Failed to read data associated with record ${i.message.recordId}. ${c}}`)}}return s}async getSyncPeerState({syncDirection:e}){let r=await this._db.sublevel("registeredIdentities").keys().all(),n=[];for(let i of r){let o=await PI(i,this.agent.did);if(o.length!==0)for(let s of o){let a=await this.getCursor(i,s,e);n.push({did:i,dwnUrl:s,cursor:a})}}return n}async getCursor(e,r,n){let i=`${e}~${r}~${n}`,o=this.getCursorStore();try{let s=await o.get(i);if(s)return JSON.parse(s)}catch(s){if(s.notFound)return}}async setCursor(e,r,n,i){let o=`${e}~${r}~${n}`;await this.getCursorStore().put(o,JSON.stringify(i))}async messageExists(e,r){let n=this.getMessageStore(e);try{return await n.get(r),!0}catch(i){if(i.notFound)return!1;throw i}}async addMessage(e,r){return await this.getMessageStore(e).put(r,"")}getMessageStore(e){return this._db.sublevel("history").sublevel(e).sublevel("messages")}getCursorStore(){return this._db.sublevel("cursors")}getPushQueue(){return this._db.sublevel("pushQueue")}getPullQueue(){return this._db.sublevel("pullQueue")}};h();var x0e=Ut(ZE(),1);var _0e=class t{constructor(e){this.agent=e.agent,this.agentStores=e.agentStores,this.didResolverCache=e.didResolverCache,this.dwn=e.dwn,this.dwnDataStore=e.dwnDataStore,this.dwnEventLog=e.dwnEventLog,this.dwnMessageStore=e.dwnMessageStore,this.syncStore=e.syncStore,this.vaultStore=e.vaultStore}async clearStorage(){if(this.agent.agentDid=void 0,await this.didResolverCache.clear(),await this.dwnDataStore.clear(),await this.dwnEventLog.clear(),await this.dwnMessageStore.clear(),await this.syncStore.clear(),await this.vaultStore.clear(),this.agentStores==="memory"){let{didApi:e,identityApi:r,keyManager:n}=t.useMemoryStores({agent:this.agent});this.agent.did=e,this.agent.identity=r,this.agent.keyManager=n}}async closeStorage(){await this.didResolverCache.close(),await this.dwnDataStore.close(),await this.dwnEventLog.close(),await this.dwnMessageStore.close(),await this.syncStore.close(),await this.vaultStore.close()}async createAgentDid(){this.agent.agentDid=await Bh.create({options:{algorithm:"Ed25519"}})}async createIdentity({name:e,testDwnUrls:r}){return await this.agent.identity.create({didMethod:"dht",didOptions:{services:[{id:"dwn",type:"DecentralizedWebNode",serviceEndpoint:r,enc:"#enc",sig:"#sig"}],verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]},{algorithm:"secp256k1",id:"enc",purposes:["keyAgreement"]}]},metadata:{name:e}})}async preloadResolverCache({didUri:e,resolutionResult:r}){await this.didResolverCache.set(e,r)}static async setup({agentClass:e,agentStores:r,testDataLocation:n}){r??="memory",n??="__TESTDATA__";let i=F=>`${n}/${F}`,o=new kd,s=new KI,{agentVault:a,didApi:d,identityApi:u,keyManager:c,didResolverCache:l,vaultStore:m}=r==="memory"?t.useMemoryStores():t.useDiskStores({testDataLocation:n}),p=new Hg({blockstoreLocation:i("DWN_DATASTORE")}),g=new Zg({location:i("DWN_EVENTLOG")}),b=new Y6,S=new Qg({blockstoreLocation:i("DWN_MESSAGESTORE"),indexLocation:i("DWN_MESSAGEINDEX")}),A=await rS.createDwn({dataPath:n,dataStore:p,didResolver:d,eventLog:g,eventStream:b,messageStore:S}),I=new rS({dwn:A}),P=new x0e.Level(i("SYNC_STORE")),$=new LI({db:P}),N=new qI({syncEngine:$}),L=new e({agentVault:a,cryptoApi:o,didApi:d,dwnApi:I,identityApi:u,keyManager:c,rpcClient:s,syncApi:N});return new t({agent:L,agentStores:r,didResolverCache:l,dwn:A,dwnDataStore:p,dwnEventLog:g,dwnMessageStore:S,syncStore:P,vaultStore:m})}static useDiskStores({agent:e,testDataLocation:r}){let n=c=>`${r}/${c}`,i=new EP({location:n("VAULT_STORE")}),o=new cS({keyDerivationWorkFactor:1,store:i}),s=new q1({location:n("DID_RESOLVERCACHE")}),a=new tS({agent:e,didMethods:[Dd,Bh],resolverCache:s,store:new SI}),d=new dS({agent:e,store:new CI}),u=new Md({agent:e,keyStore:new BI});return{agentVault:o,didApi:a,didResolverCache:s,identityApi:d,keyManager:u,vaultStore:i}}static useMemoryStores({agent:e}={}){let r=new km,n=new cS({keyDerivationWorkFactor:1,store:r}),i=new G1,o=new tS({agent:e,didMethods:[Dd,Bh],resolverCache:i,store:new z1}),s=new Md({agent:e,keyStore:new H1}),a=new dS({agent:e,store:new V1});return{agentVault:n,didApi:o,didResolverCache:i,identityApi:a,keyManager:s,vaultStore:r}}};export{kd as AgentCryptoApi,tS as AgentDidApi,rS as AgentDwnApi,dS as AgentIdentityApi,qI as AgentSyncApi,eb as BearerIdentity,RJe as DidInterface,cYe as DidRpcMethod,Ol as DwnConstant,ey as DwnDataStore,$i as DwnDateSort,SI as DwnDidStore,I0 as DwnEncryptionAlgorithm,CI as DwnIdentityStore,Gr as DwnInterface,Ji as DwnKeyDerivationScheme,BI as DwnKeyStore,cS as HdIdentityVault,uq as HttpWeb5RpcClient,ty as InMemoryDataStore,z1 as InMemoryDidStore,V1 as InMemoryIdentityStore,H1 as InMemoryKeyStore,Md as LocalKeyManager,_0e as PlatformAgentTestHarness,LI as SyncEngineLevel,KI as Web5RpcClient,lq as WebSocketWeb5RpcClient,XK as blobToIsomorphicNodeReadable,Z6 as dwnMessageConstructors,PI as getDwnServiceEndpointUrls,_$t as getPaginationCursor,w$t as getRecordAuthor,MJe as getRecordMessageCid,Zye as isDidRequest,R$t as isDwnMessage,BJe as isDwnRequest,oYe as isIdentityMetadata,wjt as isPortableIdentity,W1 as isRecordsWrite,TI as webReadableToIsomorphicNodeReadable};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/ciphers/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/ed25519/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

ed25519-keygen/hdkey.js:
  (*! micro-ed25519-hdkey - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/bip39/esm/index.js:
  (*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.mjs.map
